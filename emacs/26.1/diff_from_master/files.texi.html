<!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><a name="line1"><font color="#000000">0001:</font></a> <i><font color="#9A1900">@c This is part of the Emacs manual.</font></i>
<a name="line2"><font color="#000000">0002:</font></a> <i><font color="#9A1900">@c Copyright (C) 1985-1987, 1993-1995, 1997, 1999-2018 Free Software</font></i>
<a name="line3"><font color="#000000">0003:</font></a> <i><font color="#9A1900">@c Foundation, Inc.</font></i>
<a name="line4"><font color="#000000">0004:</font></a> <i><font color="#9A1900">@c See file emacs.texi for copying conditions.</font></i>
<a name="line5"><font color="#000000">0005:</font></a> <b><font color="#0000FF">@node</font></b> Files
<a name="line6"><font color="#000000">0006:</font></a> <i><font color="#9A1900">@chapter File Handling</font></i>
<a name="line7"><font color="#000000">0007:</font></a> <i><font color="#9A1900">@cindex files</font></i>
<a name="line8"><font color="#000000">0008:</font></a> 
<a name="line9"><font color="#000000">0009:</font></a>   The operating system stores data permanently in named <b><font color="#0000FF">@dfn</font></b><font color="#009900">{files}</font>, so
<a name="line10"><font color="#000000">0010:</font></a> most of the text you edit with Emacs comes from a file and is ultimately
<a name="line11"><font color="#000000">0011:</font></a> stored in a file.
<a name="line12"><font color="#000000">0012:</font></a> 
<a name="line13"><font color="#000000">0013:</font></a>   To edit a file, you must tell Emacs to read the file and prepare a
<a name="line14"><font color="#000000">0014:</font></a> buffer containing a copy of the file's text.  This is called
<a name="line15"><font color="#000000">0015:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{visiting}</font> the file.  Editing commands apply directly to text in the
<a name="line16"><font color="#000000">0016:</font></a> buffer; that is, to the copy inside Emacs.  Your changes appear in the
<a name="line17"><font color="#000000">0017:</font></a> file itself only when you <b><font color="#0000FF">@dfn</font></b><font color="#009900">{save}</font> the buffer back into the file.
<a name="line18"><font color="#000000">0018:</font></a> 
<a name="line19"><font color="#000000">0019:</font></a>   In addition to visiting and saving files, Emacs can delete, copy,
<a name="line20"><font color="#000000">0020:</font></a> rename, and append to files, keep multiple versions of them, and operate
<a name="line21"><font color="#000000">0021:</font></a> on file directories.
<a name="line22"><font color="#000000">0022:</font></a> 
<a name="line23"><font color="#000000">0023:</font></a> <b><font color="#000080">@menu</font></b>
<a name="line24"><font color="#000000">0024:</font></a> <font color="#FF0000">* File Names::</font>          How to type and edit file-name arguments.
<a name="line25"><font color="#000000">0025:</font></a> <font color="#FF0000">* Visiting::</font>            Visiting a file prepares Emacs to edit the file.
<a name="line26"><font color="#000000">0026:</font></a> <font color="#FF0000">* Saving::</font>              Saving makes your changes permanent.
<a name="line27"><font color="#000000">0027:</font></a> <font color="#FF0000">* Reverting::</font>           Reverting cancels all the changes not saved.
<a name="line28"><font color="#000000">0028:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line29"><font color="#000000">0029:</font></a> <font color="#FF0000">* Autorevert::</font>          Auto Reverting non-file buffers.
<a name="line30"><font color="#000000">0030:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line31"><font color="#000000">0031:</font></a> <font color="#FF0000">* Auto Save::</font>           Auto Save periodically protects against loss of data.
<a name="line32"><font color="#000000">0032:</font></a> <font color="#FF0000">* File Aliases::</font>        Handling multiple names for one file.
<a name="line33"><font color="#000000">0033:</font></a> <font color="#FF0000">* Directories::</font>         Creating, deleting, and listing file directories.
<a name="line34"><font color="#000000">0034:</font></a> <font color="#FF0000">* Comparing Files::</font>     Finding where two files differ.
<a name="line35"><font color="#000000">0035:</font></a> <font color="#FF0000">* Diff Mode::</font>           Mode for editing file differences.
<a name="line36"><font color="#000000">0036:</font></a> <font color="#FF0000">* Copying and Naming::</font>  Copying, naming and renaming files.
<a name="line37"><font color="#000000">0037:</font></a> <font color="#FF0000">* Misc File Ops::</font>       Other things you can do on files.
<a name="line38"><font color="#000000">0038:</font></a> <font color="#FF0000">* Compressed Files::</font>    Accessing compressed files.
<a name="line39"><font color="#000000">0039:</font></a> <font color="#FF0000">* File Archives::</font>       Operating on tar, zip, jar etc. archive files.
<a name="line40"><font color="#000000">0040:</font></a> <font color="#FF0000">* Remote Files::</font>        Accessing files on other machines.
<a name="line41"><font color="#000000">0041:</font></a> <font color="#FF0000">* Quoted File Names::</font>   Quoting special characters in file names.
<a name="line42"><font color="#000000">0042:</font></a> <font color="#FF0000">* File Name Cache::</font>     Completion against a list of files you often use.
<a name="line43"><font color="#000000">0043:</font></a> <font color="#FF0000">* File Conveniences::</font>   Convenience Features for Finding Files.
<a name="line44"><font color="#000000">0044:</font></a> <font color="#FF0000">* Filesets::</font>            Handling sets of files.
<a name="line45"><font color="#000000">0045:</font></a> <b><font color="#000080">@end menu</font></b>
<a name="line46"><font color="#000000">0046:</font></a> 
<a name="line47"><font color="#000000">0047:</font></a> <b><font color="#0000FF">@node</font></b> File Names
<a name="line48"><font color="#000000">0048:</font></a> <b><font color="#0000FF">@section</font></b> File Names
<a name="line49"><font color="#000000">0049:</font></a> <i><font color="#9A1900">@cindex file names</font></i>
<a name="line50"><font color="#000000">0050:</font></a> 
<a name="line51"><font color="#000000">0051:</font></a> <i><font color="#9A1900">@cindex default file name</font></i>
<a name="line52"><font color="#000000">0052:</font></a>   Many Emacs commands that operate on a file require you to specify
<a name="line53"><font color="#000000">0053:</font></a> the file name, using the minibuffer (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Minibuffer File</font><font color="#FF0000">}</font>).
<a name="line54"><font color="#000000">0054:</font></a> 
<a name="line55"><font color="#000000">0055:</font></a>   While in the minibuffer, you can use the usual completion and
<a name="line56"><font color="#000000">0056:</font></a> history commands (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Minibuffer</font><font color="#FF0000">}</font>).  Note that file name completion
<a name="line57"><font color="#000000">0057:</font></a> ignores file names whose extensions appear in the variable
<a name="line58"><font color="#000000">0058:</font></a> <i><font color="#9A1900">@code{completion-ignored-extensions} (@pxref{Completion Options}).</font></i>
<a name="line59"><font color="#000000">0059:</font></a> Note also that most commands use permissive completion with
<a name="line60"><font color="#000000">0060:</font></a> confirmation for reading file names: you are allowed to submit a
<a name="line61"><font color="#000000">0061:</font></a> nonexistent file name, but if you type <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> immediately after
<a name="line62"><font color="#000000">0062:</font></a> completing up to a nonexistent file name, Emacs prints
<a name="line63"><font color="#000000">0063:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{[Confirm]}</font> and you must type a second <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> to confirm.
<a name="line64"><font color="#000000">0064:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Completion Exit</font><font color="#FF0000">}</font>, for details.
<a name="line65"><font color="#000000">0065:</font></a> 
<a name="line66"><font color="#000000">0066:</font></a> Minibuffer history commands offer some special features for reading
<a name="line67"><font color="#000000">0067:</font></a> file names, see <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Minibuffer History</font><font color="#FF0000">}</font>.
<a name="line68"><font color="#000000">0068:</font></a> 
<a name="line69"><font color="#000000">0069:</font></a> <i><font color="#9A1900">@cindex default directory, of a buffer</font></i>
<a name="line70"><font color="#000000">0070:</font></a> <b><font color="#0000FF">@vindex</font></b> default-directory
<a name="line71"><font color="#000000">0071:</font></a>   Each buffer has a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{default directory}</font>, stored in the
<a name="line72"><font color="#000000">0072:</font></a> buffer-local variable <b><font color="#0000FF">@code</font></b><font color="#009900">{default-directory}</font>.  Whenever Emacs reads
<a name="line73"><font color="#000000">0073:</font></a> a file name using the minibuffer, it usually inserts the default
<a name="line74"><font color="#000000">0074:</font></a> directory into the minibuffer as the initial contents.  You can
<a name="line75"><font color="#000000">0075:</font></a> inhibit this insertion by changing the variable
<a name="line76"><font color="#000000">0076:</font></a> <i><font color="#9A1900">@code{insert-default-directory} to @code{nil} (@pxref{Minibuffer</font></i>
<a name="line77"><font color="#000000">0077:</font></a> File}).  Regardless, Emacs always assumes that any relative file name
<a name="line78"><font color="#000000">0078:</font></a> is relative to the default directory, e.g., entering a file name
<a name="line79"><font color="#000000">0079:</font></a> without a directory specifies a file in the default directory.
<a name="line80"><font color="#000000">0080:</font></a> 
<a name="line81"><font color="#000000">0081:</font></a> <b><font color="#0000FF">@findex</font></b> cd
<a name="line82"><font color="#000000">0082:</font></a> <b><font color="#0000FF">@findex</font></b> pwd
<a name="line83"><font color="#000000">0083:</font></a>   When you visit a file, Emacs sets <b><font color="#0000FF">@code</font></b><font color="#009900">{default-directory}</font> in the
<a name="line84"><font color="#000000">0084:</font></a> visiting buffer to the directory of its file.  When you create a new
<a name="line85"><font color="#000000">0085:</font></a> buffer that is not visiting a file, via a command like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x b}</font>,
<a name="line86"><font color="#000000">0086:</font></a> its default directory is usually copied from the buffer that was
<a name="line87"><font color="#000000">0087:</font></a> current at the time (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Select Buffer</font><font color="#FF0000">}</font>).  You can use the command
<a name="line88"><font color="#000000">0088:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x pwd}</font> to see the value of <b><font color="#0000FF">@code</font></b><font color="#009900">{default-directory}</font> in the
<a name="line89"><font color="#000000">0089:</font></a> current buffer.  The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x cd}</font> prompts for a directory's
<a name="line90"><font color="#000000">0090:</font></a> name, and sets the buffer's <b><font color="#0000FF">@code</font></b><font color="#009900">{default-directory}</font> to that directory
<a name="line91"><font color="#000000">0091:</font></a> (doing this does not change the buffer's file name, if any).
<a name="line92"><font color="#000000">0092:</font></a> 
<a name="line93"><font color="#000000">0093:</font></a>   As an example, when you visit the file <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/rms/gnu/gnu.tasks}</font>,
<a name="line94"><font color="#000000">0094:</font></a> the default directory is set to <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/rms/gnu/}</font>.  If you invoke a
<a name="line95"><font color="#000000">0095:</font></a> command that reads a file name, entering just <b><font color="#0000FF">@samp</font></b><font color="#009900">{foo}</font> in the
<a name="line96"><font color="#000000">0096:</font></a> minibuffer, with a directory omitted, specifies the file
<a name="line97"><font color="#000000">0097:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/rms/gnu/foo}</font>; entering <b><font color="#0000FF">@samp</font></b><font color="#009900">{../.login}</font> specifies
<a name="line98"><font color="#000000">0098:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/rms/.login}</font>; and entering <b><font color="#0000FF">@samp</font></b><font color="#009900">{new/foo}</font> specifies
<a name="line99"><font color="#000000">0099:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/rms/gnu/new/foo}</font>.
<a name="line100"><font color="#000000">0100:</font></a> 
<a name="line101"><font color="#000000">0101:</font></a>   When typing a file name into the minibuffer, you can make use of a
<a name="line102"><font color="#000000">0102:</font></a> couple of shortcuts: a double slash ignores everything before the
<a name="line103"><font color="#000000">0103:</font></a> second slash in the pair, and <b><font color="#0000FF">@samp</font></b><font color="#009900">{~/}</font> is your home directory.
<a name="line104"><font color="#000000">0104:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Minibuffer File</font><font color="#FF0000">}</font>.
<a name="line105"><font color="#000000">0105:</font></a> 
<a name="line106"><font color="#000000">0106:</font></a> <i><font color="#9A1900">@cindex environment variables in file names</font></i>
<a name="line107"><font color="#000000">0107:</font></a> <i><font color="#9A1900">@cindex expansion of environment variables</font></i>
<a name="line108"><font color="#000000">0108:</font></a> <i><font color="#9A1900">@cindex @code{$} in file names</font></i>
<a name="line109"><font color="#000000">0109:</font></a>   <b><font color="#0000FF">@anchor</font></b><font color="#009900">{File Names with $}</font>The character <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font> is used to
<a name="line110"><font color="#000000">0110:</font></a> substitute an environment variable into a file name.  The name of the
<a name="line111"><font color="#000000">0111:</font></a> environment variable consists of all the alphanumeric characters after
<a name="line112"><font color="#000000">0112:</font></a> the <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font>; alternatively, it can be enclosed in braces after the
<a name="line113"><font color="#000000">0113:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font>.  For example, if you have used the shell command
<a name="line114"><font color="#000000">0114:</font></a> <i><font color="#9A1900">@command{export FOO=rms/hacks} to set up an environment variable named</font></i>
<a name="line115"><font color="#000000">0115:</font></a> <b><font color="#0000FF">@env</font></b><font color="#009900">{FOO}</font>, then both <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/$FOO/test.c}</font> and
<a name="line116"><font color="#000000">0116:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/$@{FOO@}/test.c}</font> are abbreviations for
<a name="line117"><font color="#000000">0117:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/u/rms/hacks/test.c}</font>.  If the environment variable is not
<a name="line118"><font color="#000000">0118:</font></a> defined, no substitution occurs, so that the character <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font> stands
<a name="line119"><font color="#000000">0119:</font></a> for itself.  Note that environment variables set outside Emacs affect
<a name="line120"><font color="#000000">0120:</font></a> Emacs only if they are applied before Emacs is started.
<a name="line121"><font color="#000000">0121:</font></a> 
<a name="line122"><font color="#000000">0122:</font></a>   To access a file with <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font> in its name, if the <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font> causes
<a name="line123"><font color="#000000">0123:</font></a> expansion, type <b><font color="#0000FF">@samp</font></b><font color="#009900">{$$}</font>.  This pair is converted to a single
<a name="line124"><font color="#000000">0124:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font> at the same time that variable substitution is performed for
<a name="line125"><font color="#000000">0125:</font></a> a single <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font>.  Alternatively, quote the whole file name with
<a name="line126"><font color="#000000">0126:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Quoted File Names</font><font color="#FF0000">}</font>).  File names which begin with a
<a name="line127"><font color="#000000">0127:</font></a> literal <b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> should also be quoted with <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font>.
<a name="line128"><font color="#000000">0128:</font></a> 
<a name="line129"><font color="#000000">0129:</font></a>   You can include non-<b><font color="#0000FF">@acronym</font></b><font color="#009900">{ASCII}</font> characters in file names.
<a name="line130"><font color="#000000">0130:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">File Name Coding</font><font color="#FF0000">}</font>.
<a name="line131"><font color="#000000">0131:</font></a> 
<a name="line132"><font color="#000000">0132:</font></a> <b><font color="#0000FF">@node</font></b> Visiting
<a name="line133"><font color="#000000">0133:</font></a> <b><font color="#0000FF">@section</font></b> Visiting Files
<a name="line134"><font color="#000000">0134:</font></a> <i><font color="#9A1900">@cindex visiting files</font></i>
<a name="line135"><font color="#000000">0135:</font></a> <i><font color="#9A1900">@cindex open file</font></i>
<a name="line136"><font color="#000000">0136:</font></a> 
<a name="line137"><font color="#000000">0137:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line138"><font color="#000000">0138:</font></a> <b><font color="#0000FF">@item</font></b> C-x C-f
<a name="line139"><font color="#000000">0139:</font></a> Visit a file (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file}</font>).
<a name="line140"><font color="#000000">0140:</font></a> <b><font color="#0000FF">@item</font></b> C-x C-r
<a name="line141"><font color="#000000">0141:</font></a> Visit a file for viewing, without allowing changes to it
<a name="line142"><font color="#000000">0142:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-read-only}</font>).
<a name="line143"><font color="#000000">0143:</font></a> <b><font color="#0000FF">@item</font></b> C-x C-v
<a name="line144"><font color="#000000">0144:</font></a> Visit a different file instead of the one visited last
<a name="line145"><font color="#000000">0145:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-alternate-file}</font>).
<a name="line146"><font color="#000000">0146:</font></a> <b><font color="#0000FF">@item</font></b> C-x 4 f
<a name="line147"><font color="#000000">0147:</font></a> Visit a file, in another window (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-other-window}</font>).  Don't
<a name="line148"><font color="#000000">0148:</font></a> alter what is displayed in the selected window.
<a name="line149"><font color="#000000">0149:</font></a> <b><font color="#0000FF">@item</font></b> C-x 5 f
<a name="line150"><font color="#000000">0150:</font></a> Visit a file, in a new frame (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-other-frame}</font>).  Don't
<a name="line151"><font color="#000000">0151:</font></a> alter what is displayed in the selected frame.
<a name="line152"><font color="#000000">0152:</font></a> <b><font color="#0000FF">@item</font></b> M-x find-file-literally
<a name="line153"><font color="#000000">0153:</font></a> Visit a file with no conversion of the contents.
<a name="line154"><font color="#000000">0154:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line155"><font color="#000000">0155:</font></a> 
<a name="line156"><font color="#000000">0156:</font></a> <i><font color="#9A1900">@cindex files, visiting and saving</font></i>
<a name="line157"><font color="#000000">0157:</font></a> <i><font color="#9A1900">@cindex saving files</font></i>
<a name="line158"><font color="#000000">0158:</font></a>   <b><font color="#0000FF">@dfn</font></b><font color="#009900">{Visiting}</font> a file means reading its contents into an Emacs
<a name="line159"><font color="#000000">0159:</font></a> buffer so you can edit them.  Emacs makes a new buffer for each file
<a name="line160"><font color="#000000">0160:</font></a> that you visit.
<a name="line161"><font color="#000000">0161:</font></a> 
<a name="line162"><font color="#000000">0162:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x C-f
<a name="line163"><font color="#000000">0163:</font></a> <b><font color="#0000FF">@findex</font></b> find-file
<a name="line164"><font color="#000000">0164:</font></a>   To visit a file, type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-f}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file}</font>) and use the
<a name="line165"><font color="#000000">0165:</font></a> minibuffer to enter the name of the desired file.  While in the
<a name="line166"><font color="#000000">0166:</font></a> minibuffer, you can abort the command by typing <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-g}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">File</font>
<a name="line167"><font color="#000000">0167:</font></a> <font color="#FF0000">Names</font><font color="#FF0000">}</font>, for details about entering file names into minibuffers.
<a name="line168"><font color="#000000">0168:</font></a> 
<a name="line169"><font color="#000000">0169:</font></a>   If the specified file exists but the system does not allow you to
<a name="line170"><font color="#000000">0170:</font></a> read it, an error message is displayed in the echo area (on GNU and
<a name="line171"><font color="#000000">0171:</font></a> Unix systems you might be able to visit such a file using the
<a name="line172"><font color="#000000">0172:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{su}</font> or <b><font color="#0000FF">@samp</font></b><font color="#009900">{sudo}</font> methods; <b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Remote Files</font><font color="#FF0000">}</font>).  Otherwise,
<a name="line173"><font color="#000000">0173:</font></a> you can tell that <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-f}</font> has completed successfully by the
<a name="line174"><font color="#000000">0174:</font></a> appearance of new text on the screen, and by the buffer name shown in
<a name="line175"><font color="#000000">0175:</font></a> the mode line (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mode Line</font><font color="#FF0000">}</font>).  Emacs normally constructs the
<a name="line176"><font color="#000000">0176:</font></a> buffer name from the file name, omitting the directory name.  For
<a name="line177"><font color="#000000">0177:</font></a> example, a file named <b><font color="#0000FF">@file</font></b><font color="#009900">{/usr/rms/emacs.tex}</font> is visited in a buffer
<a name="line178"><font color="#000000">0178:</font></a> named <b><font color="#0000FF">@samp</font></b><font color="#009900">{emacs.tex}</font>.  If there is already a buffer with that name,
<a name="line179"><font color="#000000">0179:</font></a> Emacs constructs a unique name; the normal method is to add a suffix
<a name="line180"><font color="#000000">0180:</font></a> based on the directory name (e.g., <b><font color="#0000FF">@samp</font></b><font color="#009900">{&lt;rms&gt;}</font>, <b><font color="#0000FF">@samp</font></b><font color="#009900">{&lt;tmp&gt;}</font>,
<a name="line181"><font color="#000000">0181:</font></a> and so on), but you can select other methods.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Uniquify</font><font color="#FF0000">}</font>.
<a name="line182"><font color="#000000">0182:</font></a> 
<a name="line183"><font color="#000000">0183:</font></a> <i><font color="#9A1900">@cindex creating files</font></i>
<a name="line184"><font color="#000000">0184:</font></a>   To create a new file, just visit it using the same command, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x</font>
<a name="line185"><font color="#000000">0185:</font></a> <font color="#009900">C-f}</font>.  Emacs displays <b><font color="#0000FF">@samp</font></b><font color="#009900">{(New file)}</font> in the echo area, but in other
<a name="line186"><font color="#000000">0186:</font></a> respects behaves as if you had visited an existing empty file.
<a name="line187"><font color="#000000">0187:</font></a> 
<a name="line188"><font color="#000000">0188:</font></a> <i><font color="#9A1900">@cindex modified (buffer)</font></i>
<a name="line189"><font color="#000000">0189:</font></a>   After visiting a file, the changes you make with editing commands are
<a name="line190"><font color="#000000">0190:</font></a> made in the Emacs buffer.  They do not take effect in the visited
<a name="line191"><font color="#000000">0191:</font></a> file, until you <b><font color="#0000FF">@dfn</font></b><font color="#009900">{save}</font> the buffer (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Saving</font><font color="#FF0000">}</font>).  If a buffer
<a name="line192"><font color="#000000">0192:</font></a> contains changes that have not been saved, we say the buffer is
<a name="line193"><font color="#000000">0193:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{modified}</font>.  This implies that some changes will be lost if the
<a name="line194"><font color="#000000">0194:</font></a> buffer is not saved.  The mode line displays two stars near the left
<a name="line195"><font color="#000000">0195:</font></a> margin to indicate that the buffer is modified.
<a name="line196"><font color="#000000">0196:</font></a> 
<a name="line197"><font color="#000000">0197:</font></a>   If you visit a file that is already in Emacs, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-f}</font> switches
<a name="line198"><font color="#000000">0198:</font></a> to the existing buffer instead of making another copy.  Before doing
<a name="line199"><font color="#000000">0199:</font></a> so, it checks whether the file has changed since you last visited or
<a name="line200"><font color="#000000">0200:</font></a> saved it.  If the file has changed, Emacs offers to reread it.
<a name="line201"><font color="#000000">0201:</font></a> 
<a name="line202"><font color="#000000">0202:</font></a> <b><font color="#0000FF">@vindex</font></b> large-file-warning-threshold
<a name="line203"><font color="#000000">0203:</font></a> <i><font color="#9A1900">@cindex file, warning when size is large</font></i>
<a name="line204"><font color="#000000">0204:</font></a> <i><font color="#9A1900">@cindex size of file, warning when visiting</font></i>
<a name="line205"><font color="#000000">0205:</font></a> <i><font color="#9A1900">@cindex maximum buffer size exceeded, error message</font></i>
<a name="line206"><font color="#000000">0206:</font></a>   If you try to visit a file larger than
<a name="line207"><font color="#000000">0207:</font></a> <i><font color="#9A1900">@code{large-file-warning-threshold} (the default is 10000000, which is</font></i>
<a name="line208"><font color="#000000">0208:</font></a> about 10 megabytes), Emacs asks you for confirmation first.  You can
<a name="line209"><font color="#000000">0209:</font></a> answer <b><font color="#0000FF">@kbd</font></b><font color="#009900">{y}</font> to proceed with visiting the file or <b><font color="#0000FF">@kbd</font></b><font color="#009900">{l}</font> to visit
<a name="line210"><font color="#000000">0210:</font></a> the file literally (see below).  Visiting large files literally speeds
<a name="line211"><font color="#000000">0211:</font></a> up navigation and editing of such files, because various
<a name="line212"><font color="#000000">0212:</font></a> potentially-expensive features are turned off.  Note, however, that
<a name="line213"><font color="#000000">0213:</font></a> Emacs cannot visit files that are larger than the maximum Emacs buffer
<a name="line214"><font color="#000000">0214:</font></a> size, which is limited by the amount of memory Emacs can allocate and
<a name="line215"><font color="#000000">0215:</font></a> by the integers that Emacs can represent (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Buffers</font><font color="#FF0000">}</font>).  If you
<a name="line216"><font color="#000000">0216:</font></a> try, Emacs displays an error message saying that the maximum buffer
<a name="line217"><font color="#000000">0217:</font></a> size has been exceeded.
<a name="line218"><font color="#000000">0218:</font></a> 
<a name="line219"><font color="#000000">0219:</font></a> <i><font color="#9A1900">@cindex wildcard characters in file names</font></i>
<a name="line220"><font color="#000000">0220:</font></a> <b><font color="#0000FF">@vindex</font></b> find-file-wildcards
<a name="line221"><font color="#000000">0221:</font></a>   If the file name you specify contains shell-style wildcard
<a name="line222"><font color="#000000">0222:</font></a> characters, Emacs visits all the files that match it.  (On
<a name="line223"><font color="#000000">0223:</font></a> case-insensitive filesystems, Emacs matches the wildcards disregarding
<a name="line224"><font color="#000000">0224:</font></a> the letter case.)  Wildcards include <b><font color="#0000FF">@samp</font></b><font color="#009900">{?}</font>, <b><font color="#0000FF">@samp</font></b><font color="#009900">{*}</font>, and
<a name="line225"><font color="#000000">0225:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{[@dots{}]}</font> sequences.  To enter the wild card <b><font color="#0000FF">@samp</font></b><font color="#009900">{?}</font> in a file
<a name="line226"><font color="#000000">0226:</font></a> name in the minibuffer, you need to type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-q ?}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Quoted</font>
<a name="line227"><font color="#000000">0227:</font></a> <font color="#FF0000">File Names</font><font color="#FF0000">}</font>, for information on how to visit a file whose name
<a name="line228"><font color="#000000">0228:</font></a> actually contains wildcard characters.  You can disable the wildcard
<a name="line229"><font color="#000000">0229:</font></a> feature by customizing <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-wildcards}</font>.
<a name="line230"><font color="#000000">0230:</font></a> 
<a name="line231"><font color="#000000">0231:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x C-v
<a name="line232"><font color="#000000">0232:</font></a> <b><font color="#0000FF">@findex</font></b> find-alternate-file
<a name="line233"><font color="#000000">0233:</font></a>   If you visit the wrong file unintentionally by typing its name
<a name="line234"><font color="#000000">0234:</font></a> incorrectly, type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-v}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-alternate-file}</font>) to visit
<a name="line235"><font color="#000000">0235:</font></a> the file you really wanted.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-v}</font> is similar to <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x</font>
<a name="line236"><font color="#000000">0236:</font></a> <font color="#009900">C-f}</font>, but it kills the current buffer (after first offering to save it
<a name="line237"><font color="#000000">0237:</font></a> if it is modified).  When <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-v}</font> reads the file name to visit,
<a name="line238"><font color="#000000">0238:</font></a> it inserts the entire default file name in the buffer, with point just
<a name="line239"><font color="#000000">0239:</font></a> after the directory part; this is convenient if you made a slight
<a name="line240"><font color="#000000">0240:</font></a> error in typing the name.
<a name="line241"><font color="#000000">0241:</font></a> 
<a name="line242"><font color="#000000">0242:</font></a> <b><font color="#0000FF">@vindex</font></b> find-file-run-dired
<a name="line243"><font color="#000000">0243:</font></a>   If you visit a file that is actually a directory, Emacs invokes
<a name="line244"><font color="#000000">0244:</font></a> Dired, the Emacs directory browser.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dired</font><font color="#FF0000">}</font>.  You can disable
<a name="line245"><font color="#000000">0245:</font></a> this behavior by setting the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-run-dired}</font> to
<a name="line246"><font color="#000000">0246:</font></a> <i><font color="#9A1900">@code{nil}; in that case, it is an error to try to visit a directory.</font></i>
<a name="line247"><font color="#000000">0247:</font></a> 
<a name="line248"><font color="#000000">0248:</font></a>   Files which are actually collections of other files, or <b><font color="#0000FF">@dfn</font></b><font color="#009900">{file</font>
<a name="line249"><font color="#000000">0249:</font></a> <font color="#009900">archives}</font>, are visited in special modes which invoke a Dired-like
<a name="line250"><font color="#000000">0250:</font></a> environment to allow operations on archive members.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">File</font>
<a name="line251"><font color="#000000">0251:</font></a> <font color="#FF0000">Archives</font><font color="#FF0000">}</font>, for more about these features.
<a name="line252"><font color="#000000">0252:</font></a> 
<a name="line253"><font color="#000000">0253:</font></a>   If you visit a file that the operating system won't let you modify,
<a name="line254"><font color="#000000">0254:</font></a> or that is marked read-only, Emacs makes the buffer read-only too, so
<a name="line255"><font color="#000000">0255:</font></a> that you won't go ahead and make changes that you'll have trouble
<a name="line256"><font color="#000000">0256:</font></a> saving afterward.  You can make the buffer writable with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-q}</font>
<a name="line257"><font color="#000000">0257:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{read-only-mode}</font>).  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Misc Buffer</font><font color="#FF0000">}</font>.
<a name="line258"><font color="#000000">0258:</font></a> 
<a name="line259"><font color="#000000">0259:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x C-r
<a name="line260"><font color="#000000">0260:</font></a> <b><font color="#0000FF">@findex</font></b> find-file-read-only
<a name="line261"><font color="#000000">0261:</font></a>   If you want to visit a file as read-only in order to protect
<a name="line262"><font color="#000000">0262:</font></a> yourself from entering changes accidentally, visit it with the command
<a name="line263"><font color="#000000">0263:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-r}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-read-only}</font>) instead of <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-f}</font>.
<a name="line264"><font color="#000000">0264:</font></a> 
<a name="line265"><font color="#000000">0265:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x 4 f
<a name="line266"><font color="#000000">0266:</font></a> <b><font color="#0000FF">@findex</font></b> find-file-other-window
<a name="line267"><font color="#000000">0267:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x 4 f}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-other-window}</font>) is like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-f}</font>
<a name="line268"><font color="#000000">0268:</font></a> except that the buffer containing the specified file is selected in another
<a name="line269"><font color="#000000">0269:</font></a> window.  The window that was selected before <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x 4 f}</font> continues to
<a name="line270"><font color="#000000">0270:</font></a> show the same buffer it was already showing.  If this command is used when
<a name="line271"><font color="#000000">0271:</font></a> only one window is being displayed, that window is split in two, with one
<a name="line272"><font color="#000000">0272:</font></a> window showing the same buffer as before, and the other one showing the
<a name="line273"><font color="#000000">0273:</font></a> newly requested file.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Windows</font><font color="#FF0000">}</font>.
<a name="line274"><font color="#000000">0274:</font></a> 
<a name="line275"><font color="#000000">0275:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x 5 f
<a name="line276"><font color="#000000">0276:</font></a> <b><font color="#0000FF">@findex</font></b> find-file-other-frame
<a name="line277"><font color="#000000">0277:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x 5 f}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-other-frame}</font>) is similar, but opens a
<a name="line278"><font color="#000000">0278:</font></a> new frame, or selects any existing frame showing the specified file.
<a name="line279"><font color="#000000">0279:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Frames</font><font color="#FF0000">}</font>.
<a name="line280"><font color="#000000">0280:</font></a> 
<a name="line281"><font color="#000000">0281:</font></a> <i><font color="#9A1900">@cindex file selection dialog</font></i>
<a name="line282"><font color="#000000">0282:</font></a>   On graphical displays, there are two additional methods for visiting
<a name="line283"><font color="#000000">0283:</font></a> files.  Firstly, when Emacs is built with a suitable GUI toolkit,
<a name="line284"><font color="#000000">0284:</font></a> commands invoked with the mouse (by clicking on the menu bar or tool
<a name="line285"><font color="#000000">0285:</font></a> bar) use the toolkit's standard file selection dialog instead of
<a name="line286"><font color="#000000">0286:</font></a> prompting for the file name in the minibuffer.  On GNU/Linux and Unix
<a name="line287"><font color="#000000">0287:</font></a> platforms, Emacs does this when built with GTK+, LessTif, and Motif
<a name="line288"><font color="#000000">0288:</font></a> toolkits; on MS-Windows and Mac, the GUI version does that by default.
<a name="line289"><font color="#000000">0289:</font></a> For information on how to customize this, see <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dialog Boxes</font><font color="#FF0000">}</font>.
<a name="line290"><font color="#000000">0290:</font></a> 
<a name="line291"><font color="#000000">0291:</font></a>   Secondly, Emacs supports drag and drop: dropping a file into an
<a name="line292"><font color="#000000">0292:</font></a> ordinary Emacs window visits the file using that window.  As an
<a name="line293"><font color="#000000">0293:</font></a> exception, dropping a file into a window displaying a Dired buffer
<a name="line294"><font color="#000000">0294:</font></a> moves or copies the file into the displayed directory.  For details,
<a name="line295"><font color="#000000">0295:</font></a> see <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Drag and Drop</font><font color="#FF0000">}</font>, and <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Misc Dired Features</font><font color="#FF0000">}</font>.
<a name="line296"><font color="#000000">0296:</font></a> 
<a name="line297"><font color="#000000">0297:</font></a>   On text-mode terminals and on graphical displays when Emacs was
<a name="line298"><font color="#000000">0298:</font></a> built without a GUI toolkit, you can visit files via the menu-bar
<a name="line299"><font color="#000000">0299:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{File}</font> menu, which has the <b><font color="#0000FF">@samp</font></b><font color="#009900">{Visit New File}</font> and the
<a name="line300"><font color="#000000">0300:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{Open File}</font> items.
<a name="line301"><font color="#000000">0301:</font></a> 
<a name="line302"><font color="#000000">0302:</font></a>   Each time you visit a file, Emacs automatically scans its contents
<a name="line303"><font color="#000000">0303:</font></a> to detect what character encoding and end-of-line convention it uses,
<a name="line304"><font color="#000000">0304:</font></a> and converts these to Emacs's internal encoding and end-of-line
<a name="line305"><font color="#000000">0305:</font></a> convention within the buffer.  When you save the buffer, Emacs
<a name="line306"><font color="#000000">0306:</font></a> performs the inverse conversion, writing the file to disk with its
<a name="line307"><font color="#000000">0307:</font></a> original encoding and end-of-line convention.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Coding Systems</font><font color="#FF0000">}</font>.
<a name="line308"><font color="#000000">0308:</font></a> 
<a name="line309"><font color="#000000">0309:</font></a> <b><font color="#0000FF">@findex</font></b> find-file-literally
<a name="line310"><font color="#000000">0310:</font></a>   If you wish to edit a file as a sequence of <b><font color="#0000FF">@acronym</font></b><font color="#009900">{ASCII}</font>
<a name="line311"><font color="#000000">0311:</font></a> characters with no special encoding or conversion, use the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line312"><font color="#000000">0312:</font></a> <font color="#009900">find-file-literally}</font> command.  This visits a file, like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-f}</font>,
<a name="line313"><font color="#000000">0313:</font></a> but does not do format conversion (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Format Conversion,, Format</font>
<a name="line314"><font color="#000000">0314:</font></a> <font color="#FF0000">Conversion, elisp, the Emacs Lisp Reference Manual</font><font color="#FF0000">}</font>), character code
<a name="line315"><font color="#000000">0315:</font></a> conversion (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Coding Systems</font><font color="#FF0000">}</font>), or automatic uncompression
<a name="line316"><font color="#000000">0316:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Compressed Files</font><font color="#FF0000">}</font>), and does not add a final newline because
<a name="line317"><font color="#000000">0317:</font></a> of <b><font color="#0000FF">@code</font></b><font color="#009900">{require-final-newline}</font> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Customize Save</font><font color="#FF0000">}</font>).  If you have
<a name="line318"><font color="#000000">0318:</font></a> already visited the same file in the usual (non-literal) manner, this
<a name="line319"><font color="#000000">0319:</font></a> command asks you whether to visit it literally instead.
<a name="line320"><font color="#000000">0320:</font></a> 
<a name="line321"><font color="#000000">0321:</font></a> <b><font color="#0000FF">@vindex</font></b> find-file-hook
<a name="line322"><font color="#000000">0322:</font></a> <b><font color="#0000FF">@vindex</font></b> find-file-not-found-functions
<a name="line323"><font color="#000000">0323:</font></a>   Two special hook variables allow extensions to modify the operation
<a name="line324"><font color="#000000">0324:</font></a> of visiting files.  Visiting a file that does not exist runs the
<a name="line325"><font color="#000000">0325:</font></a> functions in <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-not-found-functions}</font>; this variable holds
<a name="line326"><font color="#000000">0326:</font></a> a list of functions, which are called one by one (with no arguments)
<a name="line327"><font color="#000000">0327:</font></a> until one of them returns non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>.  This is not a normal hook,
<a name="line328"><font color="#000000">0328:</font></a> and the name ends in <b><font color="#0000FF">@samp</font></b><font color="#009900">{-functions}</font> rather than <b><font color="#0000FF">@samp</font></b><font color="#009900">{-hook}</font> to
<a name="line329"><font color="#000000">0329:</font></a> indicate that fact.
<a name="line330"><font color="#000000">0330:</font></a> 
<a name="line331"><font color="#000000">0331:</font></a>   Successful visiting of any file, whether existing or not, calls the
<a name="line332"><font color="#000000">0332:</font></a> functions in <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-hook}</font>, with no arguments.  This variable
<a name="line333"><font color="#000000">0333:</font></a> is a normal hook.  In the case of a nonexistent file, the
<a name="line334"><font color="#000000">0334:</font></a> <i><font color="#9A1900">@code{find-file-not-found-functions} are run first.  @xref{Hooks}.</font></i>
<a name="line335"><font color="#000000">0335:</font></a> 
<a name="line336"><font color="#000000">0336:</font></a>   There are several ways to specify automatically the major mode for
<a name="line337"><font color="#000000">0337:</font></a> editing the file (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Choosing Modes</font><font color="#FF0000">}</font>), and to specify local
<a name="line338"><font color="#000000">0338:</font></a> variables defined for that file (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">File Variables</font><font color="#FF0000">}</font>).
<a name="line339"><font color="#000000">0339:</font></a> 
<a name="line340"><font color="#000000">0340:</font></a> <b><font color="#0000FF">@node</font></b> Saving
<a name="line341"><font color="#000000">0341:</font></a> <b><font color="#0000FF">@section</font></b> Saving Files
<a name="line342"><font color="#000000">0342:</font></a> 
<a name="line343"><font color="#000000">0343:</font></a>   <b><font color="#0000FF">@dfn</font></b><font color="#009900">{Saving}</font> a buffer in Emacs means writing its contents back into the file
<a name="line344"><font color="#000000">0344:</font></a> that was visited in the buffer.
<a name="line345"><font color="#000000">0345:</font></a> 
<a name="line346"><font color="#000000">0346:</font></a> <b><font color="#000080">@menu</font></b>
<a name="line347"><font color="#000000">0347:</font></a> <font color="#FF0000">* Save Commands::</font>       Commands for saving files.
<a name="line348"><font color="#000000">0348:</font></a> <font color="#FF0000">* Backup::</font>              How Emacs saves the old version of your file.
<a name="line349"><font color="#000000">0349:</font></a> <font color="#FF0000">* Customize Save::</font>      Customizing the saving of files.
<a name="line350"><font color="#000000">0350:</font></a> <font color="#FF0000">* Interlocking::</font>        How Emacs protects against simultaneous editing
<a name="line351"><font color="#000000">0351:</font></a>                           of one file by two users.
<a name="line352"><font color="#000000">0352:</font></a> * Shadowing: File Shadowing.  Copying files to ``shadows'' automatically.
<a name="line353"><font color="#000000">0353:</font></a> <font color="#FF0000">* Time Stamps::</font>         Emacs can update time stamps on saved files.
<a name="line354"><font color="#000000">0354:</font></a> <b><font color="#000080">@end menu</font></b>
<a name="line355"><font color="#000000">0355:</font></a> 
<a name="line356"><font color="#000000">0356:</font></a> <b><font color="#0000FF">@node</font></b> Save Commands
<a name="line357"><font color="#000000">0357:</font></a> <b><font color="#0000FF">@subsection</font></b> Commands for Saving Files
<a name="line358"><font color="#000000">0358:</font></a> 
<a name="line359"><font color="#000000">0359:</font></a>   These are the commands that relate to saving and writing files.
<a name="line360"><font color="#000000">0360:</font></a> 
<a name="line361"><font color="#000000">0361:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line362"><font color="#000000">0362:</font></a> <b><font color="#0000FF">@item</font></b> C-x C-s
<a name="line363"><font color="#000000">0363:</font></a> Save the current buffer to its file (<b><font color="#0000FF">@code</font></b><font color="#009900">{save-buffer}</font>).
<a name="line364"><font color="#000000">0364:</font></a> <b><font color="#0000FF">@item</font></b> C-x s
<a name="line365"><font color="#000000">0365:</font></a> Save any or all buffers to their files (<b><font color="#0000FF">@code</font></b><font color="#009900">{save-some-buffers}</font>).
<a name="line366"><font color="#000000">0366:</font></a> <b><font color="#0000FF">@item</font></b> M-~
<a name="line367"><font color="#000000">0367:</font></a> Forget that the current buffer has been changed (<b><font color="#0000FF">@code</font></b><font color="#009900">{not-modified}</font>).
<a name="line368"><font color="#000000">0368:</font></a> With prefix argument (<b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u}</font>), mark the current buffer as changed.
<a name="line369"><font color="#000000">0369:</font></a> <b><font color="#0000FF">@item</font></b> C-x C-w
<a name="line370"><font color="#000000">0370:</font></a> Save the current buffer with a specified file name (<b><font color="#0000FF">@code</font></b><font color="#009900">{write-file}</font>).
<a name="line371"><font color="#000000">0371:</font></a> <b><font color="#0000FF">@item</font></b> M-x set-visited-file-name
<a name="line372"><font color="#000000">0372:</font></a> Change the file name under which the current buffer will be saved.
<a name="line373"><font color="#000000">0373:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line374"><font color="#000000">0374:</font></a> 
<a name="line375"><font color="#000000">0375:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x C-s
<a name="line376"><font color="#000000">0376:</font></a> <b><font color="#0000FF">@findex</font></b> save-buffer
<a name="line377"><font color="#000000">0377:</font></a>   When you wish to save the file and make your changes permanent, type
<a name="line378"><font color="#000000">0378:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{save-buffer}</font>).  After saving is finished, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font>
<a name="line379"><font color="#000000">0379:</font></a> displays a message like this:
<a name="line380"><font color="#000000">0380:</font></a> 
<a name="line381"><font color="#000000">0381:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line382"><font color="#000000">0382:</font></a> Wrote /u/rms/gnu/gnu.tasks
<a name="line383"><font color="#000000">0383:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line384"><font color="#000000">0384:</font></a> 
<a name="line385"><font color="#000000">0385:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line386"><font color="#000000">0386:</font></a> If the current buffer is not modified (no changes have been made in it
<a name="line387"><font color="#000000">0387:</font></a> since the buffer was created or last saved), saving is not really
<a name="line388"><font color="#000000">0388:</font></a> done, because it would have no effect.  Instead, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font>
<a name="line389"><font color="#000000">0389:</font></a> displays a message like this in the echo area:
<a name="line390"><font color="#000000">0390:</font></a> 
<a name="line391"><font color="#000000">0391:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line392"><font color="#000000">0392:</font></a> (No changes need to be saved)
<a name="line393"><font color="#000000">0393:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line394"><font color="#000000">0394:</font></a> 
<a name="line395"><font color="#000000">0395:</font></a> With a prefix argument, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u C-x C-s}</font>, Emacs also marks the buffer
<a name="line396"><font color="#000000">0396:</font></a> to be backed up when the next save is done.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Backup</font><font color="#FF0000">}</font>.
<a name="line397"><font color="#000000">0397:</font></a> 
<a name="line398"><font color="#000000">0398:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x s
<a name="line399"><font color="#000000">0399:</font></a> <b><font color="#0000FF">@findex</font></b> save-some-buffers
<a name="line400"><font color="#000000">0400:</font></a>   The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x s}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{save-some-buffers}</font>) offers to save any
<a name="line401"><font color="#000000">0401:</font></a> or all modified buffers.  It asks you what to do with each buffer.  The
<a name="line402"><font color="#000000">0402:</font></a> possible responses are analogous to those of <b><font color="#0000FF">@code</font></b><font color="#009900">{query-replace}</font>:
<a name="line403"><font color="#000000">0403:</font></a> 
<a name="line404"><font color="#000000">0404:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line405"><font color="#000000">0405:</font></a> <b><font color="#0000FF">@item</font></b> y
<a name="line406"><font color="#000000">0406:</font></a> <b><font color="#0000FF">@item</font></b> <b><font color="#0000FF">@key</font></b><font color="#009900">{SPC}</font>
<a name="line407"><font color="#000000">0407:</font></a> Save this buffer and ask about the rest of the buffers.
<a name="line408"><font color="#000000">0408:</font></a> <b><font color="#0000FF">@item</font></b> n
<a name="line409"><font color="#000000">0409:</font></a> <b><font color="#0000FF">@item</font></b> <b><font color="#0000FF">@key</font></b><font color="#009900">{DEL}</font>
<a name="line410"><font color="#000000">0410:</font></a> Don't save this buffer, but ask about the rest of the buffers.
<a name="line411"><font color="#000000">0411:</font></a> <b><font color="#0000FF">@item</font></b> !
<a name="line412"><font color="#000000">0412:</font></a> Save this buffer and all the rest with no more questions.
<a name="line413"><font color="#000000">0413:</font></a> <b><font color="#0000FF">@item</font></b> q
<a name="line414"><font color="#000000">0414:</font></a> <i><font color="#9A1900">@c following generates acceptable underfull hbox</font></i>
<a name="line415"><font color="#000000">0415:</font></a> <b><font color="#0000FF">@item</font></b> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line416"><font color="#000000">0416:</font></a> Terminate <b><font color="#0000FF">@code</font></b><font color="#009900">{save-some-buffers}</font> without any more saving.
<a name="line417"><font color="#000000">0417:</font></a> <b><font color="#0000FF">@item</font></b> .
<a name="line418"><font color="#000000">0418:</font></a> Save this buffer, then exit <b><font color="#0000FF">@code</font></b><font color="#009900">{save-some-buffers}</font> without even asking
<a name="line419"><font color="#000000">0419:</font></a> about other buffers.
<a name="line420"><font color="#000000">0420:</font></a> <b><font color="#0000FF">@item</font></b> C-r
<a name="line421"><font color="#000000">0421:</font></a> View the buffer that you are currently being asked about.  When you exit
<a name="line422"><font color="#000000">0422:</font></a> View mode, you get back to <b><font color="#0000FF">@code</font></b><font color="#009900">{save-some-buffers}</font>, which asks the
<a name="line423"><font color="#000000">0423:</font></a> question again.
<a name="line424"><font color="#000000">0424:</font></a> <b><font color="#0000FF">@item</font></b> d
<a name="line425"><font color="#000000">0425:</font></a> Diff the buffer against its corresponding file, so you can see what
<a name="line426"><font color="#000000">0426:</font></a> changes you would be saving.  This calls the command
<a name="line427"><font color="#000000">0427:</font></a> <i><font color="#9A1900">@code{diff-buffer-with-file} (@pxref{Comparing Files}).</font></i>
<a name="line428"><font color="#000000">0428:</font></a> <b><font color="#0000FF">@item</font></b> C-h
<a name="line429"><font color="#000000">0429:</font></a> Display a help message about these options.
<a name="line430"><font color="#000000">0430:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line431"><font color="#000000">0431:</font></a> 
<a name="line432"><font color="#000000">0432:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line433"><font color="#000000">0433:</font></a> <b><font color="#0000FF">@vindex</font></b> save-some-buffers-default-predicate
<a name="line434"><font color="#000000">0434:</font></a> You can customize the value of
<a name="line435"><font color="#000000">0435:</font></a> <i><font color="#9A1900">@code{save-some-buffers-default-predicate} to control which buffers</font></i>
<a name="line436"><font color="#000000">0436:</font></a> Emacs will ask about.
<a name="line437"><font color="#000000">0437:</font></a> 
<a name="line438"><font color="#000000">0438:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-c}</font>, the key sequence to exit Emacs, invokes
<a name="line439"><font color="#000000">0439:</font></a> <i><font color="#9A1900">@code{save-some-buffers} and therefore asks the same questions.</font></i>
<a name="line440"><font color="#000000">0440:</font></a> 
<a name="line441"><font color="#000000">0441:</font></a> <b><font color="#0000FF">@kindex</font></b> M-~
<a name="line442"><font color="#000000">0442:</font></a> <b><font color="#0000FF">@findex</font></b> not-modified
<a name="line443"><font color="#000000">0443:</font></a>   If you have changed a buffer but do not wish to save the changes,
<a name="line444"><font color="#000000">0444:</font></a> you should take some action to prevent it.  Otherwise, each time you
<a name="line445"><font color="#000000">0445:</font></a> use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x s}</font> or <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-c}</font>, you are liable to save this buffer
<a name="line446"><font color="#000000">0446:</font></a> by mistake.  One thing you can do is type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-~}</font>
<a name="line447"><font color="#000000">0447:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{not-modified}</font>), which clears out the indication that the buffer
<a name="line448"><font color="#000000">0448:</font></a> is modified.  If you do this, none of the save commands will believe
<a name="line449"><font color="#000000">0449:</font></a> that the buffer needs to be saved.  (<b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> is often used as a
<a name="line450"><font color="#000000">0450:</font></a> mathematical symbol for ``not''; thus <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-~}</font> is ``not'', metafied.)
<a name="line451"><font color="#000000">0451:</font></a> Alternatively, you can cancel all the changes made since the file was
<a name="line452"><font color="#000000">0452:</font></a> visited or saved, by reading the text from the file again.  This is
<a name="line453"><font color="#000000">0453:</font></a> called <b><font color="#0000FF">@dfn</font></b><font color="#009900">{reverting}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Reverting</font><font color="#FF0000">}</font>.  (You could also undo all
<a name="line454"><font color="#000000">0454:</font></a> the changes by repeating the undo command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x u}</font> until you have
<a name="line455"><font color="#000000">0455:</font></a> undone all the changes; but reverting is easier.)
<a name="line456"><font color="#000000">0456:</font></a> 
<a name="line457"><font color="#000000">0457:</font></a> <b><font color="#0000FF">@findex</font></b> set-visited-file-name
<a name="line458"><font color="#000000">0458:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x set-visited-file-name}</font> alters the name of the file that the
<a name="line459"><font color="#000000">0459:</font></a> current buffer is visiting.  It reads the new file name using the
<a name="line460"><font color="#000000">0460:</font></a> minibuffer.  Then it marks the buffer as visiting that file name, and
<a name="line461"><font color="#000000">0461:</font></a> changes the buffer name correspondingly.  <b><font color="#0000FF">@code</font></b><font color="#009900">{set-visited-file-name}</font>
<a name="line462"><font color="#000000">0462:</font></a> does not save the buffer in the newly visited file; it just alters the
<a name="line463"><font color="#000000">0463:</font></a> records inside Emacs in case you do save later.  It also marks the
<a name="line464"><font color="#000000">0464:</font></a> buffer as modified so that <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font> in that buffer
<a name="line465"><font color="#000000">0465:</font></a> <b><font color="#0000FF">@emph</font></b><font color="#FF0000">{</font><i><font color="#009900">will</font></i><font color="#FF0000">}</font> save.
<a name="line466"><font color="#000000">0466:</font></a> 
<a name="line467"><font color="#000000">0467:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x C-w
<a name="line468"><font color="#000000">0468:</font></a> <b><font color="#0000FF">@findex</font></b> write-file
<a name="line469"><font color="#000000">0469:</font></a>   If you wish to mark the buffer as visiting a different file and save
<a name="line470"><font color="#000000">0470:</font></a> it right away, use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-w}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{write-file}</font>).  This is
<a name="line471"><font color="#000000">0471:</font></a> equivalent to <b><font color="#0000FF">@code</font></b><font color="#009900">{set-visited-file-name}</font> followed by <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font>,
<a name="line472"><font color="#000000">0472:</font></a> except that <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-w}</font> asks for confirmation if the file exists.
<a name="line473"><font color="#000000">0473:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font> used on a buffer that is not visiting a file has the
<a name="line474"><font color="#000000">0474:</font></a> same effect as <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-w}</font>; that is, it reads a file name, marks the
<a name="line475"><font color="#000000">0475:</font></a> buffer as visiting that file, and saves it there.  The default file
<a name="line476"><font color="#000000">0476:</font></a> name in a buffer that is not visiting a file is made by combining the
<a name="line477"><font color="#000000">0477:</font></a> buffer name with the buffer's default directory (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">File Names</font><font color="#FF0000">}</font>).
<a name="line478"><font color="#000000">0478:</font></a> 
<a name="line479"><font color="#000000">0479:</font></a>   If the new file name implies a major mode, then <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-w}</font> switches
<a name="line480"><font color="#000000">0480:</font></a> to that major mode, in most cases.  The command
<a name="line481"><font color="#000000">0481:</font></a> <i><font color="#9A1900">@code{set-visited-file-name} also does this.  @xref{Choosing Modes}.</font></i>
<a name="line482"><font color="#000000">0482:</font></a> 
<a name="line483"><font color="#000000">0483:</font></a>   If Emacs is about to save a file and sees that the date of the latest
<a name="line484"><font color="#000000">0484:</font></a> version on disk does not match what Emacs last read or wrote, Emacs
<a name="line485"><font color="#000000">0485:</font></a> notifies you of this fact, because it probably indicates a problem caused
<a name="line486"><font color="#000000">0486:</font></a> by simultaneous editing and requires your immediate attention.
<a name="line487"><font color="#000000">0487:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Interlocking,, Simultaneous Editing</font><font color="#FF0000">}</font>.
<a name="line488"><font color="#000000">0488:</font></a> 
<a name="line489"><font color="#000000">0489:</font></a> <b><font color="#0000FF">@node</font></b> Backup
<a name="line490"><font color="#000000">0490:</font></a> <b><font color="#0000FF">@subsection</font></b> Backup Files
<a name="line491"><font color="#000000">0491:</font></a> <i><font color="#9A1900">@cindex backup file</font></i>
<a name="line492"><font color="#000000">0492:</font></a> <b><font color="#0000FF">@vindex</font></b> make-backup-files
<a name="line493"><font color="#000000">0493:</font></a> 
<a name="line494"><font color="#000000">0494:</font></a>   On most operating systems, rewriting a file automatically destroys all
<a name="line495"><font color="#000000">0495:</font></a> record of what the file used to contain.  Thus, saving a file from Emacs
<a name="line496"><font color="#000000">0496:</font></a> throws away the old contents of the file---or it would, except that
<a name="line497"><font color="#000000">0497:</font></a> Emacs carefully copies the old contents to another file, called the
<a name="line498"><font color="#000000">0498:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{backup}</font> file, before actually saving.
<a name="line499"><font color="#000000">0499:</font></a> 
<a name="line500"><font color="#000000">0500:</font></a>   Emacs makes a backup for a file only the first time the file is
<a name="line501"><font color="#000000">0501:</font></a> saved from a buffer.  No matter how many times you subsequently save
<a name="line502"><font color="#000000">0502:</font></a> the file, its backup remains unchanged.  However, if you kill the
<a name="line503"><font color="#000000">0503:</font></a> buffer and then visit the file again, a new backup file will be made.
<a name="line504"><font color="#000000">0504:</font></a> 
<a name="line505"><font color="#000000">0505:</font></a>   For most files, the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{make-backup-files}</font> determines
<a name="line506"><font color="#000000">0506:</font></a> whether to make backup files.  On most operating systems, its default
<a name="line507"><font color="#000000">0507:</font></a> value is <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font>, so that Emacs does write backup files.
<a name="line508"><font color="#000000">0508:</font></a> 
<a name="line509"><font color="#000000">0509:</font></a>   For files managed by a version control system (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Version</font>
<a name="line510"><font color="#000000">0510:</font></a> <font color="#FF0000">Control</font><font color="#FF0000">}</font>), the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{vc-make-backup-files}</font> determines whether
<a name="line511"><font color="#000000">0511:</font></a> to make backup files.  By default it is <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>, since backup files
<a name="line512"><font color="#000000">0512:</font></a> are redundant when you store all the previous versions in a version
<a name="line513"><font color="#000000">0513:</font></a> control system.
<a name="line514"><font color="#000000">0514:</font></a> <b><font color="#0000FF">@iftex</font></b>
<a name="line515"><font color="#000000">0515:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">General VC Options,,,emacs-xtra, Specialized Emacs Features</font><font color="#FF0000">}</font>.
<a name="line516"><font color="#000000">0516:</font></a> <b><font color="#0000FF">@end iftex</font></b>
<a name="line517"><font color="#000000">0517:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line518"><font color="#000000">0518:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">General VC Options</font><font color="#FF0000">}</font>.
<a name="line519"><font color="#000000">0519:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line520"><font color="#000000">0520:</font></a> 
<a name="line521"><font color="#000000">0521:</font></a>   At your option, Emacs can keep either a single backup for each file,
<a name="line522"><font color="#000000">0522:</font></a> or make a series of numbered backup files for each file that you edit.
<a name="line523"><font color="#000000">0523:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Backup Names</font><font color="#FF0000">}</font>.
<a name="line524"><font color="#000000">0524:</font></a> 
<a name="line525"><font color="#000000">0525:</font></a> <b><font color="#0000FF">@vindex</font></b> backup-enable-predicate
<a name="line526"><font color="#000000">0526:</font></a> <b><font color="#0000FF">@vindex</font></b> temporary-file-directory
<a name="line527"><font color="#000000">0527:</font></a> <b><font color="#0000FF">@vindex</font></b> small-temporary-file-directory
<a name="line528"><font color="#000000">0528:</font></a>   The default value of the <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-enable-predicate}</font> variable
<a name="line529"><font color="#000000">0529:</font></a> prevents backup files being written for files in the directories used
<a name="line530"><font color="#000000">0530:</font></a> for temporary files, specified by <b><font color="#0000FF">@code</font></b><font color="#009900">{temporary-file-directory}</font> or
<a name="line531"><font color="#000000">0531:</font></a> <i><font color="#9A1900">@code{small-temporary-file-directory}.</font></i>
<a name="line532"><font color="#000000">0532:</font></a> 
<a name="line533"><font color="#000000">0533:</font></a>   You can explicitly tell Emacs to make another backup file from a
<a name="line534"><font color="#000000">0534:</font></a> buffer, even though that buffer has been saved before.  If you save
<a name="line535"><font color="#000000">0535:</font></a> the buffer with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u C-x C-s}</font>, the version thus saved will be made
<a name="line536"><font color="#000000">0536:</font></a> into a backup file if you save the buffer again.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u C-u C-x</font>
<a name="line537"><font color="#000000">0537:</font></a> <font color="#009900">C-s}</font> saves the buffer, but first makes the previous file contents into
<a name="line538"><font color="#000000">0538:</font></a> a new backup file.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u C-u C-u C-x C-s}</font> does both things: it
<a name="line539"><font color="#000000">0539:</font></a> makes a backup from the previous contents, and arranges to make
<a name="line540"><font color="#000000">0540:</font></a> another from the newly saved contents if you save again.
<a name="line541"><font color="#000000">0541:</font></a> 
<a name="line542"><font color="#000000">0542:</font></a> <b><font color="#0000FF">@vindex</font></b> backup-directory-alist
<a name="line543"><font color="#000000">0543:</font></a>   You can customize the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-directory-alist}</font> to
<a name="line544"><font color="#000000">0544:</font></a> specify that files matching certain patterns should be backed up in
<a name="line545"><font color="#000000">0545:</font></a> specific directories.  A typical use is to add an element <b><font color="#0000FF">@code</font></b><font color="#009900">{("."</font>
<a name="line546"><font color="#000000">0546:</font></a> <font color="#009900">. @var{dir})}</font> to make all backups in the directory with absolute name
<a name="line547"><font color="#000000">0547:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{dir}</font>.  Emacs modifies the backup file names to avoid clashes
<a name="line548"><font color="#000000">0548:</font></a> between files with the same names originating in different
<a name="line549"><font color="#000000">0549:</font></a> directories.  Alternatively, adding, <b><font color="#0000FF">@code</font></b><font color="#009900">{("." . ".~")}</font> would make
<a name="line550"><font color="#000000">0550:</font></a> backups in the invisible subdirectory <b><font color="#0000FF">@file</font></b><font color="#009900">{.~}</font> of the original file's
<a name="line551"><font color="#000000">0551:</font></a> directory.  Emacs creates the directory, if necessary, to make the
<a name="line552"><font color="#000000">0552:</font></a> backup.
<a name="line553"><font color="#000000">0553:</font></a> 
<a name="line554"><font color="#000000">0554:</font></a> <b><font color="#000080">@menu</font></b>
<a name="line555"><font color="#000000">0555:</font></a> * Names: Backup Names.          How backup files are named.
<a name="line556"><font color="#000000">0556:</font></a> * Deletion: Backup Deletion.    Emacs deletes excess numbered backups.
<a name="line557"><font color="#000000">0557:</font></a> * Copying: Backup Copying.      Backups can be made by copying or renaming.
<a name="line558"><font color="#000000">0558:</font></a> <b><font color="#000080">@end menu</font></b>
<a name="line559"><font color="#000000">0559:</font></a> 
<a name="line560"><font color="#000000">0560:</font></a> <b><font color="#0000FF">@node</font></b> Backup Names
<a name="line561"><font color="#000000">0561:</font></a> <b><font color="#0000FF">@subsubsection</font></b> Single or Numbered Backups
<a name="line562"><font color="#000000">0562:</font></a> <i><font color="#9A1900">@cindex backup file names</font></i>
<a name="line563"><font color="#000000">0563:</font></a> <i><font color="#9A1900">@cindex names of backup files</font></i>
<a name="line564"><font color="#000000">0564:</font></a> 
<a name="line565"><font color="#000000">0565:</font></a> <i><font color="#9A1900">@cindex @file{~}, in names of backup files</font></i>
<a name="line566"><font color="#000000">0566:</font></a> <i><font color="#9A1900">@cindex tilde (@file{~}) at end of backup file name</font></i>
<a name="line567"><font color="#000000">0567:</font></a>   When Emacs makes a backup file, its name is normally constructed by
<a name="line568"><font color="#000000">0568:</font></a> appending <b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> to the file name being edited; thus, the backup
<a name="line569"><font color="#000000">0569:</font></a> file for <b><font color="#0000FF">@file</font></b><font color="#009900">{eval.c}</font> would be <b><font color="#0000FF">@file</font></b><font color="#009900">{eval.c~}</font>.
<a name="line570"><font color="#000000">0570:</font></a> 
<a name="line571"><font color="#000000">0571:</font></a> <i><font color="#9A1900">@cindex @file{~/.emacs.d/%backup%~}</font></i>
<a name="line572"><font color="#000000">0572:</font></a>   If access control stops Emacs from writing backup files under the
<a name="line573"><font color="#000000">0573:</font></a> usual names, it writes the backup file as <b><font color="#0000FF">@file</font></b><font color="#009900">{~/.emacs.d/%backup%~}</font>.
<a name="line574"><font color="#000000">0574:</font></a> Only one such file can exist, so only the most recently made such
<a name="line575"><font color="#000000">0575:</font></a> backup is available.
<a name="line576"><font color="#000000">0576:</font></a> 
<a name="line577"><font color="#000000">0577:</font></a>   Emacs can also make <b><font color="#0000FF">@dfn</font></b><font color="#009900">{numbered backup files}</font>.  Numbered backup
<a name="line578"><font color="#000000">0578:</font></a> file names contain <b><font color="#0000FF">@samp</font></b><font color="#009900">{.~}</font>, the number, and another <b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> after
<a name="line579"><font color="#000000">0579:</font></a> the original file name.  Thus, the backup files of <b><font color="#0000FF">@file</font></b><font color="#009900">{eval.c}</font> would
<a name="line580"><font color="#000000">0580:</font></a> be called <b><font color="#0000FF">@file</font></b><font color="#009900">{eval.c.~1~}</font>, <b><font color="#0000FF">@file</font></b><font color="#009900">{eval.c.~2~}</font>, and so on, all the way
<a name="line581"><font color="#000000">0581:</font></a> through names like <b><font color="#0000FF">@file</font></b><font color="#009900">{eval.c.~259~}</font> and beyond.
<a name="line582"><font color="#000000">0582:</font></a> 
<a name="line583"><font color="#000000">0583:</font></a> <b><font color="#0000FF">@vindex</font></b> version-control
<a name="line584"><font color="#000000">0584:</font></a>   The variable <b><font color="#0000FF">@code</font></b><font color="#009900">{version-control}</font> determines whether to make
<a name="line585"><font color="#000000">0585:</font></a> single backup files or multiple numbered backup files.  Its possible
<a name="line586"><font color="#000000">0586:</font></a> values are:
<a name="line587"><font color="#000000">0587:</font></a> 
<a name="line588"><font color="#000000">0588:</font></a> <b><font color="#0000FF">@table</font></b> <i><font color="#9A1900">@code</font></i>
<a name="line589"><font color="#000000">0589:</font></a> <b><font color="#0000FF">@item</font></b> nil
<a name="line590"><font color="#000000">0590:</font></a> Make numbered backups for files that have numbered backups already.
<a name="line591"><font color="#000000">0591:</font></a> Otherwise, make single backups.  This is the default.
<a name="line592"><font color="#000000">0592:</font></a> <b><font color="#0000FF">@item</font></b> t
<a name="line593"><font color="#000000">0593:</font></a> Make numbered backups.
<a name="line594"><font color="#000000">0594:</font></a> <b><font color="#0000FF">@item</font></b> never
<a name="line595"><font color="#000000">0595:</font></a> Never make numbered backups; always make single backups.
<a name="line596"><font color="#000000">0596:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line597"><font color="#000000">0597:</font></a> 
<a name="line598"><font color="#000000">0598:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line599"><font color="#000000">0599:</font></a> The usual way to set this variable is globally, through your init file
<a name="line600"><font color="#000000">0600:</font></a> or the customization buffer.  However, you can set
<a name="line601"><font color="#000000">0601:</font></a> <i><font color="#9A1900">@code{version-control} locally in an individual buffer to control the</font></i>
<a name="line602"><font color="#000000">0602:</font></a> making of backups for that buffer's file (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Locals</font><font color="#FF0000">}</font>).  You can
<a name="line603"><font color="#000000">0603:</font></a> have Emacs set <b><font color="#0000FF">@code</font></b><font color="#009900">{version-control}</font> locally whenever you visit a
<a name="line604"><font color="#000000">0604:</font></a> given file (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">File Variables</font><font color="#FF0000">}</font>).  Some modes, such as Rmail mode,
<a name="line605"><font color="#000000">0605:</font></a> set this variable.
<a name="line606"><font color="#000000">0606:</font></a> 
<a name="line607"><font color="#000000">0607:</font></a> <i><font color="#9A1900">@cindex @env{VERSION_CONTROL} environment variable</font></i>
<a name="line608"><font color="#000000">0608:</font></a>   If you set the environment variable <b><font color="#0000FF">@env</font></b><font color="#009900">{VERSION_CONTROL}</font>, to tell
<a name="line609"><font color="#000000">0609:</font></a> various GNU utilities what to do with backup files, Emacs also obeys the
<a name="line610"><font color="#000000">0610:</font></a> environment variable by setting the Lisp variable <b><font color="#0000FF">@code</font></b><font color="#009900">{version-control}</font>
<a name="line611"><font color="#000000">0611:</font></a> accordingly at startup.  If the environment variable's value is <b><font color="#0000FF">@samp</font></b><font color="#009900">{t}</font>
<a name="line612"><font color="#000000">0612:</font></a> or <b><font color="#0000FF">@samp</font></b><font color="#009900">{numbered}</font>, then <b><font color="#0000FF">@code</font></b><font color="#009900">{version-control}</font> becomes <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font>; if the
<a name="line613"><font color="#000000">0613:</font></a> value is <b><font color="#0000FF">@samp</font></b><font color="#009900">{nil}</font> or <b><font color="#0000FF">@samp</font></b><font color="#009900">{existing}</font>, then <b><font color="#0000FF">@code</font></b><font color="#009900">{version-control}</font>
<a name="line614"><font color="#000000">0614:</font></a> becomes <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>; if it is <b><font color="#0000FF">@samp</font></b><font color="#009900">{never}</font> or <b><font color="#0000FF">@samp</font></b><font color="#009900">{simple}</font>, then
<a name="line615"><font color="#000000">0615:</font></a> <i><font color="#9A1900">@code{version-control} becomes @code{never}.</font></i>
<a name="line616"><font color="#000000">0616:</font></a> 
<a name="line617"><font color="#000000">0617:</font></a> <b><font color="#0000FF">@vindex</font></b> make-backup-file-name-function
<a name="line618"><font color="#000000">0618:</font></a>   If you set the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{make-backup-file-name-function}</font> to
<a name="line619"><font color="#000000">0619:</font></a> a suitable Lisp function, you can override the usual way Emacs
<a name="line620"><font color="#000000">0620:</font></a> constructs backup file names.
<a name="line621"><font color="#000000">0621:</font></a> 
<a name="line622"><font color="#000000">0622:</font></a> <b><font color="#0000FF">@node</font></b> Backup Deletion
<a name="line623"><font color="#000000">0623:</font></a> <b><font color="#0000FF">@subsubsection</font></b> Automatic Deletion of Backups
<a name="line624"><font color="#000000">0624:</font></a> 
<a name="line625"><font color="#000000">0625:</font></a>   To prevent excessive consumption of disk space, Emacs can delete numbered
<a name="line626"><font color="#000000">0626:</font></a> backup versions automatically.  Generally Emacs keeps the first few backups
<a name="line627"><font color="#000000">0627:</font></a> and the latest few backups, deleting any in between.  This happens every
<a name="line628"><font color="#000000">0628:</font></a> time a new backup is made.
<a name="line629"><font color="#000000">0629:</font></a> 
<a name="line630"><font color="#000000">0630:</font></a> <b><font color="#0000FF">@vindex</font></b> kept-old-versions
<a name="line631"><font color="#000000">0631:</font></a> <b><font color="#0000FF">@vindex</font></b> kept-new-versions
<a name="line632"><font color="#000000">0632:</font></a>   The two variables <b><font color="#0000FF">@code</font></b><font color="#009900">{kept-old-versions}</font> and
<a name="line633"><font color="#000000">0633:</font></a> <i><font color="#9A1900">@code{kept-new-versions} control this deletion.  Their values are,</font></i>
<a name="line634"><font color="#000000">0634:</font></a> respectively, the number of oldest (lowest-numbered) backups to keep
<a name="line635"><font color="#000000">0635:</font></a> and the number of newest (highest-numbered) ones to keep, each time a
<a name="line636"><font color="#000000">0636:</font></a> new backup is made.  The backups in the middle (excluding those oldest
<a name="line637"><font color="#000000">0637:</font></a> and newest) are the excess middle versions---those backups are
<a name="line638"><font color="#000000">0638:</font></a> deleted.  These variables' values are used when it is time to delete
<a name="line639"><font color="#000000">0639:</font></a> excess versions, just after a new backup version is made; the newly
<a name="line640"><font color="#000000">0640:</font></a> made backup is included in the count in <b><font color="#0000FF">@code</font></b><font color="#009900">{kept-new-versions}</font>.  By
<a name="line641"><font color="#000000">0641:</font></a> default, both variables are 2.
<a name="line642"><font color="#000000">0642:</font></a> 
<a name="line643"><font color="#000000">0643:</font></a> <b><font color="#0000FF">@vindex</font></b> delete-old-versions
<a name="line644"><font color="#000000">0644:</font></a>   If <b><font color="#0000FF">@code</font></b><font color="#009900">{delete-old-versions}</font> is <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font>, Emacs deletes the excess
<a name="line645"><font color="#000000">0645:</font></a> backup files silently.  If it is <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>, the default, Emacs asks
<a name="line646"><font color="#000000">0646:</font></a> you whether it should delete the excess backup versions.  If it has
<a name="line647"><font color="#000000">0647:</font></a> any other value, then Emacs never automatically deletes backups.
<a name="line648"><font color="#000000">0648:</font></a> 
<a name="line649"><font color="#000000">0649:</font></a>   Dired's <b><font color="#0000FF">@kbd</font></b><font color="#009900">{.}</font> (Period) command can also be used to delete old versions.
<a name="line650"><font color="#000000">0650:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Flagging Many Files</font><font color="#FF0000">}</font>.
<a name="line651"><font color="#000000">0651:</font></a> 
<a name="line652"><font color="#000000">0652:</font></a> <b><font color="#0000FF">@node</font></b> Backup Copying
<a name="line653"><font color="#000000">0653:</font></a> <b><font color="#0000FF">@subsubsection</font></b> Copying vs.<b><font color="#0000FF">@:</font></b> Renaming
<a name="line654"><font color="#000000">0654:</font></a> 
<a name="line655"><font color="#000000">0655:</font></a>   Backup files can be made by copying the old file or by renaming it.
<a name="line656"><font color="#000000">0656:</font></a> This makes a difference when the old file has multiple names (hard
<a name="line657"><font color="#000000">0657:</font></a> links).  If the old file is renamed into the backup file, then the
<a name="line658"><font color="#000000">0658:</font></a> alternate names become names for the backup file.  If the old file is
<a name="line659"><font color="#000000">0659:</font></a> copied instead, then the alternate names remain names for the file
<a name="line660"><font color="#000000">0660:</font></a> that you are editing, and the contents accessed by those names will be
<a name="line661"><font color="#000000">0661:</font></a> the new contents.
<a name="line662"><font color="#000000">0662:</font></a> 
<a name="line663"><font color="#000000">0663:</font></a>   The method of making a backup file may also affect the file's owner
<a name="line664"><font color="#000000">0664:</font></a> and group.  If copying is used, these do not change.  If renaming is used,
<a name="line665"><font color="#000000">0665:</font></a> you become the file's owner, and the file's group becomes the default
<a name="line666"><font color="#000000">0666:</font></a> (different operating systems have different defaults for the group).
<a name="line667"><font color="#000000">0667:</font></a> 
<a name="line668"><font color="#000000">0668:</font></a> <b><font color="#0000FF">@vindex</font></b> backup-by-copying
<a name="line669"><font color="#000000">0669:</font></a> <b><font color="#0000FF">@vindex</font></b> backup-by-copying-when-linked
<a name="line670"><font color="#000000">0670:</font></a> <b><font color="#0000FF">@vindex</font></b> backup-by-copying-when-mismatch
<a name="line671"><font color="#000000">0671:</font></a> <b><font color="#0000FF">@vindex</font></b> backup-by-copying-when-privileged-mismatch
<a name="line672"><font color="#000000">0672:</font></a> <i><font color="#9A1900">@cindex file ownership, and backup</font></i>
<a name="line673"><font color="#000000">0673:</font></a> <i><font color="#9A1900">@cindex backup, and user-id</font></i>
<a name="line674"><font color="#000000">0674:</font></a>   The choice of renaming or copying is made as follows:
<a name="line675"><font color="#000000">0675:</font></a> 
<a name="line676"><font color="#000000">0676:</font></a> <b><font color="#0000FF">@itemize</font></b>
<a name="line677"><font color="#000000">0677:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line678"><font color="#000000">0678:</font></a> If the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-by-copying}</font> is non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> (the
<a name="line679"><font color="#000000">0679:</font></a> default is <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>), use copying.
<a name="line680"><font color="#000000">0680:</font></a> 
<a name="line681"><font color="#000000">0681:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line682"><font color="#000000">0682:</font></a> Otherwise, if the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-by-copying-when-linked}</font> is
<a name="line683"><font color="#000000">0683:</font></a> non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> (the default is <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>), and the file has multiple
<a name="line684"><font color="#000000">0684:</font></a> names, use copying.
<a name="line685"><font color="#000000">0685:</font></a> 
<a name="line686"><font color="#000000">0686:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line687"><font color="#000000">0687:</font></a> Otherwise, if the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-by-copying-when-mismatch}</font> is
<a name="line688"><font color="#000000">0688:</font></a> non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> (the default is <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font>), and renaming would change
<a name="line689"><font color="#000000">0689:</font></a> the file's owner or group, use copying.
<a name="line690"><font color="#000000">0690:</font></a> 
<a name="line691"><font color="#000000">0691:</font></a> If you change <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-by-copying-when-mismatch}</font> to <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>,
<a name="line692"><font color="#000000">0692:</font></a> Emacs checks the numeric user-id of the file's owner.  If this is
<a name="line693"><font color="#000000">0693:</font></a> higher than <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-by-copying-when-privileged-mismatch}</font>, then it
<a name="line694"><font color="#000000">0694:</font></a> behaves as though <b><font color="#0000FF">@code</font></b><font color="#009900">{backup-by-copying-when-mismatch}</font> is
<a name="line695"><font color="#000000">0695:</font></a> non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> anyway.
<a name="line696"><font color="#000000">0696:</font></a> 
<a name="line697"><font color="#000000">0697:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line698"><font color="#000000">0698:</font></a> Otherwise, renaming is the default choice.
<a name="line699"><font color="#000000">0699:</font></a> <b><font color="#0000FF">@end itemize</font></b>
<a name="line700"><font color="#000000">0700:</font></a> 
<a name="line701"><font color="#000000">0701:</font></a>   When a file is managed with a version control system (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Version</font>
<a name="line702"><font color="#000000">0702:</font></a> <font color="#FF0000">Control</font><font color="#FF0000">}</font>), Emacs does not normally make backups in the usual way for
<a name="line703"><font color="#000000">0703:</font></a> that file.  But <b><font color="#0000FF">@dfn</font></b><font color="#009900">{committing}</font> (a.k.a.<b><font color="#0000FF">@:</font></b> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{checking in}</font>,
<a name="line704"><font color="#000000">0704:</font></a> <b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">VCS Concepts</font><font color="#FF0000">}</font>) new versions of files is similar in some ways
<a name="line705"><font color="#000000">0705:</font></a> to making backups.  One unfortunate similarity is that these
<a name="line706"><font color="#000000">0706:</font></a> operations typically break hard links, disconnecting the file name you
<a name="line707"><font color="#000000">0707:</font></a> visited from any alternate names for the same file.  This has nothing
<a name="line708"><font color="#000000">0708:</font></a> to do with Emacs---the version control system does it.
<a name="line709"><font color="#000000">0709:</font></a> 
<a name="line710"><font color="#000000">0710:</font></a> <b><font color="#0000FF">@node</font></b> Customize Save
<a name="line711"><font color="#000000">0711:</font></a> <b><font color="#0000FF">@subsection</font></b> Customizing Saving of Files
<a name="line712"><font color="#000000">0712:</font></a> 
<a name="line713"><font color="#000000">0713:</font></a> <b><font color="#0000FF">@vindex</font></b> require-final-newline
<a name="line714"><font color="#000000">0714:</font></a>   If the value of the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{require-final-newline}</font> is
<a name="line715"><font color="#000000">0715:</font></a> <i><font color="#9A1900">@code{t}, saving or writing a file silently puts a newline at the end</font></i>
<a name="line716"><font color="#000000">0716:</font></a> if there isn't already one there.  If the value is <b><font color="#0000FF">@code</font></b><font color="#009900">{visit}</font>, Emacs
<a name="line717"><font color="#000000">0717:</font></a> adds a newline at the end of any file that doesn't have one, just
<a name="line718"><font color="#000000">0718:</font></a> after it visits the file.  (This marks the buffer as modified, and you
<a name="line719"><font color="#000000">0719:</font></a> can undo it.)  If the value is <b><font color="#0000FF">@code</font></b><font color="#009900">{visit-save}</font>, Emacs adds such
<a name="line720"><font color="#000000">0720:</font></a> newlines both on visiting and on saving.  If the value is <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>,
<a name="line721"><font color="#000000">0721:</font></a> Emacs leaves the end of the file unchanged; any other non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>
<a name="line722"><font color="#000000">0722:</font></a> value means Emacs asks you whether to add a newline.  The default is
<a name="line723"><font color="#000000">0723:</font></a> <i><font color="#9A1900">@code{nil}.</font></i>
<a name="line724"><font color="#000000">0724:</font></a> 
<a name="line725"><font color="#000000">0725:</font></a> <b><font color="#0000FF">@vindex</font></b> mode-require-final-newline
<a name="line726"><font color="#000000">0726:</font></a>   Some major modes are designed for specific kinds of files that are
<a name="line727"><font color="#000000">0727:</font></a> always supposed to end in newlines.  Such major modes set the variable
<a name="line728"><font color="#000000">0728:</font></a> <i><font color="#9A1900">@code{require-final-newline} to the value of</font></i>
<a name="line729"><font color="#000000">0729:</font></a> <i><font color="#9A1900">@code{mode-require-final-newline}, which defaults to @code{t}.  By</font></i>
<a name="line730"><font color="#000000">0730:</font></a> setting the latter variable, you can control how these modes handle
<a name="line731"><font color="#000000">0731:</font></a> final newlines.
<a name="line732"><font color="#000000">0732:</font></a> 
<a name="line733"><font color="#000000">0733:</font></a> <b><font color="#0000FF">@vindex</font></b> write-region-inhibit-fsync
<a name="line734"><font color="#000000">0734:</font></a>   Normally, when a program writes a file, the operating system briefly
<a name="line735"><font color="#000000">0735:</font></a> caches the file's data in main memory before committing the data to
<a name="line736"><font color="#000000">0736:</font></a> disk.  This can greatly improve performance; for example, when running
<a name="line737"><font color="#000000">0737:</font></a> on laptops, it can avoid a disk spin-up each time a file is written.
<a name="line738"><font color="#000000">0738:</font></a> However, it risks data loss if the operating system crashes before
<a name="line739"><font color="#000000">0739:</font></a> committing the cache to disk.
<a name="line740"><font color="#000000">0740:</font></a> 
<a name="line741"><font color="#000000">0741:</font></a>   To lessen this risk, Emacs can invoke the <b><font color="#0000FF">@code</font></b><font color="#009900">{fsync}</font> system call
<a name="line742"><font color="#000000">0742:</font></a> after saving a file.  Using <b><font color="#0000FF">@code</font></b><font color="#009900">{fsync}</font> does not eliminate the risk
<a name="line743"><font color="#000000">0743:</font></a> of data loss, partly because many systems do not implement
<a name="line744"><font color="#000000">0744:</font></a> <i><font color="#9A1900">@code{fsync} properly, and partly because Emacs's file-saving</font></i>
<a name="line745"><font color="#000000">0745:</font></a> procedure typically relies also on directory updates that might not
<a name="line746"><font color="#000000">0746:</font></a> survive a crash even if <b><font color="#0000FF">@code</font></b><font color="#009900">{fsync}</font> works properly.
<a name="line747"><font color="#000000">0747:</font></a> 
<a name="line748"><font color="#000000">0748:</font></a>   The <b><font color="#0000FF">@code</font></b><font color="#009900">{write-region-inhibit-fsync}</font> variable controls whether
<a name="line749"><font color="#000000">0749:</font></a> Emacs invokes <b><font color="#0000FF">@code</font></b><font color="#009900">{fsync}</font> after saving a file.  The variable's
<a name="line750"><font color="#000000">0750:</font></a> default value is <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> when Emacs is interactive, and <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font>
<a name="line751"><font color="#000000">0751:</font></a> when Emacs runs in batch mode (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Initial Options, Batch Mode</font><font color="#FF0000">}</font>).
<a name="line752"><font color="#000000">0752:</font></a> 
<a name="line753"><font color="#000000">0753:</font></a>   Emacs never uses <b><font color="#0000FF">@code</font></b><font color="#009900">{fsync}</font> when writing auto-save files, as these
<a name="line754"><font color="#000000">0754:</font></a> files might lose data anyway.
<a name="line755"><font color="#000000">0755:</font></a> 
<a name="line756"><font color="#000000">0756:</font></a> <b><font color="#0000FF">@node</font></b> Interlocking
<a name="line757"><font color="#000000">0757:</font></a> <b><font color="#0000FF">@subsection</font></b> Protection against Simultaneous Editing
<a name="line758"><font color="#000000">0758:</font></a> 
<a name="line759"><font color="#000000">0759:</font></a> <i><font color="#9A1900">@cindex file dates</font></i>
<a name="line760"><font color="#000000">0760:</font></a> <i><font color="#9A1900">@cindex simultaneous editing</font></i>
<a name="line761"><font color="#000000">0761:</font></a>   Simultaneous editing occurs when two users visit the same file, both
<a name="line762"><font color="#000000">0762:</font></a> make changes, and then both save them.  If nobody is informed that
<a name="line763"><font color="#000000">0763:</font></a> this is happening, whichever user saves first would later find that
<a name="line764"><font color="#000000">0764:</font></a> their changes were lost.
<a name="line765"><font color="#000000">0765:</font></a> 
<a name="line766"><font color="#000000">0766:</font></a>   On some systems, Emacs notices immediately when the second user starts
<a name="line767"><font color="#000000">0767:</font></a> to change the file, and issues an immediate warning.  On all systems,
<a name="line768"><font color="#000000">0768:</font></a> Emacs checks when you save the file, and warns if you are about to
<a name="line769"><font color="#000000">0769:</font></a> overwrite another user's changes.  You can prevent loss of the other
<a name="line770"><font color="#000000">0770:</font></a> user's work by taking the proper corrective action instead of saving the
<a name="line771"><font color="#000000">0771:</font></a> file.
<a name="line772"><font color="#000000">0772:</font></a> 
<a name="line773"><font color="#000000">0773:</font></a> <b><font color="#0000FF">@findex</font></b> ask-user-about-lock
<a name="line774"><font color="#000000">0774:</font></a> <i><font color="#9A1900">@cindex locking files</font></i>
<a name="line775"><font color="#000000">0775:</font></a> <i><font color="#9A1900">@cindex .#, lock file names</font></i>
<a name="line776"><font color="#000000">0776:</font></a> <i><font color="#9A1900">@cindex file locking</font></i>
<a name="line777"><font color="#000000">0777:</font></a>   When you make the first modification in an Emacs buffer that is
<a name="line778"><font color="#000000">0778:</font></a> visiting a file, Emacs records that the file is <b><font color="#0000FF">@dfn</font></b><font color="#009900">{locked}</font> by you.
<a name="line779"><font color="#000000">0779:</font></a> (It does this by creating a specially-named symbolic link<b><font color="#0000FF">@footnote</font></b><font color="#009900">{If</font>
<a name="line780"><font color="#000000">0780:</font></a> <font color="#009900">your file system does not support symbolic links, a regular file is</font>
<a name="line781"><font color="#000000">0781:</font></a> <font color="#009900">used.}</font> with special contents in the same directory.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">File</font>
<a name="line782"><font color="#000000">0782:</font></a> <font color="#FF0000">Locks,,, elisp</font><font color="#FF0000">}</font>, for more details.)  Emacs removes the lock when you
<a name="line783"><font color="#000000">0783:</font></a> save the changes.  The idea is that the file is locked whenever an
<a name="line784"><font color="#000000">0784:</font></a> Emacs buffer visiting it has unsaved changes.
<a name="line785"><font color="#000000">0785:</font></a> 
<a name="line786"><font color="#000000">0786:</font></a> <b><font color="#0000FF">@vindex</font></b> create-lockfiles
<a name="line787"><font color="#000000">0787:</font></a>   You can prevent the creation of lock files by setting the variable
<a name="line788"><font color="#000000">0788:</font></a> <i><font color="#9A1900">@code{create-lockfiles} to @code{nil}.  @strong{Caution:} by</font></i>
<a name="line789"><font color="#000000">0789:</font></a> doing so you will lose the benefits that this feature provides.
<a name="line790"><font color="#000000">0790:</font></a> 
<a name="line791"><font color="#000000">0791:</font></a> <i><font color="#9A1900">@cindex collision</font></i>
<a name="line792"><font color="#000000">0792:</font></a>   If you begin to modify the buffer while the visited file is locked by
<a name="line793"><font color="#000000">0793:</font></a> someone else, this constitutes a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{collision}</font>.  When Emacs detects a
<a name="line794"><font color="#000000">0794:</font></a> collision, it asks you what to do, by calling the Lisp function
<a name="line795"><font color="#000000">0795:</font></a> <i><font color="#9A1900">@code{ask-user-about-lock}.  You can redefine this function for the sake</font></i>
<a name="line796"><font color="#000000">0796:</font></a> of customization.  The standard definition of this function asks you a
<a name="line797"><font color="#000000">0797:</font></a> question and accepts three possible answers:
<a name="line798"><font color="#000000">0798:</font></a> 
<a name="line799"><font color="#000000">0799:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line800"><font color="#000000">0800:</font></a> <b><font color="#0000FF">@item</font></b> s
<a name="line801"><font color="#000000">0801:</font></a> Steal the lock.  Whoever was already changing the file loses the lock,
<a name="line802"><font color="#000000">0802:</font></a> and you gain the lock.
<a name="line803"><font color="#000000">0803:</font></a> <b><font color="#0000FF">@item</font></b> p
<a name="line804"><font color="#000000">0804:</font></a> Proceed.  Go ahead and edit the file despite its being locked by someone else.
<a name="line805"><font color="#000000">0805:</font></a> <b><font color="#0000FF">@item</font></b> q
<a name="line806"><font color="#000000">0806:</font></a> Quit.  This causes an error (<b><font color="#0000FF">@code</font></b><font color="#009900">{file-locked}</font>), and the buffer
<a name="line807"><font color="#000000">0807:</font></a> contents remain unchanged---the modification you were trying to make
<a name="line808"><font color="#000000">0808:</font></a> does not actually take place.
<a name="line809"><font color="#000000">0809:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line810"><font color="#000000">0810:</font></a> 
<a name="line811"><font color="#000000">0811:</font></a>   If Emacs or the operating system crashes, this may leave behind lock
<a name="line812"><font color="#000000">0812:</font></a> files which are stale, so you may occasionally get warnings about
<a name="line813"><font color="#000000">0813:</font></a> spurious collisions.  When you determine that the collision is
<a name="line814"><font color="#000000">0814:</font></a> spurious, just use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{p}</font> to tell Emacs to go ahead anyway.
<a name="line815"><font color="#000000">0815:</font></a> 
<a name="line816"><font color="#000000">0816:</font></a>   Note that locking works on the basis of a file name; if a file has
<a name="line817"><font color="#000000">0817:</font></a> multiple names, Emacs does not prevent two users from editing it
<a name="line818"><font color="#000000">0818:</font></a> simultaneously under different names.
<a name="line819"><font color="#000000">0819:</font></a> 
<a name="line820"><font color="#000000">0820:</font></a>   A lock file cannot be written in some circumstances, e.g., if Emacs
<a name="line821"><font color="#000000">0821:</font></a> lacks the system permissions or cannot create lock files for some
<a name="line822"><font color="#000000">0822:</font></a> other reason.  In these cases, Emacs can still detect the collision
<a name="line823"><font color="#000000">0823:</font></a> when you try to save a file, by checking the file's last-modification
<a name="line824"><font color="#000000">0824:</font></a> date.  If the file has changed since the last time Emacs visited or
<a name="line825"><font color="#000000">0825:</font></a> saved it, that implies that changes have been made in some other way,
<a name="line826"><font color="#000000">0826:</font></a> and will be lost if Emacs proceeds with saving.  Emacs then displays a
<a name="line827"><font color="#000000">0827:</font></a> warning message and asks for confirmation before saving; answer
<a name="line828"><font color="#000000">0828:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{yes}</font> to save, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{no}</font> or <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-g}</font> cancel the save.
<a name="line829"><font color="#000000">0829:</font></a> 
<a name="line830"><font color="#000000">0830:</font></a>   If you are notified that simultaneous editing has already taken
<a name="line831"><font color="#000000">0831:</font></a> place, one way to compare the buffer to its file is the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line832"><font color="#000000">0832:</font></a> <font color="#009900">diff-buffer-with-file}</font> command.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Comparing Files</font><font color="#FF0000">}</font>.
<a name="line833"><font color="#000000">0833:</font></a> 
<a name="line834"><font color="#000000">0834:</font></a> <b><font color="#0000FF">@node</font></b> File Shadowing
<a name="line835"><font color="#000000">0835:</font></a> <b><font color="#0000FF">@subsection</font></b> Shadowing Files
<a name="line836"><font color="#000000">0836:</font></a> <i><font color="#9A1900">@cindex shadow files</font></i>
<a name="line837"><font color="#000000">0837:</font></a> <i><font color="#9A1900">@cindex file shadows</font></i>
<a name="line838"><font color="#000000">0838:</font></a> <b><font color="#0000FF">@findex</font></b> shadow-initialize
<a name="line839"><font color="#000000">0839:</font></a> 
<a name="line840"><font color="#000000">0840:</font></a>   You can arrange to keep identical <b><font color="#0000FF">@dfn</font></b><font color="#009900">{shadow}</font> copies of certain
<a name="line841"><font color="#000000">0841:</font></a> files in more than one place---possibly on different machines.  To do
<a name="line842"><font color="#000000">0842:</font></a> this, first you must set up a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{shadow file group}</font>, which is a set
<a name="line843"><font color="#000000">0843:</font></a> of identically-named files shared between a list of sites.  The file
<a name="line844"><font color="#000000">0844:</font></a> group is permanent and applies to further Emacs sessions as well as
<a name="line845"><font color="#000000">0845:</font></a> the current one.  Once the group is set up, every time you exit Emacs,
<a name="line846"><font color="#000000">0846:</font></a> it will copy the file you edited to the other files in its group.  You
<a name="line847"><font color="#000000">0847:</font></a> can also do the copying without exiting Emacs, by typing <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x</font>
<a name="line848"><font color="#000000">0848:</font></a> <font color="#009900">shadow-copy-files}}</font>.
<a name="line849"><font color="#000000">0849:</font></a> 
<a name="line850"><font color="#000000">0850:</font></a> <i><font color="#9A1900">@cindex shadow cluster</font></i>
<a name="line851"><font color="#000000">0851:</font></a> A <b><font color="#0000FF">@dfn</font></b><font color="#009900">{shadow cluster}</font> is a group of hosts that share directories, so
<a name="line852"><font color="#000000">0852:</font></a> that copying to or from one of them is sufficient to update the file
<a name="line853"><font color="#000000">0853:</font></a> on all of them.  Each shadow cluster has a name, and specifies the
<a name="line854"><font color="#000000">0854:</font></a> network address of a primary host (the one we copy files to), and a
<a name="line855"><font color="#000000">0855:</font></a> regular expression that matches the host names of all the other hosts
<a name="line856"><font color="#000000">0856:</font></a> in the cluster.  You can define a shadow cluster with <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x</font>
<a name="line857"><font color="#000000">0857:</font></a> <font color="#009900">shadow-define-cluster}}</font>.
<a name="line858"><font color="#000000">0858:</font></a> 
<a name="line859"><font color="#000000">0859:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line860"><font color="#000000">0860:</font></a> <b><font color="#0000FF">@item</font></b> M-x shadow-initialize
<a name="line861"><font color="#000000">0861:</font></a> Set up file shadowing.
<a name="line862"><font color="#000000">0862:</font></a> <b><font color="#0000FF">@item</font></b> M-x shadow-define-literal-group
<a name="line863"><font color="#000000">0863:</font></a> Declare a single file to be shared between sites.
<a name="line864"><font color="#000000">0864:</font></a> <b><font color="#0000FF">@item</font></b> M-x shadow-define-regexp-group
<a name="line865"><font color="#000000">0865:</font></a> Make all files that match each of a group of files be shared between hosts.
<a name="line866"><font color="#000000">0866:</font></a> <b><font color="#0000FF">@item</font></b> M-x shadow-define-cluster <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{name}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line867"><font color="#000000">0867:</font></a> Define a shadow file cluster <b><font color="#0000FF">@var</font></b><font color="#009900">{name}</font>.
<a name="line868"><font color="#000000">0868:</font></a> <b><font color="#0000FF">@item</font></b> M-x shadow-copy-files
<a name="line869"><font color="#000000">0869:</font></a> Copy all pending shadow files.
<a name="line870"><font color="#000000">0870:</font></a> <b><font color="#0000FF">@item</font></b> M-x shadow-cancel
<a name="line871"><font color="#000000">0871:</font></a> Cancel the instruction to shadow some files.
<a name="line872"><font color="#000000">0872:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line873"><font color="#000000">0873:</font></a> 
<a name="line874"><font color="#000000">0874:</font></a> To set up a shadow file group, use <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x</font>
<a name="line875"><font color="#000000">0875:</font></a> <font color="#009900">shadow-define-literal-group}}</font> or <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x</font>
<a name="line876"><font color="#000000">0876:</font></a> <font color="#009900">shadow-define-regexp-group}}</font>.  See their documentation strings for
<a name="line877"><font color="#000000">0877:</font></a> further information.
<a name="line878"><font color="#000000">0878:</font></a> 
<a name="line879"><font color="#000000">0879:</font></a> Before copying a file to its shadows, Emacs asks for confirmation.
<a name="line880"><font color="#000000">0880:</font></a> You can answer ``no'' to bypass copying of this file, this time.  If
<a name="line881"><font color="#000000">0881:</font></a> you want to cancel the shadowing permanently for a certain file, use
<a name="line882"><font color="#000000">0882:</font></a> <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x shadow-cancel}}</font> to eliminate or change the shadow file group.
<a name="line883"><font color="#000000">0883:</font></a> 
<a name="line884"><font color="#000000">0884:</font></a> File Shadowing is not available on MS Windows.
<a name="line885"><font color="#000000">0885:</font></a> 
<a name="line886"><font color="#000000">0886:</font></a> <b><font color="#0000FF">@node</font></b> Time Stamps
<a name="line887"><font color="#000000">0887:</font></a> <b><font color="#0000FF">@subsection</font></b> Updating Time Stamps Automatically
<a name="line888"><font color="#000000">0888:</font></a> <i><font color="#9A1900">@cindex time stamps</font></i>
<a name="line889"><font color="#000000">0889:</font></a> <i><font color="#9A1900">@cindex modification dates</font></i>
<a name="line890"><font color="#000000">0890:</font></a> <i><font color="#9A1900">@cindex locale, date format</font></i>
<a name="line891"><font color="#000000">0891:</font></a> 
<a name="line892"><font color="#000000">0892:</font></a> You can arrange to put a time stamp in a file, so that it is updated
<a name="line893"><font color="#000000">0893:</font></a> automatically each time you edit and save the file.  The time stamp
<a name="line894"><font color="#000000">0894:</font></a> must be in the first eight lines of the file, and you should insert it
<a name="line895"><font color="#000000">0895:</font></a> like this:
<a name="line896"><font color="#000000">0896:</font></a> 
<a name="line897"><font color="#000000">0897:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line898"><font color="#000000">0898:</font></a> Time-stamp: &lt;&gt;
<a name="line899"><font color="#000000">0899:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line900"><font color="#000000">0900:</font></a> 
<a name="line901"><font color="#000000">0901:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line902"><font color="#000000">0902:</font></a> or like this:
<a name="line903"><font color="#000000">0903:</font></a> 
<a name="line904"><font color="#000000">0904:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line905"><font color="#000000">0905:</font></a> Time-stamp: " "
<a name="line906"><font color="#000000">0906:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line907"><font color="#000000">0907:</font></a> 
<a name="line908"><font color="#000000">0908:</font></a> <b><font color="#0000FF">@findex</font></b> time-stamp
<a name="line909"><font color="#000000">0909:</font></a>   Then add the function <b><font color="#0000FF">@code</font></b><font color="#009900">{time-stamp}</font> to the hook
<a name="line910"><font color="#000000">0910:</font></a> <i><font color="#9A1900">@code{before-save-hook} (@pxref{Hooks}).  When you save the file, this</font></i>
<a name="line911"><font color="#000000">0911:</font></a> function then automatically updates the time stamp with the current
<a name="line912"><font color="#000000">0912:</font></a> date and time.  You can also use the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x time-stamp}</font> to
<a name="line913"><font color="#000000">0913:</font></a> update the time stamp manually.  By default the time stamp is
<a name="line914"><font color="#000000">0914:</font></a> formatted according to your locale setting (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Environment</font><font color="#FF0000">}</font>) and
<a name="line915"><font color="#000000">0915:</font></a> time zone (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Time of Day,,, elisp, The Emacs Lisp Reference</font>
<a name="line916"><font color="#000000">0916:</font></a> <font color="#FF0000">Manual</font><font color="#FF0000">}</font>).  For customizations, see the Custom group <b><font color="#0000FF">@code</font></b><font color="#009900">{time-stamp}</font>.
<a name="line917"><font color="#000000">0917:</font></a> 
<a name="line918"><font color="#000000">0918:</font></a> <b><font color="#0000FF">@node</font></b> Reverting
<a name="line919"><font color="#000000">0919:</font></a> <b><font color="#0000FF">@section</font></b> Reverting a Buffer
<a name="line920"><font color="#000000">0920:</font></a> <b><font color="#0000FF">@findex</font></b> revert-buffer
<a name="line921"><font color="#000000">0921:</font></a> <i><font color="#9A1900">@cindex drastic changes</font></i>
<a name="line922"><font color="#000000">0922:</font></a> <i><font color="#9A1900">@cindex reread a file</font></i>
<a name="line923"><font color="#000000">0923:</font></a> 
<a name="line924"><font color="#000000">0924:</font></a>   If you have made extensive changes to a file-visiting buffer and
<a name="line925"><font color="#000000">0925:</font></a> then change your mind, you can <b><font color="#0000FF">@dfn</font></b><font color="#009900">{revert}</font> the changes and go back to
<a name="line926"><font color="#000000">0926:</font></a> the saved version of the file.  To do this, type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line927"><font color="#000000">0927:</font></a> <font color="#009900">revert-buffer}</font>.  Since reverting unintentionally could lose a lot of
<a name="line928"><font color="#000000">0928:</font></a> work, Emacs asks for confirmation first.
<a name="line929"><font color="#000000">0929:</font></a> 
<a name="line930"><font color="#000000">0930:</font></a>   The <b><font color="#0000FF">@code</font></b><font color="#009900">{revert-buffer}</font> command tries to position point in such a
<a name="line931"><font color="#000000">0931:</font></a> way that, if the file was edited only slightly, you will be at
<a name="line932"><font color="#000000">0932:</font></a> approximately the same part of the text as before.  But if you have
<a name="line933"><font color="#000000">0933:</font></a> made major changes, point may end up in a totally different location.
<a name="line934"><font color="#000000">0934:</font></a> 
<a name="line935"><font color="#000000">0935:</font></a>   Reverting marks the buffer as not modified.  It also clears the
<a name="line936"><font color="#000000">0936:</font></a> buffer's undo history (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Undo</font><font color="#FF0000">}</font>).  Thus, the reversion cannot be
<a name="line937"><font color="#000000">0937:</font></a> undone---if you change your mind yet again, you can't use the undo
<a name="line938"><font color="#000000">0938:</font></a> commands to bring the reverted changes back.
<a name="line939"><font color="#000000">0939:</font></a> 
<a name="line940"><font color="#000000">0940:</font></a>   Some kinds of buffers that are not associated with files, such as
<a name="line941"><font color="#000000">0941:</font></a> Dired buffers, can also be reverted.  For them, reverting means
<a name="line942"><font color="#000000">0942:</font></a> recalculating their contents.  Buffers created explicitly with
<a name="line943"><font color="#000000">0943:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x b}</font> cannot be reverted; <b><font color="#0000FF">@code</font></b><font color="#009900">{revert-buffer}</font> reports an error
<a name="line944"><font color="#000000">0944:</font></a> if you try.
<a name="line945"><font color="#000000">0945:</font></a> 
<a name="line946"><font color="#000000">0946:</font></a> <b><font color="#0000FF">@vindex</font></b> revert-without-query
<a name="line947"><font color="#000000">0947:</font></a>   When you edit a file that changes automatically and frequently---for
<a name="line948"><font color="#000000">0948:</font></a> example, a log of output from a process that continues to run---it may
<a name="line949"><font color="#000000">0949:</font></a> be useful for Emacs to revert the file without querying you.  To
<a name="line950"><font color="#000000">0950:</font></a> request this behavior, set the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{revert-without-query}</font> to
<a name="line951"><font color="#000000">0951:</font></a> a list of regular expressions.  When a file name matches one of these
<a name="line952"><font color="#000000">0952:</font></a> regular expressions, <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file}</font> and <b><font color="#0000FF">@code</font></b><font color="#009900">{revert-buffer}</font> will
<a name="line953"><font color="#000000">0953:</font></a> revert it automatically if it has changed---provided the buffer itself
<a name="line954"><font color="#000000">0954:</font></a> is not modified.  (If you have edited the text, it would be wrong to
<a name="line955"><font color="#000000">0955:</font></a> discard your changes.)
<a name="line956"><font color="#000000">0956:</font></a> 
<a name="line957"><font color="#000000">0957:</font></a> <i><font color="#9A1900">@cindex Global Auto Revert mode</font></i>
<a name="line958"><font color="#000000">0958:</font></a> <i><font color="#9A1900">@cindex mode, Global Auto Revert</font></i>
<a name="line959"><font color="#000000">0959:</font></a> <i><font color="#9A1900">@cindex Auto Revert mode</font></i>
<a name="line960"><font color="#000000">0960:</font></a> <i><font color="#9A1900">@cindex mode, Auto Revert</font></i>
<a name="line961"><font color="#000000">0961:</font></a> <b><font color="#0000FF">@findex</font></b> global-auto-revert-mode
<a name="line962"><font color="#000000">0962:</font></a> <b><font color="#0000FF">@findex</font></b> auto-revert-mode
<a name="line963"><font color="#000000">0963:</font></a> <b><font color="#0000FF">@findex</font></b> auto-revert-tail-mode
<a name="line964"><font color="#000000">0964:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-revert-interval
<a name="line965"><font color="#000000">0965:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-revert-remote-files
<a name="line966"><font color="#000000">0966:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-revert-verbose
<a name="line967"><font color="#000000">0967:</font></a>   You can also tell Emacs to revert buffers periodically.  To do this
<a name="line968"><font color="#000000">0968:</font></a> for a specific buffer, enable the minor mode Auto-Revert mode by
<a name="line969"><font color="#000000">0969:</font></a> typing <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x auto-revert-mode}</font>.  This automatically reverts the
<a name="line970"><font color="#000000">0970:</font></a> current buffer when its visited file changes on disk.  To do the same
<a name="line971"><font color="#000000">0971:</font></a> for all file buffers, type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x global-auto-revert-mode}</font> to enable
<a name="line972"><font color="#000000">0972:</font></a> Global Auto-Revert mode.  These minor modes do not check or revert
<a name="line973"><font color="#000000">0973:</font></a> remote files, because that is usually too slow.  This behavior can be
<a name="line974"><font color="#000000">0974:</font></a> changed by setting the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-revert-remote-files}</font> to
<a name="line975"><font color="#000000">0975:</font></a> non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>.
<a name="line976"><font color="#000000">0976:</font></a> 
<a name="line977"><font color="#000000">0977:</font></a> <i><font color="#9A1900">@cindex file notifications</font></i>
<a name="line978"><font color="#000000">0978:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-revert-use-notify
<a name="line979"><font color="#000000">0979:</font></a>   By default, Auto-Revert mode works using <b><font color="#0000FF">@dfn</font></b><font color="#009900">{file notifications}</font>,
<a name="line980"><font color="#000000">0980:</font></a> whereby changes in the filesystem are reported to Emacs by the OS.
<a name="line981"><font color="#000000">0981:</font></a> You can disable use of file notifications by customizing the variable
<a name="line982"><font color="#000000">0982:</font></a> <i><font color="#9A1900">@code{auto-revert-use-notify} to a @code{nil} value, then Emacs will</font></i>
<a name="line983"><font color="#000000">0983:</font></a> check for file changes by polling every five seconds.  You can change
<a name="line984"><font color="#000000">0984:</font></a> the polling interval through the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-revert-interval}</font>.
<a name="line985"><font color="#000000">0985:</font></a> 
<a name="line986"><font color="#000000">0986:</font></a>   Not all systems support file notifications; where they are not
<a name="line987"><font color="#000000">0987:</font></a> supported, <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-revert-use-notify}</font> will be <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> by
<a name="line988"><font color="#000000">0988:</font></a> default.
<a name="line989"><font color="#000000">0989:</font></a> 
<a name="line990"><font color="#000000">0990:</font></a>   One use of Auto-Revert mode is to ``tail'' a file such as a system
<a name="line991"><font color="#000000">0991:</font></a> log, so that changes made to that file by other programs are
<a name="line992"><font color="#000000">0992:</font></a> continuously displayed.  To do this, just move the point to the end of
<a name="line993"><font color="#000000">0993:</font></a> the buffer, and it will stay there as the file contents change.
<a name="line994"><font color="#000000">0994:</font></a> However, if you are sure that the file will only change by growing at
<a name="line995"><font color="#000000">0995:</font></a> the end, use Auto-Revert Tail mode instead
<a name="line996"><font color="#000000">0996:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{auto-revert-tail-mode}</font>).  It is more efficient for this.
<a name="line997"><font color="#000000">0997:</font></a> Auto-Revert Tail mode works also for remote files.
<a name="line998"><font color="#000000">0998:</font></a> 
<a name="line999"><font color="#000000">0999:</font></a>   When a buffer is auto-reverted, a message is generated.  This can be
<a name="line1000"><font color="#000000">1000:</font></a> suppressed by setting <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-revert-verbose}</font> to <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>.
<a name="line1001"><font color="#000000">1001:</font></a> 
<a name="line1002"><font color="#000000">1002:</font></a>   In Dired buffers (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dired</font><font color="#FF0000">}</font>), Auto-Revert mode refreshes the
<a name="line1003"><font color="#000000">1003:</font></a> buffer when a file is created or deleted in the buffer's directory.
<a name="line1004"><font color="#000000">1004:</font></a> 
<a name="line1005"><font color="#000000">1005:</font></a>   <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">VC Undo</font><font color="#FF0000">}</font>, for commands to revert to earlier versions of files
<a name="line1006"><font color="#000000">1006:</font></a> under version control.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">VC Mode Line</font><font color="#FF0000">}</font>, for Auto Revert
<a name="line1007"><font color="#000000">1007:</font></a> peculiarities when visiting files under version control.
<a name="line1008"><font color="#000000">1008:</font></a> 
<a name="line1009"><font color="#000000">1009:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line1010"><font color="#000000">1010:</font></a> <b><font color="#000080">@include</font></b> arevert-xtra.texi
<a name="line1011"><font color="#000000">1011:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line1012"><font color="#000000">1012:</font></a> 
<a name="line1013"><font color="#000000">1013:</font></a> <b><font color="#0000FF">@node</font></b> Auto Save
<a name="line1014"><font color="#000000">1014:</font></a> <b><font color="#0000FF">@section</font></b> Auto-Saving: Protection Against Disasters
<a name="line1015"><font color="#000000">1015:</font></a> <i><font color="#9A1900">@cindex Auto Save mode</font></i>
<a name="line1016"><font color="#000000">1016:</font></a> <i><font color="#9A1900">@cindex mode, Auto Save</font></i>
<a name="line1017"><font color="#000000">1017:</font></a> <i><font color="#9A1900">@cindex crashes</font></i>
<a name="line1018"><font color="#000000">1018:</font></a> 
<a name="line1019"><font color="#000000">1019:</font></a>   From time to time, Emacs automatically saves each visited file in a
<a name="line1020"><font color="#000000">1020:</font></a> separate file, without altering the file you actually use.  This is
<a name="line1021"><font color="#000000">1021:</font></a> called <b><font color="#0000FF">@dfn</font></b><font color="#009900">{auto-saving}</font>.  It prevents you from losing more than a
<a name="line1022"><font color="#000000">1022:</font></a> limited amount of work if the system crashes.
<a name="line1023"><font color="#000000">1023:</font></a> 
<a name="line1024"><font color="#000000">1024:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-no-message
<a name="line1025"><font color="#000000">1025:</font></a>   When Emacs determines that it is time for auto-saving, it considers
<a name="line1026"><font color="#000000">1026:</font></a> each buffer, and each is auto-saved if auto-saving is enabled for it
<a name="line1027"><font color="#000000">1027:</font></a> and it has been changed since the last time it was auto-saved.  When
<a name="line1028"><font color="#000000">1028:</font></a> the <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-no-message}</font> variable is set to <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> (the
<a name="line1029"><font color="#000000">1029:</font></a> default), the message <b><font color="#0000FF">@samp</font></b><font color="#009900">{Auto-saving...}</font> is displayed in the echo
<a name="line1030"><font color="#000000">1030:</font></a> area during auto-saving, if any files are actually auto-saved; to
<a name="line1031"><font color="#000000">1031:</font></a> disable these messages, customize the variable to a non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>
<a name="line1032"><font color="#000000">1032:</font></a> value.  Errors occurring during auto-saving are caught so that they do
<a name="line1033"><font color="#000000">1033:</font></a> not interfere with the execution of commands you have been typing.
<a name="line1034"><font color="#000000">1034:</font></a> 
<a name="line1035"><font color="#000000">1035:</font></a> <b><font color="#000080">@menu</font></b>
<a name="line1036"><font color="#000000">1036:</font></a> * Files: Auto Save Files.       The file where auto-saved changes are
<a name="line1037"><font color="#000000">1037:</font></a>                                   actually made until you save the file.
<a name="line1038"><font color="#000000">1038:</font></a> * Control: Auto Save Control.   Controlling when and how often to auto-save.
<a name="line1039"><font color="#000000">1039:</font></a> <font color="#FF0000">* Recover::</font>                     Recovering text from auto-save files.
<a name="line1040"><font color="#000000">1040:</font></a> <b><font color="#000080">@end menu</font></b>
<a name="line1041"><font color="#000000">1041:</font></a> 
<a name="line1042"><font color="#000000">1042:</font></a> <b><font color="#0000FF">@node</font></b> Auto Save Files
<a name="line1043"><font color="#000000">1043:</font></a> <b><font color="#0000FF">@subsection</font></b> Auto-Save Files
<a name="line1044"><font color="#000000">1044:</font></a> 
<a name="line1045"><font color="#000000">1045:</font></a>   Auto-saving does not normally save in the files that you visited,
<a name="line1046"><font color="#000000">1046:</font></a> because it can be very undesirable to save a change that you did not
<a name="line1047"><font color="#000000">1047:</font></a> want to make permanent.  Instead, auto-saving is done in a different
<a name="line1048"><font color="#000000">1048:</font></a> file called the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{auto-save file}</font>, and the visited file is changed
<a name="line1049"><font color="#000000">1049:</font></a> only when you request saving explicitly (such as with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font>).
<a name="line1050"><font color="#000000">1050:</font></a> 
<a name="line1051"><font color="#000000">1051:</font></a>   Normally, the auto-save file name is made by appending <b><font color="#0000FF">@samp</font></b><font color="#009900">{#}</font> to the
<a name="line1052"><font color="#000000">1052:</font></a> front and rear of the visited file name.  Thus, a buffer visiting file
<a name="line1053"><font color="#000000">1053:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{foo.c}</font> is auto-saved in a file <b><font color="#0000FF">@file</font></b><font color="#009900">{#foo.c#}</font>.  Most buffers that
<a name="line1054"><font color="#000000">1054:</font></a> are not visiting files are auto-saved only if you request it explicitly;
<a name="line1055"><font color="#000000">1055:</font></a> when they are auto-saved, the auto-save file name is made by appending
<a name="line1056"><font color="#000000">1056:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{#}</font> to the front and rear of buffer name, then
<a name="line1057"><font color="#000000">1057:</font></a> adding digits and letters at the end for uniqueness.  For
<a name="line1058"><font color="#000000">1058:</font></a> example, the <b><font color="#0000FF">@file</font></b><font color="#009900">{*mail*}</font> buffer in which you compose messages to be
<a name="line1059"><font color="#000000">1059:</font></a> sent might be auto-saved in a file named <b><font color="#0000FF">@file</font></b><font color="#009900">{#*mail*#704juu}</font>.  Auto-save file
<a name="line1060"><font color="#000000">1060:</font></a> names are made this way unless you reprogram parts of Emacs to do
<a name="line1061"><font color="#000000">1061:</font></a> something different (the functions <b><font color="#0000FF">@code</font></b><font color="#009900">{make-auto-save-file-name}</font> and
<a name="line1062"><font color="#000000">1062:</font></a> <i><font color="#9A1900">@code{auto-save-file-name-p}).  The file name to be used for auto-saving</font></i>
<a name="line1063"><font color="#000000">1063:</font></a> in a buffer is calculated when auto-saving is turned on in that buffer.
<a name="line1064"><font color="#000000">1064:</font></a> 
<a name="line1065"><font color="#000000">1065:</font></a> <i><font color="#9A1900">@cindex auto-save for remote files</font></i>
<a name="line1066"><font color="#000000">1066:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-file-name-transforms
<a name="line1067"><font color="#000000">1067:</font></a>   The variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-file-name-transforms}</font> allows a degree
<a name="line1068"><font color="#000000">1068:</font></a> of control over the auto-save file name.  It lets you specify a series
<a name="line1069"><font color="#000000">1069:</font></a> of regular expressions and replacements to transform the auto save
<a name="line1070"><font color="#000000">1070:</font></a> file name.  The default value puts the auto-save files for remote
<a name="line1071"><font color="#000000">1071:</font></a> files (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Remote Files</font><font color="#FF0000">}</font>) into the temporary file directory on the
<a name="line1072"><font color="#000000">1072:</font></a> local machine.
<a name="line1073"><font color="#000000">1073:</font></a> 
<a name="line1074"><font color="#000000">1074:</font></a>   When you delete a substantial part of the text in a large buffer, auto
<a name="line1075"><font color="#000000">1075:</font></a> save turns off temporarily in that buffer.  This is because if you
<a name="line1076"><font color="#000000">1076:</font></a> deleted the text unintentionally, you might find the auto-save file more
<a name="line1077"><font color="#000000">1077:</font></a> useful if it contains the deleted text.  To reenable auto-saving after
<a name="line1078"><font color="#000000">1078:</font></a> this happens, save the buffer with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font>, or use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u 1 M-x</font>
<a name="line1079"><font color="#000000">1079:</font></a> <font color="#009900">auto-save-mode}</font>.
<a name="line1080"><font color="#000000">1080:</font></a> 
<a name="line1081"><font color="#000000">1081:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-visited-mode
<a name="line1082"><font color="#000000">1082:</font></a>   If you want auto-saving to be done in the visited file rather than
<a name="line1083"><font color="#000000">1083:</font></a> in a separate auto-save file, enable the global minor mode
<a name="line1084"><font color="#000000">1084:</font></a> <i><font color="#9A1900">@code{auto-save-visited-mode}.  In this mode, auto-saving is identical</font></i>
<a name="line1085"><font color="#000000">1085:</font></a> to explicit saving.  Note that this mode is orthogonal to the
<a name="line1086"><font color="#000000">1086:</font></a> <i><font color="#9A1900">@code{auto-save} mode described above; you can enable both at the same</font></i>
<a name="line1087"><font color="#000000">1087:</font></a> time.  However, if <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save}</font> mode is active in some buffer and
<a name="line1088"><font color="#000000">1088:</font></a> the obsolete <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-visited-file-name}</font> variable is set to a
<a name="line1089"><font color="#000000">1089:</font></a> non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> value, that buffer won't be affected by
<a name="line1090"><font color="#000000">1090:</font></a> <i><font color="#9A1900">@code{auto-save-visited-mode}.</font></i>
<a name="line1091"><font color="#000000">1091:</font></a> 
<a name="line1092"><font color="#000000">1092:</font></a>   You can use the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-visited-interval}</font> to
<a name="line1093"><font color="#000000">1093:</font></a> customize the interval between auto-save operations in
<a name="line1094"><font color="#000000">1094:</font></a> <i><font color="#9A1900">@code{auto-save-visited-mode}; by default it's five seconds.</font></i>
<a name="line1095"><font color="#000000">1095:</font></a> <i><font color="#9A1900">@code{auto-save-interval} and @code{auto-save-timeout} have no effect</font></i>
<a name="line1096"><font color="#000000">1096:</font></a> on <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-visited-mode}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Auto Save Control</font><font color="#FF0000">}</font>, for
<a name="line1097"><font color="#000000">1097:</font></a> details on these variables.
<a name="line1098"><font color="#000000">1098:</font></a> 
<a name="line1099"><font color="#000000">1099:</font></a> <b><font color="#0000FF">@vindex</font></b> delete-auto-save-files
<a name="line1100"><font color="#000000">1100:</font></a>   A buffer's auto-save file is deleted when you save the buffer in its
<a name="line1101"><font color="#000000">1101:</font></a> visited file.  (You can inhibit this by setting the variable
<a name="line1102"><font color="#000000">1102:</font></a> <i><font color="#9A1900">@code{delete-auto-save-files} to @code{nil}.)  Changing the visited</font></i>
<a name="line1103"><font color="#000000">1103:</font></a> file name with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-w}</font> or <b><font color="#0000FF">@code</font></b><font color="#009900">{set-visited-file-name}</font> renames
<a name="line1104"><font color="#000000">1104:</font></a> any auto-save file to go with the new visited name.
<a name="line1105"><font color="#000000">1105:</font></a> 
<a name="line1106"><font color="#000000">1106:</font></a> <b><font color="#0000FF">@node</font></b> Auto Save Control
<a name="line1107"><font color="#000000">1107:</font></a> <b><font color="#0000FF">@subsection</font></b> Controlling Auto-Saving
<a name="line1108"><font color="#000000">1108:</font></a> 
<a name="line1109"><font color="#000000">1109:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-default
<a name="line1110"><font color="#000000">1110:</font></a> <b><font color="#0000FF">@findex</font></b> auto-save-mode
<a name="line1111"><font color="#000000">1111:</font></a>   Each time you visit a file, auto-saving is turned on for that file's
<a name="line1112"><font color="#000000">1112:</font></a> buffer if the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-default}</font> is non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> (but
<a name="line1113"><font color="#000000">1113:</font></a> not in batch mode; <b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Initial Options</font><font color="#FF0000">}</font>).  The default for this
<a name="line1114"><font color="#000000">1114:</font></a> variable is <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font>, so auto-saving is the usual practice for
<a name="line1115"><font color="#000000">1115:</font></a> file-visiting buffers.  To toggle auto-saving in the current buffer,
<a name="line1116"><font color="#000000">1116:</font></a> type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x auto-save-mode}</font>.  Auto Save mode acts as a buffer-local
<a name="line1117"><font color="#000000">1117:</font></a> minor mode (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Minor Modes</font><font color="#FF0000">}</font>).
<a name="line1118"><font color="#000000">1118:</font></a> 
<a name="line1119"><font color="#000000">1119:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-interval
<a name="line1120"><font color="#000000">1120:</font></a>   Emacs auto-saves periodically based on how many characters you have
<a name="line1121"><font color="#000000">1121:</font></a> typed since the last auto-save.  The variable
<a name="line1122"><font color="#000000">1122:</font></a> <i><font color="#9A1900">@code{auto-save-interval} specifies how many characters there are</font></i>
<a name="line1123"><font color="#000000">1123:</font></a> between auto-saves.  By default, it is 300.  Emacs doesn't accept
<a name="line1124"><font color="#000000">1124:</font></a> values that are too small: if you customize <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-interval}</font>
<a name="line1125"><font color="#000000">1125:</font></a> to a value less than 20, Emacs will behave as if the value is 20.
<a name="line1126"><font color="#000000">1126:</font></a> 
<a name="line1127"><font color="#000000">1127:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-timeout
<a name="line1128"><font color="#000000">1128:</font></a>   Auto-saving also takes place when you stop typing for a while.  By
<a name="line1129"><font color="#000000">1129:</font></a> default, it does this after 30 seconds of idleness (at this time,
<a name="line1130"><font color="#000000">1130:</font></a> Emacs may also perform garbage collection; <b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Garbage</font>
<a name="line1131"><font color="#000000">1131:</font></a> <font color="#FF0000">Collection,,, elisp, The Emacs Lisp Reference Manual</font><font color="#FF0000">}</font>).  To change
<a name="line1132"><font color="#000000">1132:</font></a> this interval, customize the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-timeout}</font>.  The
<a name="line1133"><font color="#000000">1133:</font></a> actual time period is longer if the current buffer is long; this is a
<a name="line1134"><font color="#000000">1134:</font></a> heuristic which aims to keep out of your way when you are editing long
<a name="line1135"><font color="#000000">1135:</font></a> buffers, in which auto-save takes an appreciable amount of time.
<a name="line1136"><font color="#000000">1136:</font></a> Auto-saving during idle periods accomplishes two things: first, it
<a name="line1137"><font color="#000000">1137:</font></a> makes sure all your work is saved if you go away from the terminal for
<a name="line1138"><font color="#000000">1138:</font></a> a while; second, it may avoid some auto-saving while you are actually
<a name="line1139"><font color="#000000">1139:</font></a> typing.
<a name="line1140"><font color="#000000">1140:</font></a> 
<a name="line1141"><font color="#000000">1141:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-visited-interval
<a name="line1142"><font color="#000000">1142:</font></a>   When <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-visited-mode}</font> is enabled, Emacs will auto-save
<a name="line1143"><font color="#000000">1143:</font></a> file-visiting buffers after five seconds of idle time.  You can
<a name="line1144"><font color="#000000">1144:</font></a> customize the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-visited-interval}</font> to change the
<a name="line1145"><font color="#000000">1145:</font></a> idle time interval.
<a name="line1146"><font color="#000000">1146:</font></a> 
<a name="line1147"><font color="#000000">1147:</font></a>   Emacs also does auto-saving whenever it gets a fatal error.  This
<a name="line1148"><font color="#000000">1148:</font></a> includes killing the Emacs job with a shell command such as <b><font color="#0000FF">@samp</font></b><font color="#009900">{kill</font>
<a name="line1149"><font color="#000000">1149:</font></a> <font color="#009900">%emacs}</font>, or disconnecting a phone line or network connection.
<a name="line1150"><font color="#000000">1150:</font></a> 
<a name="line1151"><font color="#000000">1151:</font></a> <b><font color="#0000FF">@findex</font></b> do-auto-save
<a name="line1152"><font color="#000000">1152:</font></a>   You can perform an auto-save explicitly with the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line1153"><font color="#000000">1153:</font></a> <font color="#009900">do-auto-save}</font>.
<a name="line1154"><font color="#000000">1154:</font></a> 
<a name="line1155"><font color="#000000">1155:</font></a> <b><font color="#0000FF">@node</font></b> Recover
<a name="line1156"><font color="#000000">1156:</font></a> <b><font color="#0000FF">@subsection</font></b> Recovering Data from Auto-Saves
<a name="line1157"><font color="#000000">1157:</font></a> 
<a name="line1158"><font color="#000000">1158:</font></a> <b><font color="#0000FF">@findex</font></b> recover-file
<a name="line1159"><font color="#000000">1159:</font></a>   You can use the contents of an auto-save file to recover from a loss
<a name="line1160"><font color="#000000">1160:</font></a> of data with the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x recover-file @key{RET} @var{file}</font>
<a name="line1161"><font color="#000000">1161:</font></a> <font color="#009900">@key{RET}}</font>.  This visits <b><font color="#0000FF">@var</font></b><font color="#009900">{file}</font> and then (after your confirmation)
<a name="line1162"><font color="#000000">1162:</font></a> restores the contents from its auto-save file <b><font color="#0000FF">@file</font></b><font color="#009900">{#@var{file}#}</font>.
<a name="line1163"><font color="#000000">1163:</font></a> You can then save with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font> to put the recovered text into
<a name="line1164"><font color="#000000">1164:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{file}</font> itself.  For example, to recover file <b><font color="#0000FF">@file</font></b><font color="#009900">{foo.c}</font> from its
<a name="line1165"><font color="#000000">1165:</font></a> auto-save file <b><font color="#0000FF">@file</font></b><font color="#009900">{#foo.c#}</font>, do:
<a name="line1166"><font color="#000000">1166:</font></a> 
<a name="line1167"><font color="#000000">1167:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line1168"><font color="#000000">1168:</font></a> M-x recover-file <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> foo.c <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1169"><font color="#000000">1169:</font></a> yes <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1170"><font color="#000000">1170:</font></a> C-x C-s
<a name="line1171"><font color="#000000">1171:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line1172"><font color="#000000">1172:</font></a> 
<a name="line1173"><font color="#000000">1173:</font></a>   Before asking for confirmation, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x recover-file}</font> displays a
<a name="line1174"><font color="#000000">1174:</font></a> directory listing describing the specified file and the auto-save file,
<a name="line1175"><font color="#000000">1175:</font></a> so you can compare their sizes and dates.  If the auto-save file
<a name="line1176"><font color="#000000">1176:</font></a> is older, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x recover-file}</font> does not offer to read it.
<a name="line1177"><font color="#000000">1177:</font></a> 
<a name="line1178"><font color="#000000">1178:</font></a> <b><font color="#0000FF">@findex</font></b> recover-session
<a name="line1179"><font color="#000000">1179:</font></a>   If Emacs or the computer crashes, you can recover all the files you
<a name="line1180"><font color="#000000">1180:</font></a> were editing from their auto save files with the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line1181"><font color="#000000">1181:</font></a> <font color="#009900">recover-session}</font>.  This first shows you a list of recorded interrupted
<a name="line1182"><font color="#000000">1182:</font></a> sessions.  Move point to the one you choose, and type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-c}</font>.
<a name="line1183"><font color="#000000">1183:</font></a> 
<a name="line1184"><font color="#000000">1184:</font></a>   Then <b><font color="#0000FF">@code</font></b><font color="#009900">{recover-session}</font> asks about each of the files that were
<a name="line1185"><font color="#000000">1185:</font></a> being edited during that session, asking whether to recover that file.
<a name="line1186"><font color="#000000">1186:</font></a> If you answer <b><font color="#0000FF">@kbd</font></b><font color="#009900">{y}</font>, it calls <b><font color="#0000FF">@code</font></b><font color="#009900">{recover-file}</font>, which works in its
<a name="line1187"><font color="#000000">1187:</font></a> normal fashion.  It shows the dates of the original file and its
<a name="line1188"><font color="#000000">1188:</font></a> auto-save file, and asks once again whether to recover that file.
<a name="line1189"><font color="#000000">1189:</font></a> 
<a name="line1190"><font color="#000000">1190:</font></a>   When <b><font color="#0000FF">@code</font></b><font color="#009900">{recover-session}</font> is done, the files you've chosen to
<a name="line1191"><font color="#000000">1191:</font></a> recover are present in Emacs buffers.  You should then save them.  Only
<a name="line1192"><font color="#000000">1192:</font></a> this---saving them---updates the files themselves.
<a name="line1193"><font color="#000000">1193:</font></a> 
<a name="line1194"><font color="#000000">1194:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-save-list-file-prefix
<a name="line1195"><font color="#000000">1195:</font></a>   Emacs records information about interrupted sessions in files named
<a name="line1196"><font color="#000000">1196:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{.saves-@var{pid}-@var{hostname}~}</font> in the directory
<a name="line1197"><font color="#000000">1197:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{~/.emacs.d/auto-save-list/}</font>.  This directory is determined by
<a name="line1198"><font color="#000000">1198:</font></a> the variable <b><font color="#0000FF">@code{auto-save-list-file-pref</font></b><font color="#FF0000">ix</font><font color="#FF0000">}</font>.  If you set
<a name="line1199"><font color="#000000">1199:</font></a> <i><font color="#9A1900">@code{auto-save-list-file-prefix} to @code{nil}, sessions are not</font></i>
<a name="line1200"><font color="#000000">1200:</font></a> recorded for recovery.
<a name="line1201"><font color="#000000">1201:</font></a> 
<a name="line1202"><font color="#000000">1202:</font></a> <b><font color="#0000FF">@node</font></b> File Aliases
<a name="line1203"><font color="#000000">1203:</font></a> <b><font color="#0000FF">@section</font></b> File Name Aliases
<a name="line1204"><font color="#000000">1204:</font></a> <i><font color="#9A1900">@cindex symbolic links (visiting)</font></i>
<a name="line1205"><font color="#000000">1205:</font></a> <i><font color="#9A1900">@cindex hard links (visiting)</font></i>
<a name="line1206"><font color="#000000">1206:</font></a> 
<a name="line1207"><font color="#000000">1207:</font></a>   Symbolic links and hard links both make it possible for several file
<a name="line1208"><font color="#000000">1208:</font></a> names to refer to the same file.  Hard links are alternate names that
<a name="line1209"><font color="#000000">1209:</font></a> refer directly to the file; all the names are equally valid, and no one
<a name="line1210"><font color="#000000">1210:</font></a> of them is preferred.  By contrast, a symbolic link is a kind of defined
<a name="line1211"><font color="#000000">1211:</font></a> alias: when <b><font color="#0000FF">@file</font></b><font color="#009900">{foo}</font> is a symbolic link to <b><font color="#0000FF">@file</font></b><font color="#009900">{bar}</font>, you can use
<a name="line1212"><font color="#000000">1212:</font></a> either name to refer to the file, but <b><font color="#0000FF">@file</font></b><font color="#009900">{bar}</font> is the real name, while
<a name="line1213"><font color="#000000">1213:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{foo}</font> is just an alias.  More complex cases occur when symbolic
<a name="line1214"><font color="#000000">1214:</font></a> links point to directories.
<a name="line1215"><font color="#000000">1215:</font></a> 
<a name="line1216"><font color="#000000">1216:</font></a> <b><font color="#0000FF">@vindex</font></b> find-file-existing-other-name
<a name="line1217"><font color="#000000">1217:</font></a> <b><font color="#0000FF">@vindex</font></b> find-file-suppress-same-file-warnings
<a name="line1218"><font color="#000000">1218:</font></a>   Normally, if you visit a file which Emacs is already visiting under
<a name="line1219"><font color="#000000">1219:</font></a> a different name, Emacs displays a message in the echo area and uses
<a name="line1220"><font color="#000000">1220:</font></a> the existing buffer visiting that file.  This can happen on systems
<a name="line1221"><font color="#000000">1221:</font></a> that support hard or symbolic links, or if you use a long file name on
<a name="line1222"><font color="#000000">1222:</font></a> a system that truncates long file names, or on a case-insensitive file
<a name="line1223"><font color="#000000">1223:</font></a> system.  You can suppress the message by setting the variable
<a name="line1224"><font color="#000000">1224:</font></a> <i><font color="#9A1900">@code{find-file-suppress-same-file-warnings} to a non-@code{nil}</font></i>
<a name="line1225"><font color="#000000">1225:</font></a> value.  You can disable this feature entirely by setting the variable
<a name="line1226"><font color="#000000">1226:</font></a> <i><font color="#9A1900">@code{find-file-existing-other-name} to @code{nil}: then if you visit</font></i>
<a name="line1227"><font color="#000000">1227:</font></a> the same file under two different names, you get a separate buffer for
<a name="line1228"><font color="#000000">1228:</font></a> each file name.
<a name="line1229"><font color="#000000">1229:</font></a> 
<a name="line1230"><font color="#000000">1230:</font></a> <b><font color="#0000FF">@vindex</font></b> find-file-visit-truename
<a name="line1231"><font color="#000000">1231:</font></a> <i><font color="#9A1900">@cindex truenames of files</font></i>
<a name="line1232"><font color="#000000">1232:</font></a> <i><font color="#9A1900">@cindex file truenames</font></i>
<a name="line1233"><font color="#000000">1233:</font></a>   If the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-visit-truename}</font> is non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>,
<a name="line1234"><font color="#000000">1234:</font></a> then the file name recorded for a buffer is the file's <b><font color="#0000FF">@dfn</font></b><font color="#009900">{truename}</font>
<a name="line1235"><font color="#000000">1235:</font></a> (made by replacing all symbolic links with their target names), rather
<a name="line1236"><font color="#000000">1236:</font></a> than the name you specify.  Setting <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-visit-truename}</font> also
<a name="line1237"><font color="#000000">1237:</font></a> implies the effect of <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file-existing-other-name}</font>.
<a name="line1238"><font color="#000000">1238:</font></a> 
<a name="line1239"><font color="#000000">1239:</font></a> <i><font color="#9A1900">@cindex directory name abbreviation</font></i>
<a name="line1240"><font color="#000000">1240:</font></a> <b><font color="#0000FF">@vindex</font></b> directory-abbrev-alist
<a name="line1241"><font color="#000000">1241:</font></a>   Sometimes, a directory is ordinarily accessed through a symbolic
<a name="line1242"><font color="#000000">1242:</font></a> link, and you may want Emacs to preferentially show its linked
<a name="line1243"><font color="#000000">1243:</font></a> name.  To do this, customize <b><font color="#0000FF">@code</font></b><font color="#009900">{directory-abbrev-alist}</font>.  Each
<a name="line1244"><font color="#000000">1244:</font></a> element in this list should have the form <b><font color="#0000FF">@code</font></b><font color="#009900">{(@var{from}</font>
<a name="line1245"><font color="#000000">1245:</font></a> <font color="#009900">. @var{to})}</font>, which means to replace <b><font color="#0000FF">@var</font></b><font color="#009900">{from}</font> with <b><font color="#0000FF">@var</font></b><font color="#009900">{to}</font> whenever
<a name="line1246"><font color="#000000">1246:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{from}</font> appears in a directory name.  The <b><font color="#0000FF">@var</font></b><font color="#009900">{from}</font> string is a
<a name="line1247"><font color="#000000">1247:</font></a> regular expression (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Regexps</font><font color="#FF0000">}</font>).  It is matched against directory
<a name="line1248"><font color="#000000">1248:</font></a> names anchored at the first character, and should start with <b><font color="#0000FF">@samp</font></b><font color="#009900">{\`}</font>
<a name="line1249"><font color="#000000">1249:</font></a> (to support directory names with embedded newlines, which would defeat
<a name="line1250"><font color="#000000">1250:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{^}</font>).  The <b><font color="#0000FF">@var</font></b><font color="#009900">{to}</font> string should be an ordinary absolute
<a name="line1251"><font color="#000000">1251:</font></a> directory name pointing to the same directory.  Do not use <b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> to
<a name="line1252"><font color="#000000">1252:</font></a> stand for a home directory in the <b><font color="#0000FF">@var</font></b><font color="#009900">{to}</font> string; Emacs performs
<a name="line1253"><font color="#000000">1253:</font></a> these substitutions separately.  Here's an example, from a system on
<a name="line1254"><font color="#000000">1254:</font></a> which <b><font color="#0000FF">@file</font></b><font color="#009900">{/home/fsf}</font> is normally accessed through a symbolic link
<a name="line1255"><font color="#000000">1255:</font></a> named <b><font color="#0000FF">@file</font></b><font color="#009900">{/fsf}</font>:
<a name="line1256"><font color="#000000">1256:</font></a> 
<a name="line1257"><font color="#000000">1257:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line1258"><font color="#000000">1258:</font></a> (("\\`/home/fsf" . "/fsf"))
<a name="line1259"><font color="#000000">1259:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line1260"><font color="#000000">1260:</font></a> 
<a name="line1261"><font color="#000000">1261:</font></a> <b><font color="#0000FF">@node</font></b> Directories
<a name="line1262"><font color="#000000">1262:</font></a> <b><font color="#0000FF">@section</font></b> File Directories
<a name="line1263"><font color="#000000">1263:</font></a> 
<a name="line1264"><font color="#000000">1264:</font></a> <i><font color="#9A1900">@cindex file directory</font></i>
<a name="line1265"><font color="#000000">1265:</font></a> <i><font color="#9A1900">@cindex directory listing</font></i>
<a name="line1266"><font color="#000000">1266:</font></a>   The file system groups files into <b><font color="#0000FF">@dfn</font></b><font color="#009900">{directories}</font>.  A <b><font color="#0000FF">@dfn</font></b><font color="#009900">{directory</font>
<a name="line1267"><font color="#000000">1267:</font></a> <font color="#009900">listing}</font> is a list of all the files in a directory.  Emacs provides
<a name="line1268"><font color="#000000">1268:</font></a> commands to create and delete directories, and to make directory
<a name="line1269"><font color="#000000">1269:</font></a> listings in brief format (file names only) and verbose format (sizes,
<a name="line1270"><font color="#000000">1270:</font></a> dates, and other attributes included).  Emacs also includes a
<a name="line1271"><font color="#000000">1271:</font></a> directory browser feature called Dired, which you can invoke with
<a name="line1272"><font color="#000000">1272:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x d}</font>; see <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dired</font><font color="#FF0000">}</font>.
<a name="line1273"><font color="#000000">1273:</font></a> 
<a name="line1274"><font color="#000000">1274:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line1275"><font color="#000000">1275:</font></a> <b><font color="#0000FF">@item</font></b> C-x C-d <b><font color="#0000FF">@var</font></b><font color="#009900">{dir-or-pattern}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1276"><font color="#000000">1276:</font></a> Display a brief directory listing (<b><font color="#0000FF">@code</font></b><font color="#009900">{list-directory}</font>).
<a name="line1277"><font color="#000000">1277:</font></a> <b><font color="#0000FF">@item</font></b> C-u C-x C-d <b><font color="#0000FF">@var</font></b><font color="#009900">{dir-or-pattern}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1278"><font color="#000000">1278:</font></a> Display a verbose directory listing.
<a name="line1279"><font color="#000000">1279:</font></a> <b><font color="#0000FF">@item</font></b> M-x make-directory <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{dirname}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1280"><font color="#000000">1280:</font></a> Create a new directory named <b><font color="#0000FF">@var</font></b><font color="#009900">{dirname}</font>.
<a name="line1281"><font color="#000000">1281:</font></a> <b><font color="#0000FF">@item</font></b> M-x delete-directory <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{dirname}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1282"><font color="#000000">1282:</font></a> Delete the directory named <b><font color="#0000FF">@var</font></b><font color="#009900">{dirname}</font>.  If it isn't empty,
<a name="line1283"><font color="#000000">1283:</font></a> you will be asked whether you want to delete it recursively.
<a name="line1284"><font color="#000000">1284:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line1285"><font color="#000000">1285:</font></a> 
<a name="line1286"><font color="#000000">1286:</font></a> <b><font color="#0000FF">@findex</font></b> list-directory
<a name="line1287"><font color="#000000">1287:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x C-d
<a name="line1288"><font color="#000000">1288:</font></a>   The command to display a directory listing is <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-d}</font>
<a name="line1289"><font color="#000000">1289:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{list-directory}</font>).  It reads using the minibuffer a file name
<a name="line1290"><font color="#000000">1290:</font></a> which is either a directory to be listed or a wildcard-containing
<a name="line1291"><font color="#000000">1291:</font></a> pattern for the files to be listed.  For example,
<a name="line1292"><font color="#000000">1292:</font></a> 
<a name="line1293"><font color="#000000">1293:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line1294"><font color="#000000">1294:</font></a> C-x C-d /u2/emacs/etc <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1295"><font color="#000000">1295:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line1296"><font color="#000000">1296:</font></a> 
<a name="line1297"><font color="#000000">1297:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line1298"><font color="#000000">1298:</font></a> lists all the files in directory <b><font color="#0000FF">@file</font></b><font color="#009900">{/u2/emacs/etc}</font>.  Here is an
<a name="line1299"><font color="#000000">1299:</font></a> example of specifying a file name pattern:
<a name="line1300"><font color="#000000">1300:</font></a> 
<a name="line1301"><font color="#000000">1301:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line1302"><font color="#000000">1302:</font></a> C-x C-d /u2/emacs/src/*.c <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1303"><font color="#000000">1303:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line1304"><font color="#000000">1304:</font></a> 
<a name="line1305"><font color="#000000">1305:</font></a>   Normally, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-d}</font> displays a brief directory listing containing
<a name="line1306"><font color="#000000">1306:</font></a> just file names.  A numeric argument (regardless of value) tells it to
<a name="line1307"><font color="#000000">1307:</font></a> make a verbose listing including sizes, dates, and owners (like
<a name="line1308"><font color="#000000">1308:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{ls -l}</font>).
<a name="line1309"><font color="#000000">1309:</font></a> 
<a name="line1310"><font color="#000000">1310:</font></a> <b><font color="#0000FF">@vindex</font></b> list-directory-brief-switches
<a name="line1311"><font color="#000000">1311:</font></a> <b><font color="#0000FF">@vindex</font></b> list-directory-verbose-switches
<a name="line1312"><font color="#000000">1312:</font></a>   The text of a directory listing is mostly obtained by running
<a name="line1313"><font color="#000000">1313:</font></a> <i><font color="#9A1900">@code{ls} in an inferior process.  Two Emacs variables control the</font></i>
<a name="line1314"><font color="#000000">1314:</font></a> switches passed to <b><font color="#0000FF">@code</font></b><font color="#009900">{ls}</font>: <b><font color="#0000FF">@code</font></b><font color="#009900">{list-directory-brief-switches}</font> is
<a name="line1315"><font color="#000000">1315:</font></a> a string giving the switches to use in brief listings (<b><font color="#0000FF">@code</font></b><font color="#009900">{"-CF"}</font> by
<a name="line1316"><font color="#000000">1316:</font></a> default), and <b><font color="#0000FF">@code</font></b><font color="#009900">{list-directory-verbose-switches}</font> is a string
<a name="line1317"><font color="#000000">1317:</font></a> giving the switches to use in a verbose listing (<b><font color="#0000FF">@code</font></b><font color="#009900">{"-l"}</font> by
<a name="line1318"><font color="#000000">1318:</font></a> default).
<a name="line1319"><font color="#000000">1319:</font></a> 
<a name="line1320"><font color="#000000">1320:</font></a>   In verbose directory listings, Emacs adds information about the
<a name="line1321"><font color="#000000">1321:</font></a> amount of free space on the disk that contains the directory.
<a name="line1322"><font color="#000000">1322:</font></a> 
<a name="line1323"><font color="#000000">1323:</font></a>   The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x delete-directory}</font> prompts for a directory's name
<a name="line1324"><font color="#000000">1324:</font></a> using the minibuffer, and deletes the directory if it is empty.  If
<a name="line1325"><font color="#000000">1325:</font></a> the directory is not empty, you will be asked whether you want to
<a name="line1326"><font color="#000000">1326:</font></a> delete it recursively.  On systems that have a ``Trash'' (or ``Recycle
<a name="line1327"><font color="#000000">1327:</font></a> Bin'') feature, you can make this command move the specified directory
<a name="line1328"><font color="#000000">1328:</font></a> to the Trash instead of deleting it outright, by changing the variable
<a name="line1329"><font color="#000000">1329:</font></a> <i><font color="#9A1900">@code{delete-by-moving-to-trash} to @code{t}.  @xref{Misc File Ops},</font></i>
<a name="line1330"><font color="#000000">1330:</font></a> for more information about using the Trash.
<a name="line1331"><font color="#000000">1331:</font></a> 
<a name="line1332"><font color="#000000">1332:</font></a> <b><font color="#0000FF">@node</font></b> Comparing Files
<a name="line1333"><font color="#000000">1333:</font></a> <b><font color="#0000FF">@section</font></b> Comparing Files
<a name="line1334"><font color="#000000">1334:</font></a> <i><font color="#9A1900">@cindex comparing files</font></i>
<a name="line1335"><font color="#000000">1335:</font></a> 
<a name="line1336"><font color="#000000">1336:</font></a> <b><font color="#0000FF">@findex</font></b> diff
<a name="line1337"><font color="#000000">1337:</font></a> <b><font color="#0000FF">@vindex</font></b> diff-switches
<a name="line1338"><font color="#000000">1338:</font></a>   The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff}</font> prompts for two file names, using the
<a name="line1339"><font color="#000000">1339:</font></a> minibuffer, and displays the differences between the two files in a
<a name="line1340"><font color="#000000">1340:</font></a> buffer named <b><font color="#0000FF">@file</font></b><font color="#009900">{*diff*}</font>.  This works by running the <b><font color="#0000FF">@command</font></b><font color="#009900">{diff}</font>
<a name="line1341"><font color="#000000">1341:</font></a> program, using options taken from the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{diff-switches}</font>.
<a name="line1342"><font color="#000000">1342:</font></a> The value of <b><font color="#0000FF">@code</font></b><font color="#009900">{diff-switches}</font> should be a string; the default is
<a name="line1343"><font color="#000000">1343:</font></a> <i><font color="#9A1900">@code{"-u"} to specify a unified context diff.</font></i>
<a name="line1344"><font color="#000000">1344:</font></a> <i><font color="#9A1900">@c Note that the actual name of the info file is diffutils.info,</font></i>
<a name="line1345"><font color="#000000">1345:</font></a> <i><font color="#9A1900">@c but it adds a dir entry for diff too.</font></i>
<a name="line1346"><font color="#000000">1346:</font></a> <i><font color="#9A1900">@c On older systems, only "info diff" works, not "info diffutils".</font></i>
<a name="line1347"><font color="#000000">1347:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Top,, Diff, diffutils, Comparing and Merging Files</font><font color="#FF0000">}</font>, for more
<a name="line1348"><font color="#000000">1348:</font></a> information about the <b><font color="#0000FF">@command</font></b><font color="#009900">{diff}</font> program.
<a name="line1349"><font color="#000000">1349:</font></a> 
<a name="line1350"><font color="#000000">1350:</font></a>   The output of the <b><font color="#0000FF">@code</font></b><font color="#009900">{diff}</font> command is shown using a major mode
<a name="line1351"><font color="#000000">1351:</font></a> called Diff mode.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Diff Mode</font><font color="#FF0000">}</font>.
<a name="line1352"><font color="#000000">1352:</font></a> 
<a name="line1353"><font color="#000000">1353:</font></a>   A (much more sophisticated) alternative is <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x ediff}</font>
<a name="line1354"><font color="#000000">1354:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Top, Ediff, Ediff, ediff, The Ediff Manual</font><font color="#FF0000">}</font>).
<a name="line1355"><font color="#000000">1355:</font></a> 
<a name="line1356"><font color="#000000">1356:</font></a> <b><font color="#0000FF">@findex</font></b> diff-backup
<a name="line1357"><font color="#000000">1357:</font></a>   The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff-backup}</font> compares a specified file with its
<a name="line1358"><font color="#000000">1358:</font></a> most recent backup.  If you specify the name of a backup file,
<a name="line1359"><font color="#000000">1359:</font></a> <i><font color="#9A1900">@code{diff-backup} compares it with the source file that it is a</font></i>
<a name="line1360"><font color="#000000">1360:</font></a> backup of.  In all other respects, this behaves like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff}</font>.
<a name="line1361"><font color="#000000">1361:</font></a> 
<a name="line1362"><font color="#000000">1362:</font></a> <b><font color="#0000FF">@findex</font></b> diff-buffer-with-file
<a name="line1363"><font color="#000000">1363:</font></a>   The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff-buffer-with-file}</font> compares a specified
<a name="line1364"><font color="#000000">1364:</font></a> buffer with its corresponding file.  This shows you what changes you
<a name="line1365"><font color="#000000">1365:</font></a> would make to the file if you save the buffer.
<a name="line1366"><font color="#000000">1366:</font></a> 
<a name="line1367"><font color="#000000">1367:</font></a> <b><font color="#0000FF">@findex</font></b> compare-windows
<a name="line1368"><font color="#000000">1368:</font></a>   The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x compare-windows}</font> compares the text in the
<a name="line1369"><font color="#000000">1369:</font></a> current window with that in the window that was the selected window
<a name="line1370"><font color="#000000">1370:</font></a> before you selected the current one.  (For more information about
<a name="line1371"><font color="#000000">1371:</font></a> windows in Emacs, <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Windows</font><font color="#FF0000">}</font>.)  Comparison starts at point in each
<a name="line1372"><font color="#000000">1372:</font></a> window, after pushing each initial point value on the mark ring
<a name="line1373"><font color="#000000">1373:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mark Ring</font><font color="#FF0000">}</font>) in its respective buffer.  Then it moves point
<a name="line1374"><font color="#000000">1374:</font></a> forward in each window, one character at a time, until it reaches
<a name="line1375"><font color="#000000">1375:</font></a> characters that don't match.  Then the command exits.
<a name="line1376"><font color="#000000">1376:</font></a> 
<a name="line1377"><font color="#000000">1377:</font></a>   If point in the two windows is followed by non-matching text when
<a name="line1378"><font color="#000000">1378:</font></a> the command starts, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x compare-windows}</font> tries heuristically to
<a name="line1379"><font color="#000000">1379:</font></a> advance up to matching text in the two windows, and then exits.  So if
<a name="line1380"><font color="#000000">1380:</font></a> you use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x compare-windows}</font> repeatedly, each time it either
<a name="line1381"><font color="#000000">1381:</font></a> skips one matching range or finds the start of another.
<a name="line1382"><font color="#000000">1382:</font></a> 
<a name="line1383"><font color="#000000">1383:</font></a> <b><font color="#0000FF">@vindex</font></b> compare-ignore-case
<a name="line1384"><font color="#000000">1384:</font></a> <b><font color="#0000FF">@vindex</font></b> compare-ignore-whitespace
<a name="line1385"><font color="#000000">1385:</font></a>   With a numeric argument, <b><font color="#0000FF">@code</font></b><font color="#009900">{compare-windows}</font> ignores changes in
<a name="line1386"><font color="#000000">1386:</font></a> whitespace.  If the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{compare-ignore-case}</font> is
<a name="line1387"><font color="#000000">1387:</font></a> non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>, the comparison ignores differences in case as well.
<a name="line1388"><font color="#000000">1388:</font></a> If the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{compare-ignore-whitespace}</font> is non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>,
<a name="line1389"><font color="#000000">1389:</font></a> <i><font color="#9A1900">@code{compare-windows} by default ignores changes in whitespace, but a</font></i>
<a name="line1390"><font color="#000000">1390:</font></a> prefix argument turns that off for that single invocation of the
<a name="line1391"><font color="#000000">1391:</font></a> command.
<a name="line1392"><font color="#000000">1392:</font></a> 
<a name="line1393"><font color="#000000">1393:</font></a> <i><font color="#9A1900">@cindex Smerge mode</font></i>
<a name="line1394"><font color="#000000">1394:</font></a> <b><font color="#0000FF">@findex</font></b> smerge-mode
<a name="line1395"><font color="#000000">1395:</font></a> <i><font color="#9A1900">@cindex failed merges</font></i>
<a name="line1396"><font color="#000000">1396:</font></a> <i><font color="#9A1900">@cindex merges, failed</font></i>
<a name="line1397"><font color="#000000">1397:</font></a> <i><font color="#9A1900">@cindex comparing 3 files (@code{diff3})</font></i>
<a name="line1398"><font color="#000000">1398:</font></a>   You can use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x smerge-mode}</font> to turn on Smerge mode, a minor
<a name="line1399"><font color="#000000">1399:</font></a> mode for editing output from the <b><font color="#0000FF">@command</font></b><font color="#009900">{diff3}</font> program.  This is
<a name="line1400"><font color="#000000">1400:</font></a> typically the result of a failed merge from a version control system
<a name="line1401"><font color="#000000">1401:</font></a> update outside VC, due to conflicting changes to a file.  Smerge
<a name="line1402"><font color="#000000">1402:</font></a> mode provides commands to resolve conflicts by selecting specific
<a name="line1403"><font color="#000000">1403:</font></a> changes.
<a name="line1404"><font color="#000000">1404:</font></a> 
<a name="line1405"><font color="#000000">1405:</font></a> <b><font color="#0000FF">@iftex</font></b>
<a name="line1406"><font color="#000000">1406:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Emerge,,, emacs-xtra, Specialized Emacs Features</font><font color="#FF0000">}</font>,
<a name="line1407"><font color="#000000">1407:</font></a> <b><font color="#0000FF">@end iftex</font></b>
<a name="line1408"><font color="#000000">1408:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line1409"><font color="#000000">1409:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Emerge</font><font color="#FF0000">}</font>,
<a name="line1410"><font color="#000000">1410:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line1411"><font color="#000000">1411:</font></a> for the Emerge facility, which provides a powerful interface for
<a name="line1412"><font color="#000000">1412:</font></a> merging files.
<a name="line1413"><font color="#000000">1413:</font></a> 
<a name="line1414"><font color="#000000">1414:</font></a> <b><font color="#0000FF">@node</font></b> Diff Mode
<a name="line1415"><font color="#000000">1415:</font></a> <b><font color="#0000FF">@section</font></b> Diff Mode
<a name="line1416"><font color="#000000">1416:</font></a> <i><font color="#9A1900">@cindex Diff mode</font></i>
<a name="line1417"><font color="#000000">1417:</font></a> <b><font color="#0000FF">@findex</font></b> diff-mode
<a name="line1418"><font color="#000000">1418:</font></a> <i><font color="#9A1900">@cindex patches, editing</font></i>
<a name="line1419"><font color="#000000">1419:</font></a> 
<a name="line1420"><font color="#000000">1420:</font></a>   Diff mode is a major mode used for the output of <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff}</font> and
<a name="line1421"><font color="#000000">1421:</font></a> other similar commands.  This kind of output is called a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{patch}</font>,
<a name="line1422"><font color="#000000">1422:</font></a> because it can be passed to the <b><font color="#0000FF">@command</font></b><font color="#009900">{patch}</font> command to
<a name="line1423"><font color="#000000">1423:</font></a> automatically apply the specified changes.  To select Diff mode
<a name="line1424"><font color="#000000">1424:</font></a> manually, type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff-mode}</font>.
<a name="line1425"><font color="#000000">1425:</font></a> 
<a name="line1426"><font color="#000000">1426:</font></a> <i><font color="#9A1900">@cindex hunk, diff</font></i>
<a name="line1427"><font color="#000000">1427:</font></a>   The changes specified in a patch are grouped into <b><font color="#0000FF">@dfn</font></b><font color="#009900">{hunks}</font>, which
<a name="line1428"><font color="#000000">1428:</font></a> are contiguous chunks of text that contain one or more changed lines.
<a name="line1429"><font color="#000000">1429:</font></a> Hunks can also include unchanged lines to provide context for the
<a name="line1430"><font color="#000000">1430:</font></a> changes.  Each hunk is preceded by a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{hunk header}</font>, which
<a name="line1431"><font color="#000000">1431:</font></a> specifies the old and new line numbers at which the hunk occurs.  Diff
<a name="line1432"><font color="#000000">1432:</font></a> mode highlights each hunk header, to distinguish it from the actual
<a name="line1433"><font color="#000000">1433:</font></a> contents of the hunk.
<a name="line1434"><font color="#000000">1434:</font></a> 
<a name="line1435"><font color="#000000">1435:</font></a> <b><font color="#0000FF">@vindex</font></b> diff-update-on-the-fly
<a name="line1436"><font color="#000000">1436:</font></a>   You can edit a Diff mode buffer like any other buffer.  (If it is
<a name="line1437"><font color="#000000">1437:</font></a> read-only, you need to make it writable first.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Misc Buffer</font><font color="#FF0000">}</font>.)
<a name="line1438"><font color="#000000">1438:</font></a> Whenever you change a hunk, Diff mode attempts to automatically
<a name="line1439"><font color="#000000">1439:</font></a> correct the line numbers in the hunk headers, to ensure that the patch
<a name="line1440"><font color="#000000">1440:</font></a> remains correct.  To disable automatic line number correction,
<a name="line1441"><font color="#000000">1441:</font></a> change the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{diff-update-on-the-fly}</font> to <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>.
<a name="line1442"><font color="#000000">1442:</font></a> 
<a name="line1443"><font color="#000000">1443:</font></a>   Diff mode treats each hunk as an error message, similar to
<a name="line1444"><font color="#000000">1444:</font></a> Compilation mode.  Thus, you can use commands such as <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-g M-n}</font> to
<a name="line1445"><font color="#000000">1445:</font></a> visit the corresponding source locations.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Compilation Mode</font><font color="#FF0000">}</font>.
<a name="line1446"><font color="#000000">1446:</font></a> 
<a name="line1447"><font color="#000000">1447:</font></a>   In addition, Diff mode provides the following commands to navigate,
<a name="line1448"><font color="#000000">1448:</font></a> manipulate and apply parts of patches:
<a name="line1449"><font color="#000000">1449:</font></a> 
<a name="line1450"><font color="#000000">1450:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line1451"><font color="#000000">1451:</font></a> <b><font color="#0000FF">@item</font></b> M-n
<a name="line1452"><font color="#000000">1452:</font></a> <b><font color="#0000FF">@findex</font></b> diff-hunk-next
<a name="line1453"><font color="#000000">1453:</font></a> Move to the next hunk-start (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-hunk-next}</font>).
<a name="line1454"><font color="#000000">1454:</font></a> 
<a name="line1455"><font color="#000000">1455:</font></a> <b><font color="#0000FF">@findex</font></b> diff-auto-refine-mode
<a name="line1456"><font color="#000000">1456:</font></a> <i><font color="#9A1900">@cindex mode, Diff Auto-Refine</font></i>
<a name="line1457"><font color="#000000">1457:</font></a> <i><font color="#9A1900">@cindex Diff Auto-Refine mode</font></i>
<a name="line1458"><font color="#000000">1458:</font></a> This command has a side effect: it <b><font color="#0000FF">@dfn{ref</font></b><font color="#FF0000">ines</font><font color="#FF0000">}</font> the hunk you move to,
<a name="line1459"><font color="#000000">1459:</font></a> highlighting its changes with better granularity.  To disable this
<a name="line1460"><font color="#000000">1460:</font></a> feature, type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff-auto-refine-mode}</font> to toggle off the minor
<a name="line1461"><font color="#000000">1461:</font></a> mode Diff Auto-Refine mode.  To disable Diff Auto-Refine mode by
<a name="line1462"><font color="#000000">1462:</font></a> default, add this to your init file (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Hooks</font><font color="#FF0000">}</font>):
<a name="line1463"><font color="#000000">1463:</font></a> 
<a name="line1464"><font color="#000000">1464:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line1465"><font color="#000000">1465:</font></a> (add-hook 'diff-mode-hook
<a name="line1466"><font color="#000000">1466:</font></a>           (lambda () (diff-auto-refine-mode -1)))
<a name="line1467"><font color="#000000">1467:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line1468"><font color="#000000">1468:</font></a> 
<a name="line1469"><font color="#000000">1469:</font></a> <b><font color="#0000FF">@item</font></b> M-p
<a name="line1470"><font color="#000000">1470:</font></a> <b><font color="#0000FF">@findex</font></b> diff-hunk-prev
<a name="line1471"><font color="#000000">1471:</font></a> Move to the previous hunk-start (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-hunk-prev}</font>).  Like
<a name="line1472"><font color="#000000">1472:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-n}</font>, this has the side-effect of refining the hunk you move to,
<a name="line1473"><font color="#000000">1473:</font></a> unless you disable Diff Auto-Refine mode.
<a name="line1474"><font color="#000000">1474:</font></a> 
<a name="line1475"><font color="#000000">1475:</font></a> <b><font color="#0000FF">@item</font></b> M-@}
<a name="line1476"><font color="#000000">1476:</font></a> <b><font color="#0000FF">@findex</font></b> diff-file-next
<a name="line1477"><font color="#000000">1477:</font></a> Move to the next file-start, in a multi-file patch
<a name="line1478"><font color="#000000">1478:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-file-next}</font>).
<a name="line1479"><font color="#000000">1479:</font></a> 
<a name="line1480"><font color="#000000">1480:</font></a> <b><font color="#0000FF">@item</font></b> M-@{
<a name="line1481"><font color="#000000">1481:</font></a> <b><font color="#0000FF">@findex</font></b> diff-file-prev
<a name="line1482"><font color="#000000">1482:</font></a> Move to the previous file-start, in a multi-file patch
<a name="line1483"><font color="#000000">1483:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-file-prev}</font>).
<a name="line1484"><font color="#000000">1484:</font></a> 
<a name="line1485"><font color="#000000">1485:</font></a> <b><font color="#0000FF">@item</font></b> M-k
<a name="line1486"><font color="#000000">1486:</font></a> <b><font color="#0000FF">@findex</font></b> diff-hunk-kill
<a name="line1487"><font color="#000000">1487:</font></a> Kill the hunk at point (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-hunk-kill}</font>).
<a name="line1488"><font color="#000000">1488:</font></a> 
<a name="line1489"><font color="#000000">1489:</font></a> <b><font color="#0000FF">@item</font></b> M-K
<a name="line1490"><font color="#000000">1490:</font></a> <b><font color="#0000FF">@findex</font></b> diff-file-kill
<a name="line1491"><font color="#000000">1491:</font></a> In a multi-file patch, kill the current file part.
<a name="line1492"><font color="#000000">1492:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-file-kill}</font>).
<a name="line1493"><font color="#000000">1493:</font></a> 
<a name="line1494"><font color="#000000">1494:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-a
<a name="line1495"><font color="#000000">1495:</font></a> <b><font color="#0000FF">@findex</font></b> diff-apply-hunk
<a name="line1496"><font color="#000000">1496:</font></a> <i><font color="#9A1900">@cindex patches, applying</font></i>
<a name="line1497"><font color="#000000">1497:</font></a> Apply this hunk to its target file (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-apply-hunk}</font>).  With a
<a name="line1498"><font color="#000000">1498:</font></a> prefix argument of <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u}</font>, revert this hunk.
<a name="line1499"><font color="#000000">1499:</font></a> 
<a name="line1500"><font color="#000000">1500:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-b
<a name="line1501"><font color="#000000">1501:</font></a> <b><font color="#0000FF">@findex</font></b> diff-refine-hunk
<a name="line1502"><font color="#000000">1502:</font></a> Highlight the changes of the hunk at point with a finer granularity
<a name="line1503"><font color="#000000">1503:</font></a> (<b><font color="#0000FF">@code{diff-ref</font></b><font color="#FF0000">ine-hunk</font><font color="#FF0000">}</font>).  This allows you to see exactly which parts
<a name="line1504"><font color="#000000">1504:</font></a> of each changed line were actually changed.
<a name="line1505"><font color="#000000">1505:</font></a> 
<a name="line1506"><font color="#000000">1506:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-c
<a name="line1507"><font color="#000000">1507:</font></a> <b><font color="#0000FF">@findex</font></b> diff-goto-source
<a name="line1508"><font color="#000000">1508:</font></a> Go to the source file and line corresponding to this hunk
<a name="line1509"><font color="#000000">1509:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-goto-source}</font>).
<a name="line1510"><font color="#000000">1510:</font></a> 
<a name="line1511"><font color="#000000">1511:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-e
<a name="line1512"><font color="#000000">1512:</font></a> <b><font color="#0000FF">@findex</font></b> diff-ediff-patch
<a name="line1513"><font color="#000000">1513:</font></a> Start an Ediff session with the patch (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-ediff-patch}</font>).
<a name="line1514"><font color="#000000">1514:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Top, Ediff, Ediff, ediff, The Ediff Manual</font><font color="#FF0000">}</font>.
<a name="line1515"><font color="#000000">1515:</font></a> 
<a name="line1516"><font color="#000000">1516:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-n
<a name="line1517"><font color="#000000">1517:</font></a> <b><font color="#0000FF">@findex</font></b> diff-restrict-view
<a name="line1518"><font color="#000000">1518:</font></a> Restrict the view to the current hunk (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-restrict-view}</font>).
<a name="line1519"><font color="#000000">1519:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Narrowing</font><font color="#FF0000">}</font>.  With a prefix argument of <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u}</font>, restrict the
<a name="line1520"><font color="#000000">1520:</font></a> view to the current file of a multiple-file patch.  To widen again,
<a name="line1521"><font color="#000000">1521:</font></a> use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x n w}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{widen}</font>).
<a name="line1522"><font color="#000000">1522:</font></a> 
<a name="line1523"><font color="#000000">1523:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-r
<a name="line1524"><font color="#000000">1524:</font></a> <b><font color="#0000FF">@findex</font></b> diff-reverse-direction
<a name="line1525"><font color="#000000">1525:</font></a> Reverse the direction of comparison for the entire buffer
<a name="line1526"><font color="#000000">1526:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-reverse-direction}</font>).
<a name="line1527"><font color="#000000">1527:</font></a> 
<a name="line1528"><font color="#000000">1528:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-s
<a name="line1529"><font color="#000000">1529:</font></a> <b><font color="#0000FF">@findex</font></b> diff-split-hunk
<a name="line1530"><font color="#000000">1530:</font></a> Split the hunk at point (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-split-hunk}</font>).  This is for
<a name="line1531"><font color="#000000">1531:</font></a> manually editing patches, and only works with the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{unified diff</font>
<a name="line1532"><font color="#000000">1532:</font></a> <font color="#009900">format}</font> produced by the <b><font color="#0000FF">@option</font></b><font color="#009900">{-u}</font> or <b><font color="#0000FF">@option</font></b><font color="#009900">{--unified}</font> options to
<a name="line1533"><font color="#000000">1533:</font></a> the <b><font color="#0000FF">@command</font></b><font color="#009900">{diff}</font> program.  If you need to split a hunk in the
<a name="line1534"><font color="#000000">1534:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{context diff format}</font> produced by the <b><font color="#0000FF">@option</font></b><font color="#009900">{-c}</font> or
<a name="line1535"><font color="#000000">1535:</font></a> <b><font color="#0000FF">@option</font></b><font color="#009900">{--context}</font> options to <b><font color="#0000FF">@command</font></b><font color="#009900">{diff}</font>, first convert the buffer
<a name="line1536"><font color="#000000">1536:</font></a> to the unified diff format with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-u}</font>.
<a name="line1537"><font color="#000000">1537:</font></a> 
<a name="line1538"><font color="#000000">1538:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-d
<a name="line1539"><font color="#000000">1539:</font></a> <b><font color="#0000FF">@findex</font></b> diff-unified-&gt;context
<a name="line1540"><font color="#000000">1540:</font></a> Convert the entire buffer to the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{context diff format}</font>
<a name="line1541"><font color="#000000">1541:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-unified-&gt;context}</font>).  With a prefix argument, convert only
<a name="line1542"><font color="#000000">1542:</font></a> the text within the region.
<a name="line1543"><font color="#000000">1543:</font></a> 
<a name="line1544"><font color="#000000">1544:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-u
<a name="line1545"><font color="#000000">1545:</font></a> <b><font color="#0000FF">@findex</font></b> diff-context-&gt;unified
<a name="line1546"><font color="#000000">1546:</font></a> Convert the entire buffer to unified diff format
<a name="line1547"><font color="#000000">1547:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-context-&gt;unified}</font>).  With a prefix argument, convert
<a name="line1548"><font color="#000000">1548:</font></a> unified format to context format.  When the mark is active, convert
<a name="line1549"><font color="#000000">1549:</font></a> only the text within the region.
<a name="line1550"><font color="#000000">1550:</font></a> 
<a name="line1551"><font color="#000000">1551:</font></a> <b><font color="#0000FF">@item</font></b> C-c C-w
<a name="line1552"><font color="#000000">1552:</font></a> <b><font color="#0000FF">@findex</font></b> diff-ignore-whitespace-hunk
<a name="line1553"><font color="#000000">1553:</font></a> Re-diff the current hunk, disregarding changes in whitespace
<a name="line1554"><font color="#000000">1554:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-ignore-whitespace-hunk}</font>).
<a name="line1555"><font color="#000000">1555:</font></a> 
<a name="line1556"><font color="#000000">1556:</font></a> <b><font color="#0000FF">@item</font></b> C-x 4 A
<a name="line1557"><font color="#000000">1557:</font></a> <b><font color="#0000FF">@findex</font></b> diff-add-change-log-entries-other-window
<a name="line1558"><font color="#000000">1558:</font></a> <b><font color="#0000FF">@findex</font></b> add-change-log-entry-other-window<b><font color="#0000FF">@r</font></b><font color="#009900">{, in Diff mode}</font>
<a name="line1559"><font color="#000000">1559:</font></a> Generate a ChangeLog entry, like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x 4 a}</font> does (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Change</font>
<a name="line1560"><font color="#000000">1560:</font></a> <font color="#FF0000">Log</font><font color="#FF0000">}</font>), for each one of the hunks
<a name="line1561"><font color="#000000">1561:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{diff-add-change-log-entries-other-window}</font>).  This creates a
<a name="line1562"><font color="#000000">1562:</font></a> skeleton of the log of changes that you can later fill with the actual
<a name="line1563"><font color="#000000">1563:</font></a> descriptions of the changes.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x 4 a}</font> itself in Diff mode
<a name="line1564"><font color="#000000">1564:</font></a> operates on behalf of the current hunk's file, but gets the function
<a name="line1565"><font color="#000000">1565:</font></a> name from the patch itself.  This is useful for making log entries for
<a name="line1566"><font color="#000000">1566:</font></a> functions that are deleted by the patch.
<a name="line1567"><font color="#000000">1567:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line1568"><font color="#000000">1568:</font></a> 
<a name="line1569"><font color="#000000">1569:</font></a> <i><font color="#9A1900">@c Trailing whitespace is NOT shown by default.</font></i>
<a name="line1570"><font color="#000000">1570:</font></a> <i><font color="#9A1900">@c Emacs's dir-locals file enables this (for some reason).</font></i>
<a name="line1571"><font color="#000000">1571:</font></a> <i><font color="#9A1900">@cindex trailing whitespace, in patches</font></i>
<a name="line1572"><font color="#000000">1572:</font></a> <b><font color="#0000FF">@findex</font></b> diff-delete-trailing-whitespace
<a name="line1573"><font color="#000000">1573:</font></a>   Patches sometimes include trailing whitespace on modified lines, as
<a name="line1574"><font color="#000000">1574:</font></a> an unintentional and undesired change.  There are two ways to deal
<a name="line1575"><font color="#000000">1575:</font></a> with this problem.  Firstly, if you enable Whitespace mode in a Diff
<a name="line1576"><font color="#000000">1576:</font></a> buffer (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Useless Whitespace</font><font color="#FF0000">}</font>), it automatically highlights
<a name="line1577"><font color="#000000">1577:</font></a> trailing whitespace in modified lines.  Secondly, you can use the
<a name="line1578"><font color="#000000">1578:</font></a> command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x diff-delete-trailing-whitespace}</font>, which searches for
<a name="line1579"><font color="#000000">1579:</font></a> trailing whitespace in the lines modified by the patch, and removes
<a name="line1580"><font color="#000000">1580:</font></a> that whitespace in both the patch and the patched source file(s).
<a name="line1581"><font color="#000000">1581:</font></a> This command does not save the modifications that it makes, so you can
<a name="line1582"><font color="#000000">1582:</font></a> decide whether to save the changes (the list of modified files is
<a name="line1583"><font color="#000000">1583:</font></a> displayed in the echo area).  With a prefix argument, it tries to
<a name="line1584"><font color="#000000">1584:</font></a> modify the original source files rather than the patched source files.
<a name="line1585"><font color="#000000">1585:</font></a> 
<a name="line1586"><font color="#000000">1586:</font></a> <b><font color="#0000FF">@node</font></b> Copying and Naming
<a name="line1587"><font color="#000000">1587:</font></a> <b><font color="#0000FF">@section</font></b> Copying, Naming and Renaming Files
<a name="line1588"><font color="#000000">1588:</font></a> 
<a name="line1589"><font color="#000000">1589:</font></a>   Emacs has several commands for copying, naming, and renaming files.
<a name="line1590"><font color="#000000">1590:</font></a> All of them read two file names, <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font> (or <b><font color="#0000FF">@var</font></b><font color="#009900">{target}</font>) and
<a name="line1591"><font color="#000000">1591:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font>, using the minibuffer, and then copy or adjust a file's name
<a name="line1592"><font color="#000000">1592:</font></a> accordingly; they do not accept wildcard file names.
<a name="line1593"><font color="#000000">1593:</font></a> 
<a name="line1594"><font color="#000000">1594:</font></a> In all these commands, if the argument <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font> is just a directory
<a name="line1595"><font color="#000000">1595:</font></a> name (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Directory Names,,, elisp, the Emacs Lisp Reference</font>
<a name="line1596"><font color="#000000">1596:</font></a> <font color="#FF0000">Manual</font><font color="#FF0000">}</font>), the real new name is in that directory, with the same
<a name="line1597"><font color="#000000">1597:</font></a> non-directory component as <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font>.  For example, the command
<a name="line1598"><font color="#000000">1598:</font></a> <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x rename-file @key{RET} ~/foo @key{RET} /tmp/ @key{RET}}}</font>
<a name="line1599"><font color="#000000">1599:</font></a> renames <b><font color="#0000FF">@file</font></b><font color="#009900">{~/foo}</font> to <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp/foo}</font>.  On GNU and other POSIX-like
<a name="line1600"><font color="#000000">1600:</font></a> systems, directory names end in <b><font color="#0000FF">@samp</font></b><font color="#009900">{/}</font>.
<a name="line1601"><font color="#000000">1601:</font></a> 
<a name="line1602"><font color="#000000">1602:</font></a> All these commands ask for confirmation when the new file name already
<a name="line1603"><font color="#000000">1603:</font></a> exists.
<a name="line1604"><font color="#000000">1604:</font></a> 
<a name="line1605"><font color="#000000">1605:</font></a> <b><font color="#0000FF">@findex</font></b> copy-file
<a name="line1606"><font color="#000000">1606:</font></a> <i><font color="#9A1900">@cindex copying files</font></i>
<a name="line1607"><font color="#000000">1607:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x copy-file}</font> copies the contents of the file <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font> to the
<a name="line1608"><font color="#000000">1608:</font></a> file <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font>.
<a name="line1609"><font color="#000000">1609:</font></a> 
<a name="line1610"><font color="#000000">1610:</font></a> <b><font color="#0000FF">@findex</font></b> copy-directory
<a name="line1611"><font color="#000000">1611:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x copy-directory}</font> copies directories, similar to the
<a name="line1612"><font color="#000000">1612:</font></a> <i><font color="#9A1900">@command{cp -r} shell command.  If @var{new} is a directory name, it</font></i>
<a name="line1613"><font color="#000000">1613:</font></a> creates a copy of the <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font> directory and puts it in <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font>.
<a name="line1614"><font color="#000000">1614:</font></a> Otherwise it copies all the contents of <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font> into a new directory
<a name="line1615"><font color="#000000">1615:</font></a> named <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font>.
<a name="line1616"><font color="#000000">1616:</font></a> 
<a name="line1617"><font color="#000000">1617:</font></a> <i><font color="#9A1900">@cindex renaming files</font></i>
<a name="line1618"><font color="#000000">1618:</font></a> <b><font color="#0000FF">@findex</font></b> rename-file
<a name="line1619"><font color="#000000">1619:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x rename-file}</font> renames file <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font> as <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font>.  If the
<a name="line1620"><font color="#000000">1620:</font></a> file name <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font> already exists, you must confirm with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{yes}</font> or
<a name="line1621"><font color="#000000">1621:</font></a> renaming is not done; this is because renaming causes the old meaning
<a name="line1622"><font color="#000000">1622:</font></a> of the name <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font> to be lost.  If <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font> and <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font> are on
<a name="line1623"><font color="#000000">1623:</font></a> different file systems, the file <b><font color="#0000FF">@var</font></b><font color="#009900">{old}</font> is copied and deleted.
<a name="line1624"><font color="#000000">1624:</font></a> 
<a name="line1625"><font color="#000000">1625:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line1626"><font color="#000000">1626:</font></a>   If a file is under version control (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Version Control</font><font color="#FF0000">}</font>), you
<a name="line1627"><font color="#000000">1627:</font></a> should rename it using <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x vc-rename-file}}</font> instead of
<a name="line1628"><font color="#000000">1628:</font></a> <b><font color="#0000FF">@w</font></b><font color="#009900">{@kbd{M-x rename-file}}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">VC Delete/Rename</font><font color="#FF0000">}</font>.
<a name="line1629"><font color="#000000">1629:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line1630"><font color="#000000">1630:</font></a> 
<a name="line1631"><font color="#000000">1631:</font></a> <b><font color="#0000FF">@findex</font></b> add-name-to-file
<a name="line1632"><font color="#000000">1632:</font></a> <i><font color="#9A1900">@cindex hard links (creation)</font></i>
<a name="line1633"><font color="#000000">1633:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x add-name-to-file}</font> adds an additional name to an existing
<a name="line1634"><font color="#000000">1634:</font></a> file without removing the old name.  The new name is created as a hard
<a name="line1635"><font color="#000000">1635:</font></a> link to the existing file.  The new name must belong on the same file
<a name="line1636"><font color="#000000">1636:</font></a> system that the file is on.  On MS-Windows, this command works only if
<a name="line1637"><font color="#000000">1637:</font></a> the file resides in an NTFS file system.  On MS-DOS, and some remote
<a name="line1638"><font color="#000000">1638:</font></a> system types, it works by copying the file.
<a name="line1639"><font color="#000000">1639:</font></a> 
<a name="line1640"><font color="#000000">1640:</font></a> <b><font color="#0000FF">@findex</font></b> make-symbolic-link
<a name="line1641"><font color="#000000">1641:</font></a> <i><font color="#9A1900">@cindex symbolic links (creation)</font></i>
<a name="line1642"><font color="#000000">1642:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x make-symbolic-link}</font> creates a symbolic link named
<a name="line1643"><font color="#000000">1643:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font>, which points at <b><font color="#0000FF">@var</font></b><font color="#009900">{target}</font>.  The effect is that future
<a name="line1644"><font color="#000000">1644:</font></a> attempts to open file <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font> will refer to whatever file is named
<a name="line1645"><font color="#000000">1645:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{target}</font> at the time the opening is done, or will get an error if
<a name="line1646"><font color="#000000">1646:</font></a> the name <b><font color="#0000FF">@var</font></b><font color="#009900">{target}</font> is nonexistent at that time.  This command does
<a name="line1647"><font color="#000000">1647:</font></a> not expand the argument <b><font color="#0000FF">@var</font></b><font color="#009900">{target}</font>, so that it allows you to specify
<a name="line1648"><font color="#000000">1648:</font></a> a relative name as the target of the link.  However, this command
<a name="line1649"><font color="#000000">1649:</font></a> does expand leading <b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> in <b><font color="#0000FF">@var</font></b><font color="#009900">{target}</font> so that you can easily
<a name="line1650"><font color="#000000">1650:</font></a> specify home directories, and strips leading <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font> so that you can
<a name="line1651"><font color="#000000">1651:</font></a> specify relative names beginning with literal <b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> or <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font>.
<a name="line1652"><font color="#000000">1652:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Quoted File Names</font><font color="#FF0000">}</font>.  On MS-Windows, this command works only on
<a name="line1653"><font color="#000000">1653:</font></a> MS Windows Vista and later.  When <b><font color="#0000FF">@var</font></b><font color="#009900">{new}</font> is remote,
<a name="line1654"><font color="#000000">1654:</font></a> it works depending on the system type.
<a name="line1655"><font color="#000000">1655:</font></a> 
<a name="line1656"><font color="#000000">1656:</font></a> <b><font color="#0000FF">@node</font></b> Misc File Ops
<a name="line1657"><font color="#000000">1657:</font></a> <b><font color="#0000FF">@section</font></b> Miscellaneous File Operations
<a name="line1658"><font color="#000000">1658:</font></a> 
<a name="line1659"><font color="#000000">1659:</font></a>   Emacs has commands for performing many other operations on files.
<a name="line1660"><font color="#000000">1660:</font></a> All operate on one file; they do not accept wildcard file names.
<a name="line1661"><font color="#000000">1661:</font></a> 
<a name="line1662"><font color="#000000">1662:</font></a> <b><font color="#0000FF">@findex</font></b> delete-file
<a name="line1663"><font color="#000000">1663:</font></a> <i><font color="#9A1900">@cindex deletion (of files)</font></i>
<a name="line1664"><font color="#000000">1664:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x delete-file}</font> prompts for a file and deletes it.  If you are
<a name="line1665"><font color="#000000">1665:</font></a> deleting many files in one directory, it may be more convenient to use
<a name="line1666"><font color="#000000">1666:</font></a> Dired rather than <b><font color="#0000FF">@code</font></b><font color="#009900">{delete-file}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dired Deletion</font><font color="#FF0000">}</font>.
<a name="line1667"><font color="#000000">1667:</font></a> 
<a name="line1668"><font color="#000000">1668:</font></a> <i><font color="#9A1900">@cindex trash</font></i>
<a name="line1669"><font color="#000000">1669:</font></a> <i><font color="#9A1900">@cindex recycle bin</font></i>
<a name="line1670"><font color="#000000">1670:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x move-file-to-trash}</font> moves a file into the system
<a name="line1671"><font color="#000000">1671:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{Trash}</font> (or <b><font color="#0000FF">@dfn</font></b><font color="#009900">{Recycle Bin}</font>).  This is a facility available on
<a name="line1672"><font color="#000000">1672:</font></a> most operating systems; files that are moved into the Trash can be
<a name="line1673"><font color="#000000">1673:</font></a> brought back later if you change your mind.
<a name="line1674"><font color="#000000">1674:</font></a> 
<a name="line1675"><font color="#000000">1675:</font></a> <b><font color="#0000FF">@vindex</font></b> delete-by-moving-to-trash
<a name="line1676"><font color="#000000">1676:</font></a>   By default, Emacs deletion commands do <b><font color="#0000FF">@emph</font></b><font color="#FF0000">{</font><i><font color="#009900">not</font></i><font color="#FF0000">}</font> use the Trash.  To
<a name="line1677"><font color="#000000">1677:</font></a> use the Trash (when it is available) for common deletion commands,
<a name="line1678"><font color="#000000">1678:</font></a> change the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{delete-by-moving-to-trash}</font> to <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font>.
<a name="line1679"><font color="#000000">1679:</font></a> This affects the commands <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x delete-file}</font> and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line1680"><font color="#000000">1680:</font></a> <font color="#009900">delete-directory}</font> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Directories</font><font color="#FF0000">}</font>), as well as the deletion
<a name="line1681"><font color="#000000">1681:</font></a> commands in Dired (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dired Deletion</font><font color="#FF0000">}</font>).  Supplying a prefix
<a name="line1682"><font color="#000000">1682:</font></a> argument to <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x delete-file}</font> or <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x delete-directory}</font> makes
<a name="line1683"><font color="#000000">1683:</font></a> them delete outright, instead of using the Trash, regardless of
<a name="line1684"><font color="#000000">1684:</font></a> <i><font color="#9A1900">@code{delete-by-moving-to-trash}.</font></i>
<a name="line1685"><font color="#000000">1685:</font></a> 
<a name="line1686"><font color="#000000">1686:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line1687"><font color="#000000">1687:</font></a>   If a file is under version control (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Version Control</font><font color="#FF0000">}</font>), you
<a name="line1688"><font color="#000000">1688:</font></a> should delete it using <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x vc-delete-file}</font> instead of <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line1689"><font color="#000000">1689:</font></a> <font color="#009900">delete-file}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">VC Delete/Rename</font><font color="#FF0000">}</font>.
<a name="line1690"><font color="#000000">1690:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line1691"><font color="#000000">1691:</font></a> 
<a name="line1692"><font color="#000000">1692:</font></a> <b><font color="#0000FF">@kindex</font></b> C-x i
<a name="line1693"><font color="#000000">1693:</font></a> <b><font color="#0000FF">@findex</font></b> insert-file
<a name="line1694"><font color="#000000">1694:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x insert-file}</font> (also <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x i}</font>) inserts a copy of the
<a name="line1695"><font color="#000000">1695:</font></a> contents of the specified file into the current buffer at point,
<a name="line1696"><font color="#000000">1696:</font></a> leaving point unchanged before the contents.  The position after the
<a name="line1697"><font color="#000000">1697:</font></a> inserted contents is added to the mark ring, without activating the
<a name="line1698"><font color="#000000">1698:</font></a> mark (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mark Ring</font><font color="#FF0000">}</font>).
<a name="line1699"><font color="#000000">1699:</font></a> 
<a name="line1700"><font color="#000000">1700:</font></a> <b><font color="#0000FF">@findex</font></b> insert-file-literally
<a name="line1701"><font color="#000000">1701:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x insert-file-literally}</font> is like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x insert-file}</font>,
<a name="line1702"><font color="#000000">1702:</font></a> except the file is inserted literally: it is treated as a sequence
<a name="line1703"><font color="#000000">1703:</font></a> of <b><font color="#0000FF">@acronym</font></b><font color="#009900">{ASCII}</font> characters with no special encoding or conversion,
<a name="line1704"><font color="#000000">1704:</font></a> similar to the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x find-file-literally}</font> command
<a name="line1705"><font color="#000000">1705:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Visiting</font><font color="#FF0000">}</font>).
<a name="line1706"><font color="#000000">1706:</font></a> 
<a name="line1707"><font color="#000000">1707:</font></a> <b><font color="#0000FF">@findex</font></b> write-region
<a name="line1708"><font color="#000000">1708:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x write-region}</font> is the inverse of <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x insert-file}</font>; it
<a name="line1709"><font color="#000000">1709:</font></a> copies the contents of the region into the specified file.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line1710"><font color="#000000">1710:</font></a> <font color="#009900">append-to-file}</font> adds the text of the region to the end of the
<a name="line1711"><font color="#000000">1711:</font></a> specified file.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Accumulating Text</font><font color="#FF0000">}</font>.  The variable
<a name="line1712"><font color="#000000">1712:</font></a> <i><font color="#9A1900">@code{write-region-inhibit-fsync} applies to these commands, as well</font></i>
<a name="line1713"><font color="#000000">1713:</font></a> as saving files; see <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Customize Save</font><font color="#FF0000">}</font>.
<a name="line1714"><font color="#000000">1714:</font></a> 
<a name="line1715"><font color="#000000">1715:</font></a> <b><font color="#0000FF">@findex</font></b> set-file-modes
<a name="line1716"><font color="#000000">1716:</font></a> <i><font color="#9A1900">@cindex file modes</font></i>
<a name="line1717"><font color="#000000">1717:</font></a> <i><font color="#9A1900">@cindex file permissions</font></i>
<a name="line1718"><font color="#000000">1718:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x set-file-modes}</font> reads a file name followed by a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{file</font>
<a name="line1719"><font color="#000000">1719:</font></a> <font color="#009900">mode}</font>, and applies that file mode to the specified file.  File modes,
<a name="line1720"><font color="#000000">1720:</font></a> also called <b><font color="#0000FF">@dfn</font></b><font color="#009900">{file permissions}</font>, determine whether a file can be
<a name="line1721"><font color="#000000">1721:</font></a> read, written to, or executed, and by whom.  This command reads file
<a name="line1722"><font color="#000000">1722:</font></a> modes using the same symbolic or octal format accepted by the
<a name="line1723"><font color="#000000">1723:</font></a> <i><font color="#9A1900">@command{chmod} command; for instance, @samp{u+x} means to add</font></i>
<a name="line1724"><font color="#000000">1724:</font></a> execution permission for the user who owns the file.  It has no effect
<a name="line1725"><font color="#000000">1725:</font></a> on operating systems that do not support file modes.  <b><font color="#0000FF">@code</font></b><font color="#009900">{chmod}</font> is a
<a name="line1726"><font color="#000000">1726:</font></a> convenience alias for this function.
<a name="line1727"><font color="#000000">1727:</font></a> 
<a name="line1728"><font color="#000000">1728:</font></a> <b><font color="#0000FF">@node</font></b> Compressed Files
<a name="line1729"><font color="#000000">1729:</font></a> <b><font color="#0000FF">@section</font></b> Accessing Compressed Files
<a name="line1730"><font color="#000000">1730:</font></a> <i><font color="#9A1900">@cindex compression</font></i>
<a name="line1731"><font color="#000000">1731:</font></a> <i><font color="#9A1900">@cindex uncompression</font></i>
<a name="line1732"><font color="#000000">1732:</font></a> <i><font color="#9A1900">@cindex Auto Compression mode</font></i>
<a name="line1733"><font color="#000000">1733:</font></a> <i><font color="#9A1900">@cindex mode, Auto Compression</font></i>
<a name="line1734"><font color="#000000">1734:</font></a> <b><font color="#0000FF">@pindex</font></b> gzip
<a name="line1735"><font color="#000000">1735:</font></a> 
<a name="line1736"><font color="#000000">1736:</font></a>   Emacs automatically uncompresses compressed files when you visit
<a name="line1737"><font color="#000000">1737:</font></a> them, and automatically recompresses them if you alter them and save
<a name="line1738"><font color="#000000">1738:</font></a> them.  Emacs recognizes compressed files by their file names.  File
<a name="line1739"><font color="#000000">1739:</font></a> names ending in <b><font color="#0000FF">@samp</font></b><font color="#009900">{.gz}</font> indicate a file compressed with
<a name="line1740"><font color="#000000">1740:</font></a> <i><font color="#9A1900">@code{gzip}.  Other endings indicate other compression programs.</font></i>
<a name="line1741"><font color="#000000">1741:</font></a> 
<a name="line1742"><font color="#000000">1742:</font></a>   Automatic uncompression and compression apply to all the operations in
<a name="line1743"><font color="#000000">1743:</font></a> which Emacs uses the contents of a file.  This includes visiting it,
<a name="line1744"><font color="#000000">1744:</font></a> saving it, inserting its contents into a buffer, loading it, and byte
<a name="line1745"><font color="#000000">1745:</font></a> compiling it.
<a name="line1746"><font color="#000000">1746:</font></a> 
<a name="line1747"><font color="#000000">1747:</font></a> <b><font color="#0000FF">@findex</font></b> auto-compression-mode
<a name="line1748"><font color="#000000">1748:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-compression-mode
<a name="line1749"><font color="#000000">1749:</font></a>   To disable this feature, type the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line1750"><font color="#000000">1750:</font></a> <font color="#009900">auto-compression-mode}</font>.  You can disable it permanently by
<a name="line1751"><font color="#000000">1751:</font></a> customizing the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-compression-mode}</font>.
<a name="line1752"><font color="#000000">1752:</font></a> 
<a name="line1753"><font color="#000000">1753:</font></a> <b><font color="#0000FF">@node</font></b> File Archives
<a name="line1754"><font color="#000000">1754:</font></a> <b><font color="#0000FF">@section</font></b> File Archives
<a name="line1755"><font color="#000000">1755:</font></a> <i><font color="#9A1900">@cindex mode, tar</font></i>
<a name="line1756"><font color="#000000">1756:</font></a> <i><font color="#9A1900">@cindex Tar mode</font></i>
<a name="line1757"><font color="#000000">1757:</font></a> <i><font color="#9A1900">@cindex file archives</font></i>
<a name="line1758"><font color="#000000">1758:</font></a> 
<a name="line1759"><font color="#000000">1759:</font></a>   A file whose name ends in <b><font color="#0000FF">@samp</font></b><font color="#009900">{.tar}</font> is normally an <b><font color="#0000FF">@dfn</font></b><font color="#009900">{archive}</font>
<a name="line1760"><font color="#000000">1760:</font></a> made by the <b><font color="#0000FF">@code</font></b><font color="#009900">{tar}</font> program.  Emacs views these files in a special
<a name="line1761"><font color="#000000">1761:</font></a> mode called Tar mode which provides a Dired-like list of the contents
<a name="line1762"><font color="#000000">1762:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dired</font><font color="#FF0000">}</font>).  You can move around through the list just as you
<a name="line1763"><font color="#000000">1763:</font></a> would in Dired, and visit the subfiles contained in the archive.
<a name="line1764"><font color="#000000">1764:</font></a> However, not all Dired commands are available in Tar mode.
<a name="line1765"><font color="#000000">1765:</font></a> 
<a name="line1766"><font color="#000000">1766:</font></a>   If Auto Compression mode is enabled (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Compressed Files</font><font color="#FF0000">}</font>), then
<a name="line1767"><font color="#000000">1767:</font></a> Tar mode is used also for compressed archives---files with extensions
<a name="line1768"><font color="#000000">1768:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{.tgz}</font>, <b><font color="#0000FF">@code</font></b><font color="#009900">{.tar.Z}</font> and <b><font color="#0000FF">@code</font></b><font color="#009900">{.tar.gz}</font>.
<a name="line1769"><font color="#000000">1769:</font></a> 
<a name="line1770"><font color="#000000">1770:</font></a>   The keys <b><font color="#0000FF">@kbd</font></b><font color="#009900">{e}</font>, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{f}</font> and <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> all extract a component file
<a name="line1771"><font color="#000000">1771:</font></a> into its own buffer.  You can edit it there, and if you save the
<a name="line1772"><font color="#000000">1772:</font></a> buffer, the edited version will replace the version in the Tar buffer.
<a name="line1773"><font color="#000000">1773:</font></a> Clicking with the mouse on the file name in the Tar buffer does
<a name="line1774"><font color="#000000">1774:</font></a> likewise.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{v}</font> extracts a file into a buffer in View mode
<a name="line1775"><font color="#000000">1775:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">View Mode</font><font color="#FF0000">}</font>).  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{o}</font> extracts the file and displays it in
<a name="line1776"><font color="#000000">1776:</font></a> another window, so you could edit the file and operate on the archive
<a name="line1777"><font color="#000000">1777:</font></a> simultaneously.
<a name="line1778"><font color="#000000">1778:</font></a> 
<a name="line1779"><font color="#000000">1779:</font></a>   The <b><font color="#0000FF">@kbd</font></b><font color="#009900">{I}</font> key adds a new (regular) file to the archive.  The file
<a name="line1780"><font color="#000000">1780:</font></a> is initially empty, but can readily be edited using the commands
<a name="line1781"><font color="#000000">1781:</font></a> above.  The command inserts the new file before the current one, so
<a name="line1782"><font color="#000000">1782:</font></a> that using it on the topmost line of the Tar buffer makes the new file
<a name="line1783"><font color="#000000">1783:</font></a> the first one in the archive, and using it at the end of the buffer
<a name="line1784"><font color="#000000">1784:</font></a> makes it the last one.
<a name="line1785"><font color="#000000">1785:</font></a> 
<a name="line1786"><font color="#000000">1786:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{d}</font> marks a file for deletion when you later use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{x}</font>, and
<a name="line1787"><font color="#000000">1787:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{u}</font> unmarks a file, as in Dired.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C}</font> copies a file from the
<a name="line1788"><font color="#000000">1788:</font></a> archive to disk and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{R}</font> renames a file within the archive.
<a name="line1789"><font color="#000000">1789:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{g}</font> reverts the buffer from the archive on disk.  The keys
<a name="line1790"><font color="#000000">1790:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M}</font>, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{G}</font>, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{O}</font> change the file's permission bits,
<a name="line1791"><font color="#000000">1791:</font></a> group, and owner, respectively.
<a name="line1792"><font color="#000000">1792:</font></a> 
<a name="line1793"><font color="#000000">1793:</font></a>   Saving the Tar buffer writes a new version of the archive to disk with
<a name="line1794"><font color="#000000">1794:</font></a> the changes you made to the components.
<a name="line1795"><font color="#000000">1795:</font></a> 
<a name="line1796"><font color="#000000">1796:</font></a>   You don't need the <b><font color="#0000FF">@code</font></b><font color="#009900">{tar}</font> program to use Tar mode---Emacs reads
<a name="line1797"><font color="#000000">1797:</font></a> the archives directly.  However, accessing compressed archives
<a name="line1798"><font color="#000000">1798:</font></a> requires the appropriate uncompression program.
<a name="line1799"><font color="#000000">1799:</font></a> 
<a name="line1800"><font color="#000000">1800:</font></a> <i><font color="#9A1900">@cindex Archive mode</font></i>
<a name="line1801"><font color="#000000">1801:</font></a> <i><font color="#9A1900">@cindex mode, archive</font></i>
<a name="line1802"><font color="#000000">1802:</font></a> <b><font color="#0000FF">@pindex</font></b> arc
<a name="line1803"><font color="#000000">1803:</font></a> <b><font color="#0000FF">@pindex</font></b> jar
<a name="line1804"><font color="#000000">1804:</font></a> <b><font color="#0000FF">@pindex</font></b> zip
<a name="line1805"><font color="#000000">1805:</font></a> <b><font color="#0000FF">@pindex</font></b> rar
<a name="line1806"><font color="#000000">1806:</font></a> <b><font color="#0000FF">@pindex</font></b> lzh
<a name="line1807"><font color="#000000">1807:</font></a> <b><font color="#0000FF">@pindex</font></b> zoo
<a name="line1808"><font color="#000000">1808:</font></a> <b><font color="#0000FF">@pindex</font></b> 7z
<a name="line1809"><font color="#000000">1809:</font></a> <i><font color="#9A1900">@cindex Java class archives</font></i>
<a name="line1810"><font color="#000000">1810:</font></a> <i><font color="#9A1900">@cindex unzip archives</font></i>
<a name="line1811"><font color="#000000">1811:</font></a>   A separate but similar Archive mode is used for <b><font color="#0000FF">@code</font></b><font color="#009900">{arc}</font>,
<a name="line1812"><font color="#000000">1812:</font></a> <i><font color="#9A1900">@code{jar}, @code{lzh}, @code{zip}, @code{rar}, @code{7z}, and</font></i>
<a name="line1813"><font color="#000000">1813:</font></a> <i><font color="#9A1900">@code{zoo} archives, as well as @code{exe} files that are</font></i>
<a name="line1814"><font color="#000000">1814:</font></a> self-extracting executables.
<a name="line1815"><font color="#000000">1815:</font></a> 
<a name="line1816"><font color="#000000">1816:</font></a>   The key bindings of Archive mode are similar to those in Tar mode,
<a name="line1817"><font color="#000000">1817:</font></a> with the addition of the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{m}</font> key which marks a file for subsequent
<a name="line1818"><font color="#000000">1818:</font></a> operations, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-@key{DEL}}</font> which unmarks all the marked files.
<a name="line1819"><font color="#000000">1819:</font></a> Also, the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a}</font> key toggles the display of detailed file
<a name="line1820"><font color="#000000">1820:</font></a> information, for those archive types where it won't fit in a single
<a name="line1821"><font color="#000000">1821:</font></a> line.  Operations such as renaming a subfile, or changing its mode or
<a name="line1822"><font color="#000000">1822:</font></a> owner, are supported only for some of the archive formats.
<a name="line1823"><font color="#000000">1823:</font></a> 
<a name="line1824"><font color="#000000">1824:</font></a>   Unlike Tar mode, Archive mode runs the archiving programs to unpack
<a name="line1825"><font color="#000000">1825:</font></a> and repack archives.  However, you don't need these programs to look
<a name="line1826"><font color="#000000">1826:</font></a> at the archive table of contents, only to extract or manipulate the
<a name="line1827"><font color="#000000">1827:</font></a> subfiles in the archive.  Details of the program names and their
<a name="line1828"><font color="#000000">1828:</font></a> options can be set in the <b><font color="#0000FF">@samp</font></b><font color="#009900">{Archive}</font> Customize group
<a name="line1829"><font color="#000000">1829:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Customization Groups</font><font color="#FF0000">}</font>).
<a name="line1830"><font color="#000000">1830:</font></a> 
<a name="line1831"><font color="#000000">1831:</font></a> <b><font color="#0000FF">@node</font></b> Remote Files
<a name="line1832"><font color="#000000">1832:</font></a> <b><font color="#0000FF">@section</font></b> Remote Files
<a name="line1833"><font color="#000000">1833:</font></a> 
<a name="line1834"><font color="#000000">1834:</font></a> <i><font color="#9A1900">@cindex Tramp</font></i>
<a name="line1835"><font color="#000000">1835:</font></a> <i><font color="#9A1900">@cindex FTP</font></i>
<a name="line1836"><font color="#000000">1836:</font></a> <i><font color="#9A1900">@cindex remote file access</font></i>
<a name="line1837"><font color="#000000">1837:</font></a>   You can refer to files on other machines using a special file name
<a name="line1838"><font color="#000000">1838:</font></a> syntax:
<a name="line1839"><font color="#000000">1839:</font></a> 
<a name="line1840"><font color="#000000">1840:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line1841"><font color="#000000">1841:</font></a> <b><font color="#0000FF">@group</font></b>
<a name="line1842"><font color="#000000">1842:</font></a> /<b><font color="#0000FF">@var</font></b><font color="#009900">{method}</font>:<b><font color="#0000FF">@var</font></b><font color="#009900">{host}</font>:<b><font color="#0000FF">@var</font></b><font color="#009900">{filename}</font>
<a name="line1843"><font color="#000000">1843:</font></a> /<b><font color="#0000FF">@var</font></b><font color="#009900">{method}</font>:<b><font color="#0000FF">@var</font></b><font color="#009900">{user}</font>@@<b><font color="#0000FF">@var</font></b><font color="#009900">{host}</font>:<b><font color="#0000FF">@var</font></b><font color="#009900">{filename}</font>
<a name="line1844"><font color="#000000">1844:</font></a> /<b><font color="#0000FF">@var</font></b><font color="#009900">{method}</font>:<b><font color="#0000FF">@var</font></b><font color="#009900">{user}</font>@@<b><font color="#0000FF">@var</font></b><font color="#009900">{host}</font>#<b><font color="#0000FF">@var</font></b><font color="#009900">{port}</font>:<b><font color="#0000FF">@var</font></b><font color="#009900">{filename}</font>
<a name="line1845"><font color="#000000">1845:</font></a> <b><font color="#0000FF">@end group</font></b>
<a name="line1846"><font color="#000000">1846:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line1847"><font color="#000000">1847:</font></a> 
<a name="line1848"><font color="#000000">1848:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line1849"><font color="#000000">1849:</font></a> To carry out this request, Emacs uses a remote-login program such as
<a name="line1850"><font color="#000000">1850:</font></a> <i><font color="#9A1900">@command{ssh}.</font></i>
<a name="line1851"><font color="#000000">1851:</font></a> You must always specify in the file name which method to use---for
<a name="line1852"><font color="#000000">1852:</font></a> example, <b><font color="#0000FF">@file</font></b><font color="#009900">{/ssh:@var{user}@@@var{host}:@var{filename}}</font> uses
<a name="line1853"><font color="#000000">1853:</font></a> <i><font color="#9A1900">@command{ssh}.  When you specify the pseudo method @samp{-} in the</font></i>
<a name="line1854"><font color="#000000">1854:</font></a> file name, Emacs chooses the method as follows:
<a name="line1855"><font color="#000000">1855:</font></a> 
<a name="line1856"><font color="#000000">1856:</font></a> <b><font color="#0000FF">@enumerate</font></b>
<a name="line1857"><font color="#000000">1857:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line1858"><font color="#000000">1858:</font></a> If the host name starts with <b><font color="#0000FF">@samp</font></b><font color="#009900">{ftp.}</font> (with dot), Emacs uses FTP.
<a name="line1859"><font color="#000000">1859:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line1860"><font color="#000000">1860:</font></a> If the user name is <b><font color="#0000FF">@samp</font></b><font color="#009900">{ftp}</font> or <b><font color="#0000FF">@samp</font></b><font color="#009900">{anonymous}</font>, Emacs uses FTP.
<a name="line1861"><font color="#000000">1861:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line1862"><font color="#000000">1862:</font></a> If the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{tramp-default-method}</font> is set to <b><font color="#0000FF">@samp</font></b><font color="#009900">{ftp}</font>,
<a name="line1863"><font color="#000000">1863:</font></a> Emacs uses FTP.
<a name="line1864"><font color="#000000">1864:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line1865"><font color="#000000">1865:</font></a> If <b><font color="#0000FF">@command</font></b><font color="#009900">{ssh-agent}</font> is running, Emacs uses <b><font color="#0000FF">@command</font></b><font color="#009900">{scp}</font>.
<a name="line1866"><font color="#000000">1866:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line1867"><font color="#000000">1867:</font></a> Otherwise, Emacs uses <b><font color="#0000FF">@command</font></b><font color="#009900">{ssh}</font>.
<a name="line1868"><font color="#000000">1868:</font></a> <b><font color="#0000FF">@end enumerate</font></b>
<a name="line1869"><font color="#000000">1869:</font></a> 
<a name="line1870"><font color="#000000">1870:</font></a> <i><font color="#9A1900">@cindex disabling remote files</font></i>
<a name="line1871"><font color="#000000">1871:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line1872"><font color="#000000">1872:</font></a> You can entirely turn off the remote file name feature by setting the
<a name="line1873"><font color="#000000">1873:</font></a> variable <b><font color="#0000FF">@code</font></b><font color="#009900">{tramp-mode}</font> to <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>.  You can turn off the
<a name="line1874"><font color="#000000">1874:</font></a> feature in individual cases by quoting the file name with <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font>
<a name="line1875"><font color="#000000">1875:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Quoted File Names</font><font color="#FF0000">}</font>).
<a name="line1876"><font color="#000000">1876:</font></a> 
<a name="line1877"><font color="#000000">1877:</font></a> <i><font color="#9A1900">@cindex @code{ange-ftp}</font></i>
<a name="line1878"><font color="#000000">1878:</font></a>   Remote file access through FTP is handled by the Ange-FTP package, which
<a name="line1879"><font color="#000000">1879:</font></a> is documented in the following.  Remote file access through the other
<a name="line1880"><font color="#000000">1880:</font></a> methods is handled by the Tramp package, which has its own manual.
<a name="line1881"><font color="#000000">1881:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Top, The Tramp Manual,, tramp, The Tramp Manual</font><font color="#FF0000">}</font>.
<a name="line1882"><font color="#000000">1882:</font></a> 
<a name="line1883"><font color="#000000">1883:</font></a> <b><font color="#0000FF">@vindex</font></b> ange-ftp-default-user
<a name="line1884"><font color="#000000">1884:</font></a> <i><font color="#9A1900">@cindex user name for remote file access</font></i>
<a name="line1885"><font color="#000000">1885:</font></a>   When the Ange-FTP package is used, Emacs logs in through FTP using
<a name="line1886"><font color="#000000">1886:</font></a> the name <b><font color="#0000FF">@var</font></b><font color="#009900">{user}</font>, if that is specified in the remote file name.  If
<a name="line1887"><font color="#000000">1887:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{user}</font> is unspecified, Emacs logs in using your user name on the
<a name="line1888"><font color="#000000">1888:</font></a> local system; but if you set the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{ange-ftp-default-user}</font>
<a name="line1889"><font color="#000000">1889:</font></a> to a string, that string is used instead.  When logging in, Emacs may
<a name="line1890"><font color="#000000">1890:</font></a> also ask for a password.
<a name="line1891"><font color="#000000">1891:</font></a> 
<a name="line1892"><font color="#000000">1892:</font></a> <i><font color="#9A1900">@cindex backups for remote files</font></i>
<a name="line1893"><font color="#000000">1893:</font></a> <b><font color="#0000FF">@vindex</font></b> ange-ftp-make-backup-files
<a name="line1894"><font color="#000000">1894:</font></a>   For performance reasons, Emacs does not make backup files for files
<a name="line1895"><font color="#000000">1895:</font></a> accessed via FTP by default.  To make it do so, change the variable
<a name="line1896"><font color="#000000">1896:</font></a> <i><font color="#9A1900">@code{ange-ftp-make-backup-files} to a non-@code{nil} value.</font></i>
<a name="line1897"><font color="#000000">1897:</font></a> 
<a name="line1898"><font color="#000000">1898:</font></a>   By default, auto-save files for remote files are made in the
<a name="line1899"><font color="#000000">1899:</font></a> temporary file directory on the local machine, as specified by the
<a name="line1900"><font color="#000000">1900:</font></a> variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-save-file-name-transforms}</font>.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Auto Save</font>
<a name="line1901"><font color="#000000">1901:</font></a> <font color="#FF0000">Files</font><font color="#FF0000">}</font>.
<a name="line1902"><font color="#000000">1902:</font></a> 
<a name="line1903"><font color="#000000">1903:</font></a> <i><font color="#9A1900">@cindex anonymous FTP</font></i>
<a name="line1904"><font color="#000000">1904:</font></a> <b><font color="#0000FF">@vindex</font></b> ange-ftp-generate-anonymous-password
<a name="line1905"><font color="#000000">1905:</font></a>   To visit files accessible by anonymous FTP, you use special user
<a name="line1906"><font color="#000000">1906:</font></a> names <b><font color="#0000FF">@samp</font></b><font color="#009900">{anonymous}</font> or <b><font color="#0000FF">@samp</font></b><font color="#009900">{ftp}</font>.  Passwords for these user names
<a name="line1907"><font color="#000000">1907:</font></a> are handled specially.  The variable
<a name="line1908"><font color="#000000">1908:</font></a> <i><font color="#9A1900">@code{ange-ftp-generate-anonymous-password} controls what happens: if</font></i>
<a name="line1909"><font color="#000000">1909:</font></a> the value of this variable is a string, then that string is used as
<a name="line1910"><font color="#000000">1910:</font></a> the password; if non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> (the default), then the value of
<a name="line1911"><font color="#000000">1911:</font></a> <i><font color="#9A1900">@code{user-mail-address} is used; if @code{nil}, then Emacs prompts</font></i>
<a name="line1912"><font color="#000000">1912:</font></a> you for a password as usual (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Passwords</font><font color="#FF0000">}</font>).
<a name="line1913"><font color="#000000">1913:</font></a> 
<a name="line1914"><font color="#000000">1914:</font></a> <i><font color="#9A1900">@cindex firewall, and accessing remote files</font></i>
<a name="line1915"><font color="#000000">1915:</font></a> <i><font color="#9A1900">@cindex gateway, and remote file access with @code{ange-ftp}</font></i>
<a name="line1916"><font color="#000000">1916:</font></a> <b><font color="#0000FF">@vindex</font></b> ange-ftp-smart-gateway
<a name="line1917"><font color="#000000">1917:</font></a> <b><font color="#0000FF">@vindex</font></b> ange-ftp-gateway-host
<a name="line1918"><font color="#000000">1918:</font></a>   Sometimes you may be unable to access files on a remote machine
<a name="line1919"><font color="#000000">1919:</font></a> because a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{firewall}</font> in between blocks the connection for security
<a name="line1920"><font color="#000000">1920:</font></a> reasons.  If you can log in on a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{gateway}</font> machine from which the
<a name="line1921"><font color="#000000">1921:</font></a> target files <b><font color="#0000FF">@emph</font></b><font color="#FF0000">{</font><i><font color="#009900">are</font></i><font color="#FF0000">}</font> accessible, and whose FTP server supports
<a name="line1922"><font color="#000000">1922:</font></a> gatewaying features, you can still use remote file names; all you have
<a name="line1923"><font color="#000000">1923:</font></a> to do is specify the name of the gateway machine by setting the
<a name="line1924"><font color="#000000">1924:</font></a> variable <b><font color="#0000FF">@code</font></b><font color="#009900">{ange-ftp-gateway-host}</font>, and set
<a name="line1925"><font color="#000000">1925:</font></a> <i><font color="#9A1900">@code{ange-ftp-smart-gateway} to @code{t}.  Otherwise you may be able</font></i>
<a name="line1926"><font color="#000000">1926:</font></a> to make remote file names work, but the procedure is complex.  You can
<a name="line1927"><font color="#000000">1927:</font></a> read the instructions by typing <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x finder-commentary @key{RET}</font>
<a name="line1928"><font color="#000000">1928:</font></a> <font color="#009900">ange-ftp @key{RET}}</font>.
<a name="line1929"><font color="#000000">1929:</font></a> 
<a name="line1930"><font color="#000000">1930:</font></a> <b><font color="#0000FF">@node</font></b> Quoted File Names
<a name="line1931"><font color="#000000">1931:</font></a> <b><font color="#0000FF">@section</font></b> Quoted File Names
<a name="line1932"><font color="#000000">1932:</font></a> 
<a name="line1933"><font color="#000000">1933:</font></a> <i><font color="#9A1900">@cindex quoting file names</font></i>
<a name="line1934"><font color="#000000">1934:</font></a> <i><font color="#9A1900">@cindex file names, quote special characters</font></i>
<a name="line1935"><font color="#000000">1935:</font></a>   You can <b><font color="#0000FF">@dfn</font></b><font color="#009900">{quote}</font> an absolute file name to prevent special
<a name="line1936"><font color="#000000">1936:</font></a> characters and syntax in it from having their special effects.
<a name="line1937"><font color="#000000">1937:</font></a> The way to do this is to add <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font> at the beginning.
<a name="line1938"><font color="#000000">1938:</font></a> 
<a name="line1939"><font color="#000000">1939:</font></a>   For example, you can quote a local file name which appears remote, to
<a name="line1940"><font color="#000000">1940:</font></a> prevent it from being treated as a remote file name.  Thus, if you have
<a name="line1941"><font color="#000000">1941:</font></a> a directory named <b><font color="#0000FF">@file</font></b><font color="#009900">{/foo:}</font> and a file named <b><font color="#0000FF">@file</font></b><font color="#009900">{bar}</font> in it, you
<a name="line1942"><font color="#000000">1942:</font></a> can refer to that file in Emacs as <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:/foo:/bar}</font>.
<a name="line1943"><font color="#000000">1943:</font></a> 
<a name="line1944"><font color="#000000">1944:</font></a>   If you want to quote only special characters in the local part of a
<a name="line1945"><font color="#000000">1945:</font></a> remote file name, you can quote just the local part.
<a name="line1946"><font color="#000000">1946:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{/ssh:baz:/:/foo:/bar}</font> refers to the file <b><font color="#0000FF">@file</font></b><font color="#009900">{bar}</font> of directory
<a name="line1947"><font color="#000000">1947:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/foo:}</font> on the host <b><font color="#0000FF">@file</font></b><font color="#009900">{baz}</font>.
<a name="line1948"><font color="#000000">1948:</font></a> 
<a name="line1949"><font color="#000000">1949:</font></a>   <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font> can also prevent <b><font color="#0000FF">@samp</font></b><font color="#009900">{~}</font> from being treated as a special
<a name="line1950"><font color="#000000">1950:</font></a> character for a user's home directory.  For example, <b><font color="#0000FF">@file</font></b><font color="#009900">{/:/tmp/~hack}</font>
<a name="line1951"><font color="#000000">1951:</font></a> refers to a file whose name is <b><font color="#0000FF">@file</font></b><font color="#009900">{~hack}</font> in directory <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp}</font>.
<a name="line1952"><font color="#000000">1952:</font></a> 
<a name="line1953"><font color="#000000">1953:</font></a>   Quoting with <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font> is also a way to enter in the minibuffer a
<a name="line1954"><font color="#000000">1954:</font></a> file name that contains <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font>.  In order for this to work, the
<a name="line1955"><font color="#000000">1955:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font> must be at the beginning of the minibuffer contents.  (You
<a name="line1956"><font color="#000000">1956:</font></a> can also double each <b><font color="#0000FF">@samp</font></b><font color="#009900">{$}</font>; see <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">File Names with $</font><font color="#FF0000">}</font>.)
<a name="line1957"><font color="#000000">1957:</font></a> 
<a name="line1958"><font color="#000000">1958:</font></a>   You can also quote wildcard characters with <b><font color="#0000FF">@samp</font></b><font color="#009900">{/:}</font>, for visiting.
<a name="line1959"><font color="#000000">1959:</font></a> For example, <b><font color="#0000FF">@file</font></b><font color="#009900">{/:/tmp/foo*bar}</font> visits the file
<a name="line1960"><font color="#000000">1960:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp/foo*bar}</font>.
<a name="line1961"><font color="#000000">1961:</font></a> 
<a name="line1962"><font color="#000000">1962:</font></a>   Another method of getting the same result is to enter
<a name="line1963"><font color="#000000">1963:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp/foo[*]bar}</font>, which is a wildcard specification that matches
<a name="line1964"><font color="#000000">1964:</font></a> only <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp/foo*bar}</font>.  However, in many cases there is no need to
<a name="line1965"><font color="#000000">1965:</font></a> quote the wildcard characters because even unquoted they give the
<a name="line1966"><font color="#000000">1966:</font></a> right result.  For example, if the only file name in <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp}</font> that
<a name="line1967"><font color="#000000">1967:</font></a> starts with <b><font color="#0000FF">@samp</font></b><font color="#009900">{foo}</font> and ends with <b><font color="#0000FF">@samp</font></b><font color="#009900">{bar}</font> is <b><font color="#0000FF">@file</font></b><font color="#009900">{foo*bar}</font>,
<a name="line1968"><font color="#000000">1968:</font></a> then specifying <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp/foo*bar}</font> will visit only
<a name="line1969"><font color="#000000">1969:</font></a> <b><font color="#0000FF">@file</font></b><font color="#009900">{/tmp/foo*bar}</font>.
<a name="line1970"><font color="#000000">1970:</font></a> 
<a name="line1971"><font color="#000000">1971:</font></a> <b><font color="#0000FF">@node</font></b> File Name Cache
<a name="line1972"><font color="#000000">1972:</font></a> <b><font color="#0000FF">@section</font></b> File Name Cache
<a name="line1973"><font color="#000000">1973:</font></a> 
<a name="line1974"><font color="#000000">1974:</font></a> <i><font color="#9A1900">@cindex file name caching</font></i>
<a name="line1975"><font color="#000000">1975:</font></a> <i><font color="#9A1900">@cindex cache of file names</font></i>
<a name="line1976"><font color="#000000">1976:</font></a> <b><font color="#0000FF">@pindex</font></b> find
<a name="line1977"><font color="#000000">1977:</font></a> <b><font color="#0000FF">@kindex</font></b> C-TAB
<a name="line1978"><font color="#000000">1978:</font></a> <b><font color="#0000FF">@findex</font></b> file-cache-minibuffer-complete
<a name="line1979"><font color="#000000">1979:</font></a>   You can use the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{file name cache}</font> to make it easy to locate a
<a name="line1980"><font color="#000000">1980:</font></a> file by name, without having to remember exactly where it is located.
<a name="line1981"><font color="#000000">1981:</font></a> When typing a file name in the minibuffer, <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-@key{TAB}}</font>
<a name="line1982"><font color="#000000">1982:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{file-cache-minibuffer-complete}</font>) completes it using the file
<a name="line1983"><font color="#000000">1983:</font></a> name cache.  If you repeat <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-@key{TAB}}</font>, that cycles through the
<a name="line1984"><font color="#000000">1984:</font></a> possible completions of what you had originally typed.  (However, note
<a name="line1985"><font color="#000000">1985:</font></a> that the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-@key{TAB}}</font> character cannot be typed on most text
<a name="line1986"><font color="#000000">1986:</font></a> terminals.)
<a name="line1987"><font color="#000000">1987:</font></a> 
<a name="line1988"><font color="#000000">1988:</font></a>   The file name cache does not fill up automatically.  Instead, you
<a name="line1989"><font color="#000000">1989:</font></a> load file names into the cache using these commands:
<a name="line1990"><font color="#000000">1990:</font></a> 
<a name="line1991"><font color="#000000">1991:</font></a> <b><font color="#0000FF">@findex</font></b> file-cache-add-directory
<a name="line1992"><font color="#000000">1992:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line1993"><font color="#000000">1993:</font></a> <b><font color="#0000FF">@item</font></b> M-x file-cache-add-directory <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{directory}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1994"><font color="#000000">1994:</font></a> Add each file name in <b><font color="#0000FF">@var</font></b><font color="#009900">{directory}</font> to the file name cache.
<a name="line1995"><font color="#000000">1995:</font></a> <b><font color="#0000FF">@item</font></b> M-x file-cache-add-directory-using-find <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{directory}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1996"><font color="#000000">1996:</font></a> Add each file name in <b><font color="#0000FF">@var</font></b><font color="#009900">{directory}</font> and all of its nested
<a name="line1997"><font color="#000000">1997:</font></a> subdirectories to the file name cache.
<a name="line1998"><font color="#000000">1998:</font></a> <b><font color="#0000FF">@item</font></b> M-x file-cache-add-directory-using-locate <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{directory}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line1999"><font color="#000000">1999:</font></a> Add each file name in <b><font color="#0000FF">@var</font></b><font color="#009900">{directory}</font> and all of its nested
<a name="line2000"><font color="#000000">2000:</font></a> subdirectories to the file name cache, using <b><font color="#0000FF">@command</font></b><font color="#009900">{locate}</font> to find
<a name="line2001"><font color="#000000">2001:</font></a> them all.
<a name="line2002"><font color="#000000">2002:</font></a> <b><font color="#0000FF">@item</font></b> M-x file-cache-add-directory-list <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{variable}</font> <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line2003"><font color="#000000">2003:</font></a> Add each file name in each directory listed in <b><font color="#0000FF">@var</font></b><font color="#009900">{variable}</font> to the
<a name="line2004"><font color="#000000">2004:</font></a> file name cache.  <b><font color="#0000FF">@var</font></b><font color="#009900">{variable}</font> should be a Lisp variable whose value
<a name="line2005"><font color="#000000">2005:</font></a> is a list of directories, like <b><font color="#0000FF">@code</font></b><font color="#009900">{load-path}</font>.
<a name="line2006"><font color="#000000">2006:</font></a> <b><font color="#0000FF">@item</font></b> M-x file-cache-clear-cache <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line2007"><font color="#000000">2007:</font></a> Clear the cache; that is, remove all file names from it.
<a name="line2008"><font color="#000000">2008:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line2009"><font color="#000000">2009:</font></a> 
<a name="line2010"><font color="#000000">2010:</font></a>   The file name cache is not persistent: it is kept and maintained
<a name="line2011"><font color="#000000">2011:</font></a> only for the duration of the Emacs session.  You can view the contents
<a name="line2012"><font color="#000000">2012:</font></a> of the cache with the <b><font color="#0000FF">@code</font></b><font color="#009900">{file-cache-display}</font> command.
<a name="line2013"><font color="#000000">2013:</font></a> 
<a name="line2014"><font color="#000000">2014:</font></a> <b><font color="#0000FF">@node</font></b> File Conveniences
<a name="line2015"><font color="#000000">2015:</font></a> <b><font color="#0000FF">@section</font></b> Convenience Features for Finding Files
<a name="line2016"><font color="#000000">2016:</font></a> 
<a name="line2017"><font color="#000000">2017:</font></a>   In this section, we introduce some convenient facilities for finding
<a name="line2018"><font color="#000000">2018:</font></a> recently-opened files, reading file names from a buffer, and viewing
<a name="line2019"><font color="#000000">2019:</font></a> image files.
<a name="line2020"><font color="#000000">2020:</font></a> 
<a name="line2021"><font color="#000000">2021:</font></a> <b><font color="#0000FF">@findex</font></b> recentf-mode
<a name="line2022"><font color="#000000">2022:</font></a> <b><font color="#0000FF">@vindex</font></b> recentf-mode
<a name="line2023"><font color="#000000">2023:</font></a> <b><font color="#0000FF">@findex</font></b> recentf-save-list
<a name="line2024"><font color="#000000">2024:</font></a> <b><font color="#0000FF">@findex</font></b> recentf-edit-list
<a name="line2025"><font color="#000000">2025:</font></a>   If you enable Recentf mode, with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x recentf-mode}</font>, the
<a name="line2026"><font color="#000000">2026:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{File}</font> menu includes a submenu containing a list of recently
<a name="line2027"><font color="#000000">2027:</font></a> opened files.  <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x recentf-save-list}</font> saves the current
<a name="line2028"><font color="#000000">2028:</font></a> <i><font color="#9A1900">@code{recent-file-list} to a file, and @kbd{M-x recentf-edit-list}</font></i>
<a name="line2029"><font color="#000000">2029:</font></a> edits it.
<a name="line2030"><font color="#000000">2030:</font></a> 
<a name="line2031"><font color="#000000">2031:</font></a> <i><font color="#9A1900">@c FIXME partial-completion-mode (complete.el) is obsolete.</font></i>
<a name="line2032"><font color="#000000">2032:</font></a>   The <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x ffap}</font> command generalizes <b><font color="#0000FF">@code</font></b><font color="#009900">{find-file}</font> with more
<a name="line2033"><font color="#000000">2033:</font></a> powerful heuristic defaults (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">FFAP</font><font color="#FF0000">}</font>), often based on the text at
<a name="line2034"><font color="#000000">2034:</font></a> point.  Partial Completion mode offers other features extending
<a name="line2035"><font color="#000000">2035:</font></a> <i><font color="#9A1900">@code{find-file}, which can be used with @code{ffap}.</font></i>
<a name="line2036"><font color="#000000">2036:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Completion Options</font><font color="#FF0000">}</font>.
<a name="line2037"><font color="#000000">2037:</font></a> 
<a name="line2038"><font color="#000000">2038:</font></a> <b><font color="#0000FF">@findex</font></b> image-mode
<a name="line2039"><font color="#000000">2039:</font></a> <b><font color="#0000FF">@findex</font></b> image-toggle-display
<a name="line2040"><font color="#000000">2040:</font></a> <b><font color="#0000FF">@findex</font></b> image-next-file
<a name="line2041"><font color="#000000">2041:</font></a> <b><font color="#0000FF">@findex</font></b> image-previous-file
<a name="line2042"><font color="#000000">2042:</font></a> <i><font color="#9A1900">@cindex images, viewing</font></i>
<a name="line2043"><font color="#000000">2043:</font></a>   Visiting image files automatically selects Image mode.  In this
<a name="line2044"><font color="#000000">2044:</font></a> major mode, you can type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-c}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-toggle-display}</font>)
<a name="line2045"><font color="#000000">2045:</font></a> to toggle between displaying the file as an image in the Emacs buffer,
<a name="line2046"><font color="#000000">2046:</font></a> and displaying its underlying text (or raw byte) representation.
<a name="line2047"><font color="#000000">2047:</font></a> Additionally you can type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-x}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-toggle-hex-display}</font>)
<a name="line2048"><font color="#000000">2048:</font></a> to toggle between displaying the file as an image in the Emacs buffer,
<a name="line2049"><font color="#000000">2049:</font></a> and displaying it in hex representation.
<a name="line2050"><font color="#000000">2050:</font></a> Displaying the file as an image works only if Emacs is compiled with
<a name="line2051"><font color="#000000">2051:</font></a> support for displaying such images.  If the displayed image is wider
<a name="line2052"><font color="#000000">2052:</font></a> or taller than the frame, the usual point motion keys (<b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-f}</font>,
<a name="line2053"><font color="#000000">2053:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-p}</font>, and so forth) cause different parts of the image to be
<a name="line2054"><font color="#000000">2054:</font></a> displayed.  You can press <b><font color="#0000FF">@kbd</font></b><font color="#009900">{n}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-next-file}</font>) and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{p}</font>
<a name="line2055"><font color="#000000">2055:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-previous-file}</font>) to visit the next image file and the
<a name="line2056"><font color="#000000">2056:</font></a> previous image file in the same directory, respectively.
<a name="line2057"><font color="#000000">2057:</font></a> 
<a name="line2058"><font color="#000000">2058:</font></a> <b><font color="#0000FF">@findex</font></b> image-toggle-animation
<a name="line2059"><font color="#000000">2059:</font></a> <b><font color="#0000FF">@findex</font></b> image-next-frame
<a name="line2060"><font color="#000000">2060:</font></a> <b><font color="#0000FF">@findex</font></b> image-previous-frame
<a name="line2061"><font color="#000000">2061:</font></a> <b><font color="#0000FF">@findex</font></b> image-goto-frame
<a name="line2062"><font color="#000000">2062:</font></a> <b><font color="#0000FF">@findex</font></b> image-increase-speed
<a name="line2063"><font color="#000000">2063:</font></a> <b><font color="#0000FF">@findex</font></b> image-decrease-speed
<a name="line2064"><font color="#000000">2064:</font></a> <b><font color="#0000FF">@findex</font></b> image-reset-speed
<a name="line2065"><font color="#000000">2065:</font></a> <b><font color="#0000FF">@findex</font></b> image-reverse-speed
<a name="line2066"><font color="#000000">2066:</font></a> <b><font color="#0000FF">@vindex</font></b> image-animate-loop
<a name="line2067"><font color="#000000">2067:</font></a> <i><font color="#9A1900">@cindex image animation</font></i>
<a name="line2068"><font color="#000000">2068:</font></a> <i><font color="#9A1900">@cindex animated images</font></i>
<a name="line2069"><font color="#000000">2069:</font></a>   If the image can be animated, the command <b><font color="#0000FF">@key</font></b><font color="#009900">{RET}</font>
<a name="line2070"><font color="#000000">2070:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-toggle-animation}</font>) starts or stops the animation.
<a name="line2071"><font color="#000000">2071:</font></a> Animation plays once, unless the option <b><font color="#0000FF">@code</font></b><font color="#009900">{image-animate-loop}</font> is
<a name="line2072"><font color="#000000">2072:</font></a> non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>.  With <b><font color="#0000FF">@kbd</font></b><font color="#009900">{f}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-next-frame}</font>) and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{b}</font>
<a name="line2073"><font color="#000000">2073:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-previous-frame}</font>) you can step through the individual
<a name="line2074"><font color="#000000">2074:</font></a> frames.  Both commands accept a numeric prefix to step through several
<a name="line2075"><font color="#000000">2075:</font></a> frames at once.  You can go to a specific frame with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{F}</font>
<a name="line2076"><font color="#000000">2076:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-goto-frame}</font>).  Frames are indexed from 1.  Typing <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a</font>
<a name="line2077"><font color="#000000">2077:</font></a> <font color="#009900">+}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-increase-speed}</font>) increases the speed of the animation,
<a name="line2078"><font color="#000000">2078:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a -}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-decrease-speed}</font>) decreases it, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a r}</font>
<a name="line2079"><font color="#000000">2079:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-reverse-speed}</font>) reverses it.  The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a 0}</font>
<a name="line2080"><font color="#000000">2080:</font></a> (<b><font color="#0000FF">@code</font></b><font color="#009900">{image-reset-speed}</font>) resets the speed to the original value.
<a name="line2081"><font color="#000000">2081:</font></a> 
<a name="line2082"><font color="#000000">2082:</font></a> <i><font color="#9A1900">@cindex ImageMagick support</font></i>
<a name="line2083"><font color="#000000">2083:</font></a> <b><font color="#0000FF">@vindex</font></b> imagemagick-enabled-types
<a name="line2084"><font color="#000000">2084:</font></a> <b><font color="#0000FF">@vindex</font></b> imagemagick-types-inhibit
<a name="line2085"><font color="#000000">2085:</font></a>   If Emacs was compiled with support for the ImageMagick library, it
<a name="line2086"><font color="#000000">2086:</font></a> can use ImageMagick to render a wide variety of images.  The variable
<a name="line2087"><font color="#000000">2087:</font></a> <i><font color="#9A1900">@code{imagemagick-enabled-types} lists the image types that Emacs may</font></i>
<a name="line2088"><font color="#000000">2088:</font></a> render using ImageMagick; each element in the list should be an
<a name="line2089"><font color="#000000">2089:</font></a> internal ImageMagick name for an image type, as a symbol or an
<a name="line2090"><font color="#000000">2090:</font></a> equivalent string (e.g., <b><font color="#0000FF">@code</font></b><font color="#009900">{BMP}</font> for <b><font color="#0000FF">@file</font></b><font color="#009900">{.bmp}</font> images).  To
<a name="line2091"><font color="#000000">2091:</font></a> enable ImageMagick for all possible image types, change
<a name="line2092"><font color="#000000">2092:</font></a> <i><font color="#9A1900">@code{imagemagick-enabled-types} to @code{t}.  The variable</font></i>
<a name="line2093"><font color="#000000">2093:</font></a> <i><font color="#9A1900">@code{imagemagick-types-inhibit} lists the image types which should</font></i>
<a name="line2094"><font color="#000000">2094:</font></a> never be rendered using ImageMagick, regardless of the value of
<a name="line2095"><font color="#000000">2095:</font></a> <i><font color="#9A1900">@code{imagemagick-enabled-types} (the default list includes types like</font></i>
<a name="line2096"><font color="#000000">2096:</font></a> <i><font color="#9A1900">@code{C} and @code{HTML}, which ImageMagick can render as an image</font></i>
<a name="line2097"><font color="#000000">2097:</font></a> but Emacs should not).  To disable ImageMagick entirely, change
<a name="line2098"><font color="#000000">2098:</font></a> <i><font color="#9A1900">@code{imagemagick-types-inhibit} to @code{t}.</font></i>
<a name="line2099"><font color="#000000">2099:</font></a> 
<a name="line2100"><font color="#000000">2100:</font></a> <b><font color="#0000FF">@findex</font></b> thumbs-mode
<a name="line2101"><font color="#000000">2101:</font></a> <i><font color="#9A1900">@cindex mode, Thumbs</font></i>
<a name="line2102"><font color="#000000">2102:</font></a>   The Image-Dired package can also be used to view images as
<a name="line2103"><font color="#000000">2103:</font></a> thumbnails.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Image-Dired</font><font color="#FF0000">}</font>.
<a name="line2104"><font color="#000000">2104:</font></a> 
<a name="line2105"><font color="#000000">2105:</font></a> <b><font color="#0000FF">@node</font></b> Filesets
<a name="line2106"><font color="#000000">2106:</font></a> <b><font color="#0000FF">@section</font></b> Filesets
<a name="line2107"><font color="#000000">2107:</font></a> <i><font color="#9A1900">@cindex filesets</font></i>
<a name="line2108"><font color="#000000">2108:</font></a> <i><font color="#9A1900">@cindex sets of files</font></i>
<a name="line2109"><font color="#000000">2109:</font></a> 
<a name="line2110"><font color="#000000">2110:</font></a> <b><font color="#0000FF">@findex</font></b> filesets-init
<a name="line2111"><font color="#000000">2111:</font></a>   If you regularly edit a certain group of files, you can define them
<a name="line2112"><font color="#000000">2112:</font></a> as a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{fileset}</font>.  This lets you perform certain operations, such as
<a name="line2113"><font color="#000000">2113:</font></a> visiting, <b><font color="#0000FF">@code</font></b><font color="#009900">{query-replace}</font>, and shell commands on all the files at
<a name="line2114"><font color="#000000">2114:</font></a> once.  To make use of filesets, you must first add the expression
<a name="line2115"><font color="#000000">2115:</font></a> <i><font color="#9A1900">@code{(filesets-init)} to your init file (@pxref{Init File}).  This</font></i>
<a name="line2116"><font color="#000000">2116:</font></a> adds a <b><font color="#0000FF">@samp</font></b><font color="#009900">{Filesets}</font> sub-menu to the menu bar's <b><font color="#0000FF">@samp</font></b><font color="#009900">{File}</font> menu.
<a name="line2117"><font color="#000000">2117:</font></a> 
<a name="line2118"><font color="#000000">2118:</font></a> <b><font color="#0000FF">@findex</font></b> filesets-add-buffer
<a name="line2119"><font color="#000000">2119:</font></a> <b><font color="#0000FF">@findex</font></b> filesets-remove-buffer
<a name="line2120"><font color="#000000">2120:</font></a>   The simplest way to define a fileset is by adding files to it one at
<a name="line2121"><font color="#000000">2121:</font></a> a time.  To add a file to fileset <b><font color="#0000FF">@var</font></b><font color="#009900">{name}</font>, visit the file and type
<a name="line2122"><font color="#000000">2122:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x filesets-add-buffer @key{RET} @var{name} @key{RET}}</font>.  If
<a name="line2123"><font color="#000000">2123:</font></a> there is no fileset <b><font color="#0000FF">@var</font></b><font color="#009900">{name}</font>, this creates a new one, which
<a name="line2124"><font color="#000000">2124:</font></a> initially contains only the current file.  The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line2125"><font color="#000000">2125:</font></a> <font color="#009900">filesets-remove-buffer}</font> removes the current file from a fileset.
<a name="line2126"><font color="#000000">2126:</font></a> 
<a name="line2127"><font color="#000000">2127:</font></a>   You can also edit the list of filesets directly, with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x</font>
<a name="line2128"><font color="#000000">2128:</font></a> <font color="#009900">filesets-edit}</font> (or by choosing <b><font color="#0000FF">@samp</font></b><font color="#009900">{Edit Filesets}</font> from the
<a name="line2129"><font color="#000000">2129:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{Filesets}</font> menu).  The editing is performed in a Customize buffer
<a name="line2130"><font color="#000000">2130:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Easy Customization</font><font color="#FF0000">}</font>).  Normally, a fileset is a simple list of
<a name="line2131"><font color="#000000">2131:</font></a> files, but you can also define a fileset as a regular expression
<a name="line2132"><font color="#000000">2132:</font></a> matching file names.  Some examples of these more complicated filesets
<a name="line2133"><font color="#000000">2133:</font></a> are shown in the Customize buffer.  Remember to select <b><font color="#0000FF">@samp</font></b><font color="#009900">{Save for</font>
<a name="line2134"><font color="#000000">2134:</font></a> <font color="#009900">future sessions}</font> if you want to use the same filesets in future Emacs
<a name="line2135"><font color="#000000">2135:</font></a> sessions.
<a name="line2136"><font color="#000000">2136:</font></a> 
<a name="line2137"><font color="#000000">2137:</font></a>   You can use the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x filesets-open}</font> to visit all the
<a name="line2138"><font color="#000000">2138:</font></a> files in a fileset, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x filesets-close}</font> to close them.  Use
<a name="line2139"><font color="#000000">2139:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x filesets-run-cmd}</font> to run a shell command on all the files in
<a name="line2140"><font color="#000000">2140:</font></a> a fileset.  These commands are also available from the <b><font color="#0000FF">@samp</font></b><font color="#009900">{Filesets}</font>
<a name="line2141"><font color="#000000">2141:</font></a> menu, where each existing fileset is represented by a submenu.
<a name="line2142"><font color="#000000">2142:</font></a> 
<a name="line2143"><font color="#000000">2143:</font></a>    <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Version Control</font><font color="#FF0000">}</font>, for a different concept of filesets:
<a name="line2144"><font color="#000000">2144:</font></a> groups of files bundled together for version control operations.
<a name="line2145"><font color="#000000">2145:</font></a> Filesets of that type are unnamed, and do not persist across Emacs
<a name="line2146"><font color="#000000">2146:</font></a> sessions.
<a name="line2147"><font color="#000000">2147:</font></a> </tt></pre>
