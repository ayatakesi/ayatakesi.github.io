<!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><a name="line1"><font color="#000000">001:</font></a> <i><font color="#9A1900">@c -*- coding: utf-8 -*-</font></i>
<a name="line2"><font color="#000000">002:</font></a> <i><font color="#9A1900">@c This is part of the Emacs manual.</font></i>
<a name="line3"><font color="#000000">003:</font></a> <i><font color="#9A1900">@c Copyright (C) 1985-1987, 1993-1995, 1997, 2000-2018 Free Software</font></i>
<a name="line4"><font color="#000000">004:</font></a> <i><font color="#9A1900">@c Foundation, Inc.</font></i>
<a name="line5"><font color="#000000">005:</font></a> <i><font color="#9A1900">@c See file emacs.texi for copying conditions.</font></i>
<a name="line6"><font color="#000000">006:</font></a> <b><font color="#0000FF">@node</font></b> Modes
<a name="line7"><font color="#000000">007:</font></a> <i><font color="#9A1900">@chapter Major and Minor Modes</font></i>
<a name="line8"><font color="#000000">008:</font></a> 
<a name="line9"><font color="#000000">009:</font></a>   Emacs contains many <b><font color="#0000FF">@dfn</font></b><font color="#009900">{editing modes}</font> that alter its basic
<a name="line10"><font color="#000000">010:</font></a> behavior in useful ways.  These are divided into <b><font color="#0000FF">@dfn</font></b><font color="#009900">{major modes}</font> and
<a name="line11"><font color="#000000">011:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{minor modes}</font>.
<a name="line12"><font color="#000000">012:</font></a> 
<a name="line13"><font color="#000000">013:</font></a>   Major modes provide specialized facilities for working on a
<a name="line14"><font color="#000000">014:</font></a> particular file type, such as a C source file (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Programs</font><font color="#FF0000">}</font>), or a
<a name="line15"><font color="#000000">015:</font></a> particular type of non-file buffer, such as a shell buffer
<a name="line16"><font color="#000000">016:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Shell</font><font color="#FF0000">}</font>).  Major modes are mutually exclusive; each buffer has
<a name="line17"><font color="#000000">017:</font></a> one and only one major mode at any time.
<a name="line18"><font color="#000000">018:</font></a> 
<a name="line19"><font color="#000000">019:</font></a>   Minor modes are optional features which you can turn on or off, not
<a name="line20"><font color="#000000">020:</font></a> necessarily specific to a type of file or buffer.  For example, Auto
<a name="line21"><font color="#000000">021:</font></a> Fill mode is a minor mode in which <b><font color="#0000FF">@key</font></b><font color="#009900">{SPC}</font> breaks lines between
<a name="line22"><font color="#000000">022:</font></a> words as you type (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Auto Fill</font><font color="#FF0000">}</font>).  Minor modes are independent of
<a name="line23"><font color="#000000">023:</font></a> one another, and of the selected major mode.
<a name="line24"><font color="#000000">024:</font></a> 
<a name="line25"><font color="#000000">025:</font></a> <b><font color="#000080">@menu</font></b>
<a name="line26"><font color="#000000">026:</font></a> <font color="#FF0000">* Major Modes::</font>         Text mode vs. Lisp mode vs. C mode...
<a name="line27"><font color="#000000">027:</font></a> <font color="#FF0000">* Minor Modes::</font>         Each minor mode is a feature you can turn on
<a name="line28"><font color="#000000">028:</font></a>                           independently of any others.
<a name="line29"><font color="#000000">029:</font></a> <font color="#FF0000">* Choosing Modes::</font>      How modes are chosen when visiting files.
<a name="line30"><font color="#000000">030:</font></a> <b><font color="#000080">@end menu</font></b>
<a name="line31"><font color="#000000">031:</font></a> 
<a name="line32"><font color="#000000">032:</font></a> <b><font color="#0000FF">@node</font></b> Major Modes
<a name="line33"><font color="#000000">033:</font></a> <b><font color="#0000FF">@section</font></b> Major Modes
<a name="line34"><font color="#000000">034:</font></a> <i><font color="#9A1900">@cindex major modes</font></i>
<a name="line35"><font color="#000000">035:</font></a> <i><font color="#9A1900">@cindex mode, major</font></i>
<a name="line36"><font color="#000000">036:</font></a> <b><font color="#0000FF">@kindex</font></b> TAB <b><font color="#0000FF">@r</font></b><font color="#009900">{(and major modes)}</font>
<a name="line37"><font color="#000000">037:</font></a> <b><font color="#0000FF">@kindex</font></b> DEL <b><font color="#0000FF">@r</font></b><font color="#009900">{(and major modes)}</font>
<a name="line38"><font color="#000000">038:</font></a> <b><font color="#0000FF">@kindex</font></b> C-j <b><font color="#0000FF">@r</font></b><font color="#009900">{(and major modes)}</font>
<a name="line39"><font color="#000000">039:</font></a> 
<a name="line40"><font color="#000000">040:</font></a>   Every buffer possesses a major mode, which determines the editing
<a name="line41"><font color="#000000">041:</font></a> behavior of Emacs while that buffer is current.  The mode line
<a name="line42"><font color="#000000">042:</font></a> normally shows the name of the current major mode, in parentheses
<a name="line43"><font color="#000000">043:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mode Line</font><font color="#FF0000">}</font>).
<a name="line44"><font color="#000000">044:</font></a> 
<a name="line45"><font color="#000000">045:</font></a>   The least specialized major mode is called <b><font color="#0000FF">@dfn</font></b><font color="#009900">{Fundamental mode}</font>.
<a name="line46"><font color="#000000">046:</font></a> This mode has no mode-specific redefinitions or variable settings, so
<a name="line47"><font color="#000000">047:</font></a> that each Emacs command behaves in its most general manner, and each
<a name="line48"><font color="#000000">048:</font></a> user option variable is in its default state.
<a name="line49"><font color="#000000">049:</font></a> 
<a name="line50"><font color="#000000">050:</font></a>   For editing text of a specific type that Emacs knows about, such as
<a name="line51"><font color="#000000">051:</font></a> Lisp code or English text, you typically use a more specialized major
<a name="line52"><font color="#000000">052:</font></a> mode, such as Lisp mode or Text mode.  Most major modes fall into
<a name="line53"><font color="#000000">053:</font></a> three major groups.  The first group contains modes for normal text,
<a name="line54"><font color="#000000">054:</font></a> either plain or with mark-up.  It includes Text mode, HTML mode, SGML
<a name="line55"><font color="#000000">055:</font></a> mode, <b><font color="#0000FF">@TeX</font></b><font color="#009900">{}</font> mode and Outline mode.  The second group contains modes
<a name="line56"><font color="#000000">056:</font></a> for specific programming languages.  These include Lisp mode (which
<a name="line57"><font color="#000000">057:</font></a> has several variants), C mode, Fortran mode, and others.  The third
<a name="line58"><font color="#000000">058:</font></a> group consists of major modes that are not associated directly with
<a name="line59"><font color="#000000">059:</font></a> files; they are used in buffers created for specific purposes by
<a name="line60"><font color="#000000">060:</font></a> Emacs.  Examples include Dired mode for buffers made by Dired
<a name="line61"><font color="#000000">061:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Dired</font><font color="#FF0000">}</font>), Message mode for buffers made by <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x m}</font>
<a name="line62"><font color="#000000">062:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Sending Mail</font><font color="#FF0000">}</font>), and Shell mode for buffers used to communicate
<a name="line63"><font color="#000000">063:</font></a> with an inferior shell process (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Interactive Shell</font><font color="#FF0000">}</font>).
<a name="line64"><font color="#000000">064:</font></a> 
<a name="line65"><font color="#000000">065:</font></a>   Usually, the major mode is automatically set by Emacs, when you
<a name="line66"><font color="#000000">066:</font></a> first visit a file or create a buffer (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Choosing Modes</font><font color="#FF0000">}</font>).  You
<a name="line67"><font color="#000000">067:</font></a> can explicitly select a new major mode by using an <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x}</font> command.
<a name="line68"><font color="#000000">068:</font></a> Take the name of the mode and add <b><font color="#0000FF">@code</font></b><font color="#009900">{-mode}</font> to get the name of the
<a name="line69"><font color="#000000">069:</font></a> command to select that mode (e.g., <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x lisp-mode}</font> enters Lisp
<a name="line70"><font color="#000000">070:</font></a> mode).  Since every buffer has exactly one major mode, there is no way
<a name="line71"><font color="#000000">071:</font></a> to ``turn off'' a major mode; instead you must switch to a different
<a name="line72"><font color="#000000">072:</font></a> one.
<a name="line73"><font color="#000000">073:</font></a> 
<a name="line74"><font color="#000000">074:</font></a> <b><font color="#0000FF">@vindex</font></b> major-mode
<a name="line75"><font color="#000000">075:</font></a>   The value of the buffer-local variable <b><font color="#0000FF">@code</font></b><font color="#009900">{major-mode}</font> is a symbol
<a name="line76"><font color="#000000">076:</font></a> with the same name as the major mode command (e.g., <b><font color="#0000FF">@code</font></b><font color="#009900">{lisp-mode}</font>).
<a name="line77"><font color="#000000">077:</font></a> This variable is set automatically; you should not change it yourself.
<a name="line78"><font color="#000000">078:</font></a> 
<a name="line79"><font color="#000000">079:</font></a>   The default value of <b><font color="#0000FF">@code</font></b><font color="#009900">{major-mode}</font> determines the major mode to
<a name="line80"><font color="#000000">080:</font></a> use for files that do not specify a major mode, and for new buffers
<a name="line81"><font color="#000000">081:</font></a> created with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x b}</font>.  Normally, this default value is the symbol
<a name="line82"><font color="#000000">082:</font></a> <i><font color="#9A1900">@code{fundamental-mode}, which specifies Fundamental mode.  You can</font></i>
<a name="line83"><font color="#000000">083:</font></a> change this default value via the Customization interface (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Easy</font>
<a name="line84"><font color="#000000">084:</font></a> <font color="#FF0000">Customization</font><font color="#FF0000">}</font>), or by adding a line like this to your init file
<a name="line85"><font color="#000000">085:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Init File</font><font color="#FF0000">}</font>):
<a name="line86"><font color="#000000">086:</font></a> 
<a name="line87"><font color="#000000">087:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line88"><font color="#000000">088:</font></a> (setq-default major-mode 'text-mode)
<a name="line89"><font color="#000000">089:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line90"><font color="#000000">090:</font></a> 
<a name="line91"><font color="#000000">091:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line92"><font color="#000000">092:</font></a> If the default value of <b><font color="#0000FF">@code</font></b><font color="#009900">{major-mode}</font> is <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>, the major
<a name="line93"><font color="#000000">093:</font></a> mode is taken from the previously current buffer.
<a name="line94"><font color="#000000">094:</font></a> 
<a name="line95"><font color="#000000">095:</font></a>   Specialized major modes often change the meanings of certain keys to
<a name="line96"><font color="#000000">096:</font></a> do something more suitable for the mode.  For instance, programming
<a name="line97"><font color="#000000">097:</font></a> language modes bind <b><font color="#0000FF">@key</font></b><font color="#009900">{TAB}</font> to indent the current line according to
<a name="line98"><font color="#000000">098:</font></a> the rules of the language (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Indentation</font><font color="#FF0000">}</font>).  The keys that are
<a name="line99"><font color="#000000">099:</font></a> commonly changed are <b><font color="#0000FF">@key</font></b><font color="#009900">{TAB}</font>, <b><font color="#0000FF">@key</font></b><font color="#009900">{DEL}</font>, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-j}</font>.  Many modes
<a name="line100"><font color="#000000">100:</font></a> also define special commands of their own, usually bound to key
<a name="line101"><font color="#000000">101:</font></a> sequences whose prefix key is <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c}</font> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Keys</font><font color="#FF0000">}</font>).  Major modes
<a name="line102"><font color="#000000">102:</font></a> can also alter user options and variables; for instance, programming
<a name="line103"><font color="#000000">103:</font></a> language modes typically set a buffer-local value for the variable
<a name="line104"><font color="#000000">104:</font></a> <i><font color="#9A1900">@code{comment-start}, which determines how source code comments are</font></i>
<a name="line105"><font color="#000000">105:</font></a> delimited (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Comments</font><font color="#FF0000">}</font>).
<a name="line106"><font color="#000000">106:</font></a> 
<a name="line107"><font color="#000000">107:</font></a>   To view the documentation for the current major mode, including a
<a name="line108"><font color="#000000">108:</font></a> list of its key bindings, type <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-h m}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{describe-mode}</font>).
<a name="line109"><font color="#000000">109:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Misc Help</font><font color="#FF0000">}</font>.
<a name="line110"><font color="#000000">110:</font></a> 
<a name="line111"><font color="#000000">111:</font></a> <i><font color="#9A1900">@cindex mode hook</font></i>
<a name="line112"><font color="#000000">112:</font></a> <b><font color="#0000FF">@vindex</font></b> prog-mode-hook
<a name="line113"><font color="#000000">113:</font></a>   Every major mode, apart from Fundamental mode, defines a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{mode</font>
<a name="line114"><font color="#000000">114:</font></a> <font color="#009900">hook}</font>, a customizable list of Lisp functions to run each time the mode
<a name="line115"><font color="#000000">115:</font></a> is enabled in a buffer.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Hooks</font><font color="#FF0000">}</font>, for more information about
<a name="line116"><font color="#000000">116:</font></a> hooks.  Each mode hook is named after its major mode, e.g., Fortran
<a name="line117"><font color="#000000">117:</font></a> mode has <b><font color="#0000FF">@code</font></b><font color="#009900">{fortran-mode-hook}</font>.  Furthermore, all text-based major
<a name="line118"><font color="#000000">118:</font></a> modes run <b><font color="#0000FF">@code</font></b><font color="#009900">{text-mode-hook}</font>, and many programming language modes
<a name="line119"><font color="#000000">119:</font></a> <b><font color="#0000FF">@footnote</font></b><font color="#009900">{More specifically, the modes which are ''derived'' from</font>
<a name="line120"><font color="#000000">120:</font></a> <font color="#009900">@code{prog-mode} (@pxref{Derived Modes,,, elisp, The Emacs Lisp</font>
<a name="line121"><font color="#000000">121:</font></a> <font color="#009900">Reference Manual}).}</font> (including all those distributed with Emacs) run
<a name="line122"><font color="#000000">122:</font></a> <i><font color="#9A1900">@code{prog-mode-hook}, prior to running their own mode hooks.  Hook</font></i>
<a name="line123"><font color="#000000">123:</font></a> functions can look at the value of the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{major-mode}</font> to
<a name="line124"><font color="#000000">124:</font></a> see which mode is actually being entered.
<a name="line125"><font color="#000000">125:</font></a> 
<a name="line126"><font color="#000000">126:</font></a>   Mode hooks are commonly used to enable minor modes (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Minor</font>
<a name="line127"><font color="#000000">127:</font></a> <font color="#FF0000">Modes</font><font color="#FF0000">}</font>).  For example, you can put the following lines in your init
<a name="line128"><font color="#000000">128:</font></a> file to enable Flyspell minor mode in all text-based major modes
<a name="line129"><font color="#000000">129:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Spelling</font><font color="#FF0000">}</font>), and Eldoc minor mode in Emacs Lisp mode
<a name="line130"><font color="#000000">130:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Lisp Doc</font><font color="#FF0000">}</font>):
<a name="line131"><font color="#000000">131:</font></a> 
<a name="line132"><font color="#000000">132:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line133"><font color="#000000">133:</font></a> (add-hook 'text-mode-hook 'flyspell-mode)
<a name="line134"><font color="#000000">134:</font></a> (add-hook 'emacs-lisp-mode-hook 'eldoc-mode)
<a name="line135"><font color="#000000">135:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line136"><font color="#000000">136:</font></a> 
<a name="line137"><font color="#000000">137:</font></a> <b><font color="#0000FF">@node</font></b> Minor Modes
<a name="line138"><font color="#000000">138:</font></a> <b><font color="#0000FF">@section</font></b> Minor Modes
<a name="line139"><font color="#000000">139:</font></a> <i><font color="#9A1900">@cindex minor modes</font></i>
<a name="line140"><font color="#000000">140:</font></a> <i><font color="#9A1900">@cindex mode, minor</font></i>
<a name="line141"><font color="#000000">141:</font></a> 
<a name="line142"><font color="#000000">142:</font></a>   A minor mode is an optional editing mode that alters the behavior of
<a name="line143"><font color="#000000">143:</font></a> Emacs in some well-defined way.  Unlike major modes, any number of
<a name="line144"><font color="#000000">144:</font></a> minor modes can be in effect at any time.  Some minor modes are
<a name="line145"><font color="#000000">145:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{buffer-local}</font>, and can be turned on (enabled) in certain buffers
<a name="line146"><font color="#000000">146:</font></a> and off (disabled) in others.  Other minor modes are <b><font color="#0000FF">@dfn</font></b><font color="#009900">{global}</font>:
<a name="line147"><font color="#000000">147:</font></a> while enabled, they affect everything you do in the Emacs session, in
<a name="line148"><font color="#000000">148:</font></a> all buffers.  Most minor modes are disabled by default, but a few are
<a name="line149"><font color="#000000">149:</font></a> enabled by default.
<a name="line150"><font color="#000000">150:</font></a> 
<a name="line151"><font color="#000000">151:</font></a>   Most buffer-local minor modes say in the mode line when they are
<a name="line152"><font color="#000000">152:</font></a> enabled, just after the major mode indicator.  For example,
<a name="line153"><font color="#000000">153:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{Fill}</font> in the mode line means that Auto Fill mode is enabled.
<a name="line154"><font color="#000000">154:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mode Line</font><font color="#FF0000">}</font>.
<a name="line155"><font color="#000000">155:</font></a> 
<a name="line156"><font color="#000000">156:</font></a> <i><font color="#9A1900">@cindex mode commands for minor modes</font></i>
<a name="line157"><font color="#000000">157:</font></a>   Like major modes, each minor mode is associated with a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{mode</font>
<a name="line158"><font color="#000000">158:</font></a> <font color="#009900">command}</font>, whose name consists of the mode name followed by
<a name="line159"><font color="#000000">159:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{-mode}</font>.  For instance, the mode command for Auto Fill mode is
<a name="line160"><font color="#000000">160:</font></a> <i><font color="#9A1900">@code{auto-fill-mode}.  But unlike a major mode command, which simply</font></i>
<a name="line161"><font color="#000000">161:</font></a> enables the mode, the mode command for a minor mode can either enable
<a name="line162"><font color="#000000">162:</font></a> or disable it:
<a name="line163"><font color="#000000">163:</font></a> 
<a name="line164"><font color="#000000">164:</font></a> <b><font color="#0000FF">@itemize</font></b>
<a name="line165"><font color="#000000">165:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line166"><font color="#000000">166:</font></a> If you invoke the mode command directly with no prefix argument
<a name="line167"><font color="#000000">167:</font></a> (either via <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x}</font>, or by binding it to a key and typing that key;
<a name="line168"><font color="#000000">168:</font></a> <b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Key Bindings</font><font color="#FF0000">}</font>), that <b><font color="#0000FF">@dfn</font></b><font color="#009900">{toggles}</font> the minor mode.  The minor
<a name="line169"><font color="#000000">169:</font></a> mode is turned on if it was off, and turned off if it was on.
<a name="line170"><font color="#000000">170:</font></a> 
<a name="line171"><font color="#000000">171:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line172"><font color="#000000">172:</font></a> If you invoke the mode command with a prefix argument, the minor mode
<a name="line173"><font color="#000000">173:</font></a> is unconditionally turned off if that argument is zero or negative;
<a name="line174"><font color="#000000">174:</font></a> otherwise, it is unconditionally turned on.
<a name="line175"><font color="#000000">175:</font></a> 
<a name="line176"><font color="#000000">176:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line177"><font color="#000000">177:</font></a> If the mode command is called via Lisp, the minor mode is
<a name="line178"><font color="#000000">178:</font></a> unconditionally turned on if the argument is omitted or <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>.
<a name="line179"><font color="#000000">179:</font></a> This makes it easy to turn on a minor mode from a major mode's mode
<a name="line180"><font color="#000000">180:</font></a> hook (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Major Modes</font><font color="#FF0000">}</font>).  A non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> argument is handled like
<a name="line181"><font color="#000000">181:</font></a> an interactive prefix argument, as described above.
<a name="line182"><font color="#000000">182:</font></a> <b><font color="#0000FF">@end itemize</font></b>
<a name="line183"><font color="#000000">183:</font></a> 
<a name="line184"><font color="#000000">184:</font></a>   Most minor modes also have a <b><font color="#0000FF">@dfn</font></b><font color="#009900">{mode variable}</font>, with the same name
<a name="line185"><font color="#000000">185:</font></a> as the mode command.  Its value is non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> if the mode is
<a name="line186"><font color="#000000">186:</font></a> enabled, and <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> if it is disabled.  In general, you should not
<a name="line187"><font color="#000000">187:</font></a> try to enable or disable the mode by changing the value of the mode
<a name="line188"><font color="#000000">188:</font></a> variable directly in Lisp; you should run the mode command instead.
<a name="line189"><font color="#000000">189:</font></a> However, setting the mode variable through the Customize interface
<a name="line190"><font color="#000000">190:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Easy Customization</font><font color="#FF0000">}</font>) will always properly enable or disable
<a name="line191"><font color="#000000">191:</font></a> the mode, since Customize automatically runs the mode command for you.
<a name="line192"><font color="#000000">192:</font></a> 
<a name="line193"><font color="#000000">193:</font></a>   The following is a list of some buffer-local minor modes:
<a name="line194"><font color="#000000">194:</font></a> 
<a name="line195"><font color="#000000">195:</font></a> <b><font color="#0000FF">@itemize</font></b> <b><font color="#0000FF">@bullet</font></b>
<a name="line196"><font color="#000000">196:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line197"><font color="#000000">197:</font></a> Abbrev mode automatically expands text based on pre-defined
<a name="line198"><font color="#000000">198:</font></a> abbreviation definitions.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Abbrevs</font><font color="#FF0000">}</font>.
<a name="line199"><font color="#000000">199:</font></a> 
<a name="line200"><font color="#000000">200:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line201"><font color="#000000">201:</font></a> Auto Fill mode inserts newlines as you type to prevent lines from
<a name="line202"><font color="#000000">202:</font></a> becoming too long.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Filling</font><font color="#FF0000">}</font>.
<a name="line203"><font color="#000000">203:</font></a> 
<a name="line204"><font color="#000000">204:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line205"><font color="#000000">205:</font></a> Auto Save mode saves the buffer contents periodically to reduce the
<a name="line206"><font color="#000000">206:</font></a> amount of work you can lose in case of a crash.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Auto Save</font><font color="#FF0000">}</font>.
<a name="line207"><font color="#000000">207:</font></a> 
<a name="line208"><font color="#000000">208:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line209"><font color="#000000">209:</font></a> Electric Quote mode automatically converts quotation marks.  For
<a name="line210"><font color="#000000">210:</font></a> example, it requotes text typed <b><font color="#0000FF">@t</font></b><font color="#009900">{`like this'}</font> to text <b><font color="#0000FF">@t</font></b><font color="#009900">{‘like</font>
<a name="line211"><font color="#000000">211:</font></a> <font color="#009900">this’}</font>.  You can control what kind of text it operates in, and you can
<a name="line212"><font color="#000000">212:</font></a> disable it entirely in individual buffers.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Quotation Marks</font><font color="#FF0000">}</font>.
<a name="line213"><font color="#000000">213:</font></a> 
<a name="line214"><font color="#000000">214:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line215"><font color="#000000">215:</font></a> Enriched mode enables editing and saving of formatted text.
<a name="line216"><font color="#000000">216:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Enriched Text</font><font color="#FF0000">}</font>.
<a name="line217"><font color="#000000">217:</font></a> 
<a name="line218"><font color="#000000">218:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line219"><font color="#000000">219:</font></a> Flyspell mode automatically highlights misspelled words.
<a name="line220"><font color="#000000">220:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Spelling</font><font color="#FF0000">}</font>.
<a name="line221"><font color="#000000">221:</font></a> 
<a name="line222"><font color="#000000">222:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line223"><font color="#000000">223:</font></a> Font-Lock mode automatically highlights certain textual units found in
<a name="line224"><font color="#000000">224:</font></a> programs.  It is enabled globally by default, but you can disable it
<a name="line225"><font color="#000000">225:</font></a> in individual buffers.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Faces</font><font color="#FF0000">}</font>.
<a name="line226"><font color="#000000">226:</font></a> 
<a name="line227"><font color="#000000">227:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line228"><font color="#000000">228:</font></a> Display Line Numbers mode is a convenience wrapper around
<a name="line229"><font color="#000000">229:</font></a> <i><font color="#9A1900">@code{display-line-numbers}, setting it using the value of</font></i>
<a name="line230"><font color="#000000">230:</font></a> <i><font color="#9A1900">@code{display-line-numbers-type}.  @xref{Display Custom}.</font></i>
<a name="line231"><font color="#000000">231:</font></a> 
<a name="line232"><font color="#000000">232:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line233"><font color="#000000">233:</font></a> Outline minor mode provides similar facilities to the major mode
<a name="line234"><font color="#000000">234:</font></a> called Outline mode.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Outline Mode</font><font color="#FF0000">}</font>.
<a name="line235"><font color="#000000">235:</font></a> 
<a name="line236"><font color="#000000">236:</font></a> <i><font color="#9A1900">@cindex Overwrite mode</font></i>
<a name="line237"><font color="#000000">237:</font></a> <i><font color="#9A1900">@cindex mode, Overwrite</font></i>
<a name="line238"><font color="#000000">238:</font></a> <b><font color="#0000FF">@findex</font></b> overwrite-mode
<a name="line239"><font color="#000000">239:</font></a> <b><font color="#0000FF">@kindex</font></b> INSERT
<a name="line240"><font color="#000000">240:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line241"><font color="#000000">241:</font></a> Overwrite mode causes ordinary printing characters to replace existing
<a name="line242"><font color="#000000">242:</font></a> text instead of shoving it to the right.  For example, if point is in
<a name="line243"><font color="#000000">243:</font></a> front of the <b><font color="#0000FF">@samp</font></b><font color="#009900">{B}</font> in <b><font color="#0000FF">@samp</font></b><font color="#009900">{FOOBAR}</font>, then in Overwrite mode typing
<a name="line244"><font color="#000000">244:</font></a> a <b><font color="#0000FF">@kbd</font></b><font color="#009900">{G}</font> changes it to <b><font color="#0000FF">@samp</font></b><font color="#009900">{FOOGAR}</font>, instead of producing
<a name="line245"><font color="#000000">245:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{FOOGBAR}</font> as usual.  In Overwrite mode, the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-q}</font>
<a name="line246"><font color="#000000">246:</font></a> inserts the next character whatever it may be, even if it is a
<a name="line247"><font color="#000000">247:</font></a> digit---this gives you a way to insert a character instead of
<a name="line248"><font color="#000000">248:</font></a> replacing an existing character.  The mode command,
<a name="line249"><font color="#000000">249:</font></a> <i><font color="#9A1900">@code{overwrite-mode}, is bound to the @key{Insert} key.</font></i>
<a name="line250"><font color="#000000">250:</font></a> 
<a name="line251"><font color="#000000">251:</font></a> <b><font color="#0000FF">@findex</font></b> binary-overwrite-mode
<a name="line252"><font color="#000000">252:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line253"><font color="#000000">253:</font></a> Binary Overwrite mode is a variant of Overwrite mode for editing
<a name="line254"><font color="#000000">254:</font></a> binary files; it treats newlines and tabs like other characters, so
<a name="line255"><font color="#000000">255:</font></a> that they overwrite other characters and can be overwritten by them.
<a name="line256"><font color="#000000">256:</font></a> In Binary Overwrite mode, digits after <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-q}</font> specify an octal
<a name="line257"><font color="#000000">257:</font></a> character code, as usual.
<a name="line258"><font color="#000000">258:</font></a> 
<a name="line259"><font color="#000000">259:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line260"><font color="#000000">260:</font></a> Visual Line mode performs word wrapping, causing long lines to be
<a name="line261"><font color="#000000">261:</font></a> wrapped at word boundaries.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Visual Line Mode</font><font color="#FF0000">}</font>.
<a name="line262"><font color="#000000">262:</font></a> <b><font color="#0000FF">@end itemize</font></b>
<a name="line263"><font color="#000000">263:</font></a> 
<a name="line264"><font color="#000000">264:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line265"><font color="#000000">265:</font></a> And here are some useful global minor modes:
<a name="line266"><font color="#000000">266:</font></a> 
<a name="line267"><font color="#000000">267:</font></a> <b><font color="#0000FF">@itemize</font></b> <b><font color="#0000FF">@bullet</font></b>
<a name="line268"><font color="#000000">268:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line269"><font color="#000000">269:</font></a> Column Number mode enables display of the current column number in the
<a name="line270"><font color="#000000">270:</font></a> mode line.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mode Line</font><font color="#FF0000">}</font>.
<a name="line271"><font color="#000000">271:</font></a> 
<a name="line272"><font color="#000000">272:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line273"><font color="#000000">273:</font></a> Delete Selection mode causes text insertion to first delete the text
<a name="line274"><font color="#000000">274:</font></a> in the region, if the region is active.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Using Region</font><font color="#FF0000">}</font>.
<a name="line275"><font color="#000000">275:</font></a> 
<a name="line276"><font color="#000000">276:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line277"><font color="#000000">277:</font></a> Icomplete mode displays an indication of available completions when
<a name="line278"><font color="#000000">278:</font></a> you are in the minibuffer and completion is active.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Icomplete</font><font color="#FF0000">}</font>.
<a name="line279"><font color="#000000">279:</font></a> 
<a name="line280"><font color="#000000">280:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line281"><font color="#000000">281:</font></a> Line Number mode enables display of the current line number in the
<a name="line282"><font color="#000000">282:</font></a> mode line.  It is enabled by default.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mode Line</font><font color="#FF0000">}</font>.
<a name="line283"><font color="#000000">283:</font></a> 
<a name="line284"><font color="#000000">284:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line285"><font color="#000000">285:</font></a> Menu Bar mode gives each frame a menu bar.  It is enabled by default.
<a name="line286"><font color="#000000">286:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Menu Bars</font><font color="#FF0000">}</font>.
<a name="line287"><font color="#000000">287:</font></a> 
<a name="line288"><font color="#000000">288:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line289"><font color="#000000">289:</font></a> Scroll Bar mode gives each window a scroll bar.  It is enabled by
<a name="line290"><font color="#000000">290:</font></a> default, but the scroll bar is only displayed on graphical terminals.
<a name="line291"><font color="#000000">291:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Scroll Bars</font><font color="#FF0000">}</font>.
<a name="line292"><font color="#000000">292:</font></a> 
<a name="line293"><font color="#000000">293:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line294"><font color="#000000">294:</font></a> Tool Bar mode gives each frame a tool bar.  It is enabled by default,
<a name="line295"><font color="#000000">295:</font></a> but the tool bar is only displayed on graphical terminals.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Tool</font>
<a name="line296"><font color="#000000">296:</font></a> <font color="#FF0000">Bars</font><font color="#FF0000">}</font>.
<a name="line297"><font color="#000000">297:</font></a> 
<a name="line298"><font color="#000000">298:</font></a> <b><font color="#0000FF">@item</font></b>
<a name="line299"><font color="#000000">299:</font></a> Transient Mark mode highlights the region, and makes many Emacs
<a name="line300"><font color="#000000">300:</font></a> commands operate on the region when the mark is active.  It is enabled
<a name="line301"><font color="#000000">301:</font></a> by default.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Mark</font><font color="#FF0000">}</font>.
<a name="line302"><font color="#000000">302:</font></a> <b><font color="#0000FF">@end itemize</font></b>
<a name="line303"><font color="#000000">303:</font></a> 
<a name="line304"><font color="#000000">304:</font></a> <b><font color="#0000FF">@node</font></b> Choosing Modes
<a name="line305"><font color="#000000">305:</font></a> <b><font color="#0000FF">@section</font></b> Choosing File Modes
<a name="line306"><font color="#000000">306:</font></a> 
<a name="line307"><font color="#000000">307:</font></a> <i><font color="#9A1900">@cindex choosing a major mode</font></i>
<a name="line308"><font color="#000000">308:</font></a> <i><font color="#9A1900">@cindex choosing a minor mode</font></i>
<a name="line309"><font color="#000000">309:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-mode-alist
<a name="line310"><font color="#000000">310:</font></a>   When you visit a file, Emacs chooses a major mode automatically.
<a name="line311"><font color="#000000">311:</font></a> Normally, it makes the choice based on the file name---for example,
<a name="line312"><font color="#000000">312:</font></a> files whose names end in <b><font color="#0000FF">@samp</font></b><font color="#009900">{.c}</font> are normally edited in C mode---but
<a name="line313"><font color="#000000">313:</font></a> sometimes it chooses the major mode based on special text in the file.
<a name="line314"><font color="#000000">314:</font></a> This special text can also be used to enable buffer-local minor modes.
<a name="line315"><font color="#000000">315:</font></a> 
<a name="line316"><font color="#000000">316:</font></a>   Here is the exact procedure:
<a name="line317"><font color="#000000">317:</font></a> 
<a name="line318"><font color="#000000">318:</font></a>   First, Emacs checks whether the file contains file-local mode
<a name="line319"><font color="#000000">319:</font></a> variables.  <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">File Variables</font><font color="#FF0000">}</font>.  If there is a file-local variable
<a name="line320"><font color="#000000">320:</font></a> that specifies a major mode, then Emacs uses that major mode, ignoring
<a name="line321"><font color="#000000">321:</font></a> all other criteria.  There are several methods to specify a major mode
<a name="line322"><font color="#000000">322:</font></a> using a file-local variable; the simplest is to put the mode name in
<a name="line323"><font color="#000000">323:</font></a> the first nonblank line, preceded and followed by <b><font color="#0000FF">@samp</font></b><font color="#009900">{-*-}</font>.  Other
<a name="line324"><font color="#000000">324:</font></a> text may appear on the line as well.  For example,
<a name="line325"><font color="#000000">325:</font></a> 
<a name="line326"><font color="#000000">326:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line327"><font color="#000000">327:</font></a> ; -*-Lisp-*-
<a name="line328"><font color="#000000">328:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line329"><font color="#000000">329:</font></a> 
<a name="line330"><font color="#000000">330:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line331"><font color="#000000">331:</font></a> tells Emacs to use Lisp mode.  Note how the semicolon is used to make
<a name="line332"><font color="#000000">332:</font></a> Lisp treat this line as a comment.  You could equivalently write
<a name="line333"><font color="#000000">333:</font></a> 
<a name="line334"><font color="#000000">334:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line335"><font color="#000000">335:</font></a> ; -*- mode: Lisp;-*-
<a name="line336"><font color="#000000">336:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line337"><font color="#000000">337:</font></a> 
<a name="line338"><font color="#000000">338:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line339"><font color="#000000">339:</font></a> You can also use file-local variables to specify buffer-local minor
<a name="line340"><font color="#000000">340:</font></a> modes, by using <b><font color="#0000FF">@code</font></b><font color="#009900">{eval}</font> specifications.  For example, this first
<a name="line341"><font color="#000000">341:</font></a> nonblank line puts the buffer in Lisp mode and enables Auto-Fill mode:
<a name="line342"><font color="#000000">342:</font></a> 
<a name="line343"><font color="#000000">343:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line344"><font color="#000000">344:</font></a> ; -*- mode: Lisp; eval: (auto-fill-mode 1); -*-
<a name="line345"><font color="#000000">345:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line346"><font color="#000000">346:</font></a> 
<a name="line347"><font color="#000000">347:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line348"><font color="#000000">348:</font></a> Note, however, that it is usually inappropriate to enable minor modes
<a name="line349"><font color="#000000">349:</font></a> this way, since most minor modes represent individual user
<a name="line350"><font color="#000000">350:</font></a> preferences.  If you personally want to use a minor mode for a
<a name="line351"><font color="#000000">351:</font></a> particular file type, it is better to enable the minor mode via a
<a name="line352"><font color="#000000">352:</font></a> major mode hook (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Major Modes</font><font color="#FF0000">}</font>).
<a name="line353"><font color="#000000">353:</font></a> 
<a name="line354"><font color="#000000">354:</font></a> <b><font color="#0000FF">@vindex</font></b> interpreter-mode-alist
<a name="line355"><font color="#000000">355:</font></a>   Second, if there is no file variable specifying a major mode, Emacs
<a name="line356"><font color="#000000">356:</font></a> checks whether the file's contents begin with <b><font color="#0000FF">@samp</font></b><font color="#009900">{#!}</font>.  If so, that
<a name="line357"><font color="#000000">357:</font></a> indicates that the file can serve as an executable shell command,
<a name="line358"><font color="#000000">358:</font></a> which works by running an interpreter named on the file's first line
<a name="line359"><font color="#000000">359:</font></a> (the rest of the file is used as input to the interpreter).
<a name="line360"><font color="#000000">360:</font></a> Therefore, Emacs tries to use the interpreter name to choose a mode.
<a name="line361"><font color="#000000">361:</font></a> For instance, a file that begins with <b><font color="#0000FF">@samp</font></b><font color="#009900">{#!/usr/bin/perl}</font> is opened
<a name="line362"><font color="#000000">362:</font></a> in Perl mode.  The variable <b><font color="#0000FF">@code</font></b><font color="#009900">{interpreter-mode-alist}</font> specifies
<a name="line363"><font color="#000000">363:</font></a> the correspondence between interpreter program names and major modes.
<a name="line364"><font color="#000000">364:</font></a> 
<a name="line365"><font color="#000000">365:</font></a>   When the first line starts with <b><font color="#0000FF">@samp</font></b><font color="#009900">{#!}</font>, you usually cannot use
<a name="line366"><font color="#000000">366:</font></a> the <b><font color="#0000FF">@samp</font></b><font color="#009900">{-*-}</font> feature on the first line, because the system would get
<a name="line367"><font color="#000000">367:</font></a> confused when running the interpreter.  So Emacs looks for <b><font color="#0000FF">@samp</font></b><font color="#009900">{-*-}</font>
<a name="line368"><font color="#000000">368:</font></a> on the second line in such files as well as on the first line.  The
<a name="line369"><font color="#000000">369:</font></a> same is true for man pages which start with the magic string
<a name="line370"><font color="#000000">370:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{'\"}</font> to specify a list of troff preprocessors.
<a name="line371"><font color="#000000">371:</font></a> 
<a name="line372"><font color="#000000">372:</font></a> <b><font color="#0000FF">@vindex</font></b> magic-mode-alist
<a name="line373"><font color="#000000">373:</font></a>   Third, Emacs tries to determine the major mode by looking at the
<a name="line374"><font color="#000000">374:</font></a> text at the start of the buffer, based on the variable
<a name="line375"><font color="#000000">375:</font></a> <i><font color="#9A1900">@code{magic-mode-alist}.  By default, this variable is @code{nil} (an</font></i>
<a name="line376"><font color="#000000">376:</font></a> empty list), so Emacs skips this step; however, you can customize it
<a name="line377"><font color="#000000">377:</font></a> in your init file (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Init File</font><font color="#FF0000">}</font>).  The value should be a list of
<a name="line378"><font color="#000000">378:</font></a> elements of the form
<a name="line379"><font color="#000000">379:</font></a> 
<a name="line380"><font color="#000000">380:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line381"><font color="#000000">381:</font></a> (<b><font color="#0000FF">@var</font></b><font color="#009900">{regexp}</font> . <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font>)
<a name="line382"><font color="#000000">382:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line383"><font color="#000000">383:</font></a> 
<a name="line384"><font color="#000000">384:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line385"><font color="#000000">385:</font></a> where <b><font color="#0000FF">@var</font></b><font color="#009900">{regexp}</font> is a regular expression (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Regexps</font><font color="#FF0000">}</font>), and
<a name="line386"><font color="#000000">386:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font> is a major mode command.  If the text at the
<a name="line387"><font color="#000000">387:</font></a> beginning of the file matches <b><font color="#0000FF">@var</font></b><font color="#009900">{regexp}</font>, Emacs chooses the major
<a name="line388"><font color="#000000">388:</font></a> mode specified by <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font>.
<a name="line389"><font color="#000000">389:</font></a> 
<a name="line390"><font color="#000000">390:</font></a> Alternatively, an element of <b><font color="#0000FF">@code</font></b><font color="#009900">{magic-mode-alist}</font> may have the form
<a name="line391"><font color="#000000">391:</font></a> 
<a name="line392"><font color="#000000">392:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line393"><font color="#000000">393:</font></a> (<b><font color="#0000FF">@var</font></b><font color="#009900">{match-function}</font> . <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font>)
<a name="line394"><font color="#000000">394:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line395"><font color="#000000">395:</font></a> 
<a name="line396"><font color="#000000">396:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line397"><font color="#000000">397:</font></a> where <b><font color="#0000FF">@var</font></b><font color="#009900">{match-function}</font> is a Lisp function that is called at the
<a name="line398"><font color="#000000">398:</font></a> beginning of the buffer; if the function returns non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>, Emacs
<a name="line399"><font color="#000000">399:</font></a> set the major mode with <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font>.
<a name="line400"><font color="#000000">400:</font></a> 
<a name="line401"><font color="#000000">401:</font></a>   Fourth---if Emacs still hasn't found a suitable major mode---it
<a name="line402"><font color="#000000">402:</font></a> looks at the file's name.  The correspondence between file names and
<a name="line403"><font color="#000000">403:</font></a> major modes is controlled by the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-mode-alist}</font>.  Its
<a name="line404"><font color="#000000">404:</font></a> value is a list in which each element has this form,
<a name="line405"><font color="#000000">405:</font></a> 
<a name="line406"><font color="#000000">406:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line407"><font color="#000000">407:</font></a> (<b><font color="#0000FF">@var</font></b><font color="#009900">{regexp}</font> . <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font>)
<a name="line408"><font color="#000000">408:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line409"><font color="#000000">409:</font></a> 
<a name="line410"><font color="#000000">410:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line411"><font color="#000000">411:</font></a> or this form,
<a name="line412"><font color="#000000">412:</font></a> 
<a name="line413"><font color="#000000">413:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line414"><font color="#000000">414:</font></a> (<b><font color="#0000FF">@var</font></b><font color="#009900">{regexp}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font> <b><font color="#0000FF">@var</font></b><font color="#009900">{flag}</font>)
<a name="line415"><font color="#000000">415:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line416"><font color="#000000">416:</font></a> 
<a name="line417"><font color="#000000">417:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line418"><font color="#000000">418:</font></a> For example, one element normally found in the list has the form
<a name="line419"><font color="#000000">419:</font></a> <i><font color="#9A1900">@code{(@t{"\\.c\\'"} . c-mode)}, and it is responsible for selecting C</font></i>
<a name="line420"><font color="#000000">420:</font></a> mode for files whose names end in <b><font color="#0000FF">@file</font></b><font color="#009900">{.c}</font>.  (Note that <b><font color="#0000FF">@samp</font></b><font color="#009900">{\\}</font> is
<a name="line421"><font color="#000000">421:</font></a> needed in Lisp syntax to include a <b><font color="#0000FF">@samp</font></b><font color="#009900">{\}</font> in the string, which must
<a name="line422"><font color="#000000">422:</font></a> be used to suppress the special meaning of <b><font color="#0000FF">@samp</font></b><font color="#009900">{.}</font> in regexps.)  If
<a name="line423"><font color="#000000">423:</font></a> the element has the form <b><font color="#0000FF">@code</font></b><font color="#009900">{(@var{regexp} @var{mode-function}</font>
<a name="line424"><font color="#000000">424:</font></a> <font color="#009900">@var{flag})}</font> and <b><font color="#0000FF">@var</font></b><font color="#009900">{flag}</font> is non-<b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font>, then after calling
<a name="line425"><font color="#000000">425:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{mode-function}</font>, Emacs discards the suffix that matched
<a name="line426"><font color="#000000">426:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{regexp}</font> and searches the list again for another match.
<a name="line427"><font color="#000000">427:</font></a> 
<a name="line428"><font color="#000000">428:</font></a> <b><font color="#0000FF">@vindex</font></b> auto-mode-case-fold
<a name="line429"><font color="#000000">429:</font></a>   On GNU/Linux and other systems with case-sensitive file names, Emacs
<a name="line430"><font color="#000000">430:</font></a> performs a case-sensitive search through <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-mode-alist}</font>; if
<a name="line431"><font color="#000000">431:</font></a> this search fails, it performs a second case-insensitive search
<a name="line432"><font color="#000000">432:</font></a> through the alist.  To suppress the second search, change the variable
<a name="line433"><font color="#000000">433:</font></a> <i><font color="#9A1900">@code{auto-mode-case-fold} to @code{nil}.  On systems with</font></i>
<a name="line434"><font color="#000000">434:</font></a> case-insensitive file names, such as Microsoft Windows, Emacs performs
<a name="line435"><font color="#000000">435:</font></a> a single case-insensitive search through <b><font color="#0000FF">@code</font></b><font color="#009900">{auto-mode-alist}</font>.
<a name="line436"><font color="#000000">436:</font></a> 
<a name="line437"><font color="#000000">437:</font></a> <b><font color="#0000FF">@vindex</font></b> magic-fallback-mode-alist
<a name="line438"><font color="#000000">438:</font></a>   Finally, if Emacs <b><font color="#0000FF">@emph</font></b><font color="#FF0000">{</font><i><font color="#009900">still</font></i><font color="#FF0000">}</font> hasn't found a major mode to use, it
<a name="line439"><font color="#000000">439:</font></a> compares the text at the start of the buffer to the variable
<a name="line440"><font color="#000000">440:</font></a> <i><font color="#9A1900">@code{magic-fallback-mode-alist}.  This variable works like</font></i>
<a name="line441"><font color="#000000">441:</font></a> <i><font color="#9A1900">@code{magic-mode-alist}, described above, except that it is consulted</font></i>
<a name="line442"><font color="#000000">442:</font></a> only <b><font color="#0000FF">@emph</font></b><font color="#FF0000">{</font><i><font color="#009900">after</font></i><font color="#FF0000">}</font> <i><font color="#9A1900">@code{auto-mode-alist}.  By default,</font></i>
<a name="line443"><font color="#000000">443:</font></a> <i><font color="#9A1900">@code{magic-fallback-mode-alist} contains forms that check for image</font></i>
<a name="line444"><font color="#000000">444:</font></a> files, HTML/XML/SGML files, PostScript files, and Unix style Conf
<a name="line445"><font color="#000000">445:</font></a> files.
<a name="line446"><font color="#000000">446:</font></a> 
<a name="line447"><font color="#000000">447:</font></a> <b><font color="#0000FF">@findex</font></b> normal-mode
<a name="line448"><font color="#000000">448:</font></a>   If you have changed the major mode of a buffer, you can return to
<a name="line449"><font color="#000000">449:</font></a> the major mode Emacs would have chosen automatically, by typing
<a name="line450"><font color="#000000">450:</font></a> <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-x normal-mode}</font>.  This is the same function that
<a name="line451"><font color="#000000">451:</font></a> <i><font color="#9A1900">@code{find-file} calls to choose the major mode.  It also processes</font></i>
<a name="line452"><font color="#000000">452:</font></a> the file's <b><font color="#0000FF">@samp</font></b><font color="#009900">{-*-}</font> line or local variables list (if any).
<a name="line453"><font color="#000000">453:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">File Variables</font><font color="#FF0000">}</font>.
<a name="line454"><font color="#000000">454:</font></a> 
<a name="line455"><font color="#000000">455:</font></a> <b><font color="#0000FF">@vindex</font></b> change-major-mode-with-file-name
<a name="line456"><font color="#000000">456:</font></a>   The commands <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-w}</font> and <b><font color="#0000FF">@code</font></b><font color="#009900">{set-visited-file-name}</font> change to
<a name="line457"><font color="#000000">457:</font></a> a new major mode if the new file name implies a mode (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Saving</font><font color="#FF0000">}</font>).
<a name="line458"><font color="#000000">458:</font></a> (<b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-s}</font> does this too, if the buffer wasn't visiting a file.)
<a name="line459"><font color="#000000">459:</font></a> However, this does not happen if the buffer contents specify a major
<a name="line460"><font color="#000000">460:</font></a> mode, and certain special major modes do not allow the mode to
<a name="line461"><font color="#000000">461:</font></a> change.  You can turn off this mode-changing feature by setting
<a name="line462"><font color="#000000">462:</font></a> <i><font color="#9A1900">@code{change-major-mode-with-file-name} to @code{nil}.</font></i>
<a name="line463"><font color="#000000">463:</font></a> </tt></pre>
