<!-- Generator: GNU source-highlight 3.1.8
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><a name="line1"><font color="#000000">001:</font></a> <i><font color="#9A1900">@c This is part of the Emacs manual.</font></i>
<a name="line2"><font color="#000000">002:</font></a> <i><font color="#9A1900">@c Copyright (C) 2004-2017 Free Software Foundation, Inc.</font></i>
<a name="line3"><font color="#000000">003:</font></a> <i><font color="#9A1900">@c See file emacs.texi for copying conditions.</font></i>
<a name="line4"><font color="#000000">004:</font></a> <i><font color="#9A1900">@c</font></i>
<a name="line5"><font color="#000000">005:</font></a> <i><font color="#9A1900">@c This file is included either in emacs-xtra.texi (when producing the</font></i>
<a name="line6"><font color="#000000">006:</font></a> <i><font color="#9A1900">@c printed version) or in the main Emacs manual (for the on-line version).</font></i>
<a name="line7"><font color="#000000">007:</font></a> <b><font color="#0000FF">@node</font></b> Emerge
<a name="line8"><font color="#000000">008:</font></a> <b><font color="#0000FF">@section</font></b> Merging Files with Emerge
<a name="line9"><font color="#000000">009:</font></a> <i><font color="#9A1900">@cindex Emerge</font></i>
<a name="line10"><font color="#000000">010:</font></a> <i><font color="#9A1900">@cindex merging files</font></i>
<a name="line11"><font color="#000000">011:</font></a> 
<a name="line12"><font color="#000000">012:</font></a>   It's not unusual for programmers to get their signals crossed and
<a name="line13"><font color="#000000">013:</font></a> modify the same program in two different directions.  To recover from
<a name="line14"><font color="#000000">014:</font></a> this confusion, you need to merge the two versions.  Emerge makes this
<a name="line15"><font color="#000000">015:</font></a> easier.  For other ways to compare files, see
<a name="line16"><font color="#000000">016:</font></a> <b><font color="#0000FF">@iftex</font></b>
<a name="line17"><font color="#000000">017:</font></a> <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Comparing Files,,, emacs, the Emacs Manual</font><font color="#FF0000">}</font>,
<a name="line18"><font color="#000000">018:</font></a> <b><font color="#0000FF">@end iftex</font></b>
<a name="line19"><font color="#000000">019:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line20"><font color="#000000">020:</font></a> <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Comparing Files</font><font color="#FF0000">}</font>,
<a name="line21"><font color="#000000">021:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line22"><font color="#000000">022:</font></a> and <b><font color="#0000FF">@ref</font></b><font color="#FF0000">{</font><font color="#FF0000">Top,, Ediff, ediff, The Ediff Manual</font><font color="#FF0000">}</font>.
<a name="line23"><font color="#000000">023:</font></a> 
<a name="line24"><font color="#000000">024:</font></a> <b><font color="#000080">@menu</font></b>
<a name="line25"><font color="#000000">025:</font></a> <font color="#FF0000">* Overview of Emerge::</font>     How to start Emerge.  Basic concepts.
<a name="line26"><font color="#000000">026:</font></a> <font color="#FF0000">* Submodes of Emerge::</font>     Fast mode vs. Edit mode.
<a name="line27"><font color="#000000">027:</font></a>                              Skip Prefers mode and Auto Advance mode.
<a name="line28"><font color="#000000">028:</font></a> <font color="#FF0000">* State of Difference::</font>    You do the merge by specifying state A or B
<a name="line29"><font color="#000000">029:</font></a>                              for each difference.
<a name="line30"><font color="#000000">030:</font></a> <font color="#FF0000">* Merge Commands::</font>         Commands for selecting a difference,
<a name="line31"><font color="#000000">031:</font></a>                              changing states of differences, etc.
<a name="line32"><font color="#000000">032:</font></a> <font color="#FF0000">* Exiting Emerge::</font>         What to do when you've finished the merge.
<a name="line33"><font color="#000000">033:</font></a> <font color="#FF0000">* Combining in Emerge::</font>    How to keep both alternatives for a difference.
<a name="line34"><font color="#000000">034:</font></a> <font color="#FF0000">* Fine Points of Emerge::</font>  Miscellaneous issues.
<a name="line35"><font color="#000000">035:</font></a> <b><font color="#000080">@end menu</font></b>
<a name="line36"><font color="#000000">036:</font></a> 
<a name="line37"><font color="#000000">037:</font></a> <b><font color="#0000FF">@node</font></b> Overview of Emerge
<a name="line38"><font color="#000000">038:</font></a> <b><font color="#0000FF">@subsection</font></b> Overview of Emerge
<a name="line39"><font color="#000000">039:</font></a> 
<a name="line40"><font color="#000000">040:</font></a>   To start Emerge, run one of these four commands:
<a name="line41"><font color="#000000">041:</font></a> 
<a name="line42"><font color="#000000">042:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line43"><font color="#000000">043:</font></a> <b><font color="#0000FF">@item</font></b> M-x emerge-files
<a name="line44"><font color="#000000">044:</font></a> <b><font color="#0000FF">@findex</font></b> emerge-files
<a name="line45"><font color="#000000">045:</font></a> Merge two specified files.
<a name="line46"><font color="#000000">046:</font></a> 
<a name="line47"><font color="#000000">047:</font></a> <b><font color="#0000FF">@item</font></b> M-x emerge-files-with-ancestor
<a name="line48"><font color="#000000">048:</font></a> <b><font color="#0000FF">@findex</font></b> emerge-files-with-ancestor
<a name="line49"><font color="#000000">049:</font></a> Merge two specified files, with reference to a common ancestor.
<a name="line50"><font color="#000000">050:</font></a> 
<a name="line51"><font color="#000000">051:</font></a> <b><font color="#0000FF">@item</font></b> M-x emerge-buffers
<a name="line52"><font color="#000000">052:</font></a> <b><font color="#0000FF">@findex</font></b> emerge-buffers
<a name="line53"><font color="#000000">053:</font></a> Merge two buffers.
<a name="line54"><font color="#000000">054:</font></a> 
<a name="line55"><font color="#000000">055:</font></a> <b><font color="#0000FF">@item</font></b> M-x emerge-buffers-with-ancestor
<a name="line56"><font color="#000000">056:</font></a> <b><font color="#0000FF">@findex</font></b> emerge-buffers-with-ancestor
<a name="line57"><font color="#000000">057:</font></a> Merge two buffers with reference to a common ancestor in a third
<a name="line58"><font color="#000000">058:</font></a> buffer.
<a name="line59"><font color="#000000">059:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line60"><font color="#000000">060:</font></a> 
<a name="line61"><font color="#000000">061:</font></a> <i><font color="#9A1900">@cindex merge buffer (Emerge)</font></i>
<a name="line62"><font color="#000000">062:</font></a> <i><font color="#9A1900">@cindex A and B buffers (Emerge)</font></i>
<a name="line63"><font color="#000000">063:</font></a>   The Emerge commands compare two files or buffers, and display the
<a name="line64"><font color="#000000">064:</font></a> comparison in three buffers: one for each input text (the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{A buffer}</font>
<a name="line65"><font color="#000000">065:</font></a> and the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{B buffer}</font>), and one (the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{merge buffer}</font>) where merging
<a name="line66"><font color="#000000">066:</font></a> takes place.  The merge buffer shows the full merged text, not just the
<a name="line67"><font color="#000000">067:</font></a> differences.  Wherever the two input texts differ, you can choose which
<a name="line68"><font color="#000000">068:</font></a> one of them to include in the merge buffer.
<a name="line69"><font color="#000000">069:</font></a> 
<a name="line70"><font color="#000000">070:</font></a>   The Emerge commands that take input from existing buffers use only
<a name="line71"><font color="#000000">071:</font></a> the accessible portions of those buffers, if they are narrowed.
<a name="line72"><font color="#000000">072:</font></a> <b><font color="#0000FF">@iftex</font></b>
<a name="line73"><font color="#000000">073:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Narrowing,,, emacs, the Emacs Manual</font><font color="#FF0000">}</font>.
<a name="line74"><font color="#000000">074:</font></a> <b><font color="#0000FF">@end iftex</font></b>
<a name="line75"><font color="#000000">075:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line76"><font color="#000000">076:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Narrowing</font><font color="#FF0000">}</font>.
<a name="line77"><font color="#000000">077:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line78"><font color="#000000">078:</font></a> 
<a name="line79"><font color="#000000">079:</font></a> 
<a name="line80"><font color="#000000">080:</font></a>   If a common ancestor version is available, from which the two texts to
<a name="line81"><font color="#000000">081:</font></a> be merged were both derived, Emerge can use it to guess which
<a name="line82"><font color="#000000">082:</font></a> alternative is right.  Wherever one current version agrees with the
<a name="line83"><font color="#000000">083:</font></a> ancestor, Emerge presumes that the other current version is a deliberate
<a name="line84"><font color="#000000">084:</font></a> change which should be kept in the merged version.  Use the
<a name="line85"><font color="#000000">085:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{with-ancestor}</font> commands if you want to specify a common ancestor
<a name="line86"><font color="#000000">086:</font></a> text.  These commands read three file or buffer names---variant A,
<a name="line87"><font color="#000000">087:</font></a> variant B, and the common ancestor.
<a name="line88"><font color="#000000">088:</font></a> 
<a name="line89"><font color="#000000">089:</font></a>   After the comparison is done and the buffers are prepared, the
<a name="line90"><font color="#000000">090:</font></a> interactive merging starts.  You control the merging by typing special
<a name="line91"><font color="#000000">091:</font></a> <b><font color="#0000FF">@dfn</font></b><font color="#009900">{merge commands}</font> in the merge buffer (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Merge Commands</font><font color="#FF0000">}</font>).
<a name="line92"><font color="#000000">092:</font></a> For each run of differences between the input texts, you can choose
<a name="line93"><font color="#000000">093:</font></a> which one of them to keep, or edit them both together.
<a name="line94"><font color="#000000">094:</font></a> 
<a name="line95"><font color="#000000">095:</font></a>   The merge buffer uses a special major mode, Emerge mode, with commands
<a name="line96"><font color="#000000">096:</font></a> for making these choices.  But you can also edit the buffer with
<a name="line97"><font color="#000000">097:</font></a> ordinary Emacs commands.
<a name="line98"><font color="#000000">098:</font></a> 
<a name="line99"><font color="#000000">099:</font></a>   At any given time, the attention of Emerge is focused on one
<a name="line100"><font color="#000000">100:</font></a> particular difference, called the <b><font color="#0000FF">@dfn</font></b><font color="#009900">{selected}</font> difference.  This
<a name="line101"><font color="#000000">101:</font></a> difference is marked off in the three buffers like this:
<a name="line102"><font color="#000000">102:</font></a> 
<a name="line103"><font color="#000000">103:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line104"><font color="#000000">104:</font></a> vvvvvvvvvvvvvvvvvvvv
<a name="line105"><font color="#000000">105:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{text that differs}</font>
<a name="line106"><font color="#000000">106:</font></a> ^^^^^^^^^^^^^^^^^^^^
<a name="line107"><font color="#000000">107:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line108"><font color="#000000">108:</font></a> 
<a name="line109"><font color="#000000">109:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line110"><font color="#000000">110:</font></a> Emerge numbers all the differences sequentially and the mode
<a name="line111"><font color="#000000">111:</font></a> line always shows the number of the selected difference.
<a name="line112"><font color="#000000">112:</font></a> 
<a name="line113"><font color="#000000">113:</font></a>   Normally, the merge buffer starts out with the A version of the text.
<a name="line114"><font color="#000000">114:</font></a> But when the A version of a difference agrees with the common ancestor,
<a name="line115"><font color="#000000">115:</font></a> then the B version is initially preferred for that difference.
<a name="line116"><font color="#000000">116:</font></a> 
<a name="line117"><font color="#000000">117:</font></a>   Emerge leaves the merged text in the merge buffer when you exit.  At
<a name="line118"><font color="#000000">118:</font></a> that point, you can save it in a file with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x C-w}</font>.  If you give a
<a name="line119"><font color="#000000">119:</font></a> numeric argument to <b><font color="#0000FF">@code</font></b><font color="#009900">{emerge-files}</font> or
<a name="line120"><font color="#000000">120:</font></a> <i><font color="#9A1900">@code{emerge-files-with-ancestor}, it reads the name of the output file</font></i>
<a name="line121"><font color="#000000">121:</font></a> using the minibuffer.  (This is the last file name those commands read.)
<a name="line122"><font color="#000000">122:</font></a> Then exiting from Emerge saves the merged text in the output file.
<a name="line123"><font color="#000000">123:</font></a> 
<a name="line124"><font color="#000000">124:</font></a>   Normally, Emerge commands save the output buffer in its file when you
<a name="line125"><font color="#000000">125:</font></a> exit.  If you abort Emerge with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-]}</font>, the Emerge command does not
<a name="line126"><font color="#000000">126:</font></a> save the output buffer, but you can save it yourself if you wish.
<a name="line127"><font color="#000000">127:</font></a> 
<a name="line128"><font color="#000000">128:</font></a> <b><font color="#0000FF">@node</font></b> Submodes of Emerge
<a name="line129"><font color="#000000">129:</font></a> <b><font color="#0000FF">@subsection</font></b> Submodes of Emerge
<a name="line130"><font color="#000000">130:</font></a> 
<a name="line131"><font color="#000000">131:</font></a>   You can choose between two modes for giving merge commands: Fast mode
<a name="line132"><font color="#000000">132:</font></a> and Edit mode.  In Fast mode, basic merge commands are single
<a name="line133"><font color="#000000">133:</font></a> characters, but ordinary Emacs commands are disabled.  This is
<a name="line134"><font color="#000000">134:</font></a> convenient if you use only merge commands.  In Edit mode, all merge
<a name="line135"><font color="#000000">135:</font></a> commands start with the prefix key <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-c}</font>, and the normal Emacs
<a name="line136"><font color="#000000">136:</font></a> commands are also available.  This allows editing the merge buffer, but
<a name="line137"><font color="#000000">137:</font></a> slows down Emerge operations.
<a name="line138"><font color="#000000">138:</font></a> 
<a name="line139"><font color="#000000">139:</font></a>   Use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{e}</font> to switch to Edit mode, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-c f}</font> to switch to
<a name="line140"><font color="#000000">140:</font></a> Fast mode.  The mode line indicates Edit and Fast modes with <b><font color="#0000FF">@samp</font></b><font color="#009900">{E}</font>
<a name="line141"><font color="#000000">141:</font></a> and <b><font color="#0000FF">@samp</font></b><font color="#009900">{F}</font>.
<a name="line142"><font color="#000000">142:</font></a> 
<a name="line143"><font color="#000000">143:</font></a>   Emerge has two additional submodes that affect how particular merge
<a name="line144"><font color="#000000">144:</font></a> commands work: Auto Advance mode and Skip Prefers mode.
<a name="line145"><font color="#000000">145:</font></a> 
<a name="line146"><font color="#000000">146:</font></a>   If Auto Advance mode is in effect, the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a}</font> and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{b}</font> commands
<a name="line147"><font color="#000000">147:</font></a> advance to the next difference.  This lets you go through the merge
<a name="line148"><font color="#000000">148:</font></a> faster as long as you simply choose one of the alternatives from the
<a name="line149"><font color="#000000">149:</font></a> input.  The mode line indicates Auto Advance mode with <b><font color="#0000FF">@samp</font></b><font color="#009900">{A}</font>.
<a name="line150"><font color="#000000">150:</font></a> 
<a name="line151"><font color="#000000">151:</font></a>   If Skip Prefers mode is in effect, the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{n}</font> and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{p}</font> commands
<a name="line152"><font color="#000000">152:</font></a> skip over differences in states ``prefer-A'' and ``prefer-B''
<a name="line153"><font color="#000000">153:</font></a> (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">State of Difference</font><font color="#FF0000">}</font>).  Thus you see only differences for
<a name="line154"><font color="#000000">154:</font></a> which neither version is presumed correct.  The mode line
<a name="line155"><font color="#000000">155:</font></a> indicates Skip Prefers mode with <b><font color="#0000FF">@samp</font></b><font color="#009900">{S}</font>.  This mode is only relevant
<a name="line156"><font color="#000000">156:</font></a> when there is an ancestor.
<a name="line157"><font color="#000000">157:</font></a> 
<a name="line158"><font color="#000000">158:</font></a> <b><font color="#0000FF">@findex</font></b> emerge-auto-advance
<a name="line159"><font color="#000000">159:</font></a> <b><font color="#0000FF">@findex</font></b> emerge-skip-prefers
<a name="line160"><font color="#000000">160:</font></a>   Use the command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{s a}</font> (<b><font color="#0000FF">@code</font></b><font color="#009900">{emerge-auto-advance}</font>) to set or clear
<a name="line161"><font color="#000000">161:</font></a> Auto Advance mode.  Use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{s s}</font> (<b><font color="#0000FF">@code{emerge-skip-pref</font></b><font color="#FF0000">ers</font><font color="#FF0000">}</font>) to set or
<a name="line162"><font color="#000000">162:</font></a> clear Skip Prefers mode.  These commands turn on the mode with a
<a name="line163"><font color="#000000">163:</font></a> positive argument, turn it off with a negative or zero argument, and
<a name="line164"><font color="#000000">164:</font></a> toggle the mode with no argument.
<a name="line165"><font color="#000000">165:</font></a> 
<a name="line166"><font color="#000000">166:</font></a> <b><font color="#0000FF">@node</font></b> State of Difference
<a name="line167"><font color="#000000">167:</font></a> <b><font color="#0000FF">@subsection</font></b> State of a Difference
<a name="line168"><font color="#000000">168:</font></a> 
<a name="line169"><font color="#000000">169:</font></a>   In the merge buffer, a difference is marked with lines of <b><font color="#0000FF">@samp</font></b><font color="#009900">{v}</font> and
<a name="line170"><font color="#000000">170:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{^}</font> characters.  Each difference has one of these seven states:
<a name="line171"><font color="#000000">171:</font></a> 
<a name="line172"><font color="#000000">172:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@asis</font></b>
<a name="line173"><font color="#000000">173:</font></a> <b><font color="#0000FF">@item</font></b> A
<a name="line174"><font color="#000000">174:</font></a> The difference is showing the A version.  The <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a}</font> command always
<a name="line175"><font color="#000000">175:</font></a> produces this state; the mode line indicates it with <b><font color="#0000FF">@samp</font></b><font color="#009900">{A}</font>.
<a name="line176"><font color="#000000">176:</font></a> 
<a name="line177"><font color="#000000">177:</font></a> <b><font color="#0000FF">@item</font></b> B
<a name="line178"><font color="#000000">178:</font></a> The difference is showing the B version.  The <b><font color="#0000FF">@kbd</font></b><font color="#009900">{b}</font> command always
<a name="line179"><font color="#000000">179:</font></a> produces this state; the mode line indicates it with <b><font color="#0000FF">@samp</font></b><font color="#009900">{B}</font>.
<a name="line180"><font color="#000000">180:</font></a> 
<a name="line181"><font color="#000000">181:</font></a> <b><font color="#0000FF">@item</font></b> default-A
<a name="line182"><font color="#000000">182:</font></a> <b><font color="#0000FF">@itemx</font></b> default-B
<a name="line183"><font color="#000000">183:</font></a> The difference is showing the A or the B state by default, because you
<a name="line184"><font color="#000000">184:</font></a> haven't made a choice.  All differences start in the default-A state
<a name="line185"><font color="#000000">185:</font></a> (and thus the merge buffer is a copy of the A buffer), except those for
<a name="line186"><font color="#000000">186:</font></a> which one alternative is preferred (see below).
<a name="line187"><font color="#000000">187:</font></a> 
<a name="line188"><font color="#000000">188:</font></a> When you select a difference, its state changes from default-A or
<a name="line189"><font color="#000000">189:</font></a> default-B to plain A or B<b><font color="#0000FF">@.</font></b>  Thus, the selected difference never has
<a name="line190"><font color="#000000">190:</font></a> state default-A or default-B, and these states are never displayed in
<a name="line191"><font color="#000000">191:</font></a> the mode line.
<a name="line192"><font color="#000000">192:</font></a> 
<a name="line193"><font color="#000000">193:</font></a> The command <b><font color="#0000FF">@kbd</font></b><font color="#009900">{d a}</font> chooses default-A as the default state, and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{d</font>
<a name="line194"><font color="#000000">194:</font></a> <font color="#009900">b}</font> chooses default-B<b><font color="#0000FF">@.</font></b>  This chosen default applies to all differences
<a name="line195"><font color="#000000">195:</font></a> that you have never selected and for which no alternative is preferred.
<a name="line196"><font color="#000000">196:</font></a> If you are moving through the merge sequentially, the differences you
<a name="line197"><font color="#000000">197:</font></a> haven't selected are those following the selected one.  Thus, while
<a name="line198"><font color="#000000">198:</font></a> moving sequentially, you can effectively make the A version the default
<a name="line199"><font color="#000000">199:</font></a> for some sections of the merge buffer and the B version the default for
<a name="line200"><font color="#000000">200:</font></a> others by using <b><font color="#0000FF">@kbd</font></b><font color="#009900">{d a}</font> and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{d b}</font> between sections.
<a name="line201"><font color="#000000">201:</font></a> 
<a name="line202"><font color="#000000">202:</font></a> <b><font color="#0000FF">@item</font></b> prefer-A
<a name="line203"><font color="#000000">203:</font></a> <b><font color="#0000FF">@itemx</font></b> prefer-B
<a name="line204"><font color="#000000">204:</font></a> The difference is showing the A or B state because it is
<a name="line205"><font color="#000000">205:</font></a> <b><font color="#0000FF">@dfn{pref</font></b><font color="#FF0000">erred</font><font color="#FF0000">}</font>.  This means that you haven't made an explicit choice,
<a name="line206"><font color="#000000">206:</font></a> but one alternative seems likely to be right because the other
<a name="line207"><font color="#000000">207:</font></a> alternative agrees with the common ancestor.  Thus, where the A buffer
<a name="line208"><font color="#000000">208:</font></a> agrees with the common ancestor, the B version is preferred, because
<a name="line209"><font color="#000000">209:</font></a> chances are it is the one that was actually changed.
<a name="line210"><font color="#000000">210:</font></a> 
<a name="line211"><font color="#000000">211:</font></a> These two states are displayed in the mode line as <b><font color="#0000FF">@samp</font></b><font color="#009900">{A*}</font> and <b><font color="#0000FF">@samp</font></b><font color="#009900">{B*}</font>.
<a name="line212"><font color="#000000">212:</font></a> 
<a name="line213"><font color="#000000">213:</font></a> <b><font color="#0000FF">@item</font></b> combined
<a name="line214"><font color="#000000">214:</font></a> The difference is showing a combination of the A and B states, as a
<a name="line215"><font color="#000000">215:</font></a> result of the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{x c}</font> or <b><font color="#0000FF">@kbd</font></b><font color="#009900">{x C}</font> commands.
<a name="line216"><font color="#000000">216:</font></a> 
<a name="line217"><font color="#000000">217:</font></a> Once a difference is in this state, the <b><font color="#0000FF">@kbd</font></b><font color="#009900">{a}</font> and <b><font color="#0000FF">@kbd</font></b><font color="#009900">{b}</font> commands
<a name="line218"><font color="#000000">218:</font></a> don't do anything to it unless you give them a numeric argument.
<a name="line219"><font color="#000000">219:</font></a> 
<a name="line220"><font color="#000000">220:</font></a> The mode line displays this state as <b><font color="#0000FF">@samp</font></b><font color="#009900">{comb}</font>.
<a name="line221"><font color="#000000">221:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line222"><font color="#000000">222:</font></a> 
<a name="line223"><font color="#000000">223:</font></a> <b><font color="#0000FF">@node</font></b> Merge Commands
<a name="line224"><font color="#000000">224:</font></a> <b><font color="#0000FF">@subsection</font></b> Merge Commands
<a name="line225"><font color="#000000">225:</font></a> 
<a name="line226"><font color="#000000">226:</font></a>   Here are the Merge commands for Fast mode; in Edit mode, precede them
<a name="line227"><font color="#000000">227:</font></a> with <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-c}</font>:
<a name="line228"><font color="#000000">228:</font></a> 
<a name="line229"><font color="#000000">229:</font></a> <b><font color="#0000FF">@table</font></b> <b><font color="#0000FF">@kbd</font></b>
<a name="line230"><font color="#000000">230:</font></a> <b><font color="#0000FF">@item</font></b> p
<a name="line231"><font color="#000000">231:</font></a> Select the previous difference.
<a name="line232"><font color="#000000">232:</font></a> 
<a name="line233"><font color="#000000">233:</font></a> <b><font color="#0000FF">@item</font></b> n
<a name="line234"><font color="#000000">234:</font></a> Select the next difference.
<a name="line235"><font color="#000000">235:</font></a> 
<a name="line236"><font color="#000000">236:</font></a> <b><font color="#0000FF">@item</font></b> a
<a name="line237"><font color="#000000">237:</font></a> Choose the A version of this difference.
<a name="line238"><font color="#000000">238:</font></a> 
<a name="line239"><font color="#000000">239:</font></a> <b><font color="#0000FF">@item</font></b> b
<a name="line240"><font color="#000000">240:</font></a> Choose the B version of this difference.
<a name="line241"><font color="#000000">241:</font></a> 
<a name="line242"><font color="#000000">242:</font></a> <b><font color="#0000FF">@item</font></b> C-u <b><font color="#0000FF">@var</font></b><font color="#009900">{n}</font> j
<a name="line243"><font color="#000000">243:</font></a> Select difference number <b><font color="#0000FF">@var</font></b><font color="#009900">{n}</font>.
<a name="line244"><font color="#000000">244:</font></a> 
<a name="line245"><font color="#000000">245:</font></a> <b><font color="#0000FF">@item</font></b> .
<a name="line246"><font color="#000000">246:</font></a> Select the difference containing point.
<a name="line247"><font color="#000000">247:</font></a> <i><font color="#9A1900">@c [Does not work in the A or B buffer?]</font></i>
<a name="line248"><font color="#000000">248:</font></a> <i><font color="#9A1900">@c You can use this command in the merge buffer or in the A or B buffer.</font></i>
<a name="line249"><font color="#000000">249:</font></a> 
<a name="line250"><font color="#000000">250:</font></a> <b><font color="#0000FF">@item</font></b> q
<a name="line251"><font color="#000000">251:</font></a> Quit---finish the merge.
<a name="line252"><font color="#000000">252:</font></a> 
<a name="line253"><font color="#000000">253:</font></a> <b><font color="#0000FF">@item</font></b> C-]
<a name="line254"><font color="#000000">254:</font></a> Abort---exit merging and do not save the output.
<a name="line255"><font color="#000000">255:</font></a> 
<a name="line256"><font color="#000000">256:</font></a> <b><font color="#0000FF">@item</font></b> f
<a name="line257"><font color="#000000">257:</font></a> Go into Fast mode.  (In Edit mode, this is actually <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-c C-c f}</font>.)
<a name="line258"><font color="#000000">258:</font></a> 
<a name="line259"><font color="#000000">259:</font></a> <b><font color="#0000FF">@item</font></b> e
<a name="line260"><font color="#000000">260:</font></a> Go into Edit mode.
<a name="line261"><font color="#000000">261:</font></a> 
<a name="line262"><font color="#000000">262:</font></a> <b><font color="#0000FF">@item</font></b> l
<a name="line263"><font color="#000000">263:</font></a> Recenter (like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-l}</font>) all three windows.  With an argument,
<a name="line264"><font color="#000000">264:</font></a> reestablish the default three-window display.
<a name="line265"><font color="#000000">265:</font></a> 
<a name="line266"><font color="#000000">266:</font></a> <b><font color="#0000FF">@item</font></b> -
<a name="line267"><font color="#000000">267:</font></a> Specify part of a prefix numeric argument.
<a name="line268"><font color="#000000">268:</font></a> 
<a name="line269"><font color="#000000">269:</font></a> <b><font color="#0000FF">@item</font></b> <b><font color="#0000FF">@var</font></b><font color="#009900">{digit}</font>
<a name="line270"><font color="#000000">270:</font></a> Also specify part of a prefix numeric argument.
<a name="line271"><font color="#000000">271:</font></a> 
<a name="line272"><font color="#000000">272:</font></a> <b><font color="#0000FF">@item</font></b> d a
<a name="line273"><font color="#000000">273:</font></a> Choose the A version as the default from here down in
<a name="line274"><font color="#000000">274:</font></a> the merge buffer.
<a name="line275"><font color="#000000">275:</font></a> 
<a name="line276"><font color="#000000">276:</font></a> <b><font color="#0000FF">@item</font></b> d b
<a name="line277"><font color="#000000">277:</font></a> Choose the B version as the default from here down in
<a name="line278"><font color="#000000">278:</font></a> the merge buffer.
<a name="line279"><font color="#000000">279:</font></a> 
<a name="line280"><font color="#000000">280:</font></a> <b><font color="#0000FF">@item</font></b> c a
<a name="line281"><font color="#000000">281:</font></a> Copy the A version of this difference into the kill ring.
<a name="line282"><font color="#000000">282:</font></a> 
<a name="line283"><font color="#000000">283:</font></a> <b><font color="#0000FF">@item</font></b> c b
<a name="line284"><font color="#000000">284:</font></a> Copy the B version of this difference into the kill ring.
<a name="line285"><font color="#000000">285:</font></a> 
<a name="line286"><font color="#000000">286:</font></a> <b><font color="#0000FF">@item</font></b> i a
<a name="line287"><font color="#000000">287:</font></a> Insert the A version of this difference at point.
<a name="line288"><font color="#000000">288:</font></a> 
<a name="line289"><font color="#000000">289:</font></a> <b><font color="#0000FF">@item</font></b> i b
<a name="line290"><font color="#000000">290:</font></a> Insert the B version of this difference at point.
<a name="line291"><font color="#000000">291:</font></a> 
<a name="line292"><font color="#000000">292:</font></a> <b><font color="#0000FF">@item</font></b> m
<a name="line293"><font color="#000000">293:</font></a> Put point and mark around the difference.
<a name="line294"><font color="#000000">294:</font></a> 
<a name="line295"><font color="#000000">295:</font></a> <b><font color="#0000FF">@item</font></b> ^
<a name="line296"><font color="#000000">296:</font></a> Scroll all three windows down (like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{M-v}</font>).
<a name="line297"><font color="#000000">297:</font></a> 
<a name="line298"><font color="#000000">298:</font></a> <b><font color="#0000FF">@item</font></b> v
<a name="line299"><font color="#000000">299:</font></a> Scroll all three windows up (like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-v}</font>).
<a name="line300"><font color="#000000">300:</font></a> 
<a name="line301"><font color="#000000">301:</font></a> <b><font color="#0000FF">@item</font></b> &lt;
<a name="line302"><font color="#000000">302:</font></a> Scroll all three windows left (like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x &lt;}</font>).
<a name="line303"><font color="#000000">303:</font></a> 
<a name="line304"><font color="#000000">304:</font></a> <b><font color="#0000FF">@item</font></b> &gt;
<a name="line305"><font color="#000000">305:</font></a> Scroll all three windows right (like <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-x &gt;}</font>).
<a name="line306"><font color="#000000">306:</font></a> 
<a name="line307"><font color="#000000">307:</font></a> <b><font color="#0000FF">@item</font></b> |
<a name="line308"><font color="#000000">308:</font></a> Reset horizontal scroll on all three windows.
<a name="line309"><font color="#000000">309:</font></a> 
<a name="line310"><font color="#000000">310:</font></a> <b><font color="#0000FF">@item</font></b> x 1
<a name="line311"><font color="#000000">311:</font></a> Shrink the merge window to one line.  (Use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u l}</font> to restore it
<a name="line312"><font color="#000000">312:</font></a> to full size.)
<a name="line313"><font color="#000000">313:</font></a> 
<a name="line314"><font color="#000000">314:</font></a> <b><font color="#0000FF">@item</font></b> x c
<a name="line315"><font color="#000000">315:</font></a> Combine the two versions of this difference (<b><font color="#0000FF">@pxref</font></b><font color="#FF0000">{</font><font color="#FF0000">Combining in</font>
<a name="line316"><font color="#000000">316:</font></a> <font color="#FF0000">Emerge</font><font color="#FF0000">}</font>).
<a name="line317"><font color="#000000">317:</font></a> 
<a name="line318"><font color="#000000">318:</font></a> <b><font color="#0000FF">@item</font></b> x f
<a name="line319"><font color="#000000">319:</font></a> Show the names of the files/buffers Emerge is operating on, in a Help
<a name="line320"><font color="#000000">320:</font></a> window.  (Use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u l}</font> to restore windows.)
<a name="line321"><font color="#000000">321:</font></a> 
<a name="line322"><font color="#000000">322:</font></a> <b><font color="#0000FF">@item</font></b> x j
<a name="line323"><font color="#000000">323:</font></a> Join this difference with the following one.
<a name="line324"><font color="#000000">324:</font></a> (<b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-u x j}</font> joins this difference with the previous one.)
<a name="line325"><font color="#000000">325:</font></a> 
<a name="line326"><font color="#000000">326:</font></a> <b><font color="#0000FF">@item</font></b> x s
<a name="line327"><font color="#000000">327:</font></a> Split this difference into two differences.  Before you use this
<a name="line328"><font color="#000000">328:</font></a> command, position point in each of the three buffers at the place where
<a name="line329"><font color="#000000">329:</font></a> you want to split the difference.
<a name="line330"><font color="#000000">330:</font></a> 
<a name="line331"><font color="#000000">331:</font></a> <b><font color="#0000FF">@item</font></b> x t
<a name="line332"><font color="#000000">332:</font></a> Trim identical lines off the top and bottom of the difference.
<a name="line333"><font color="#000000">333:</font></a> Such lines occur when the A and B versions are
<a name="line334"><font color="#000000">334:</font></a> identical but differ from the ancestor version.
<a name="line335"><font color="#000000">335:</font></a> <b><font color="#0000FF">@end table</font></b>
<a name="line336"><font color="#000000">336:</font></a> 
<a name="line337"><font color="#000000">337:</font></a> <b><font color="#0000FF">@node</font></b> Exiting Emerge
<a name="line338"><font color="#000000">338:</font></a> <b><font color="#0000FF">@subsection</font></b> Exiting Emerge
<a name="line339"><font color="#000000">339:</font></a> 
<a name="line340"><font color="#000000">340:</font></a>   The <b><font color="#0000FF">@kbd</font></b><font color="#009900">{q}</font> command (<b><font color="#0000FF">@code</font></b><font color="#009900">{emerge-quit}</font>) finishes the merge, storing
<a name="line341"><font color="#000000">341:</font></a> the results into the output file if you specified one.  It restores the
<a name="line342"><font color="#000000">342:</font></a> A and B buffers to their proper contents, or kills them if they were
<a name="line343"><font color="#000000">343:</font></a> created by Emerge and you haven't changed them.  It also disables the
<a name="line344"><font color="#000000">344:</font></a> Emerge commands in the merge buffer, since executing them later could
<a name="line345"><font color="#000000">345:</font></a> damage the contents of the various buffers.
<a name="line346"><font color="#000000">346:</font></a> 
<a name="line347"><font color="#000000">347:</font></a>   <b><font color="#0000FF">@kbd</font></b><font color="#009900">{C-]}</font> aborts the merge.  This means exiting without writing the
<a name="line348"><font color="#000000">348:</font></a> output file.  If you didn't specify an output file, then there is no
<a name="line349"><font color="#000000">349:</font></a> real difference between aborting and finishing the merge.
<a name="line350"><font color="#000000">350:</font></a> 
<a name="line351"><font color="#000000">351:</font></a>   If the Emerge command was called from another Lisp program, then its
<a name="line352"><font color="#000000">352:</font></a> return value is <b><font color="#0000FF">@code</font></b><font color="#009900">{t}</font> for successful completion, or <b><font color="#0000FF">@code</font></b><font color="#009900">{nil}</font> if you
<a name="line353"><font color="#000000">353:</font></a> abort.
<a name="line354"><font color="#000000">354:</font></a> 
<a name="line355"><font color="#000000">355:</font></a> <b><font color="#0000FF">@node</font></b> Combining in Emerge
<a name="line356"><font color="#000000">356:</font></a> <b><font color="#0000FF">@subsection</font></b> Combining the Two Versions
<a name="line357"><font color="#000000">357:</font></a> 
<a name="line358"><font color="#000000">358:</font></a>   Sometimes you want to keep <b><font color="#0000FF">@emph</font></b><font color="#FF0000">{</font><i><font color="#009900">both</font></i><font color="#FF0000">}</font> alternatives for a particular
<a name="line359"><font color="#000000">359:</font></a> difference.  To do this, use <b><font color="#0000FF">@kbd</font></b><font color="#009900">{x c}</font>, which edits the merge buffer
<a name="line360"><font color="#000000">360:</font></a> like this:
<a name="line361"><font color="#000000">361:</font></a> 
<a name="line362"><font color="#000000">362:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line363"><font color="#000000">363:</font></a> <b><font color="#0000FF">@group</font></b>
<a name="line364"><font color="#000000">364:</font></a> #ifdef NEW
<a name="line365"><font color="#000000">365:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{version from B buffer}</font>
<a name="line366"><font color="#000000">366:</font></a> #else /* not NEW */
<a name="line367"><font color="#000000">367:</font></a> <b><font color="#0000FF">@var</font></b><font color="#009900">{version from A buffer}</font>
<a name="line368"><font color="#000000">368:</font></a> #endif /* not NEW */
<a name="line369"><font color="#000000">369:</font></a> <b><font color="#0000FF">@end group</font></b>
<a name="line370"><font color="#000000">370:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line371"><font color="#000000">371:</font></a> 
<a name="line372"><font color="#000000">372:</font></a> <b><font color="#0000FF">@noindent</font></b>
<a name="line373"><font color="#000000">373:</font></a> <b><font color="#0000FF">@vindex</font></b> emerge-combine-versions-template
<a name="line374"><font color="#000000">374:</font></a> While this example shows C preprocessor conditionals delimiting the two
<a name="line375"><font color="#000000">375:</font></a> alternative versions, you can specify the strings to use by setting
<a name="line376"><font color="#000000">376:</font></a> the variable <b><font color="#0000FF">@code</font></b><font color="#009900">{emerge-combine-versions-template}</font> to a string of your
<a name="line377"><font color="#000000">377:</font></a> choice.  In the string, <b><font color="#0000FF">@samp</font></b><font color="#009900">{%a}</font> says where to put version A, and
<a name="line378"><font color="#000000">378:</font></a> <b><font color="#0000FF">@samp</font></b><font color="#009900">{%b}</font> says where to put version B<b><font color="#0000FF">@.</font></b>  The default setting, which
<a name="line379"><font color="#000000">379:</font></a> produces the results shown above, looks like this:
<a name="line380"><font color="#000000">380:</font></a> 
<a name="line381"><font color="#000000">381:</font></a> <b><font color="#0000FF">@example</font></b>
<a name="line382"><font color="#000000">382:</font></a> <b><font color="#0000FF">@group</font></b>
<a name="line383"><font color="#000000">383:</font></a> "#ifdef NEW\n%b#else /* not NEW */\n%a#endif /* not NEW */\n"
<a name="line384"><font color="#000000">384:</font></a> <b><font color="#0000FF">@end group</font></b>
<a name="line385"><font color="#000000">385:</font></a> <b><font color="#0000FF">@end example</font></b>
<a name="line386"><font color="#000000">386:</font></a> 
<a name="line387"><font color="#000000">387:</font></a> <b><font color="#0000FF">@node</font></b> Fine Points of Emerge
<a name="line388"><font color="#000000">388:</font></a> <b><font color="#0000FF">@subsection</font></b> Fine Points of Emerge
<a name="line389"><font color="#000000">389:</font></a> 
<a name="line390"><font color="#000000">390:</font></a>   During the merge, you mustn't try to edit the A and B buffers yourself.
<a name="line391"><font color="#000000">391:</font></a> Emerge modifies them temporarily, but ultimately puts them back the way
<a name="line392"><font color="#000000">392:</font></a> they were.
<a name="line393"><font color="#000000">393:</font></a> 
<a name="line394"><font color="#000000">394:</font></a>   You can have any number of merges going at once---just don't use any one
<a name="line395"><font color="#000000">395:</font></a> buffer as input to more than one merge at once, since the temporary
<a name="line396"><font color="#000000">396:</font></a> changes made in these buffers would get in each other's way.
<a name="line397"><font color="#000000">397:</font></a> 
<a name="line398"><font color="#000000">398:</font></a>   Starting Emerge can take a long time because it needs to compare the
<a name="line399"><font color="#000000">399:</font></a> files fully.  Emacs can't do anything else until <b><font color="#0000FF">@code</font></b><font color="#009900">{diff}</font> finishes.
<a name="line400"><font color="#000000">400:</font></a> Perhaps in the future someone will change Emerge to do the comparison in
<a name="line401"><font color="#000000">401:</font></a> the background when the input files are large---then you could keep on
<a name="line402"><font color="#000000">402:</font></a> doing other things with Emacs until Emerge is ready to accept
<a name="line403"><font color="#000000">403:</font></a> commands.
<a name="line404"><font color="#000000">404:</font></a> 
<a name="line405"><font color="#000000">405:</font></a> <b><font color="#0000FF">@vindex</font></b> emerge-startup-hook
<a name="line406"><font color="#000000">406:</font></a>   After setting up the merge, Emerge runs the hook
<a name="line407"><font color="#000000">407:</font></a> <i><font color="#9A1900">@code{emerge-startup-hook}.</font></i>
<a name="line408"><font color="#000000">408:</font></a> <b><font color="#0000FF">@iftex</font></b>
<a name="line409"><font color="#000000">409:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Hooks,,, emacs, the Emacs Manual</font><font color="#FF0000">}</font>.
<a name="line410"><font color="#000000">410:</font></a> <b><font color="#0000FF">@end iftex</font></b>
<a name="line411"><font color="#000000">411:</font></a> <b><font color="#0000FF">@ifnottex</font></b>
<a name="line412"><font color="#000000">412:</font></a> <b><font color="#0000FF">@xref</font></b><font color="#FF0000">{</font><font color="#FF0000">Hooks</font><font color="#FF0000">}</font>.
<a name="line413"><font color="#000000">413:</font></a> <b><font color="#0000FF">@end ifnottex</font></b>
<a name="line414"><font color="#000000">414:</font></a> </tt></pre>
