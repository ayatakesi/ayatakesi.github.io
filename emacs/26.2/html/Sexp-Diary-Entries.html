<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Manual,
updated for Emacs version 26.2.

Copyright (C) 2016-2019 ayatakesi
<ayanokoji.takesi@gmail.com>
Copyright (C) 1985-1987, 1993-2019
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GNU Emacs Manual
(Japanese Translation): Sexp Diary Entries</title>

<meta name="description" content="GNU Emacs Manual
(Japanese Translation): Sexp Diary Entries">
<meta name="keywords" content="GNU Emacs Manual
(Japanese Translation): Sexp Diary Entries">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Key-Index.html#Key-Index" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Advanced-Calendar_002fDiary-Usage.html#Advanced-Calendar_002fDiary-Usage" rel="up" title="Advanced Calendar/Diary Usage">
<link href="Sending-Mail.html#Sending-Mail" rel="next" title="Sending Mail">
<link href="Fancy-Diary-Display.html#Fancy-Diary-Display" rel="prev" title="Fancy Diary Display">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Sexp-Diary-Entries"></a>
<div class="header">
<p>
Previous: <a href="Fancy-Diary-Display.html#Fancy-Diary-Display" accesskey="p" rel="prev">Fancy Diary Display</a>, Up: <a href="Advanced-Calendar_002fDiary-Usage.html#Advanced-Calendar_002fDiary-Usage" accesskey="u" rel="up">Advanced Calendar/Diary Usage</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="sexpentoritoFancy-DiaryBiao-Shi"></a>
<h4 class="subsection">31.13.10 sexpエントリーとFancy Diary表示</h4>
<a name="index-sexp-diary-entries"></a>

<a name="index-diary_002dsexp_002dentry_002dsymbol"></a>
<p>sexp( s-expression:
S式)ダイアリーエントリーにより、どのダイアリーエントリーに適用するか、複雑な条件判定以上のことができます。sexpエントリーは、ダイアリーファイルで<code>diary-sexp-entry-symbol</code>(デフォルトは&lsquo;<samp>%%</samp>&rsquo;)が前置されている行です。fancy
diary表示では、sexpエントリーはエントリーの日付に応じて、エントリーのテキストを生成できます。
</p>
<p>たとえば記念日のダイアリーエントリーでは、記念日から経過した年数をダイアリーエントリーのテキストに挿入できます。したがって、以下のダイアリーエントリーの&lsquo;<samp>%d</samp>&rsquo;:
</p>
<a name="index-diary_002danniversary_002c-and-sexp-diary-entries"></a>
<div class="smallexample">
<pre class="smallexample">%%(diary-anniversary 10 31 1948) Arthur's birthday (%d years old)
</pre></div>

<p>は年齢に置換されるので、1990年10月31日のfancy diaryバッファーでは、以下のように表示されます:
</p>
<div class="smallexample">
<pre class="smallexample">Arthur's birthday (42 years old)
</pre></div>

<p>かわりに、ダイアリーファイルに以下のようなエントリーが含まれている場合:
</p>
<div class="smallexample">
<pre class="smallexample">%%(diary-anniversary 10 31 1948) Arthur's %d%s birthday
</pre></div>

<p>は1990年10月31日のfancy diaryバッファーで、以下のように表示されます:
</p>
<div class="smallexample">
<pre class="smallexample">Arthur's 42nd birthday
</pre></div>

<p>同様に、周期的なダイアリーエントリーは、それが繰り返し発生した回数を挿入できます:
</p>
<a name="index-diary_002dcyclic_002c-and-sexp-diary-entries"></a>
<div class="smallexample">
<pre class="smallexample">%%(diary-cyclic 50 1 1 2012) Renew medication (%d%s time)
</pre></div>

<p>これは以下のように表示されます:
</p>
<div class="smallexample">
<pre class="smallexample">Renew medication (5th time)
</pre></div>

<p>これは2012年9月7日のfancy diary表示です。
</p>
<p>発生する日付だけでなく、それより前のダイアリーエントリーを含めるための、事前リマインダー(early-reminder)となるsexpダイアリーエントリーもあります。たとえば記念日の1週間前にリマインダーが欲しいときは、以下を使用します
</p>
<a name="index-diary_002dremind"></a>
<div class="smallexample">
<pre class="smallexample">%%(diary-remind '(diary-anniversary 12 22 1968) 7) Ed's anniversary
</pre></div>

<p>これにより、fancy diaryは12月15日と12月22日に、&lsquo;<samp>Ed's anniversary</samp>&rsquo;を表示します。
</p>
<a name="index-diary_002ddate"></a>
<p>関数<code>diary-date</code>は、整数または<code>t</code>(すべての値を意味します)からなるmonth、day、yearの組み合わせで日付を指定します。たとえば、
</p>
<div class="smallexample">
<pre class="smallexample">%%(diary-date '(10 11 12) 22 t) Rake leaves
</pre></div>

<p>これによりfancy diaryは
</p>
<div class="smallexample">
<pre class="smallexample">Rake leaves
</pre></div>

<p>を毎年10月22日、11月22日、12月22日に表示します。
</p>
<a name="index-diary_002dfloat_002c-and-sexp-diary-entries"></a>
<p>関数<code>diary-float</code>を使って、11月の第3金曜日や、4月の最後の火曜日といった日付をダイアリーエントリーに記述することができます。パラメーターは<var>month</var>、<var>dayname</var>、およびインデックス<var>n</var>です。エントリーは<var>month</var>の最初の日の後の<var>n</var>番目の曜日<var>dayname</var>に表示されます。ここで<var>dayname</var>=0は日曜日、1は月曜日、&hellip;です。<var>n</var>が負の場合、<var>month</var>の最後から後方に数えます。<var>month</var>の値に指定できるのは、月のリスト、単一の月、<code>t</code>の場合はすべての月を意味します。オプションのパラメーター<var>day</var>を使用して、<var>month</var>の<var>day</var>日目の後または前の、<var>n</var>番目の曜日<var>dayname</var>を指定することもできます。<var>day</var>のデフォルト値は、<var>n</var>が正のときは1で、<var>n</var>が負のときはと気はの最後の日です。たとえば、
</p>
<div class="smallexample">
<pre class="smallexample">%%(diary-float t 1 -1) Pay rent
</pre></div>

<p>これによりfancy diaryは
</p>
<div class="smallexample">
<pre class="smallexample">Pay rent
</pre></div>

<p>を毎月最後の月曜日に表示します。
</p>
<p>sexpダイアリーエントリーの一般性により、アルゴリズム的に記述したダイアリーエントリーを指定できます。sexpダイアリーエントリーには、任意の与えられた日付にたいして、エントリーを適用するかどうかを計算する式が含まれます。値が非<code>nil</code>の場合はその日付にエントリーが適用され、そうでない場合は適用されません。式では判定する日付を変数<code>date</code>で使用することができます。この変数の値は、グレゴリオ暦を参照するリスト(<var>month</var>
<var>day</var> <var>year</var>)です。
</p>
<p>sexpダイアリーエントリーは、式の値が非<code>nil</code>のときはその日付に適用されますが、いくつかの値は特別な意味をもちます。値が文字列の場合、その文字列はその日に発生するイベントを説明する文字列です。値は<code>(<var>mark</var>
.
<var>string</var>)</code>という形式をもつこともできます。<var>mark</var>は、カレンダーでその日をどのようにマークするかを指定し、<var>string</var>はそのイベントの説明です。<var>mark</var>が1文字の文字列の場合、その文字はカレンダーの日付の隣に表示されます。<var>mark</var>がフェイス名の場合、その日はそのフェイスで表示されます。<var>mark</var>が<code>nil</code>の場合、その日を特にハイライト表示しません。
</p>
<p>21日がウィークデイのときは21日、21日が週末のときは前の日の金曜日に給料が支払われるとしましょう。以下はそのような日付にマッチするsexpダイアリーエントリーです:
</p>
<div class="smallexample">
<pre class="smallexample">&amp;%%(let ((dayname (calendar-day-of-week date))
         (day (cadr date)))
      (or (and (= day 21) (memq dayname '(1 2 3 4 5)))
          (and (memq day '(19 20)) (= dayname 5)))
         ) Pay check deposited
</pre></div>

<p>以下のsexpダイアリーエントリーは、(fancy diary表示において)日付により異なるテキストをもつダイアリーエントリーを作成することができます:
</p>
<a name="index-diary_002dsunrise_002dsunset"></a>
<a name="index-diary_002dlunar_002dphases"></a>
<a name="index-diary_002dday_002dof_002dyear"></a>
<a name="index-diary_002diso_002ddate"></a>
<a name="index-diary_002djulian_002ddate"></a>
<a name="index-diary_002dastro_002dday_002dnumber"></a>
<a name="index-diary_002dbahai_002ddate"></a>
<a name="index-diary_002dchinese_002ddate"></a>
<a name="index-diary_002dcoptic_002ddate"></a>
<a name="index-diary_002dethiopic_002ddate"></a>
<a name="index-diary_002dhebrew_002ddate"></a>
<a name="index-diary_002dislamic_002ddate"></a>
<a name="index-diary_002dfrench_002ddate"></a>
<a name="index-diary_002dmayan_002ddate"></a>
<a name="index-diary_002dpersian_002ddate"></a>
<dl compact="compact">
<dt><code>%%(diary-sunrise-sunset)</code></dt>
<dd><p>地方時で、今日の日の出と日の入りの時刻のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-lunar-phases)</code></dt>
<dd><p>月の位相にたいするダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-day-of-year)</code></dt>
<dd><p>その年での通算日数と、その年の残り日数でダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-iso-date)</code></dt>
<dd><p>今日と等価な、ISO商用日付のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-julian-date)</code></dt>
<dd><p>今日と等価な、ユリウス暦日のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-astro-day-number)</code></dt>
<dd><p>今日と等価な、天文日(ユリウス日)のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-bahai-date)</code></dt>
<dd><p>今日と等価な、Bahá&rsquo;í暦日のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-chinese-date)</code></dt>
<dd><p>今日と等価な、旧暦日のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-coptic-date)</code></dt>
<dd><p>今日と等価な、Copticカレンダー日のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-ethiopic-date)</code></dt>
<dd><p>今日と等価な、エチオピア暦日のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-french-date)</code></dt>
<dd><p>今日と等価な、フランス革命暦の日付のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-hebrew-date)</code></dt>
<dd><p>今日と等価な、ヘブライ暦の日付のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-islamic-date)</code></dt>
<dd><p>今日と等価な、イスラム暦の非助のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-mayan-date)</code></dt>
<dd><p>今日と等価な、マヤ暦の日付のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-persian-date)</code></dt>
<dd><p>今日と等価な、Persian calendarの日付のダイアリーエントリーを作成します。
</p></dd>
</dl>

<p>例えば、以下のようなダイアリーエントリーを含めると
</p>
<div class="smallexample">
<pre class="smallexample">&amp;%%(diary-hebrew-date)
</pre></div>

<p>fancy diary表示を使用している場合は、毎日のダイアリー表示に、その日に対応するヘブライ暦の日付が含まれるようになります(simple
diary表示を使用している場合は、任意の日付のダイアリーにリテラル行&lsquo;<samp>&amp;%%(diary-hebrew-date)</samp>&rsquo;が表示されます)。
</p>
<p>以下の関数は、特定の標準的なヘブライsexpダイアリーエントリーを構築するために使用されます:
</p>
<a name="index-rosh-hodesh"></a>
<a name="index-diary_002dhebrew_002drosh_002dhodesh"></a>
<a name="index-parasha_002c-weekly"></a>
<a name="index-diary_002dhebrew_002dparasha"></a>
<a name="index-candle-lighting-times"></a>
<a name="index-diary_002dhebrew_002dsabbath_002dcandles"></a>
<a name="index-omer-count"></a>
<a name="index-diary_002dhebrew_002domer"></a>
<a name="index-yahrzeits_002c-and-sexp-diary-entries"></a>
<a name="index-diary_002dhebrew_002dyahrzeit"></a>
<a name="index-diary_002dhebrew_002dbirthday"></a>
<dl compact="compact">
<dt><code>%%(diary-hebrew-rosh-hodesh)</code></dt>
<dd><p>新しいヘブライ月にたいして、礼拝の発生と告知を告げるダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-hebrew-parasha)</code></dt>
<dd><p>毎週のシナゴーグ経典(synagogue scripture)の読書会を告げる、土曜日のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-hebrew-sabbath-candles)</code></dt>
<dd><p>安息日のキャンドルライトを告げる、<em>地方時</em>のダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-hebrew-omer)</code></dt>
<dd><p>適切な場合は、omerを数えるダイアリーエントリーを作成します。
</p></dd>
<dt><code>%%(diary-hebrew-yahrzeit <var>month</var> <var>day</var> <var>year</var>) <var>name</var></code></dt>
<dd><p>命日をマークするダイアリーエントリーを作成します。命日の日付はグレゴリオ暦の日付です。ダイアリーエントリーは適切なヘブライ暦の命日、およびその前日に表示されます(カレンダーの日付様式に対応してパラメーターの順序は変化します。たとえばヨーロッパ標識では<var>day</var>、<var>month</var>、<var>year</var>の順です)。
</p></dd>
<dt><code>%%(diary-hebrew-birthday <var>month</var> <var>day</var> <var>year</var>)</code></dt>
<dd><p>ヘブライ暦での誕生日のダイアリーエントリーを作成します。
</p></dd>
</dl>

<p>上記でドキュメントされたすべての関数は、オプションの引数<var>mark</var>を受け取ります。これはカレンダー表示で、その日をどのようにマークするかを指定します。上記の関数の1つが特定の日付に適用されると決定された場合、上述したように<var>mark</var>を含んだ値を戻します。
</p><hr>
<div class="header">
<p>
Previous: <a href="Fancy-Diary-Display.html#Fancy-Diary-Display" accesskey="p" rel="prev">Fancy Diary Display</a>, Up: <a href="Advanced-Calendar_002fDiary-Usage.html#Advanced-Calendar_002fDiary-Usage" accesskey="u" rel="up">Advanced Calendar/Diary Usage</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html#Key-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
