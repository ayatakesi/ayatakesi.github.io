<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 29.3.

Copyright (C) 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Diff Mode (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Diff Mode (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Diff Mode (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="April 29, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Copying-and-Naming.html" rel="next" title="Copying and Naming">
<link href="Comparing-Files.html" rel="prev" title="Comparing Files">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="section" id="Diff-Mode">
<div class="header">
<p>
Next: <a href="Copying-and-Naming.html" accesskey="n" rel="next">ファイルのコピー、命名、リネーム。</a>, Previous: <a href="Comparing-Files.html" accesskey="p" rel="prev">ファイルの比較</a>, Up: <a href="Files.html" accesskey="u" rel="up">ファイルの処理</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Diffmodo"></span><h3 class="section">19.10 Diffモード</h3>
<span id="index-Diff-mode"></span>
<span id="index-diff_002dmode"></span>
<span id="index-patches_002c-editing"></span>

<p>Diff mode is a major mode used for the output of <kbd>M-x diff</kbd> and other
similar commands.  This kind of output is called a <em>patch</em>, because it
can be passed to the <code>patch</code> command to automatically apply the
specified changes.  To select Diff mode manually, type <kbd>M-x diff-mode</kbd>.
</p>
<span id="index-hunk_002c-diff"></span>
<p>The changes specified in a patch are grouped into <em>hunks</em>, which are
contiguous chunks of text that contain one or more changed lines.  Hunks
usually also include unchanged lines to provide context for the changes.
Each hunk is preceded by a <em>hunk header</em>, which specifies the old and
new line numbers where the hunk&rsquo;s changes occur.  Diff mode highlights each
hunk header, to distinguish it from the actual contents of the hunk.
</p>
<p>The first hunk in a patch is preceded by a file header, which shows the
names of the new and the old versions of the file, and their time stamps.
If a patch shows changes for more than one file, each file has such a header
before the first hunk of that file&rsquo;s changes.
</p>
<span id="index-diff_002dupdate_002don_002dthe_002dfly"></span>
<p>You can edit a Diff mode buffer like any other buffer.  (If it is read-only,
you need to make it writable first; see <a href="Misc-Buffer.html">その他のバッファー操作</a>.)  Whenever you
edit a hunk, Diff mode attempts to automatically correct the line numbers in
the hunk headers, to ensure that the patch remains correct, and could still
be applied by <code>patch</code>.  To disable automatic line number correction,
change the variable <code>diff-update-on-the-fly</code> to <code>nil</code>.
</p>
<p>Diff mode arranges for hunks to be treated as compiler error messages by
<kbd>M-g M-n</kbd> and other commands that handle error messages
(see <a href="Compilation-Mode.html">Compilationモード</a>).  Thus, you can use the compilation-mode commands
to visit the corresponding source locations.
</p>
<p>In addition, Diff mode provides the following commands to navigate,
manipulate and apply parts of patches:
</p>
<dl compact="compact">
<dt id='index-diff_002dhunk_002dnext'><span><kbd>M-n</kbd><a href='#index-diff_002dhunk_002dnext' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Move to the next hunk-start (<code>diff-hunk-next</code>).  With prefix argument
<var>n</var>, move forward to the <var>n</var>th next hunk.
</p>
<span id="index-diff_002drefine"></span>
<p>By default, Diff mode <em>refines</em> hunks as Emacs displays them,
highlighting their changes with better granularity.  Alternatively, if you
set <code>diff-refine</code> to the symbol <code>navigation</code>, Diff mode only
refines the hunk you move to with this command or with
<code>diff-hunk-prev</code>.
</p>
</dd>
<dt id='index-diff_002dhunk_002dprev'><span><kbd>M-p</kbd><a href='#index-diff_002dhunk_002dprev' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Move to the previous hunk-start (<code>diff-hunk-prev</code>).  With prefix
argument <var>n</var>, move back to the <var>n</var>th previous hunk.  Like <kbd>M-n</kbd>,
this command refines the hunk you move to if you set <code>diff-refine</code> to
the symbol <code>navigation</code>.
</p>
</dd>
<dt id='index-diff_002dfile_002dnext'><span><kbd>M-}</kbd><a href='#index-diff_002dfile_002dnext' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Move to the next file-start, in a multi-file patch (<code>diff-file-next</code>).
With prefix argument <var>n</var>, move forward to the start of the <var>n</var>th
next file.
</p>
</dd>
<dt id='index-diff_002dfile_002dprev'><span><kbd>M-{</kbd><a href='#index-diff_002dfile_002dprev' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Move to the previous file-start, in a multi-file patch
(<code>diff-file-prev</code>).  With prefix argument <var>n</var>, move back to the
start of the <var>n</var>th previous file.
</p>
</dd>
<dt id='index-diff_002dhunk_002dkill'><span><kbd>M-k</kbd><a href='#index-diff_002dhunk_002dkill' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Kill the hunk at point (<code>diff-hunk-kill</code>).
</p>
</dd>
<dt id='index-diff_002dfile_002dkill'><span><kbd>M-K</kbd><a href='#index-diff_002dfile_002dkill' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>In a multi-file patch, kill the current file part.  (<code>diff-file-kill</code>).
</p>
</dd>
<dt id='index-diff_002dapply_002dhunk'><span><kbd>C-c C-a</kbd><a href='#index-diff_002dapply_002dhunk' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-patches_002c-applying"></span>
<p>Apply this hunk to its target file (<code>diff-apply-hunk</code>).  With a prefix
argument of <kbd>C-u</kbd>, revert this hunk, i.e. apply the reverse of the
hunk, which changes the &ldquo;new&rdquo; version into the &ldquo;old&rdquo; version.  If
<code>diff-jump-to-old-file</code> is non-<code>nil</code>, apply the hunk to the
&ldquo;old&rdquo; version of the file instead.
</p>
</dd>
<dt id='index-diff_002drefine_002dhunk'><span><kbd>C-c C-b</kbd><a href='#index-diff_002drefine_002dhunk' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Highlight the changes of the hunk at point with a finer granularity
(<code>diff-refine-hunk</code>).  This allows you to see exactly which parts of
each changed line were actually changed.
</p>
<span id="index-diff_002drefine-1"></span>
<p>By default, Diff mode refines hunks as Emacs displays them, so you may find
this command useful if you customize <code>diff-refine</code> to a non-default
value.
</p>
</dd>
<dt id='index-diff_002dgoto_002dsource'><span><kbd>C-c C-c</kbd><a href='#index-diff_002dgoto_002dsource' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-diff_002djump_002dto_002dold_002dfile"></span>
<p>Go to the source file and line corresponding to this hunk
(<code>diff-goto-source</code>).  By default, this jumps to the &ldquo;new&rdquo; version of
the file, the one shown first on the file header.  With a prefix argument,
jump to the &ldquo;old&rdquo; version instead.  If <code>diff-jump-to-old-file</code> is
non-<code>nil</code>, this command by default jumps to the &ldquo;old&rdquo; file, and the
meaning of the prefix argument is reversed.  If the prefix argument is a
number greater than 8 (e.g., if you type <kbd>C-u C-u C-c C-c</kbd>), then this
command also sets <code>diff-jump-to-old-file</code> for the next invocation.  If
the source file is under version control (see <a href="Version-Control.html">バージョンコントロール</a>), this
jumps to the work file by default.  With a prefix argument, jump to the
&ldquo;old&rdquo; revision of the file (see <a href="Old-Revisions.html">古いリビジョンの調査と比較</a>), when point is on the
old line, or otherwise jump to the &ldquo;new&rdquo; revision.
</p>
</dd>
<dt id='index-diff_002dediff_002dpatch'><span><kbd>C-c C-e</kbd><a href='#index-diff_002dediff_002dpatch' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Start an Ediff session with the patch (<code>diff-ediff-patch</code>).  See <a data-manual="ediff" href="https://www.gnu.org/software/emacs/manual/html_node/ediff/index.html#Top">Ediff</a> in <cite>The Ediff Manual</cite>.
</p>
</dd>
<dt id='index-diff_002drestrict_002dview'><span><kbd>C-c C-n</kbd><a href='#index-diff_002drestrict_002dview' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Restrict the view to the current hunk (<code>diff-restrict-view</code>).
See <a href="Narrowing.html">ナローイング</a>.  With a prefix argument, restrict the view to the current
file of a multiple-file patch.  To widen again, use <kbd>C-x n w</kbd>
(<code>widen</code>).
</p>
</dd>
<dt id='index-diff_002dreverse_002ddirection'><span><kbd>C-c C-r</kbd><a href='#index-diff_002dreverse_002ddirection' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Reverse the direction of comparison for the entire buffer
(<code>diff-reverse-direction</code>).  With a prefix argument, reverse the
direction only inside the current region (see <a href="Mark.html">マークとリージョン</a>).  Reversing the
direction means changing the hunks and the file-start headers to produce a
patch that would change the &ldquo;new&rdquo; version into the &ldquo;old&rdquo; one.
</p>
</dd>
<dt id='index-diff_002dsplit_002dhunk'><span><kbd>C-c C-s</kbd><a href='#index-diff_002dsplit_002dhunk' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Split the hunk at point (<code>diff-split-hunk</code>) into two separate hunks.
This inserts a hunk header and modifies the header of the current hunk.
This command is useful for manually editing patches, and only works with the
<em>unified diff format</em> produced by the <samp>-u</samp> or <samp>--unified</samp>
options to the <code>diff</code> program.  If you need to split a hunk in the
<em>context diff format</em> produced by the <samp>-c</samp> or <samp>--context</samp>
options to <code>diff</code>, first convert the buffer to the unified diff
format with <kbd>C-c C-u</kbd>.
</p>
</dd>
<dt id='index-diff_002dunified_002d_003econtext'><span><kbd>C-c C-d</kbd><a href='#index-diff_002dunified_002d_003econtext' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Convert the entire buffer to the <em>context diff format</em>
(<code>diff-unified-&gt;context</code>).  With a prefix argument, convert only the
hunks within the region.
</p>
</dd>
<dt id='index-diff_002dcontext_002d_003eunified'><span><kbd>C-c C-u</kbd><a href='#index-diff_002dcontext_002d_003eunified' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Convert the entire buffer to unified diff format
(<code>diff-context-&gt;unified</code>).  With a prefix argument, convert unified
format to context format.  When the mark is active, convert only the hunks
within the region.
</p>
</dd>
<dt id='index-diff_002drefresh_002dhunk'><span><kbd>C-c C-l</kbd><a href='#index-diff_002drefresh_002dhunk' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Re-generate the current hunk (<code>diff-refresh-hunk</code>).
</p>
</dd>
<dt id='index-diff_002dignore_002dwhitespace_002dhunk'><span><kbd>C-c C-w</kbd><a href='#index-diff_002dignore_002dwhitespace_002dhunk' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>Re-generate the current hunk, disregarding changes in whitespace
(<code>diff-ignore-whitespace-hunk</code>).
</p>
</dd>
<dt id='index-diff_002dadd_002dchange_002dlog_002dentries_002dother_002dwindow'><span><kbd>C-x 4 A</kbd><a href='#index-diff_002dadd_002dchange_002dlog_002dentries_002dother_002dwindow' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-add_002dchange_002dlog_002dentry_002dother_002dwindow_002c-in-Diff-mode"></span>
<p>Generate a ChangeLog entry, like <kbd>C-x 4 a</kbd> does (see <a href="Change-Log.html">変更ログ</a>),
for each one of the hunks
(<code>diff-add-change-log-entries-other-window</code>).  This creates a skeleton
of the log of changes that you can later fill with the actual descriptions
of the changes.  <kbd>C-x 4 a</kbd> itself in Diff mode operates on behalf of the
current hunk&rsquo;s file, but gets the function name from the patch itself.  This
is useful for making log entries for functions that are deleted by the
patch.
</p></dd>
</dl>

<span id="index-trailing-whitespace_002c-in-patches"></span>
<span id="index-diff_002ddelete_002dtrailing_002dwhitespace"></span>
<p>Patches sometimes include trailing whitespace on modified lines, as an
unintentional and undesired change.  There are two ways to deal with this
problem.  Firstly, if you enable Whitespace mode in a Diff buffer
(see <a href="Useless-Whitespace.html">不要なスペース</a>), it automatically highlights trailing
whitespace in modified lines.  Secondly, you can use the command <kbd>M-x
diff-delete-trailing-whitespace</kbd>, which searches for trailing whitespace in
the lines modified by the patch, and removes that whitespace in both the
patch and the patched source file(s).  This command does not save the
modifications that it makes, so you can decide whether to save the changes
(the list of modified files is displayed in the echo area).  With a prefix
argument, it tries to modify the original (&ldquo;old&rdquo;) source files rather than
the patched (&ldquo;new&rdquo;) source files.
</p>
<span id="index-diff_002dfont_002dlock_002dsyntax"></span>
<p>If <code>diff-font-lock-syntax</code> is non-<code>nil</code>, fragments of source in
hunks are highlighted according to the appropriate major mode.
</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Copying-and-Naming.html">ファイルのコピー、命名、リネーム。</a>, Previous: <a href="Comparing-Files.html">ファイルの比較</a>, Up: <a href="Files.html">ファイルの処理</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-29_d8687fd6cd807db1c76084a5e2bb214f9b6c9a49, commit:dbe487dc98c12a8b683ddcf6b90e5c551ae0e2de to check Japanese translation.
</body>
</html>
