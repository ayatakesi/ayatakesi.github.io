<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 30.0.92.

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Basic Keyboard Macro (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Basic Keyboard Macro (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Basic Keyboard Macro (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="December 28, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Keyboard-Macros.html" rel="up" title="Keyboard Macros">
<link href="Keyboard-Macro-Ring.html" rel="next" title="Keyboard Macro Ring">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Basic-Keyboard-Macro">
<div class="nav-panel">
<p>
Next: <a href="Keyboard-Macro-Ring.html" accesskey="n" rel="next">キーボードマクロリング</a>, Up: <a href="Keyboard-Macros.html" accesskey="u" rel="up">キーボードマクロ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Ji-Ben-De-naShi-iFang-"><span>19.1 基本的な使い方<a class="copiable-link" href="#Ji-Ben-De-naShi-iFang-"> &para;</a></span></h3>

<dl class="table">
<dt><kbd class="kbd"><kbd class="key">F3</kbd></kbd></dt>
<dd><p>キーボードマクロの定義を開始します(<code class="code">kmacro-start-macro-or-insert-counter</code>)。
</p></dd>
<dt><kbd class="kbd"><kbd class="key">F4</kbd></kbd></dt>
<dd><p>キーボードマクロを定義しているときは定義を終了します。それ以外の場合は一番最近のキーボードマクロを実行します(<code class="code">kmacro-end-or-call-macro</code>)。
</p></dd>
<dt><kbd class="kbd">C-u <kbd class="key">F3</kbd></kbd></dt>
<dd><p>最後のキーボードマクロを再実行してから、キーをマクロ定義に追加します。
</p></dd>
<dt><kbd class="kbd">C-u C-u <kbd class="key">F3</kbd></kbd></dt>
<dd><p>最後のキーボードマクロを再実行せずに、キーをマクロ定義に追加します。
</p></dd>
<dt><kbd class="kbd">C-x C-k r</kbd></dt>
<dd><p>リージョンの中の各行の行頭にたいして、最後のキーボードマクロを実行します(<code class="code">apply-macro-to-region-lines</code>)。
</p></dd>
<dt><kbd class="kbd">C-x (</kbd></dt>
<dd><p>(旧スタイル)キーボードマクロの定義を開始します(<code class="code">kmacro-start-macro</code>)。プレフィクスキーを与えると最後のマクロにキーを追加します。
</p></dd>
<dt><kbd class="kbd">C-x )</kbd></dt>
<dd><p>(旧スタイル)マクロ定義を終了します(<code class="code">kmacro-end-macro</code>)。プレフィクス引数はそのマクロ自体を除外した繰り返し回数として機能します。
</p></dd>
<dt><kbd class="kbd">C-x e</kbd></dt>
<dd><p>もっとも最後に定義したキーボードマクロを実行します(<code class="code">kmacro-end-and-call-macro</code>)。プレフィクス引数は繰り返し回数として機能します。
</p></dd>
</dl>

<a class="index-entry-id" id="index-F3"></a>
<a class="index-entry-id" id="index-F4"></a>
<a class="index-entry-id" id="index-kmacro_002dstart_002dmacro_002dor_002dinsert_002dcounter"></a>
<a class="index-entry-id" id="index-kmacro_002dend_002dor_002dcall_002dmacro"></a>
<a class="index-entry-id" id="index-kmacro_002dend_002dand_002dcall_002dmacro"></a>
<p>キーボードマクロの定義を開始するには、<kbd class="key">F3</kbd>をタイプします。それからはキーを入力して実行を続けますが、それは同時にマクロ定義の一部になります。その間は、モードラインに&lsquo;<samp class="samp">Def</samp>&rsquo;が表示されて、マクロの定義中であることを示します。終了するときは<kbd class="key">F4</kbd>
(<code class="code">kmacro-end-or-call-macro</code>)をタイプして、定義を終了します。たとえば、
</p>
<div class="example">
<pre class="example-preformatted"><kbd class="key">F3</kbd> M-f foo <kbd class="key">F4</kbd>
</pre></div>

<p>これは1単語前方に移動してから、&lsquo;<samp class="samp">foo</samp>&rsquo;を挿入するマクロを定義します。<kbd class="key">F3</kbd>と<kbd class="key">F4</kbd>は、マクロの一部とはならないことに注意してください。
</p>
<p>マクロを定義した後は、<kbd class="key">F4</kbd>でそれを呼び出すことができます。上記の例では、それは<kbd class="kbd">M-f foo</kbd>
againをタイプしたのと同じ効果をもちます(<kbd class="key">F4</kbd>コマンドの2つの役割に注意してください。これはマクロを定義しているときはマクロの定義を終了し、そうでないときは最後のマクロを呼び出します)。<kbd class="key">F4</kbd>に数引数&lsquo;<samp class="samp">n</samp>&rsquo;を与えることもできます。これはマクロを&lsquo;<samp class="samp">n</samp>&rsquo;回呼び出すことを意味します。引数に0を与えると、エラーになるか、<kbd class="kbd">C-g</kbd>(MS-DOSでは<kbd class="kbd">C-<kbd class="key">Break</kbd></kbd>)をタイプするまで、マクロを永久に繰り返します。
</p>
<p>上記の例は、キーボードマクロを使った便利なトリックをデモンストレイトする例です。テキストの一定間隔の位置にたいして繰り返し操作を行いたいときは、マクロの一部に移動コマンドを含めます。この例ではマクロの繰り返しにより、連続する単語の後ろに文字列&lsquo;<samp class="samp">foo</samp>&rsquo;を挿入していきます。
</p>
<p>キーボードマクロの定義を終了した後でも、<kbd class="kbd">C-u
<kbd class="key">F3</kbd></kbd>をタイプすることにより、マクロの定義にキーストロークを追加できます。これは<kbd class="key">F3</kbd>に続けてマクロの定義を再タイプするのと同じです。結果として、そのマクロの以前の定義が再実行されることになります。変数<code class="code">kmacro-execute-before-append</code>を<code class="code">nil</code>に変更すると、既存のマクロにキーストロークが追加されるまでは実行されません(デフォルトは<code class="code">t</code>)。最後に実行したキーボードマクロを再実行することなく、定義の最後にキーストロークを追加するには、<kbd class="kbd">C-u
C-u <kbd class="key">F3</kbd></kbd>をタイプしてください。
</p>
<p>コマンドがミニバッファーから引数を読みとる場合、ミニバッファーにたいする入力は、コマンドと一緒にマクロの一部となります。したがってマクロを再生すると、そのコマンドの引数は入力されたのと同じになります。たとえば、
</p>
<div class="example">
<pre class="example-preformatted"><kbd class="key">F3</kbd> C-a C-k C-x b foo <kbd class="key">RET</kbd> C-y C-x b <kbd class="key">RET</kbd> <kbd class="key">F4</kbd>
</pre></div>

<p>これはカレント行をkillして、バッファー&lsquo;<samp class="samp">foo</samp>&rsquo;にそれをyankした後、元のバッファーに戻ります。
</p>
<p>ほとんどのキーボードコマンドは、キーボードマクロの定義で普通に機能しますが、いくつか例外があります。<kbd class="kbd">C-g</kbd>
(<code class="code">keyboard-quit</code>)をタイプすると、キーボードマクロの定義が終了します。<kbd class="kbd">C-M-c</kbd>
(<code class="code">exit-recursive-edit</code>)は信頼できません。これはマクロの中で再帰編集(recursive
edit)を開始したときは期待通りに再帰編集から抜け出しますが、キーボードマクロの呼び出し前に開始された再帰編集を抜け出すには、キーボードマクロからも抜け出す必要があります。同様に、マウスイベントもキーボードマクロで使用できますが。信頼はできません。マクロによりマウスイベントが再生されるときは、マクロを定義したときのマウス位置が使用されます。この効果は予測が困難です。
</p>
<a class="index-entry-id" id="index-apply_002dmacro_002dto_002dregion_002dlines"></a>
<a class="index-entry-id" id="index-C_002dx-C_002dk-r"></a>
<p>コマンド<kbd class="kbd">C-x C-k r</kbd>
(<code class="code">apply-macro-to-region-lines</code>)は、リージョン内の各行のにたいして、最後に定義されたキーボードマクロを繰り返します。これは1行ずつポイントをリージョン内の行頭に移動してからマクロを実行します。
</p>
<a class="index-entry-id" id="index-C_002dx-_0028"></a>
<a class="index-entry-id" id="index-C_002dx-_0029"></a>
<a class="index-entry-id" id="index-C_002dx-e"></a>
<a class="index-entry-id" id="index-kmacro_002dstart_002dmacro"></a>
<a class="index-entry-id" id="index-kmacro_002dend_002dmacro"></a>
<p>上記で説明した<kbd class="key">F3</kbd>と<kbd class="key">F4</kbd>に加えて、Emacsはキーボードマクロを定義したり実行するための、古いキーバインドもサポートします。<kbd class="key">F3</kbd>と同様にマクロ定義を開始するには、<kbd class="kbd">C-x
(</kbd>
(<code class="code">kmacro-start-macro</code>)とタイプします。プレフィクス引数を指定すると、最後のキーボードマクロの定義に追加します。マクロ定義を終了するには<kbd class="kbd">C-x
)</kbd> (<code class="code">kmacro-end-macro</code>)とタイプします。一番最近のマクロを実行するには、<kbd class="kbd">C-x e</kbd>
(<code class="code">kmacro-end-and-call-macro</code>)とタイプします。マクロ定義中に<kbd class="kbd">C-x
e</kbd>を入力すると、マクロ定義を終了してからすぐに実行されます。<kbd class="kbd">C-x
e</kbd>をタイプした後すぐに<kbd class="kbd">e</kbd>をタイプすることにより、そのマクロを１回以上繰り返すことができます。(マクロの実行に使用されるときの)<kbd class="key">F4</kbd>と同様、<kbd class="kbd">C-x
e</kbd>には繰り返し回数を引数指定できます。
</p>
<p><kbd class="kbd">C-x
)</kbd>に、繰り返し回数を引数として与えることができます。これはマクロを定義した後、すぐにマクロが繰り返されることを意味します。マクロの定義は、定義することによりマクロが実行されるので、最初の1回として数えられます。したがって<kbd class="kbd">C-u
4 C-x )</kbd>は、マクロを3回すぐに追加実行します。
</p>
<a class="index-entry-id" id="index-kmacro_002dredisplay"></a>
<a class="index-entry-id" id="index-C_002dx-C_002dk-d"></a>
<p>長時間キーボードマクロを実行中に、(どれほど実行されたかを示すために)再表示をトリガーできれば便利なときがあるかもしれません。このために<kbd class="kbd">C-x
C-k d</kbd>を使用できます。とても便利とは言えない例ですが、<kbd class="kbd">C-x ( M-f C-x C-k d C-x )</kbd>は<kbd class="kbd">C-u 42
C-x e</kbd>と実行した際に、繰り返しごとに再表示を行うマクロを作成します。
</p>
</div>


This page has generated for branch:work/emacs-30_69b16e5c63840479270d32f58daea923fe725b90, commit:b18b10da14253a5478effeba7bf4eab290411042 to check Japanese translation.
</body>
</html>
