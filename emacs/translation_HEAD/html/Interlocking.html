<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 29.3.

Copyright (C) 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Interlocking (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Interlocking (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Interlocking (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="April 29, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Saving.html" rel="up" title="Saving">
<link href="File-Shadowing.html" rel="next" title="File Shadowing">
<link href="Customize-Save.html" rel="prev" title="Customize Save">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="subsection" id="Interlocking">
<div class="header">
<p>
Next: <a href="File-Shadowing.html" accesskey="n" rel="next">ファイルのシャドーイング</a>, Previous: <a href="Customize-Save.html" accesskey="p" rel="prev">ファイル保存のカスタマイズ</a>, Up: <a href="Saving.html" accesskey="u" rel="up">ファイルの保存</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Tong-Shi-Bian-Ji-karanoBao-Hu-"></span><h4 class="subsection">19.3.4 同時編集からの保護</h4>

<span id="index-file-dates"></span>
<span id="index-simultaneous-editing"></span>
<p>Simultaneous editing occurs when two users visit the same file, both make
changes, and then both save them.  If nobody is informed that this is
happening, whichever user saves first would later find that their changes
were lost.
</p>
<p>On some systems, Emacs notices immediately when the second user starts to
change the file, and issues an immediate warning.  On all systems, Emacs
checks when you save the file, and warns if you are about to overwrite
another user&rsquo;s changes.  You can prevent loss of the other user&rsquo;s work by
taking the proper corrective action instead of saving the file.
</p>
<span id="index-ask_002duser_002dabout_002dlock"></span>
<span id="index-locking-files"></span>
<span id="index-_002e_0023_002c-lock-file-names"></span>
<span id="index-file-locking"></span>
<p>When you make the first modification in an Emacs buffer that is visiting a
file, Emacs records that the file is <em>locked</em> by you.  (It does this by
creating a specially-named symbolic link<a id="DOCF7" href="#FOOT7"><sup>7</sup></a> with special contents
in the same directory.  See <a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/File-Locks.html#File-Locks">(elisp)File Locks</a>, for more details.)
Emacs removes the lock when you save the changes.  The idea is that the file
is locked whenever an Emacs buffer visiting it has unsaved changes.
</p>
<span id="index-create_002dlockfiles"></span>
<p>You can prevent the creation of lock files by setting the variable
<code>create-lockfiles</code> to <code>nil</code>.  <strong>Caution:</strong> by doing so you
will lose the benefits that this feature provides.  You can also control
where lock files are written by using the <code>lock-file-name-transforms</code>
variable.
</p>
<span id="index-collision"></span>
<p>If you begin to modify the buffer while the visited file is locked by
someone else, this constitutes a <em>collision</em>.  When Emacs detects a
collision, it asks you what to do, by calling the Lisp function
<code>ask-user-about-lock</code>.  You can redefine this function for the sake of
customization.  The standard definition of this function asks you a question
and accepts three possible answers:
</p>
<dl compact="compact">
<dt><span><kbd>s</kbd></span></dt>
<dd><p>Steal the lock.  Whoever was already changing the file loses the lock, and
you gain the lock.
</p></dd>
<dt><span><kbd>p</kbd></span></dt>
<dd><p>Proceed.  Go ahead and edit the file despite its being locked by someone
else.
</p></dd>
<dt><span><kbd>q</kbd></span></dt>
<dd><p>Quit.  This causes an error (<code>file-locked</code>), and the buffer contents
remain unchanged&mdash;the modification you were trying to make does not
actually take place.
</p></dd>
</dl>

<p>If Emacs or the operating system crashes, this may leave behind lock files
which are stale, so you may occasionally get warnings about spurious
collisions.  When you determine that the collision is spurious, just use
<kbd>p</kbd> to tell Emacs to go ahead anyway.
</p>
<p>Note that locking works on the basis of a file name; if a file has multiple
names, Emacs does not prevent two users from editing it simultaneously under
different names.
</p>
<p>A lock file cannot be written in some circumstances, e.g., if Emacs lacks
the system permissions or cannot create lock files for some other reason.
In these cases, Emacs can still detect the collision when you try to save a
file, by checking the file&rsquo;s last-modification date.  If the file has
changed since the last time Emacs visited or saved it, that implies that
changes have been made in some other way, and will be lost if Emacs proceeds
with saving.  Emacs then displays a warning message and asks for
confirmation before saving; answer <kbd>yes</kbd> to save, and <kbd>no</kbd> or
<kbd>C-g</kbd> cancel the save.
</p>
<p>If you are notified that simultaneous editing has already taken place, one
way to compare the buffer to its file is the <kbd>M-x diff-buffer-with-file</kbd>
command.  See <a href="Comparing-Files.html">ファイルの比較</a>.
</p>
<span id="index-remote_002dfile_002dname_002dinhibit_002dlocks"></span>
<p>You can prevent the creation of remote lock files by setting the variable
<code>remote-file-name-inhibit-locks</code> to <code>t</code>.
</p>
<span id="index-lock_002dfile_002dmode"></span>
<p>The minor mode <code>lock-file-mode</code>, called interactively, toggles the
local value of <code>create-lockfiles</code> in the current buffer.
</p>
</div>
<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT7" href="#DOCF7">(7)</a></h5>
<p>If your file system does
not support symbolic links, a regular file is used.</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="File-Shadowing.html">ファイルのシャドーイング</a>, Previous: <a href="Customize-Save.html">ファイル保存のカスタマイズ</a>, Up: <a href="Saving.html">ファイルの保存</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-29_d8687fd6cd807db1c76084a5e2bb214f9b6c9a49, commit:dbe487dc98c12a8b683ddcf6b90e5c551ae0e2de to check Japanese translation.
</body>
</html>
