<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 30.0.50.

Copyright (C) 1985-2023 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Code Alignment (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Code Alignment (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Code Alignment (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 21, 2023">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Indentation.html" rel="up" title="Indentation">
<link href="Indent-Convenience.html" rel="prev" title="Indent Convenience">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="section" id="Code-Alignment">
<div class="header">
<p>
Previous: <a href="Indent-Convenience.html" accesskey="p" rel="prev">インデントの便利な機能</a>, Up: <a href="Indentation.html" accesskey="u" rel="up">インデント</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Code-Alignment-1"></span><h3 class="section">25.5 Code Alignment</h3>
<span id="index-code-alignment"></span>
<span id="index-aligning-code"></span>

<p><em>Alignment</em> is the process of adjusting whitespace in a sequence of
lines in the region such that in all lines certain parts begin at the same
column.  This is usually something you do to enhance readability of a piece
of text or code.  The classic example is aligning a series of assignments in
C-like programming languages:
</p>
<div class="example">
<pre class="example">int a = 1;
short foo = 2;
double blah = 4;
</pre></div>

<p>is commonly aligned to:
</p>
<div class="example">
<pre class="example">int    a    = 1;
short  foo  = 2;
double blah = 4;
</pre></div>

<span id="index-alignment-rules"></span>
<span id="index-align"></span>
<p>You can use the command <kbd>M-x align</kbd> to align lines in the current
region.  This command knows about common alignment patterns across many
markup and programming languages.  It encodes these patterns as a set of
<em>alignment rules</em>, that say how to align different kinds of text in
different contexts.
</p>
<span id="index-align_002drules_002dlist"></span>
<span id="index-align_002dmode_002drules_002dlist"></span>
<p>The user option <code>align-rules-list</code> says which alignment rules <kbd>M-x
align</kbd> should consult.  The value of this option is a list with elements
describing alignment rules.  Each element is a cons cell <code>(<var>title</var>
. <var>attributes</var>)</code>, where <var>title</var> is the name of the alignment rule as
a symbol, and <var>attributes</var> is a list of rule attributes that define when
the rule should apply and how it partitions and aligns lines.  Each rule
attribute is a cons cell <code>(<var>attribute</var> . <var>value</var>)</code>, where
<var>attribute</var> is the name of attribute and <var>value</var> is its value.  The
only required attribute is <code>regexp</code>, whose value is a regular
expression with sub-expressions matching the parts of each line where
<kbd>M-x align</kbd> should expand or contract whitespace (see <a href="Regexp-Backslash.html">正規表現でのバックスラッシュ</a>).  See the documentation string of <code>align-rules-list</code>
(<kbd>C-h v align-rules-list <span class="key">RET</span></kbd>) for a full description of possible
alignment rule attributes.  By default, this option is set to a long list of
alignment rules for many languages that Emacs supports.  The default rules
use the <code>modes</code> rule attribute to specify major modes in which <kbd>M-x
align</kbd> should apply them.  Major modes can also override
<code>align-rules-list</code> by setting the buffer-local variable
<code>align-mode-rules-list</code> to a non-<code>nil</code> list of alignment rules.
When <code>align-mode-rules-list</code> is non-<code>nil</code>, <kbd>M-x align</kbd>
consults it instead of <code>align-rules-list</code>.
</p>
<span id="index-align-exclusion-rules"></span>
<span id="index-align_002dexclude_002drules_002dlist"></span>
<span id="index-align_002dmode_002dexclude_002drules_002dlist"></span>
<p>Besides alignment rules, <kbd>M-x align</kbd> uses another kind of rules called
<em>exclusion rules</em>.  The exclusion rules say which parts in the region
<kbd>M-x align</kbd> should not align and instead leave them intact.  The user
option <code>align-exclude-rules-list</code> specifies these exclusion rules.
Similarly to <code>align-rules-list</code>, the value of
<code>align-exclude-rules-list</code> is also a list of cons cells that describe
the exclusion rules.  By default, <code>align-exclude-rules-list</code> includes
rules that exclude alignment in quoted strings and comments in Lisp, C and
other languages.  Beyond the default exclusion rules in
<code>align-exclude-rules-list</code>, major modes can define bespoke exclusion
rules by setting <code>align-mode-exclude-rules-list</code> to a non-<code>nil</code>
list of rules, this overrides <code>align-exclude-rules-list</code> just like
<code>align-mode-rules-list</code> overrides <code>align-rules-list</code>.
</p>
<span id="index-alignment-sections"></span>
<span id="index-align_002dregion_002dseparate"></span>
<p><kbd>M-x align</kbd> splits the region into a series of <em>sections</em>, usually
sequences of non-blank lines, and aligns each section according to all
matching alignment rule by expanding or contracting stretches of
whitespace.  <kbd>M-x align</kbd> consistently aligns all lines inside a single
section, but it may align different sections in the region differently.  The
user option <code>align-region-separate</code> specifies how <kbd>M-x align</kbd>
separates the region to sections.  This option can be one of the symbols
<code>entire</code>, <code>group</code>, or a regular expression.  If
<code>align-region-separate</code> is <code>entire</code>, Emacs aligns the entire
region as a single section.  If this option is <code>group</code>, Emacs aligns
each group of consecutive non-blank lines in the region as a separate
section.  If <code>align-region-separate</code> is a regular expression, <kbd>M-x
align</kbd> scans the region for matches to that regular expression and treats
them as section separators.  By default <code>align-region-separate</code> is set
to a regular expression that matches blank lines and lines that contains
only whitespace and a single curly brace (&lsquo;<samp>{</samp>&rsquo; or &lsquo;<samp>}</samp>&rsquo;).  For
special cases where regular expressions are not accurate enough, you can
also set <code>align-region-separate</code> to a function that says how to
separate the region to alignment sections.  See the documentation string of
<code>align-region-separate</code> for more details.  Specific alignment rules can
override the value of <code>align-region-separate</code> and define their own
section separator by specifying the <code>separate</code> rule attribute.
</p>
<p>If you call <kbd>M-x align</kbd> with a prefix argument (<kbd>C-u</kbd>), it enables
more alignment rules that are often useful but may sometimes be too
intrusive.  For example, in a Lisp buffer with the following form:
</p>
<div class="example lisp">
<pre class="lisp">(set-face-attribute 'mode-line-inactive nil
                    :box nil
                    :background nil
                    :underline &quot;black&quot;)
</pre></div>

<p>Typing (<kbd>C-u M-x align</kbd>) yields:
</p>
<div class="example lisp">
<pre class="lisp">(set-face-attribute 'mode-line-inactive nil
                    :box                nil
                    :background         nil
                    :underline          &quot;black&quot;)
</pre></div>

<p>In most cases, you should try <kbd>M-x align</kbd> without a prefix argument
first, and if that doesn&rsquo;t produce the right result you can undo with
<kbd>C-/</kbd> and try again with <kbd>C-u M-x align</kbd>.
</p>
<span id="index-align_002dhighlight_002drule"></span>
<span id="index-align_002dunhighlight_002drule"></span>
<p>You can use the command <kbd>M-x align-highlight-rule</kbd> to visualize the
effect of a specific alignment or exclusion rule in the current region.
This command prompts you for the title of a rule and highlights the parts on
the region that this rule affects.  For alignment rules, this command
highlights the whitespace that <kbd>M-x align</kbd> would expand or contract, and
for exclusion this command highlights the parts that <kbd>M-x align</kbd> would
exclude from alignment.  To remove the highlighting that this command
creates, type <kbd>M-x align-unhighlight-rule</kbd>.
</p>
<span id="index-align_002dcurrent"></span>
<span id="index-align_002dentire"></span>
<p>The command <kbd>M-x align-current</kbd> is similar to <kbd>M-x align</kbd>, except
that it operates only on the alignment section that contains point
regardless of the current region.  This command determines the boundaries of
the current section according to the section separators that
<code>align-region-separate</code> define.  <kbd>M-x align-entire</kbd> is another
variant of <kbd>M-x align</kbd>, that disregards <code>align-region-separate</code> and
aligns the entire region as a single alignment section with consistent
alignment.  If you set <code>align-region-separate</code> to <code>entire</code>,
<kbd>M-x align</kbd> behaves like <kbd>M-x align-entire</kbd> by default.  To
illustrate the effect of aligning the entire region as a single alignment
section, consider the following code:
</p>
<div class="example">
<pre class="example">one = 1;
foobarbaz = 2;

spam = 3;
emacs = 4;
</pre></div>

<p>when the region covers all of these lines, typing <kbd>M-x align</kbd> yields:
</p>
<div class="example">
<pre class="example">one       = 1;
foobarbaz = 2;

spam  = 3;
emacs = 4;
</pre></div>

<p>On the other hand, <kbd>M-x align-entire</kbd> aligns all of the lines as a
single section, so the &lsquo;<samp>=</samp>&rsquo; appears at the same column in all lines:
</p>
<div class="example">
<pre class="example">one       = 1;
foobarbaz = 2;

spam      = 3;
emacs     = 4;
</pre></div>

<span id="index-align_002dregexp"></span>
<p>The command <kbd>M-x align-regexp</kbd> lets you align the current region with an
alignment rule that you define ad-hoc, instead of using the predefined rules
in <code>align-rules-list</code>.  <kbd>M-x align-regexp</kbd> prompts you for a
regular expression and uses that expression as the <code>regexp</code> attribute
for an ad-hoc alignment rule that this command uses to align the current
region.  By default, this command adjusts the whitespace that matches the
first sub-expression of the regular expression you specify.  If you call
<kbd>M-x align-regexp</kbd> with a prefix argument, it also prompts you for the
sub-expression to use and lets you specify the amount of whitespace to use
as padding, as well as whether to apply the rule repeatedly to all matches
of the regular expression in each line.  See <a href="Regexp-Backslash.html">正規表現でのバックスラッシュ</a>, for more
information about regular expressions and their sub-expressions.
</p>
<span id="index-align_002dindent_002dbefore_002daligning"></span>
<p>If the user option <code>align-indent-before-aligning</code> is non-<code>nil</code>,
Emacs indents the region before aligning it with <kbd>M-x align</kbd>.
See <a href="Indentation.html">インデント</a>.  By default <code>align-indent-before-aligning</code> is set
to <code>nil</code>.
</p>
<span id="index-align_002dto_002dtab_002dstop"></span>
<p>The user option <code>align-to-tab-stop</code> says whether aligned parts should
start at a tab stop (see <a href="Tab-Stops.html">タブストップ</a>).  If this option is <code>nil</code>,
<kbd>M-x align</kbd> uses just enough whitespace for alignment, disregarding tab
stops.  If this is a non-<code>nil</code> symbol, <kbd>M-x align</kbd> checks the value
of that symbol, and if this value is non-<code>nil</code>, <kbd>M-x align</kbd> aligns
to tab stops.  By default, this option is set to <code>indent-tabs-mode</code>, so
alignment respects tab stops in buffers that use tabs for indentation.
See <a href="Just-Spaces.html">タブ vs. スペース</a>.
</p>
<span id="index-align_002ddefault_002dspacing"></span>
<p>The user option <code>align-default-spacing</code> specifies the default amount of
whitespace that <kbd>M-x align</kbd> and its related commands use for padding
between the different parts of each line when aligning it.  When
<code>align-to-tab-stop</code> is <code>nil</code>, the value of
<code>align-default-spacing</code> is the number of spaces to use for padding;
when <code>align-to-tab-stop</code> is non-<code>nil</code>, the value of
<code>align-default-spacing</code> is instead the number of tab stops to use.
Each alignment rule can override the default that
<code>align-default-spacing</code> specifies with the <code>spacing</code> attribute
rule.
</p>
</div>
<hr>
<div class="header">
<p>
Previous: <a href="Indent-Convenience.html">インデントの便利な機能</a>, Up: <a href="Indentation.html">インデント</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-29_62920dcb0de440aac8e7d69ee33f27d5400d405e, commit:e632ba89762878be7fa604afabeee76932a0708a to check Japanese translation.
</body>
</html>
