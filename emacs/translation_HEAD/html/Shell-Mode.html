<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 30.0.91.

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Shell Mode (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Shell Mode (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Shell Mode (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 12, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Shell.html" rel="up" title="Shell">
<link href="Shell-Prompts.html" rel="next" title="Shell Prompts">
<link href="Interactive-Shell.html" rel="prev" title="Interactive Shell">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Shell-Mode">
<div class="nav-panel">
<p>
Next: <a href="Shell-Prompts.html" accesskey="n" rel="next">Shellプロンプト</a>, Previous: <a href="Interactive-Shell.html" accesskey="p" rel="prev">対話的なサブシェル</a>, Up: <a href="Shell.html" accesskey="u" rel="up">Emacsからのシェルコマンドの実行</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section subsection-level-set-section" id="Shellmodo"><span>40.3 Shellモード<a class="copiable-link" href="#Shellmodo"> &para;</a></span></h3>
<a class="index-entry-id" id="index-Shell-mode"></a>
<a class="index-entry-id" id="index-mode_002c-Shell"></a>

<p>ShellバッファーのためのメジャーモードはShellモードです。このモードの特別なコマンドは<kbd class="kbd">C-c</kbd>プレフィクスにバインドされており、最初に<kbd class="kbd">C-c</kbd>をタイプしなければならない点を除けば、通常のシェルでの編集やジョブ制御文字と共通点があります。以下はShellモードのコマンドのリストです:
</p>
<dl class="table">
<dt><a class="index-entry-id" id="index-comint_002dsend_002dinput"></a>
<a id="index-RET-_0028Shell-mode_0029"></a><span><kbd class="kbd"><kbd class="key">RET</kbd></kbd><a class="copiable-link" href="#index-RET-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>サブシェルの入力にカレント行を送ります(<code class="code">comint-send-input</code>)。行頭のシェルプロンプトは省略されます(<a class="ref" href="Shell-Prompts.html">Shellプロンプト</a>を参照してください)。ポイントがバッファーの最後にある場合、これは通常の対話的なシェルにおいてコマンド行をサブミットするのに似ています。しかし、シェルバッファーの他の場所でも、<kbd class="key">RET</kbd>を呼び出してカレント行を入力としてサブミットできます。
</p>
</dd>
<dt><a class="index-entry-id" id="index-completion_002dat_002dpoint_002c-in-Shell-Mode"></a>
<a class="index-entry-id" id="index-shell-completion"></a>
<a id="index-TAB-_0028Shell-mode_0029"></a><span><kbd class="kbd"><kbd class="key">TAB</kbd></kbd><a class="copiable-link" href="#index-TAB-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>シェルバッファーのポイントの前のコマンド名、またはファイル名を補完します(<code class="code">completion-at-point</code>)。これは通常のEmacs補完ルールを使用します(<a class="ref" href="Completion.html">補完</a>を参照してください)。ファイル名、環境変数名、シェルコマンドヒストリー、ヒストリー参照が補完候補になります(<a class="ref" href="History-References.html">Shellヒストリーの参照</a>を参照してください)。補完を制御するオプションについては、<a class="ref" href="Shell-Options.html">Shellモードのオプション</a>を参照してください。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002ddynamic_002dlist_002dfilename_2026"></a>
<a id="index-M_002d_003f-_0028Shell-mode_0029"></a><span><kbd class="kbd">M-?</kbd><a class="copiable-link" href="#index-M_002d_003f-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>ポイントの前のファイル名にたいして、可能性のある補完リストを一時的に表示します(<code class="code">comint-dynamic-list-filename-completions</code>)。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002ddelchar_002dor_002dmaybe_002deof"></a>
<a id="index-C_002dd-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-d</kbd><a class="copiable-link" href="#index-C_002dd-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>delete文字、または<abbr class="acronym">EOF</abbr>文字を送ります(<code class="code">comint-delchar-or-maybe-eof</code>)。シェルバッファーの最後でこれをタイプすると、サブシェルに<abbr class="acronym">EOF</abbr>が送られます。バッファーの他の場所でタイプすると、通常どおり文字を削除します。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dbol_002dor_002dprocess_002dmark"></a>
<a id="index-C_002dc-C_002da-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-a</kbd><a class="copiable-link" href="#index-C_002dc-C_002da-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>行の先頭に移動しますが、プロンプトがある場合はプロンプトの後に移動します(<code class="code">comint-bol-or-process-mark</code>)。このコマンドを連続して繰り返すと、2回目はプロセスマーク(process
mark)に戻ります。これはサブシェルにまだ送信されていない入力の開始位置のことです(通常これは同じ場所 &mdash; その行のプロンプトの最後 &mdash;
ですが、<kbd class="kbd">C-c <kbd class="key">SPC</kbd></kbd>の後では、プロセスマークは前の行にあるかもしれません)。
</p>
</dd>
<dt><kbd class="kbd">C-c <kbd class="key">SPC</kbd></kbd></dt>
<dd><p>複数行の入力を累積して、それらを合わせて送ります(<code class="code">comint-accumulate</code>)。このコマンドはポイントの前に改行を挿入しますが、その前のテキストをサブシェルの入力として
&mdash; 少なくともその時点では &mdash;
送りません。改行の前後の行は両方、(それらを分割する改行も含めて)<kbd class="key">RET</kbd>をタイプしたとき一緒に送られます。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dkill_002dinput"></a>
<a id="index-C_002dc-C_002du-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-u</kbd><a class="copiable-link" href="#index-C_002dc-C_002du-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>まだ入力として送られていない、バッファーの最後のすべてのテキストをkillします(<code class="code">comint-kill-input</code>)。ポイントがバッファーの最後にない場合、これはポイントの前のテキストだけをkillします。
</p>
</dd>
<dt><a id="index-C_002dc-C_002dw-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-w</kbd><a class="copiable-link" href="#index-C_002dc-C_002dw-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>ポイントの前の単語をkillします(<code class="code">backward-kill-word</code>)。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dinterrupt_002dsubjob"></a>
<a id="index-C_002dc-C_002dc-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-c</kbd><a class="copiable-link" href="#index-C_002dc-C_002dc-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>シェルまたは(もしあれば)カレントのサブジョブに割り込み(interrupt)ます(<code class="code">comint-interrupt-subjob</code>)。このコマンドはシェルバッファーの最後の、まだ送られていない任意のシェル入力もkillします。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dstop_002dsubjob"></a>
<a id="index-C_002dc-C_002dz-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-z</kbd><a class="copiable-link" href="#index-C_002dc-C_002dz-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>シェルまたは(もしあれば)カレントのサブジョブを停止(stop)します。(<code class="code">comint-stop-subjob</code>)。このコマンドはシェルバッファーの最後の、まだ送られていない任意のシェル入力もkillします。
</p>
</dd>
<dt><a class="index-entry-id" id="index-C_002dc-C_002d_005c-_0028Shell-mode_0029"></a>
<a id="index-comint_002dquit_002dsubjob"></a><span><kbd class="kbd">C-c C-\</kbd><a class="copiable-link" href="#index-comint_002dquit_002dsubjob"> &para;</a></span></dt>
<dd><p>シェルまたは(もしあれば)カレントのサブジョブに、シグナルQUITを送ります(<code class="code">comint-quit-subjob</code>)。このコマンドはシェルバッファーの最後の、まだ送られていない任意のシェル入力もkillします。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002ddelete_002doutput"></a>
<a id="index-C_002dc-C_002do-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-o</kbd><a class="copiable-link" href="#index-C_002dc-C_002do-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>前のシェルコマンドからの出力の一群を削除します(<code class="code">comint-delete-output</code>)。これはシェルコマンドが大量の出力を吐くときに便利です。プレフィクス引数を指定すると、このコマンドは後でどこかにyank
(<a class="ref" href="Yanking.html">yank</a>を参照)できるように削除したテキストを<code class="code">kill-ring</code> (<a class="ref" href="Kill-Ring.html">killリング</a>を参照)に保存します。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dwrite_002doutput"></a>
<a id="index-C_002dc-C_002ds-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-s</kbd><a class="copiable-link" href="#index-C_002dc-C_002ds-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>前のシェルコマンドからの出力の一群をファイルに書き込みます(<code class="code">comint-write-output</code>)。プレフィクス引数を指定した場合は、ファイルに追加で書き込みます。出力の最後のプロンプトは書き込まれません。
</p>
</dd>
<dt><a class="index-entry-id" id="index-C_002dM_002dl-_0028Shell-mode_0029"></a>
<a class="index-entry-id" id="index-comint_002dshow_002doutput"></a>
<a id="index-C_002dc-C_002dr-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-r</kbd><a class="copiable-link" href="#index-C_002dc-C_002dr-_0028Shell-mode_0029"> &para;</a></span></dt>
<dt><kbd class="kbd">C-M-l</kbd></dt>
<dd><p>前の一群の出力の最初がウィンドウの最上部になるようにスクロールし、カーソルもそこに移動します(<code class="code">comint-show-output</code>)。
</p>
</dd>
<dt><a class="index-entry-id" id="index-comint_002dshow_002dmaximum_002doutput"></a>
<a id="index-C_002dc-C_002de-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-e</kbd><a class="copiable-link" href="#index-C_002dc-C_002de-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>バッファーの最後の行がウィンドウの最下部になるようにスクロールします(<code class="code">comint-show-maximum-output</code>)。
</p>
</dd>
<dt><a class="index-entry-id" id="index-shell_002dforward_002dcommand"></a>
<a class="index-entry-id" id="index-shell_002dcommand_002dregexp"></a>
<a id="index-C_002dc-C_002df-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-f</kbd><a class="copiable-link" href="#index-C_002dc-C_002df-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>シェルコマンド1つ分、前方に移動しますが、カレント行を超えては移動しません(<code class="code">shell-forward-command</code>)。変数<code class="code">shell-command-regexp</code>は、コマンドの最後を認識する方法を指定します。
</p>
</dd>
<dt><a class="index-entry-id" id="index-shell_002dbackward_002dcommand"></a>
<a id="index-C_002dc-C_002db-_0028Shell-mode_0029"></a><span><kbd class="kbd">C-c C-b</kbd><a class="copiable-link" href="#index-C_002dc-C_002db-_0028Shell-mode_0029"> &para;</a></span></dt>
<dd><p>シェルコマンド1つ分、後方に移動しますが、カレント行を超えて移動はしません(<code class="code">shell-backward-command</code>)。
</p>
</dd>
<dt><kbd class="kbd">M-x dirs</kbd></dt>
<dd><p>シェルに作業ディレクトリーを尋ね、Shellバッファーのデフォルトディレクトリーを更新します。<a class="ref" href="Directory-Tracking.html">ディレクトリーの追跡</a>を参照してください。
</p>
</dd>
<dt><a id="index-comint_002dsend_002dinvisible"></a><span><kbd class="kbd">M-x comint-send-invisible <kbd class="key">RET</kbd> <var class="var">text</var> <kbd class="key">RET</kbd></kbd><a class="copiable-link" href="#index-comint_002dsend_002dinvisible"> &para;</a></span></dt>
<dd><p>エコーなしで<var class="var">text</var>を読み取った後、それをシェルの入力として送ります。これはシェルコマンドでパスワードを尋ねるプログラムを実行するとき便利です。
</p>
<p>デフォルトではEmacsはパスワードをエコーしないことに注意してください。もし本当にエコーさせたいときは、以下のLisp式を評価します(<a class="ref" href="Lisp-Eval.html">Emacs Lisp式の評価</a>を参照してください):
</p>
<div class="example">
<pre class="example-preformatted">(remove-hook 'comint-output-filter-functions
             'comint-watch-for-password-prompt)
</pre></div>

</dd>
<dt><a id="index-comint_002dcontinue_002dsubjob"></a><span><kbd class="kbd">M-x comint-continue-subjob</kbd><a class="copiable-link" href="#index-comint_002dcontinue_002dsubjob"> &para;</a></span></dt>
<dd><p>シェルプロセスを継続します。これは間違ってシェルプロセスをサスペンドしてしまったときなどに便利です。<a class="footnote" id="DOCF22" href="#FOOT22"><sup>22</sup></a>
</p>
</dd>
<dt><a id="index-comint_002dstrip_002dctrl_002dm"></a><span><kbd class="kbd">M-x comint-strip-ctrl-m</kbd><a class="copiable-link" href="#index-comint_002dstrip_002dctrl_002dm"> &para;</a></span></dt>
<dd><p>シェル出力のカレントグループから、すべてのcontrol-M文字を破棄します。このコマンドを使うもっとも便利な方法は、サブシェルからの出力を受け取ったときに自動的に実行されるようにする方法です。これを行なうには、以下のLisp式を評価します:
</p>
<div class="example">
<pre class="example-preformatted">(add-hook 'comint-output-filter-functions
          'comint-strip-ctrl-m)
</pre></div>

</dd>
<dt><a id="index-comint_002dtruncate_002dbuffer"></a><span><kbd class="kbd">M-x comint-truncate-buffer</kbd><a class="copiable-link" href="#index-comint_002dtruncate_002dbuffer"> &para;</a></span></dt>
<dd><p>このコマンドはシェルバッファーを、変数<code class="code">comint-buffer-maximum-size</code>により指定される、特定の最大行数に切り詰めます。以下は、サブシェルから出力を受けとるとき、毎回自動的にこれを行なう方法です:
</p>
<div class="example">
<pre class="example-preformatted">(add-hook 'comint-output-filter-functions
          'comint-truncate-buffer)
</pre></div>
</dd>
</dl>

<p>デフォルトでは、Shellモードは(たとえばテキストカラーの変更等に)一般的な<abbr class="acronym">ANSI</abbr>エスケープコードを使います。initファイルに以下を記述すれば、Emacsはオプションで<abbr class="acronym">OSC</abbr>
(Operating System Codes： オペレーティングシステムコード)のような拡張エスケープコードもいくつかサポートします:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(add-hook 'comint-output-filter-functions 'comint-osc-process-output)
</pre></div>

<p>これを有効にすれば、たとえば<code class="code">ls --hyperlink</code>からの出力からShellモードバッファーにクリック可能ボタンが作成されるでしょう。
</p>
<a class="index-entry-id" id="index-Comint-mode"></a>
<a class="index-entry-id" id="index-mode_002c-Comint"></a>
<p>Shellモードは、サブプロセスと対話的に通信を行なう一般的な用途向けのComintモードから派生したモードです。上記のコマンド名からも判るとおり、Shellモードのほとんどの機能は、実際にはComintモードが由来です。Shellモードの特別な機能には、ディレクトリー追跡機能、およびいくつかのユーザーコマンドが含まれます。
</p>
<p>Comintモードの変種を使う他のEmacs機能には、GUD (<a class="ref" href="Debuggers.html">Emacs下でのデバッガーの実行</a>を参照してください)や、<kbd class="kbd">M-x
run-lisp</kbd> (<a class="ref" href="External-Lisp.html">外部Lispの実行</a>を参照してください)が含まれます。
</p>
<a class="index-entry-id" id="index-comint_002drun"></a>
<p>サブプロセスとして選択した任意のプログラムを実行するために、Shellモードに特化しない未修正のComintモードを使用するには、<kbd class="kbd">M-x
comint-run</kbd>を使用することができます。プログラムに引数を渡すには<kbd class="kbd">C-u M-x comint-run</kbd>を使用します。
</p>
</div>
<div class="footnotes-segment">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5 class="footnote-body-heading"><a id="FOOT22" href="#DOCF22">(22)</a></h5>
<p>シェルプロセスをサスペンドするべきではありません。これはシェルのサブジョブのサスペンドとはまったく違います。サブジョブのサスペンドは通常行なわれますが、サブジョブを継続するためにはシェルを使用しなければなりません。このコマンドはそれを行ないません。</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Shell-Prompts.html">Shellプロンプト</a>, Previous: <a href="Interactive-Shell.html">対話的なサブシェル</a>, Up: <a href="Shell.html">Emacsからのシェルコマンドの実行</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-30_11e7ae3964e192b0e4bcc437a04278ee727e720b, commit:da3033e6d058b7bc6f95683d93549b62b7f1fcf5 to check Japanese translation.
</body>
</html>
