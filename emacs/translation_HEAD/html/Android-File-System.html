<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 30.0.91.

Copyright (C) 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Android File System (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Android File System (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Android File System (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 29, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Android.html" rel="up" title="Android">
<link href="Android-Document-Providers.html" rel="next" title="Android Document Providers">
<link href="Android-Startup.html" rel="prev" title="Android Startup">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="section" id="Android-File-System">
<div class="header">
<p>
Next: <a href="Android-Document-Providers.html" accesskey="n" rel="next">Androidでの他のプログラムからのファイルアクセス</a>, Previous: <a href="Android-Startup.html" accesskey="p" rel="prev">AndroidでのEmacsの起動</a>, Up: <a href="Android.html" accesskey="u" rel="up">EmacstとAndroid</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="AndroiddeEmacsgaakusesudekiruhuairu"></span><h3 class="section">H.3 AndroidでEmacsがアクセスできるファイル</h3>
<span id="index-_002fassets-directory_002c-android"></span>

<p>EmacsはAndroidシステム上で<samp>/assets</samp>という名前の特別なディレクトリーを公開します。このディレクトリーにはGNUやUnixなら通常は<samp>/usr/share/emacs</samp>にインストールされるディレクトリー<samp>etc</samp>、<samp>lisp</samp>、<samp>info</samp>が含まれています。Androidシステムでは<code>ls</code>のLispエミュレーション(<a href="ls-in-Lisp.html">MS-Windowsでの<code>ls</code>のエミュレーション</a>を参照)がデフォルトで有効になっています。システムに付属する<code>ls</code>のバイナリーはメーカーによって異なり、Emacsが求めるすべての機能は通常はサポートしていないからです。一部のAndroidシステムとともに配布される<code>ls</code>のコピーの中には、<code>-l</code>フラグさえ欠落していることが知られています。
</p>
<span id="index-limitations-of-the-_002fassets-directory"></span>

<p>Androidはパッケージの展開時にアプリケーションのパッケージ内容を展開せずに、&ldquo;asset
manager&rdquo;という特別なインターフェイスを用いることをEmacsのようなプログラムに要求するためにこのディレクトリーが存在します。このような実装による結果として以下のような特性が生じます:
</p>
<ul>
<li> (<code>ls</code>のような)サブプロセスを<samp>/assets</samp>ディレクトリーから実行できない。<code>current-directory</code>に<samp>/assets</samp>、<samp>/content/storage</samp>、あるいはそれらのサブディレクトリーをセットしてサブプロセスの実行を試みても、かわりにホームディレクトリーから実行されることになるだろう。

</li><li> <samp>/assets</samp>、<samp>/content</samp>のディレクトリーの中には<samp>.</samp>、<samp>..</samp>というディレクトリーがない。

</li><li> <samp>/assets</samp>ディレクトリー内のファイルは常に読み取り専用であり、オープンされる度に複数回メモリーに読み込まれるかもしれない。
</li></ul>

<p><samp>/assets</samp>ディレクトリー以外にも、Androidプログラムは通常は以下の4つのディレクトリーにアクセスできます:
</p>
<ul>
<li> <em>アプリケーションデータ(app
data)</em>ディレクトリー。これはEmacsのホームディレクトリーの役目ももち、常に読み取りと書き込みでアクセスできる。

</li><li> <em>アプリケーションライブラリー(app
library)</em>ディレクトリー。これは自動的に<code>exec-path</code>に追加されて、起動時に<code>exec-directory</code>が作成される。このディレクトリーにはEmacs自体とともに実行可能なユーティリティーが含められる。

</li><li> <em>外部ストレージ(external storage)</em>ディレクトリー。ユーザーがシステムセッティングを通じてEmacsに&ldquo;Files and
Media&rdquo;の権限を付与すればEmacsがアクセスできる。

</li><li> Android 5.0以降で<em>ドキュメントプロバイダー(document
providers)</em>により提供されるディレクトリー。このディレクトリーはUnixの通常のファイルシステムの範囲外にあり、外部プログラムが提供するプログラムが含まれている(<a href="Android-Document-Providers.html">Androidでの他のプログラムからのファイルアクセス</a>を参照)。
</li></ul>

<p>Androidの通常のインストールでは(普通だと読み取り専用である)ルートディレクトリーに<samp>content</samp>や<samp>assets</samp>という名前のファイルはないはずですが、使用しているAndroidのインストールがカスタマイズされていてそれらの名前で実際のファイルにアクセスしたい場合があるかもしれません。このようなファイルは前述した特別なディレクトリーと競合しますが、<samp>/../content</samp>や<samp>/../assets</samp>のようにルートディレクトリーの&ldquo;親&rdquo;ディレクトリーから相対的な名前を記述することによってアクセスできます。
</p>
<p>外部ストレージディレクトリーは<samp>/sdcard</samp>で見つけることができます。アプリケーションデータディレクトリーは通常は<samp>/data/data/org.gnu.emacs/files</samp>にシンボリックリンクされているとはいえ、その他のディレクトリーを固定的な位置で見つけることはできません(が以下を参照のこと)。
</p>
<span id="index-app-library-directory_002c-android"></span>
<span id="index-where-is-emacsclient-under-android"></span>
<p>Androidの以前のバージョンでは、アプリケーションライブラリーディレクトリーはアプリケーションデータディレクトリーの親ディレクトリーにある<samp>lib</samp>という名前のディレクトリーでした。このディレクトリーは現在ではランダムに生成された名前で<samp>/data/app</samp>配下に置かれることが多いようです。
</p>
<p>Emacsと同じユーザーIDを共有するアプリケーション内で実行される(<code>exec-directory</code>変数にアクセスできない)スクリプトの利便性のために、起動時にアプリケーションデータディレクトリーの親ディレクトリー配下の従来の場所に、アプリケーションデータライブラリーをシンボリックリンクさせるために少なからぬ労力が費やされています。
</p>
<p>Emacsを再インストールした結果、アプリケーションライブラリーディレクトリーの位置が変更された場合には、システムが次回にEmacsを起動する際に新たな場所を指すようこのシンボリックリンクを更新します。
</p>
<span id="index-temp_007eunlinked_002eNNNN-files_002c-Android"></span>
<p>非常に古いバージョン(2.6.29)のLinuxカーネルを実行するAndroidデバイスでは、assetのファイルから読み込むために一時ファイル用ディレクトリーにEmacsが<samp>temp~unlinked</samp>で始まる名前のファイルを作成する必要があります。そのような名前のファイルは上書きされたり削除されるかもしれないので作成しないでください。
</p>
<span id="index-file-system-limitations_002c-Android-11"></span>
<p>Android
11以降のAndroidシステムでは、アプリケーションによる<code>open</code>や<code>readdir</code>のようなファイル関連のシステムコールを用いた<samp>/sdcard</samp>ディレクトリーへのアクセスが制限されています。
</p>
<p>この&ldquo;対象範囲別ストレージ(Scoped
Storage)&rdquo;と呼ばれる制限によって、おそらくシステムはより安全になります。これは残念なことにEmacsが必要な権限を保有していても、それらのディレクトリーのファイルにアクセスできないことを意味しています。ただありがたいことにOpen
Handset
Alliance版のAndroidでは、プログラムごとにこの制限を無効にすることができます。以下がシステムセッティングパネルでこれに相当するオプションです:
</p>
<div class="example">
<pre class="example">System -&gt; Apps -&gt; Special App Access -&gt; All files access -&gt; Emacs
</pre></div>

<p>このセッティングを適切に無効あるいは有効にしてEmacsに&ldquo;Files and
Media&rdquo;の権限を付与すれば、通常通りEmacsは<samp>/sdcard</samp>配下のファイルにアクセスできるでしょう。一部のプロプライエタリーなバージョンのAndroidでは、これらのセッティングは用意されていません。
</p>
</div>


This page has generated for branch:work/emacs-30_11e7ae3964e192b0e4bcc437a04278ee727e720b, commit:494533bfb4798af863106e4db40082fba9b30323 to check Japanese translation.
</body>
</html>
