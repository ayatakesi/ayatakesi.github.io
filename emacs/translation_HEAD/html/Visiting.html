<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 30.0.50.

Copyright (C) 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Visiting (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Visiting (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Visiting (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="May 22, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Saving.html" rel="next" title="Saving">
<link href="File-Names.html" rel="prev" title="File Names">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="section" id="Visiting">
<div class="header">
<p>
Next: <a href="Saving.html" accesskey="n" rel="next">ファイルの保存</a>, Previous: <a href="File-Names.html" accesskey="p" rel="prev">ファイルの名前</a>, Up: <a href="Files.html" accesskey="u" rel="up">ファイルの処理</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="huairunovisit_0028Fang-Wen-_0029"></span><h3 class="section">20.2 ファイルのvisit(訪問)</h3>
<span id="index-visiting-files"></span>
<span id="index-open-file"></span>

<dl compact="compact">
<dt><span><kbd>C-x C-f</kbd></span></dt>
<dd><p>ファイルをvisitします(<code>find-file</code>)。
</p></dd>
<dt><span><kbd>C-x C-r</kbd></span></dt>
<dd><p>変更を許さない閲覧用として、ファイルをvisitします(<code>find-file-read-only</code>)。
</p></dd>
<dt><span><kbd>C-x C-v</kbd></span></dt>
<dd><p>最後にvisitしたファイルとは異なるファイルを、かわりにvisitします(<code>find-alternate-file</code>)。
</p></dd>
<dt><span><kbd>C-x 4 f</kbd></span></dt>
<dd><p>別のウィンドウでファイルをvisitします(<code>find-file-other-window</code>)。選択されたウィンドウに表示されているものは変更しません。
</p></dd>
<dt><span><kbd>C-x 5 f</kbd></span></dt>
<dd><p>新しいフレームでファイルをvisitします(<code>find-file-other-frame</code>)。選択されたフレームに表示されているものは変更しません。
</p></dd>
<dt><span><kbd>M-x find-file-literally</kbd></span></dt>
<dd><p>内容を変換せずにファイルをvisitします。
</p></dd>
</dl>

<span id="index-files_002c-visiting-and-saving"></span>
<span id="index-saving-files"></span>
<p>ファイルを<em>Visiting(訪問)</em>するとは、そのファイル内容をEmacsのバッファーに読み込むことを意味するので、それを編集することができます。Emacsはvisitするファイルごとに、新しいバッファーを作成します。
</p>
<span id="index-C_002dx-C_002df"></span>
<span id="index-find_002dfile"></span>
<p>ファイルをvisitするには、<kbd>C-x C-f</kbd>
(<code>find-file</code>)とタイプして、visitしたいファイルの名前をミニバッファーで入力します。ミニバッファーでは、<kbd>C-g</kbd>をタイプして、コマンドを中止することができます。ミニバッファーでのファイル名の入力についての詳細は、<a href="File-Names.html">ファイルの名前</a>を参照してください。
</p>
<p>ファイルは存在するが、システムが読み込みを許さない場合、エコーエリアにエラーメッセージが表示されます(GNUおよびUnixシステムでは、&lsquo;<samp>su</samp>&rsquo;や&lsquo;<samp>sudo</samp>&rsquo;のような方法を使用して、そのようなファイルをvisitできるかもしれない。<a href="Remote-Files.html">リモートファイル</a>を参照されたい。) それ以外の場合、スクリーンに新しいテキストが表示され、モードラインバッファー名が表示されることで、<kbd>C-x
C-f</kbd>が成功したことを知ることができます。通常Emacsは、ファイル名からディレクトリー名を省いて、バッファー名を作ります。たとえば<samp>/usr/rms/emacs.tex</samp>という名前のファイルは、バッファー名&lsquo;<samp>emacs.tex</samp>&rsquo;となります。その名前のバッファーがすでにある場合、Emacsは一意な名前を作ります。通常の方法はディレクトリー名にもとづく接尾辞の追加です(たとえば&lsquo;<samp>&lt;rms&gt;</samp>&rsquo;、&lsquo;<samp>&lt;tmp&gt;</samp>&rsquo;など)が、違う方法を選択することもできます。<a href="Uniquify.html">バッファー名を一意にする</a>を参照してください。
</p>
<span id="index-creating-files"></span>
<p>新しいファイルを作成するには、同じコマンド<kbd>C-x C-f</kbd>を使ってvisitするだけです。Emacsはエコーエリアに&lsquo;<samp>(New
file)</samp>&rsquo;と表示しますが、他の点では既存の空のファイルをvisitしたのと同じく振る舞います。
</p>
<span id="index-modified-_0028buffer_0029"></span>
<p>ファイルをvisitした後で編集コマンドにより行われた変更は、Emacsのバッファーに反映されます。バッファーを<em>保存(save)</em>するまでは、visitしているファイルに影響はありません。バッファーが保存されていない変更を含むとき、そのバッファーが<em>変更されている(modified)</em>といいます。これはバッファーを保存しなければ、その変更が失われることを意味します。モードラインの左余白の近くに2つのアスタリスクが表示され、バッファーが変更されていることを示します。
</p>
<p>すでにEmacsがvisitしているファイルをvisitした場合、<kbd>C-x
C-f</kbd>は他のコピーを作らず既存のバッファーに切り替えます。切り替えを行う前に、最後にvisitまたは保存した後にファイルが変更されているか確認します。もしファイルが変更されているとき、Emacsはそれの再読み込みを提案します。
</p>
<span id="index-large_002dfile_002dwarning_002dthreshold"></span>
<span id="index-file_002c-warning-when-size-is-large"></span>
<span id="index-size-of-file_002c-warning-when-visiting"></span>
<span id="index-maximum-buffer-size-exceeded_002c-error-message"></span>
<p><code>large-file-warning-threshold</code>
(デフォルトは10000000で、これは約10MB)より大きなファイルのvisitを試みると、Emacsは最初に確認を求めます。<kbd>y</kbd>を応えることによりファイルのvisitを続けて、<kbd>l</kbd>ではファイルをリテラル(以下参照)にvisitします。
巨大なファイルではリテラルにファイルをvisitすることにより、種々の潜在的に高価な機能がオフに切り替えられるので、操作や編集が高速化されます。しかしEmacsは、Emacsバッファーの最大サイズ(Emacsが割り当てられるメモリー量の制限と、Emacsが扱える整数により制限されます)を超えるバッファーは、visitできないことに注意してください。この場合、Emacsは最大バッファーサイズを超えた旨を知らせるエラーメッセージを表示します。
</p>
<span id="index-treesit_002dmax_002dbuffer_002dsize"></span>
<p>tree-sitterパースライブラリーを使うメジャーモード(<a href="Major-Modes.html">メジャーモード</a>を参照)をもつようなファイルのvisitを試みる場合に、そのファイルのサイズ(バイト)が変数<code>treesit-max-buffer-size</code>の値より大きければEmacsが警告を表示します。デフォルト値は64ビットのEmacsでは40MB、32ビットのEmacsでは15MBです。これはそのような巨大なバッファーでtree-sitterにもとづくメジャーモードをアクティブにせず、Emacsがメモリー不足に陥る危険を回避するためです。tree-sitterの典型的なパーサーは、解析するテキストのおよそ10倍のメモリーを必要とするからです。
</p>
<span id="index-wildcard-characters-in-file-names"></span>
<span id="index-find_002dfile_002dwildcards"></span>
<p>ファイル名にシェル形式のワイルドカード文字が含まれている場合、Emacsはそれにマッチするすべてのファイルをvisitします。(大文字小文字を区別しないファイルシステムでは、Emacsは大文字小文字に関係なくワイルドカードをマッチします)。ワイルドカードには&lsquo;<samp>?</samp>&rsquo;、&lsquo;<samp>*</samp>&rsquo;および&lsquo;<samp>[&hellip;]</samp>&rsquo;シーケンスが含まれます。ミニバッファーでワイルドカード&lsquo;<samp>?</samp>&rsquo;をファイル名に入力するには、<kbd>C-q
?</kbd>とタイプする必要があります。ワイルドカード文字を実際に名前に含むファイルをvisitする方法についての情報は、<a href="Quoted-File-Names.html">ファイル名のクォート</a>を参照してください。<code>find-file-wildcards</code>をカスタマイズして、ワイルドカード機能を無効にすることができます。
</p>
<span id="index-query_002dabout_002dchanged_002dfile"></span>
<p>あるバッファーでvisit済みだが外部から変更されたファイルをvisitしようとすると、Emacsは通常はディスク上のファイルを再読み込みするかどうか尋ねます。ただし<code>query-about-changed-file</code>を<code>nil</code>にセットすると、Emacsは問い合わせを行わずかわりに変更前のバッファー内容を表示して、ファイルからバッファーをリバートする方法をエコーエリアのメッセージで示します。
</p>
<span id="index-C_002dx-C_002dv"></span>
<span id="index-find_002dalternate_002dfile"></span>
<p>無意識に間違ったファイル名をタイプして違うファイルをvisitした場合、<kbd>C-x C-v</kbd>
(<code>find-alternate-file</code>)で実際に望むファイルをvisitできます。<kbd>C-x C-v</kbd>は<kbd>C-x
C-f</kbd>と似ていますが、これは現在のバッファーをkillします(変更されている場合は最初に保存するか確認を求めます)。<kbd>C-x
C-v</kbd>がvisitするファイルの名前を読み取るときは、ミニバッファーにデフォルトのファイル名全体を挿入して、ポイントをディレクトリー名の後に置きます。これは名前を少し間違えた場合などに便利です。
</p>
<span id="index-find_002dfile_002drun_002ddired"></span>
<p>実際はディレクトリーであるファイルをvisitしたとき、EmacsはEmacsのディレクトリーブラウザーのDiredを呼び出します。<a href="Dired.html">Dired (ディレクトリーエディター)</a>を参照してください。この振る舞いは、変数<code>find-file-run-dired</code>を<code>nil</code>にセットすることにより無効にできます。この場合、ディレクトリーをvisitするとエラーになります。
</p>
<p>実際には他のファイルの集まりであるような<em>アーカイブファイル(file
archives)</em>の場合、アーカイブされたメンバーを操作できる、Diredに似た環境を呼び出す特別なモードでvisitします。これらの機能については、<a href="File-Archives.html">ファイルアーカイブ</a>を参照してください。
</p>
<p>オペレーティングシステムが変更を許していない、または読み取り専用にしているファイルをvisitした場合、Emacsもバッファーを読み取り専用にするので、保存すると問題を起こすような変更を防ぐことができます。<kbd>C-x
C-q</kbd> (<code>read-only-mode</code>)で、バッファーを書き込み可能にできます。<a href="Misc-Buffer.html">その他のバッファー操作</a>を参照してください。
</p>
<span id="index-C_002dx-C_002dr"></span>
<span id="index-find_002dfile_002dread_002donly"></span>
<p>予期せぬ入力による変更を防ぐために、読み込み専用でファイルをvisitしたい場合は、<kbd>C-x C-f</kbd>のかわりにコマンド<kbd>C-x
C-r</kbd> (<code>find-file-read-only</code>)でvisitします。
</p>
<span id="index-C_002dx-4-f"></span>
<span id="index-find_002dfile_002dother_002dwindow"></span>
<p><kbd>C-x 4 f</kbd> (<code>find-file-other-window</code>)は<kbd>C-x
C-f</kbd>と同様ですが、指定したファイルを含むバッファーは、別のウィンドウで選択されます。<kbd>C-x 4
f</kbd>の前に選択されていたウィンドウは、すでに表示していたのと同じバッファーの表示を続けます。1つのウィンドウしか表示されていないときにこのコマンドを使うと、これはウィンドウを2つに分割し、1つのウィンドウには前に表示されていたのと同じバッファー、別の1つには新しい要求されたファイルを表示します。<a href="Windows.html">複数ウィンドウ</a>を参照してください。
</p>
<span id="index-C_002dx-5-f"></span>
<span id="index-find_002dfile_002dother_002dframe"></span>
<p><kbd>C-x 5 f</kbd>
(<code>find-file-other-frame</code>)も同様ですが、新しいフレームををオープンするか、指定したファイルをすでに表示している既存のフレームを選択します。<a href="Frames.html">フレームとグラフィカルなディスプレイ</a>を参照してください。
</p>
<span id="index-file-selection-dialog"></span>
<p>グラフィカルなディスプレイでは、ファイルをvisitする追加の方法が２つあります。1つ目は、Emacsが適したGUIツールキットによりビルドされているとき、マウスによるコマンドの呼び出し(メニューバーやツールバーのクリックによる)は、ミニバッファーでファイル名の入力を求める代わりに、そのツールキット標準のファイル選択(file
selection)ダイアログを表示します。GNU/LinuxおよびUnixプラットフォームでは、GTK+、LessTif、Motifツールキットとともに構築されていると、Emacsはこれを行います。MS-WindowsとMacでは、GUIバージョンのデフォルトにより行われます。これをカスタマイズする情報については、<a href="Dialog-Boxes.html">ダイアログボックスの使用</a>を参照してください。
</p>
<p>2つ目は、Emacsはのドラッグアンドドロップ(drag and
drop)サポートで、通常のEmacsウィンドウにファイルをドロップすることにより、そのウィンドウでファイルをvisitします。例外としてDiredバッファーを表示しているウィンドウにファイルをドロップすると、表示されているディレクトリーにファイルを移動またはコピーします。詳細については<a href="Drag-and-Drop.html">ドラッグアンドドロップ</a>と<a href="Misc-Dired-Features.html">その他のDiredの機能</a>を参照してください。
</p>
<p>テキスト端末、およびGUIツールキットなしでビルドされているグラフィカルなディスプレイでは、アイテム&lsquo;<samp>Visit New
File</samp>&rsquo;と&lsquo;<samp>Open File</samp>&rsquo;をもつメニューバーの&lsquo;<samp>File</samp>&rsquo;メニューからファイルをvisitできます。
</p>
<p>文字エンコーディングと使用されている改行規則を検知するために、Emacsは自動的に内容をスキャンします。そして、それらをEmacsの内部エンコーディングとバッファーの改行規則に変換します。バッファーを保存するとき、Emacsは逆の変換を行い、元のエンコーディングと改行規則でファイルをディスクに書き込みます。<a href="Coding-Systems.html">コーディングシステム</a>を参照してください。
</p>
<span id="index-find_002dfile_002dliterally"></span>
<p>ファイルにたいして特別なエンコーディングや変換を行わずに、非<acronym>ASCII</acronym>文字のシーケンスとして編集したいときは、<kbd>M-x
find-file-literally</kbd>コマンドを使います。これは<kbd>C-x C-f</kbd>と同様ですが、フォーマット変換(<a data-manual="elisp" href="https://www.gnu.org/software/emacs/manual/html_node/elisp/Format-Conversion.html#Format-Conversion">Format Conversion</a> in <cite>the Emacs Lisp Reference
Manual</cite>を参照してください)、文字コード変換(<a href="Coding-Systems.html">コーディングシステム</a>を参照してください)、自動解凍(<a href="Compressed-Files.html">圧縮ファイルへのアクセス</a>を参照してください)を行わず、<code>require-final-newline</code>による最後の改行も追加しません(<a href="Customize-Save.html">ファイル保存のカスタマイズ</a>を参照してください)。同じファイルをすでに通常(非リテラル)の方法でvisitしている場合、このコマンドはそれをリテラル(そのままの文字の列)としてvisitするかを尋ねます。
</p>
<span id="index-find_002dsibling_002dfile"></span>
<span id="index-find_002dsibling_002drules"></span>
<p>ファイルが別のファイルに(緩やかに)結びるけられているときがあります。このようなファイルのことを<em>兄弟ファイル(sibling
files)</em>と呼ぶことにしましょう。たとえばCファイルの編集する際に&lsquo;<samp>&quot;foo.c&quot;</samp>&rsquo;というファイルがある場合には&lsquo;<samp>&quot;foo.h&quot;</samp>&rsquo;というファイルもある場合が間々あり、そのようなファイルが兄弟ファイルに該当します。あるいは&lsquo;<samp>&quot;src/emacs/emacs-27/lisp/allout.el&quot;</samp>&rsquo;と&lsquo;<samp>&quot;src/emacs/emacs-28/lisp/allout.el&quot;</samp>&rsquo;という異なるバージョンのファイルについても兄弟とみなすことができるかもしれません。これらの兄弟ファイル間をジャンプするためのコマンド<code>find-sibling-file</code>をEmacsは提供しますが、ユーザーがどのファイルを兄弟とみなしたいかを推奨するのは不可能なので、ユーザーオプション<code>find-sibling-rules</code>を変更することによってルールを設定できるようにしています。このルールはマッチと展開形のペアーからなる要素です。
</p>
<p>たとえば&lsquo;<samp>&quot;.c&quot;</samp>&rsquo;を&lsquo;<samp>&quot;.h&quot;</samp>&rsquo;にマッピングするには、以下のように記述します:
</p>
<div class="example lisp">
<pre class="lisp">(setq find-sibling-rules
      '((&quot;\\([^/]+\\)\\.c\\'&quot; &quot;\\1.h&quot;)))
</pre></div>

<p>(<code>ff-find-related-file</code>は特にCファイル向けに同等の機能を提供している。<a href="Other-C-Commands.html">Cモードのその他のコマンド</a>を参照のこと)
</p>
<p>あるいは&lsquo;<samp>&quot;src/emacs/DIR/file-name&quot;</samp>&rsquo;配下にある別の<var>dir</var>にあるすべてのファイルを兄弟としたければ、以下のように記述できます:
</p>
<div class="example lisp">
<pre class="lisp">(setq find-sibling-rules
      '((&quot;src/emacs/[^/]+/\\(.*\\)\\'&quot; &quot;src/emacs/.*/\\1&quot;)))
</pre></div>

<p>As you can see, this is a list of <code>(<var>MATCH</var>&nbsp;<var>EXPANSION</var>...)</code><!-- /@w --> elements.  The <var>match</var> is a regular expression
that matches the visited file name, and each <var>expansion</var> may refer to
match groups by using &lsquo;<samp>\\1</samp>&rsquo; and so on.  The resulting expansion string
is then applied to the file system to see if any files match this expansion
(interpreted as a regexp).
</p>
<span id="index-find_002dfile_002dhook"></span>
<span id="index-find_002dfile_002dnot_002dfound_002dfunctions"></span>
<p>2つの特別なフック変数により、ファイルをvisitする操作を変更して拡張することができます。存在しないファイルをvisitすることにより、<code>find-file-not-found-functions</code>の関数が実行されます。この変数は関数のリストを保有し、それらはどれか1つが非<code>nil</code>を返すまで、(引数を指定せずに)1つずつ呼び出されます。これはノーマルフックではないため、その事実を示すために名前の最後が&lsquo;<samp>-hook</samp>&rsquo;ではなく、&lsquo;<samp>-functions</samp>&rsquo;で終わっています。
</p>
<p>ファイルが存在するしないにかかわらず、ファイルをvisitするのに成功すると、引数なしで関数<code>find-file-hook</code>を呼び出します。この変数はノーマルフックです。ファイルが存在しない場合、最初に<code>find-file-not-found-functions</code>を実行します。<a href="Hooks.html">フック</a>を参照してください。
</p>
<p>ファイルを編集するために自動的にメジャーモードを指定し(<a href="Choosing-Modes.html">ファイルのモードを選択する</a>を参照してください)、そのファイルのために特別なローカル変数を定義する方法がいくつかあります(<a href="File-Variables.html">ファイル内のローカル変数</a>を参照してください)。
</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Saving.html">ファイルの保存</a>, Previous: <a href="File-Names.html">ファイルの名前</a>, Up: <a href="Files.html">ファイルの処理</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/master_4078d0fd3ee9e55c3da219aa6e7788ac6130697b, commit:85c257bb492ec2543ae28c9c3c48e08764a133d3 to check Japanese translation.
</body>
</html>
