<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 30.0.92.

Copyright © 1985-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "The GNU Manifesto," "Distribution" and "GNU GENERAL
PUBLIC LICENSE," with the Front-Cover Texts being "A GNU Manual," and
with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Package Installation (GNU Emacs Manual
(Japanese Translation))</title>

<meta name="description" content="Package Installation (GNU Emacs Manual
(Japanese Translation))">
<meta name="keywords" content="Package Installation (GNU Emacs Manual
(Japanese Translation))">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="December 26, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Packages.html" rel="up" title="Packages">
<link href="Package-Files.html" rel="next" title="Package Files">
<link href="Package-Statuses.html" rel="prev" title="Package Statuses">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Package-Installation">
<div class="nav-panel">
<p>
Next: <a href="Package-Files.html" accesskey="n" rel="next">パッケージのファイルとディレクトリー</a>, Previous: <a href="Package-Statuses.html" accesskey="p" rel="prev">パッケージのステータス</a>, Up: <a href="Packages.html" accesskey="u" rel="up">Emacs Lispパッケージ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="patukezinoinsutoru"><span>50.3 パッケージのインストール<a class="copiable-link" href="#patukezinoinsutoru"> &para;</a></span></h3>

<a class="index-entry-id" id="index-package_002dinstall"></a>
<a class="index-entry-id" id="index-package_002dupgrade"></a>
<a class="index-entry-id" id="index-package_002dupgrade_002dall"></a>
<p>パッケージを一番便利にインストールするのはパッケージメニューを使う方法(<a class="ref" href="Package-Menu.html">Package Menuバッファー</a>を参照)ですが、コマンド<kbd class="kbd">M-x
package-install</kbd>を使用することもできます。これはステータスが&lsquo;<samp class="samp">available</samp>&rsquo;のパッケージ名の入力を求めて、それをダウンロードしてからインストールします。同様にあるパッケージのアップグレード行いたければ<kbd class="kbd">M-x
package-upgrade</kbd>コマンド、すべてのパッケージをアップグレードしたければ<kbd class="kbd">M-x
package-upgrade-all</kbd>コマンドを使うことができます。
</p>
<a class="index-entry-id" id="index-package_002dinstall_002dupgrade_002dbuilt_002din"></a>
<p>デフォルトではアーカイブから新しいバージョンが利用可能なビルトインパッケージを<code class="code">package-install</code>は考慮しません(パッケージがEmacsディストーションに含まれているパッケージはビルトイン)。特にビルトインパッケージはパッケージ入力を求める際の補完候補には表示されません。ただしプレフィックス引数とともに<code class="code">package-install</code>を呼び出すと、アップグレード可能なビルトインパッケージも考慮するようになります。変数<code class="code">package-install-upgrade-built-in</code>をカスタマイズすることによって、この挙動をデフォルトにすることができます。この変数の値が非<code class="code">nil</code>であれば、たとえプレフィックス引数なしで<code class="code">package-install</code>を呼び出した際にもビルトインパッケージが考慮されるようになります。<code class="code">package-install-upgrade-built-in</code>はpackage-menuコマンド(<a class="ref" href="Package-Menu.html">Package Menuバッファー</a>を参照)にも影響を与えることに注意してください。
</p>
<p>これとは対照的に、<code class="code">package-upgrade</code>と<code class="code">package-upgrade-all</code>がビルトインパッケージを考慮することは決してありません。あるビルトインパッケージのアップグレードにこれらのコマンドを使いたければ<kbd class="kbd">C-u
M-x package-install
<kbd class="key">RET</kbd></kbd>を通じてアップグレードするか、あるいは<code class="code">package-install-upgrade-built-in</code>を非<code class="code">nil</code>値にカスタマイズしてからパッケージメニューか<code class="code">package-install</code>からそれらのパッケージを一度アップグレードする必要があります。
</p>
<p><code class="code">package-upgrade-all</code>やパッケージメニューの<kbd class="kbd">U</kbd>といったコマンドを使うと一度に多くのパッケージがアップデートされるので、<code class="code">package-install-upgrade-built-in</code>を非<code class="code">nil</code>値にカスタマイズする場合には注意してください。あなたの意図に反して、これらのコマンドがビルトインパッケージをアーカイブ由来の新バージョンに上書きして置き換えてしまうかもしれません。少数のビルトインパッケージだけをアップデートしたい場合には、これらのバルクコマンド(bulk
command: 一度に大量の処理を行うコマンド)を使わないでください。
</p>
<a class="index-entry-id" id="index-package-requirements"></a>
<p>他のパッケージが提供する機能に依存するために、それらのパッケージがインストール済みであることを<em class="dfn">必要(require)</em>とするパッケージもあるでしょう。Emacsがそのようなパッケージをインストールするときは、必要なパッケージがインストールされていなければ、それらのパッケージのダウンロードとインストールも自動に行ないます(必要なパッケージが何らかの理由で利用できない場合、Emacsはエラーをシグナルしてインストールを中止します)。パッケージの必要条件リスト(requirements
list)は、そのパッケージのヘルプバッファーに表示されます。
</p>
<a class="index-entry-id" id="index-package_002darchives"></a>
<p>デフォルトでは、パッケージはEmacs開発者により保守される単一のパッケージアーカイブからダウンロードされます。これは変数<code class="code">package-archives</code>により制御されます。この変数の値は、Emacsが認識するパッケージアーカイブのリストです。リストの各要素は<code class="code">(<var class="var">id</var>
.
<var class="var">location</var>)</code>という形式でなければなりません。ここで、<var class="var">id</var>はパッケージアーカイブの名前、<var class="var">location</var>はパッケージアーカイブディレクトリーの<abbr class="acronym">URL</abbr>か名前です。サードパーティーのアーカイブを使用したい場合はこのリストを変更できます
&mdash; が、自己責任で行い、信用できるサードパーティーだけを使用してください!
</p>
<a class="anchor" id="Package-Signing"></a><a class="index-entry-id" id="index-package-security"></a>
<a class="index-entry-id" id="index-package-signing"></a>
<p>パッケージアーカイブのメンテナーは、パッケージに<em class="dfn">サイン(signing)</em>を付して、信頼度を増すことができます。これらはプライベートとパブリックのペアーからなる暗号化キーにより生成されます。プライベートキーは各パッケージにたいする<em class="dfn">署名ファイル(signature
file)</em>を作成するのに使用されます。パブリックキーにより、署名ファイルを使用してそのパッケージ作成者と、それが改ざんされていないかを確認できます。署名の検証は、EasyPGインターフェイス(<a data-manual="epa" href="https://www.gnu.org/software/emacs/manual/html_node/epa/index.html#Top">EasyPG</a> in <cite class="cite">Emacs EasyPG Assistant
Manual</cite>を参照)を通じて<a class="uref" href="https://www.gnupg.org/">the GnuPG
package</a>を使用します(<a data-manual="epa" href="https://www.gnu.org/software/emacs/manual/html_node/epa/index.html#Top">EasyPG</a> in <cite class="cite">Emacs EasyPG Assistant
Manual</cite>を参照)。有効な署名であっても、それが悪意がないパッケージであることを厳正に保証する訳ではなく、用心するべきです。パッケージアーカイブは、パブリックキーの入手方法について、説明を提供するべきです。<a class="url" href="http://pgp.mit.edu/">http://pgp.mit.edu/</a>のようなサーバーからキーをダウンロードするのも1つの方法です。Emacsにキーをインポートするには、<kbd class="kbd">M-x
package-import-keyring</kbd>を使用します。Emacsは変数<code class="code">package-user-dir</code>で指定されるディレクトリー(デフォルトは<code class="code">package-gnupghome-dir</code>のサブディレクトリー<samp class="file">gnupg</samp>)にパッケージキーを格納します。これにより、Emacsが署名を検証する際に、オプション<samp class="file">gnupg</samp>でGnuPGを呼び出すようになります。<code class="code">package-gnupghome-dir</code>が<code class="code">nil</code>,の場合は、GnuPGのオプション&lsquo;<samp class="samp">--homedir</samp>&rsquo;は省略します。GNUパッケージアーカイブにたいするパブリックキーはEmacsと共に配布され、<samp class="file">etc/package-keyring.gpg</samp>にあります。Emacsはこれを自動的に使用します。
</p>
<a class="index-entry-id" id="index-package_002dcheck_002dsignature"></a>
<a class="index-entry-id" id="index-package_002dunsigned_002darchives"></a>
<p>ユーザーオプション<code class="code">package-check-signature</code>が非<code class="code">nil</code>の場合、Emacsはパッケージのインストール時に署名の検証を試みます。このオプションが値<code class="code">allow-unsigned</code>をもち、使用可能なOpenPGP設定が見つかったらサインされたパッケージはチェックされますが、未サインのパッケージもまだインストールができます。パッケージにサインしないアーカイブを使用する場合には、それらを<code class="code">package-unsigned-archives</code>に追加できます(値が<code class="code">allow-unsigned</code>で使用可能なOpenPGPが見つからなければこのオプションはあたかも値が<code class="code">nil</code>であるかのように扱われる)。値が<code class="code">t</code>なら少なくとも1つの署名が有効でなければならず、<code class="code">all</code>ならすべての署名が有効でなければなりません。
</p>
<p>暗号化キーとサインについての詳細は、<a data-manual="gnupg" href="https://www.gnupg.org/documentation/manuals/gnupg/index.html#Top">GnuPG</a> in <cite class="cite">The GNU Privacy Guard
Manual</cite>を参照してください。EmacsのGNU Privacy Guardにたいするインターフェースについては、<a data-manual="epa" href="https://www.gnu.org/software/emacs/manual/html_node/epa/index.html#Top">EasyPG</a> in <cite class="cite">Emacs EasyPG Assistant Manual</cite>を参照してください。
</p>
<a class="index-entry-id" id="index-package_002dpinned_002dpackages"></a>
<p>複数のパッケージアーカイブが有効で、同じパッケージにたいして異なるバージョンを提供する場合は、オプション<code class="code">package-pinned-packages</code>が便利かもしれません。指定したパッケージが指定されたアーカイブだけからダウンロードされるように、このリストにパッケージとアーカイブのペアーを追加できます。
</p>
<a class="index-entry-id" id="index-package_002darchive_002dpriorities"></a>
<a class="index-entry-id" id="index-package_002dmenu_002dhide_002dlow_002dpriority"></a>
<p>複数の有効なパッケージアーカイブがあるときに便利な他のオプションとして、<code class="code">package-archive-priorities</code>があります。これは各アーカイブにたいして、優先度(高い数字は高い優先度のアーカイブを指定します)を指定します。このオプションにより指定されない限り、アーカイブの優先度はデフォルトの0です。優先度高のアーカイブのパッケージが利用可能な場合、優先度低のアーカイブのパッケージはメニューに表示されません(これは<code class="code">package-menu-hide-low-priority</code>の値により制御されます)。
</p>
<p>一度パッケージをダウンロードしてバイトコンパイル、インストールするとそのパッケージはカレントEmacsセッションで利用可能になります。パッケージを利用可能にするにはパッケージのディレクトリーを<code class="code">load-path</code>に追加してパッケージのautoloadをロードします。パッケージのautoloadの効果はパッケージごとにさまざまです。ほとんどのパッケージはいくつかの新たなコマンドを利用可能にするだけですが、Emacsセッションにたいして広範な影響を及ぼすものもあります。この種の情報についてはパッケージのヘルプバッファーを参照してください。
</p>
<p>インストールされたパッケージはその後のすべてのEmacsセッションで自動的にロードされます。これはEmacs開始時のinitファイル処理前、早期initファイル(<a class="ref" href="Early-Init-File.html">早期初期化ファイル</a>を参照)の処理後に行なわれます。例外として&lsquo;<samp class="samp">-q</samp>&rsquo;か&lsquo;<samp class="samp">--no-init-file</samp>&rsquo;オプション(<a class="ref" href="Initial-Options.html">初期化オプション</a>を参照してください)で呼び出されたときは、Emacs開始時にパッケージを利用可能にしません。
</p>
<a class="index-entry-id" id="index-package_002denable_002dat_002dstartup"></a>
<p>スタートアップ時にEmacsが自動的にパッケージを利用可能しないようにするためには変数<code class="code">package-enable-at-startup</code>を<code class="code">nil</code>に変更してください。この変数は正規のinitファイル(regular
init file)のロード前に読み込まれるので早期initファイル(early init
file)で行うようにしてください。したがってCustomize経由でこの変数の値のセットや変更を行う場合には、カスタマイズしたセッティングは早期initファイルに保存する必要があります。これを行うには<code class="code">package-enable-at-startup</code>のカスタマイズした値を保存する前に、変数<code class="code">custom-file</code>
(<a class="ref" href="Saving-Customizations.html">カスタマイズの保存</a>を参照)の値が早期initファイルを指すようにセットまたは変更してください。
</p>
<a class="index-entry-id" id="index-package_002dquickstart_002drefresh"></a>
<a class="index-entry-id" id="index-package_002dquickstart"></a>
<p>多くのパッケージのインストール後には、ユーザーオプション<code class="code">package-quickstart</code>のセッティングでスタートアップタイムを改善できるかもしれません。このオプションをセットすることによって、Emacsのスタートアップ時に毎回再計算するかわりに、多くの事項をEmacsに事前に計算させることができます。しかしこれを行うと、<code class="code">package-load-list</code>の値の変更時のようなアクティベーション変更が必要になった際にコマンド<code class="code">package-quickstart-refresh</code>を手動で実行する必要が生じます。
</p>
<a class="index-entry-id" id="index-package_002dactivate_002dall"></a>
<p><code class="code">package-enable-at-startup</code>を<code class="code">nil</code>にセットしてもスタートアップ中およびスタートアップじにパッケージを利用可能にすることはできます。インストール済みパッケージをスタートアップ中に利用可能にするにはinitファイル内で関数<code class="code">package-activate-all</code>を呼び出し手ください。スタートアップ後に利用可能にするにはコマンド<kbd class="kbd">M-:
(package-activate-all) RET</kbd>を呼び出してください。
</p>
<a class="index-entry-id" id="index-package_002dload_002dlist"></a>
<p>スタートアップ時に利用可能になるようにパッケージのロードをより精密に制御するために、変数<code class="code">package-load-list</code>を使用することができます。この変数の値にはリストを指定します。<code class="code">(<var class="var">name</var>&nbsp;<var class="var">version</var>)</code><!-- /@w -->という形式のリスト要素は、<var class="var">name</var>という名前のパッケージのバージョン<var class="var">version</var>を利用可能にするように指示します。ここで<var class="var">version</var>には、(そのパッケージの特定のバージョンに対応する)バージョン文字列、<code class="code">t</code>
(任意のインストール済みのバージョンを意味する)、または<code class="code">nil</code>
(バージョンを意味しない。パッケージを利用可能にすることを抑止してパッケージを無効にする)を指定します。リストの要素にはシンボル<code class="code">all</code>も指定でき、これは他のリスト要素で名前指定されていない任意のパッケージのインストール済みバージョンを利用可能にすることを意味します。デフォルト値は単に<code class="code">'(all)</code>となっています。
</p>
<p>たとえば<code class="code">package-load-list</code>を<code class="code">'((muse &quot;3.20&quot;)
all)</code>にセットするとEmacsは&lsquo;<samp class="samp">muse</samp>&rsquo;のバージョン3.20のみ、および&lsquo;<samp class="samp">muse</samp>&rsquo;以外のパッケージのインストール済みの任意のバージョンをロードします。&lsquo;<samp class="samp">muse</samp>&rsquo;の他のバージョンがインストールされていたとしてもそれらは無視されます。&lsquo;<samp class="samp">muse</samp>&rsquo;パッケージは&lsquo;<samp class="samp">held</samp>&rsquo;というステータスでパッケージメニューにリストされるはずです。
</p>
<a class="index-entry-id" id="index-package_002drecompile"></a>
<a class="index-entry-id" id="index-package_002drecompile_002dall"></a>
<p>Emacsのバイトコードは極めて安定していますがバイトコードが古くなってしまったり、コンパイル済みファイルが依存するマクロが新しいバージョンのEmacsで変更されてしまう可能性もあります。特定のパッケージをリコンパイルするためには<kbd class="kbd">M-x&nbsp;package-recompile</kbd><!-- /@w -->、すべてのパッケージをリコンパイルするためには<kbd class="kbd">M-x&nbsp;package-recompile-all</kbd><!-- /@w -->というコマンドを使うことができます(インストール済みパッケージの数が多ければ後者コマンドの実行にかなりの時間を要するかもしれない)。
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Package-Files.html">パッケージのファイルとディレクトリー</a>, Previous: <a href="Package-Statuses.html">パッケージのステータス</a>, Up: <a href="Packages.html">Emacs Lispパッケージ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-30_69b16e5c63840479270d32f58daea923fe725b90, commit:7783254962890c8452b9c8df3ab8d209195e21ea to check Japanese translation.
</body>
</html>
