<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.1, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GNU gettext utilities: Java</title>

<meta name="description" content="GNU gettext utilities: Java">
<meta name="keywords" content="GNU gettext utilities: Java">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Program-Index.html#Program-Index" rel="index" title="Program Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="List-of-Programming-Languages.html#List-of-Programming-Languages" rel="up" title="List of Programming Languages">
<link href="C_0023.html#C_0023" rel="next" title="C#">
<link href="Smalltalk.html#Smalltalk" rel="prev" title="Smalltalk">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Java"></a>
<div class="header">
<p>
Next: <a href="C_0023.html#C_0023" accesskey="n" rel="next">C#</a>, Previous: <a href="Smalltalk.html#Smalltalk" accesskey="p" rel="prev">Smalltalk</a>, Up: <a href="List-of-Programming-Languages.html#List-of-Programming-Languages" accesskey="u" rel="up">List of Programming Languages</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Program-Index.html#Program-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Java-1"></a>
<h4 class="subsection">15.5.11 Java</h4>
<a name="index-Java"></a>

<dl compact="compact">
<dt>RPM</dt>
<dd><p>java、java2
</p>
</dd>
<dt>ファイル拡張子</dt>
<dd><p><code>java</code>
</p>
</dd>
<dt>文字列構文</dt>
<dd><p>&quot;abc&quot;
</p>
</dd>
<dt>gettextの略記</dt>
<dd><p>_(&quot;abc&quot;)
</p>
</dd>
<dt>gettext/ngettext関数</dt>
<dd><p><code>GettextResource.gettext</code>、<code>GettextResource.ngettext</code>、<code>GettextResource.pgettext</code>、<code>GettextResource.npgettext</code>
</p>
</dd>
<dt>textdomain</dt>
<dd><p>&mdash;<br>
かわりに<code>ResourceBundle.getResource</code>を使用してください
</p>
</dd>
<dt>bindtextdomain</dt>
<dd><p>&mdash;<br>
かわりにCLASSPATHを使用してください
</p>
</dd>
<dt>setlocale</dt>
<dd><p>自動
</p>
</dd>
<dt>必要条件</dt>
<dd><p>&mdash;
</p>
</dd>
<dt>GNU gettextの使用またはエミュレート</dt>
<dd><p>&mdash;<br>
Java specific message catalog formatを使用してください
</p>
</dd>
<dt>抽出プログラム</dt>
<dd><p><code>xgettext -k_</code>
</p>
</dd>
<dt>位置の書式</dt>
<dd><p><code>MessageFormat.format &quot;{1,number} {0,number}&quot;</code>
</p>
</dd>
<dt>可搬性</dt>
<dd><p>完全な可搬性がある
</p>
</dd>
<dt>po-modeでのマーキング</dt>
<dd><p>&mdash;
</p></dd>
</dl>

<p>文字列をインターナショナライズ可能とマークする前に、文字列結合演算子を使って、<code>MessageFormat</code>アプリケーションで変換が必要な文字列を結合してください。たとえば<code>&quot;file
&quot;+filename+&quot; not found&quot;</code>は、<code>MessageFormat.format(&quot;file {0} not found&quot;,
new Object[] { filename })</code>となります。これを行った後のみ、文字列をマークして抽出することが可能になります。
</p>
<p>GNU gettextはJava
本来がもつ、<code>ResourceBundle</code>という名前のインターナショナリゼーションのメカニズムを使います。<code>ResourceBundle</code>には、<code>.properties</code>と<code>.class</code>という、2つのファイル
フォーマットがあります。<code>.properties</code>ファイルは、POファイルのように翻訳者が直接編集できるテキスト形式ですが、plural
formをサポートしません。<code>.class</code>は、<code>.java</code>のソースコードからコンパイルされた形式で、plural
formをサポートします(適切なAPIを通じてのアクセスが提供されています。以下を参照してください)。
</p>
<p>POファイルを<code>.properties</code>ファイルに変換するためには、<code>msgcat</code>プログラムの
<code>--properties-output</code>オプションを使うことができます。逆に<code>.properties</code>ファイルをPOファイルに変換するには、<code>msgcat</code>プログラムの<code>--properties-input</code>オプションを使うことができます。POファイルを扱うすべてのツールは、<code>--properties-input</code>および/または<code>--properties-output</code>オプションにより、<code>.properties</code>も同様に取り扱うことができます。
</p>
<p>POファイルをResourceBundle
classに変換するためには、<code>msgfmt</code>プログラムの、<code>--java</code>(または<code>--java2</code>)オプションを使うことができます。逆にResourceBundleをPOファイルに変換するためには、<code>msgunfmt</code>の<code>--java</code>オプションを使うことができます。
</p>
<p>プログラムからResourceBundleにアクセスするために、異なる2つのAPIを使うことができます。これら2つのAPIは、ResourceBundleがGNU
gettextにより生成されたものであるか、それともこれ以外の<code>.class</code>や<code>.properties</code>ファイルであるかによらず、すべての種類のResourceBundleを扱えることに注意してください。
</p>
<ol>
<li> <code>java.util.ResourceBundle</code> API

<p>特徴は、これの<code>getString</code>関数が、翻訳された文字列を戻すことです。翻訳がない場合には、<code>MissingResourceException</code>が発生することに注意してください。
</p>
<p>これは、標準のAPIに採用されるためには有利な特徴といえます。さらに、このAPIは追加のライブラリーを必要とせず、<code>msgcat</code>によって生成された<code>.properties</code>ファイルか、<code>msgfmt</code>によって生成された<code>.class</code>ファイルだけが必要です。しかし、このAPIはpluralを処理できず、それはpluralを処理するPOファイルから<code>msgfmt</code>で生成されたリソースの場合も同様です。
</p>
</li><li> <code>gnu.gettext.GettextResource</code> API

<p><a href="javadoc2/index.html">javadoc2 directory</a>に、Javadoc 1.1 style
formatのReference documentation があります。
</p>
<p>このAPIの<code>gettext</code>関数は、翻訳された文字列を戻します。翻訳がない場合には、<var>msgid</var>が変更されずに戻されることに注意してください。
</p>
<p>このAPIの有利な点は、pluralを処理する<code>ngettext</code>関数があること、そして特定のcontextにたいする制約をもつ文字列を処理する<code>pgettext</code>と<code>npgettext</code>のある点です。
</p>
<a name="index-libintl-for-Java"></a>
<p>このAPIを使うために必要なのは、GNU
gettextパッケージの一部である<code>libintl.jar</code>だけで、これはLGPLのもとで配布されています。
</p></li></ol>

<p>2番目のAPIを使うための例としては、<samp>examples</samp>ディレクトリーの、<code>hello-java</code>、<code>hello-java-awt</code>、<code>hello-java-swing</code>、<code>hello-java-qtjambi</code>が利用できます。
</p>
<p>ではAPIの使い方と、&lsquo;<samp>getString</samp>&rsquo;の略記をしてみましょう。以下の3つの用法から選択することができましょう:
</p>
<ul>
<li> (Java
1.5以降の場合)あなたのプロジェクトに&lsquo;<samp>Util</samp>&rsquo;という一意なクラスがあるとき、<code>ResourceBundle</code>のインスタンスを保持するstaticな変数を定義する場合、以下のような略記を定義します:

<div class="smallexample">
<pre class="smallexample">private static ResourceBundle myResources =
  ResourceBundle.getBundle(&quot;domain-name&quot;);
public static String _(String s) {
  return myResources.getString(s);
}
</pre></div>

<p>そして、インターナショナライズする文字列を含むすべてのクラスに、以下の宣言を含めます
</p>
<div class="smallexample">
<pre class="smallexample">import static Util._;
</pre></div>

<p>これで以下のようにして略記を使うことができます:
</p>
<div class="smallexample">
<pre class="smallexample">System.out.println(_(&quot;Operation completed.&quot;));
</pre></div>

</li><li> あなたのプロジェクトに&lsquo;<samp>Util</samp>&rsquo;という一意なクラスがあるとき、<code>ResourceBundle</code>のインスタンスを保持するstaticな変数を定義する場合、以下のような略記を定義します:

<div class="smallexample">
<pre class="smallexample">public static ResourceBundle myResources =
  ResourceBundle.getBundle(&quot;domain-name&quot;);
</pre></div>

<p>そして、インターナショナライズする文字列を含むすべてのクラスに、以下の宣言を含めます
</p>
<div class="smallexample">
<pre class="smallexample">private static ResourceBundle res = Util.myResources;
private static String _(String s) { return res.getString(s); }
</pre></div>

<p>これで以下のようにして略記を使うことができます:
</p>
<div class="smallexample">
<pre class="smallexample">System.out.println(_(&quot;Operation completed.&quot;));
</pre></div>

</li><li> resource bundleの定義だけを含む、とても短い名前の&lsquo;<samp>S</samp>&rsquo;というクラスを追加して、以下のような略記を定義します:

<div class="smallexample">
<pre class="smallexample">public class S {
  public static ResourceBundle myResources =
    ResourceBundle.getBundle(&quot;domain-name&quot;);
  public static String _(String s) {
    return myResources.getString(s);
  }
}
</pre></div>

<p>これで以下のようにして略記を使うことができます:
</p>
<div class="smallexample">
<pre class="smallexample">System.out.println(S._(&quot;Operation completed.&quot;));
</pre></div>
</li></ul>

<p>3つの用法のどれを選ぶかは、あなたのプロジェクトがJava
1.5より前のバージョンにたいする互換性を必要とするかに依存します。もしその必要がある場合には、プロジェクトのすべてのクラスに1文字のクラスを追加するより、すべてのクラスに2行追加するほうがよいでしょう。
</p>



</body>
</html>
