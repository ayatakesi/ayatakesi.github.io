<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 25.1.

Copyright (C) 1990-1996, 1998-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>20.7.13 マウスイベントへのアクセス (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="20.7.13 マウスイベントへのアクセス (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="20.7.13 マウスイベントへのアクセス (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Emacs Lisp">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Input-Events.html#Input-Events" rel="up" title="20.7 入力イベント">
<link href="Accessing-Scroll.html#Accessing-Scroll" rel="next" title="20.7.14 スクロールバーイベントへのアクセス">
<link href="Classifying-Events.html#Classifying-Events" rel="prev" title="20.7.12 イベントの分類">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="Accessing-Mouse"></span><div class="header">
<p>
Next: <a href="Accessing-Scroll.html#Accessing-Scroll" accesskey="n" rel="next">Accessing Scroll</a>, Previous: <a href="Classifying-Events.html#Classifying-Events" accesskey="p" rel="prev">Classifying Events</a>, Up: <a href="Input-Events.html#Input-Events" accesskey="u" rel="up">Input Events</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="mausuibentohenoakusesu"></span><h4 class="subsection">20.7.13 マウスイベントへのアクセス</h4>
<span id="index-mouse-events_002c-data-in"></span>
<span id="index-keyboard-events_002c-data-in"></span>

<p>このセクションではマウスボタンやモーションイベント内のデータアクセスに役に立つ関数を説明します。同じ関数を使用してキーボードイベントデータにもアクセスできますが、キーボードイベントに不適切なデータ要素は0または<code>nil</code>になります。
</p>
<p>以下の2つの関数は、マウスイベントの位置を指定するマウス位置リスト(see section <a href="Click-Events.html#Click-Events">クリックイベント</a>)をリターンします。
</p>
<dl>
<dt id="index-event_002dstart">Function: <strong>event-start</strong> <em>event</em></dt>
<dd><p>これは<var>event</var>の開始位置をリターンする。
</p>
<p><var>event</var>がクリックイベントまたはボタンダウンイベントの場合、この関数はそのイベントの位置をリターンする。<var>event</var>がドラッグイベントの場合は、そのドラッグの開始位置をリターンする。
</p></dd></dl>

<dl>
<dt id="index-event_002dend">Function: <strong>event-end</strong> <em>event</em></dt>
<dd><p>これは<var>event</var>の終了位置をリターンする。
</p>
<p><var>event</var>がドラッグイベントの場合、この関数はユーザーがマウスボタンをリリースした位置をリターンする。<var>event</var>がクリックイベントまたはボタンダウンイベントの場合、値はそのイベント固有の開始位置となる。
</p></dd></dl>

<dl>
<dt id="index-posnp">Function: <strong>posnp</strong> <em>object</em></dt>
<dd><p>この関数は<var>object</var>が(<a href="Click-Events.html#Click-Events">クリックイベント</a>に記述されたいずれかのフォーマットの)マウス位置リストの場合は非<code>nil</code>、それ以外では<code>nil</code>をリターンする。
</p></dd></dl>

<span id="index-mouse-position-list_002c-accessing"></span>
<p>以下の関数は、引数にマウス位置リストをとり、そのリストのさまざまな部分をリターンします:
</p>
<dl>
<dt id="index-posn_002dwindow">Function: <strong>posn-window</strong> <em>position</em></dt>
<dd><p><var>position</var>があったウィンドウをリターンする。<var>position</var>が最初イベントがあったフレーム外の位置を表す場合は、かわりにそのフレームをリターンする。
</p></dd></dl>

<dl>
<dt id="index-posn_002darea">Function: <strong>posn-area</strong> <em>position</em></dt>
<dd><p><var>position</var>内に記録されたウィンドウエリアをリターンする。そのウィンドウのテキストエリアでイベントが発生したときは<code>nil</code>、それ以外ではイベントがどこで発生したかを識別するシンボルをリターンする。
</p></dd></dl>

<dl>
<dt id="index-posn_002dpoint">Function: <strong>posn-point</strong> <em>position</em></dt>
<dd><p><var>position</var>内のバッファー位置をリターンする。ウィンドウのテキストエリア、マージンエリア、フリンジでイベントが発生したときは、バッファー位置を識別する整数値、それ以外では値は未定義である。
</p></dd></dl>

<dl>
<dt id="index-posn_002dx_002dy">Function: <strong>posn-x-y</strong> <em>position</em></dt>
<dd><p><var>position</var>内のピクセル単位のxy座標を、コンスセル<code>(<var>x</var>
. <var>y</var>)</code>でリターンする。これらは<code>posn-window</code>により与えられるウィンドウにたいする相対座標である。
</p>
<p>以下は、あるウィンドウのテキストエリア内のウィンドウ相対座標をフレーム相対座標に変換する方法を示す例である:
</p>
<div class="example">
<pre class="example">(defun frame-relative-coordinates (position)
  &quot;POSITIONのフレーム相対座標をリターンする。
POSITIONはウィンドウのテキストエリアにあるものとする。&quot;
  (let* ((x-y (posn-x-y position))
         (window (posn-window position))
         (edges (window-inside-pixel-edges window)))
    (cons (+ (car x-y) (car edges))
          (+ (cdr x-y) (cadr edges)))))
</pre></div>
</dd></dl>

<dl>
<dt id="index-posn_002dcol_002drow">Function: <strong>posn-col-row</strong> <em>position</em></dt>
<dd><p>この関数は、<var>position</var>内のバッファー位置にたいして推定される列と行を含むコンスセル<code>(<var>col</var>
.
<var>row</var>)</code>をリターンする。リターン値は、<var>position</var>にたいする<var>x</var>と<var>y</var>の値より計算され、そのフレームのデフォルト文字幅とデフォルト行高(行間スペースを含む)の単位で与えられる(そのため、実際の文字サイズが非デフォルト値の場合には、実際の行と列は、これらの計算された値とは異なるかもしれない)。
</p>
<p><var>row</var>は、そのテキストエリアの上端から数えられることに注意すること。<var>position</var>により与えられるウィンドウがヘッダーライン(see section <a href="Header-Lines.html#Header-Lines">ウィンドウのヘッダーライン</a>)をもつ場合、そのヘッダーラインは<var>row</var>の数に<em>含まない</em>。
</p></dd></dl>

<dl>
<dt id="index-posn_002dactual_002dcol_002drow">Function: <strong>posn-actual-col-row</strong> <em>position</em></dt>
<dd><p><var>position</var>内の実際の行と列を、コンスセル<code>(<var>col</var>
. <var>row</var>)</code>でリターンする。値は<var>position</var>与えられるウィンドウの実際の行と列である。<a href="Click-Events.html#Click-Events">クリックイベント</a>を参照のこと。<var>position</var>が実際のポジション値を含まない場合、この関数は<code>nil</code>をリターンする。この場合、おおよその値を取得するために<code>posn-col-row</code>を使用できる。
</p>
<p>この関数は、タブ文字やイメージによるビジュアル列数のように、ディスプレイ上の文字のビジュアル幅を意味しない。標準的な文字単位の座標が必要ｎ場合は、かわりに<code>posn-col-row</code>を使用すること。
</p></dd></dl>

<dl>
<dt id="index-posn_002dstring">Function: <strong>posn-string</strong> <em>position</em></dt>
<dd><p><var>position</var>内の文字列オブジェクトをを<code>nil</code>、またはコンスセル<code>(<var>string</var>
. <var>string-pos</var>)</code>でリターンする。
</p></dd></dl>

<dl>
<dt id="index-posn_002dimage">Function: <strong>posn-image</strong> <em>position</em></dt>
<dd><p><var>position</var>内のイメージオブジェクトを<code>nil</code>、または<code>(image ...)</code>でリターンする。
</p></dd></dl>

<dl>
<dt id="index-posn_002dobject">Function: <strong>posn-object</strong> <em>position</em></dt>
<dd><p><var>position</var>内のイメージオブジェクト、または文字列オブジェクトを<code>nil</code>、イメージ<code>(image
...)</code>、またはコンスセル<code>(<var>string</var> . <var>string-pos</var>)</code>でリターンする。
</p></dd></dl>

<dl>
<dt id="index-posn_002dobject_002dx_002dy">Function: <strong>posn-object-x-y</strong> <em>position</em></dt>
<dd><p><var>position</var>内のオブジェクトの左上隅からのピクセル単位のxy座標を、コンスセル<code>(<var>dx</var>
.
<var>dy</var>)</code>でリターンする。<var>position</var>がバッファーテキストの場合は、その位置にもっとも近いバッファーテキストの相対位置をリターンする。
</p></dd></dl>

<dl>
<dt id="index-posn_002dobject_002dwidth_002dheight">Function: <strong>posn-object-width-height</strong> <em>position</em></dt>
<dd><p><var>position</var>内のオブジェクトのピクセル幅とピクセル高さを、コンスセル<code>(<var>width</var>
. <var>height</var>)</code>でリターンする。<var>position</var>がバッファー位置の場合は、その位置の文字のサイズをリターンする。
</p></dd></dl>

<span id="index-timestamp-of-a-mouse-event"></span>
<dl>
<dt id="index-posn_002dtimestamp">Function: <strong>posn-timestamp</strong> <em>position</em></dt>
<dd><p><var>position</var>内のタイムスタンプをリターンする。これはミリ秒で表されたイベント発生時刻である。
</p></dd></dl>

<p>以下の関数は与えられた特定のバッファー、またはスクリーン位置により与えられる位置リストを計算します。上述の関数で、この位置リスト内のデータにアクセスできます。
</p>
<dl>
<dt id="index-posn_002dat_002dpoint">Function: <strong>posn-at-point</strong> <em>&amp;optional pos window</em></dt>
<dd><p>この関数は位置<var>pos</var> in
<var>window</var>にたいする位置リストをリターンする。<var>pos</var>のデフォルトは<var>window</var>内のポイントであり、<var>window</var>のデフォルトは選択されたウィンドウである。
</p>
<p><var>window</var>内で<var>pos</var>が不可視の場合、<code>posn-at-point</code>は<code>nil</code>をリターンする。
</p></dd></dl>

<dl>
<dt id="index-posn_002dat_002dx_002dy">Function: <strong>posn-at-x-y</strong> <em>x y &amp;optional frame-or-window whole</em></dt>
<dd><p>この関数は、指定されたフレームまたはウィンドウ<var>frame-or-window</var>(デフォルトは選択されたウィンドウ)内のピクセル座標<var>x</var>と<var>y</var>に対応する位置情報をリターンする。<var>x</var>と<var>y</var>は、使用されたフレームまたはウィンドウにたいする相対座標である。<var>whole</var>が<code>nil</code>の場合、座標はウィンドウのテキストエリアにたいする相対座標であり、それ以外ではスクロールバー、マージン、フリンジを含むウィンドウエリア全体にたいする相対座標である。
</p></dd></dl>




</body>
</html>
