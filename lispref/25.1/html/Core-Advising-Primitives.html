<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 25.1.

Copyright (C) 1990-1996, 1998-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>12.11.1 アドバイスを操作するためのプリミティブ (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="12.11.1 アドバイスを操作するためのプリミティブ (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="12.11.1 アドバイスを操作するためのプリミティブ (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Emacs Lisp">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Advising-Functions.html#Advising-Functions" rel="up" title="12.11 Emacs Lisp関数にたいするアドバイス">
<link href="Advising-Named-Functions.html#Advising-Named-Functions" rel="next" title="12.11.2 名前つき関数にたいするアドバイス">
<link href="Advising-Functions.html#Advising-Functions" rel="prev" title="12.11 Emacs Lisp関数にたいするアドバイス">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="Core-Advising-Primitives"></span><div class="header">
<p>
Next: <a href="Advising-Named-Functions.html#Advising-Named-Functions" accesskey="n" rel="next">Advising Named Functions</a>, Up: <a href="Advising-Functions.html#Advising-Functions" accesskey="u" rel="up">Advising Functions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="adobaisuwoCao-Zuo-surutamenopurimiteibu"></span><h4 class="subsection">12.11.1 アドバイスを操作するためのプリミティブ</h4>
<span id="index-advice_002c-add-and-remove"></span>

<dl>
<dt id="index-add_002dfunction">Macro: <strong>add-function</strong> <em>where place function &amp;optional props</em></dt>
<dd><p>このマクロは<var>place</var>(<a href="Generalized-Variables.html#Generalized-Variables">ジェネリック変数</a>を参照してください)に格納された関数に、アドバイス<var>function</var>を追加する手軽な方法です。
</p>
<p><var>where</var> determines how <var>function</var> is composed with the existing
function, e.g., whether <var>function</var> should be called before, or after the
original function.  See section <a href="Advice-combinators.html#Advice-combinators">Ways to compose advice</a>, for the list of available
ways to compose the two functions.
</p>
<p>(通常は名前が<code>-function</code>で終わる)変数を変更するときには、<var>function</var>がグローバルに使用されるか、あるいはカレントバッファーだけに使用されるか選ぶことができます。<var>place</var>が単にシンボルの場合、<var>function</var>は<var>place</var>のグローバル値に追加されます。<var>place</var>が<code>(local
<var>symbol</var>)</code>というフォームの場合、<var>symbol</var>はその変数の名前をreturnする式なので、<var>function</var>はカレントバッファーだけに追加されます。最後に、レキシカル変数を変更したい場合には、<code>(var
<var>variable</var>)</code>を使用する必要があるでしょう。
</p>
<p><code>add-function</code>で追加されたすべての関数は、自動的にプロパティー<var>props</var>の関連リストに加えることができます。現在のところ、特別な意味をもつのは2つのプロパティーだけです:
</p>
<dl compact="compact">
<dt><code>name</code></dt>
<dd><p>これはアドバイスの名前を与えます。この名前は、<code>remove-function</code>が取り除く関数を識別するのに使用できます。これは通常、<var>function</var>が無名関数のときに使用されます。
</p>
</dd>
<dt><code>depth</code></dt>
<dd><p>This specifies how to order the advice, should several pieces of advice be
present.  By default, the depth is 0.  A depth of 100 indicates that this
piece of advice should be kept as deep as possible, whereas a depth of -100
indicates that it should stay as the outermost piece.  When two pieces of
advice specify the same depth, the most recently added one will be
outermost.
</p>
<p>For <code>:before</code> advice, being outermost means that this advice will be
run first, before any other advice, whereas being innermost means that it
will run right before the original function, with no other advice run
between itself and the original function.  Similarly, for <code>:after</code>
advice innermost means that it will run right after the original function,
with no other advice run in between, whereas outermost means that it will be
run right at the end after all other advice.  An innermost <code>:override</code>
piece of advice will only override the original function and other pieces of
advice will apply to it, whereas an outermost <code>:override</code> piece of
advice will override not only the original function but all other advice
applied to it as well.
</p></dd>
</dl>

<p><var>function</var>がインタラクティブでない場合、欠オグされた関数は、(もしあれば)元の関数のインタラクティブ指定(interactive
spec)を継承します。それ以外は、結合された関数はインタラクティブになり、<var>function</var>のインタラクティブ指定を使用します。1つ例外があります。<var>function</var>のインタラクティブ指定が、(式や文字列ではない)関数の場合、元の関数のインタラクティブ指定を唯一の引数として、その関数を呼び出して、それが結合された関数のインタラクティブ指定になります。引数として受け取ったインタラクティブ指定を解釈するためには、<code>advice-eval-interactive-spec</code>を使用します。
</p>
<p>注意:
<var>function</var>のインタラクティブ指定は結合された関数に適用され、<var>function</var>ではなく、結合された関数の呼び出し規約に従うべきです。多くの場合、これらは等しいので差異は生じませんが、<var>function</var>の<code>:around</code>、<code>:filter-args</code>、<code>filter-return</code>では、重要になります。
</p></dd></dl>

<dl>
<dt id="index-remove_002dfunction">Macro: <strong>remove-function</strong> <em>place function</em></dt>
<dd><p>このマクロは<var>place</var>に格納された関数から、<var>function</var>を取り除きます。これは、<code>add-function</code>を使用して、<var>function</var>が<var>place</var>に追加されたときだけ機能します。
</p>
<p><var>function</var>は、<var>place</var>に追加された関数にたいして、ラムダ式にたいしても機能するように、<code>equal</code>を使用して比較を試みます。これは追加で<var>place</var>に追加された関数の<code>name</code>プロパティーも比較します。これは<code>equal</code>を使用してラムダ式を比較するより信頼性があります。
</p></dd></dl>

<dl>
<dt id="index-advice_002dfunction_002dmember_002dp">Function: <strong>advice-function-member-p</strong> <em>advice function-def</em></dt>
<dd><p><var>advice</var>がすでに<var>function-def</var>内にある場合は、非<code>nil</code>をreturnします。上記の<code>remove-function</code>と同様、実際の関数<var>advice</var>のかわりに、アドバイス断片(piece
of advice)の<code>name</code>も使用できます。
</p></dd></dl>

<dl>
<dt id="index-advice_002dfunction_002dmapc">Function: <strong>advice-function-mapc</strong> <em>f function-def</em></dt>
<dd><p>Call the function <var>f</var> for every piece of advice that was added to
<var>function-def</var>.  <var>f</var> is called with two arguments: the advice
function and its properties.
</p></dd></dl>

<dl>
<dt id="index-advice_002deval_002dinteractive_002dspec">Function: <strong>advice-eval-interactive-spec</strong> <em>spec</em></dt>
<dd><p>Evaluate the interactive <var>spec</var> just like an interactive call to a
function with such a spec would, and then return the corresponding list of
arguments that was built.  E.g., <code>(advice-eval-interactive-spec
&quot;r\nP&quot;)</code> will return a list of three elements, containing the boundaries of
the region and the current prefix argument.
</p></dd></dl>

<hr>
<div class="header">
<p>
Next: <a href="Advising-Named-Functions.html#Advising-Named-Functions" accesskey="n" rel="next">Advising Named Functions</a>, Up: <a href="Advising-Functions.html#Advising-Functions" accesskey="u" rel="up">Advising Functions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
