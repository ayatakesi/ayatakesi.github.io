<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.91.

Copyright © 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Tool Bar (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Tool Bar (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Tool Bar (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="December 28, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Menu-Keymaps.html" rel="up" title="Menu Keymaps">
<link href="Modifying-Menus.html" rel="next" title="Modifying Menus">
<link href="Menu-Bar.html" rel="prev" title="Menu Bar">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Tool-Bar">
<div class="nav-panel">
<p>
Next: <a href="Modifying-Menus.html" accesskey="n" rel="next">メニューの変更</a>, Previous: <a href="Menu-Bar.html" accesskey="p" rel="prev">メニューバー</a>, Up: <a href="Menu-Keymaps.html" accesskey="u" rel="up">メニューキーアップ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="turuba"><span>23.18.6 ツールバー<a class="copiable-link" href="#turuba"> &para;</a></span></h4>
<a class="index-entry-id" id="index-tool-bar"></a>

<p><em class="dfn">ツールバー(tool bar)</em>とはフレームの最上部、メニューバー直下にあるクリック可能なアイコンの行のことです。<a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Tool-Bars.html#Tool-Bars">Tool
Bars</a> in <cite class="cite">The GNU Emacs
Manual</cite>を参照してください。Emacsは通常はグラフィカルなディスプレイ上でツールバーを表示します。
</p>
<p>各フレームではツールバーに何行分の高さを割り当てるかをフレームパラメーター<code class="code">tool-bar-lines</code>で制御します。値0はツールバーを抑制します。値が非0で<code class="code">auto-resize-tool-bars</code>が非<code class="code">nil</code>なら、指定されたコンテンツを維持するのに必要な分、ツールバーは拡大縮小されます。値が<code class="code">grow-only</code>ならツールバーは自動的に拡大されますが、自動的に縮小はされません。
</p>
<p>ツールバーのコンテンツは、(メニューバーが制御されるのと似た方法により)
<kbd class="key">TOOL-BAR</kbd>と呼ばれる偽りのファンクションキーに割り当てられたメニューキーマップにより制御されます。したがって以下のように<code class="code">define-key</code>を使用してツールバーアイテムを定義します。
</p>
<div class="example">
<pre class="example-preformatted">(define-key global-map [tool-bar <var class="var">key</var>] <var class="var">item</var>)
</pre></div>

<p>ここで<var class="var">key</var>はそのアイテムを他のアイテムと区別する偽ファンクションキー、<var class="var">item</var>はそのアイテムを表示する方法とアイテムの振る舞いを示すメニューアイテムキーバインディングです(<a class="ref" href="Extended-Menu-Items.html">拡張メニューアイテム</a>を参照)。
</p>
<p>メニューキーマップの通常のプロパティ<code class="code">:visible</code>、<code class="code">:enable</code>、<code class="code">:button</code>、<code class="code">:filter</code>はツールバーバインディングでも有用で、いずれのプロパティも通常通りの意味をもちます。アイテム内の<var class="var">real-binding</var>はキーマップではなくコマンドでなければなりません。言い換えるとこれはツールバーアイコンをプレフィクスキーとして定義するようには機能しないということです。
</p>
<p><code class="code">:help</code>プロパティは、そのアイテム上にマウスがある間表示するhelp-echo文字列を指定します。これはテキストプロパティ<code class="code">help-echo</code>と同じ方法で表示されます(<a class="ref" href="Special-Properties.html#Help-display">Help display</a>を参照)。
</p>
<p>これらに加えて<code class="code">:image</code>プロパティも使用するべきでしょう。ツールバー内にイメージを表示するにはこのプロパティを使用します。
</p>
<dl class="table">
<dt><code class="code">:image <var class="var">image</var></code></dt>
<dd><p><var class="var">image</var>は単一イメージ様式(single image specification)か4ベクターイメージ様式(vector of four
image
specifications)で指定する(<a class="ref" href="Images.html">イメージ</a>を参照)。4ベクターを使用する場合には状況に応じて以下のいずれかが使用される:
</p>
<dl class="table">
<dt>item 0</dt>
<dd><p>アイテムが有効かつ選択されているときに使用。
</p></dd>
<dt>item 1</dt>
<dd><p>アイテムが有効かつ未選択のときに使用。
</p></dd>
<dt>item 2</dt>
<dd><p>アイテムが無効かつ選択されているときに使用。
</p></dd>
<dt>item 3</dt>
<dd><p>アイテムが無効かつ未選択のときに使用。
</p></dd>
</dl>
</dd>
</dl>

<p>GTK+バージョンとNSバージョンのEmacsは、無効および/または未選択のイメージをitem0から自動的に計算するので、item1からitem3は無視されます。
</p>
<p><var class="var">image</var>が単一イメージ様式なあ、Emacsはそのイメージにエッジ検出アルゴリズム(edge-detection
algorithm)を適用することによってツールバーの無効な状態のボタンを描画します。
</p>
<p><code class="code">:rtl</code>プロパティには右から左に記述する言語のためのイメージ候補を指定します。これをサポートするのは現在のところGTK+バージョンのEmacsだけです。
</p>
<p>一部のツールキットにおいては、イメージとテキストの両方がツールバーに表示されます。イメージの使用だけを強制したければ、非<code class="code">nil</code>の<code class="code">:vert-only</code>プロパティを使用してください。
</p>
<p>メニューバーと同様、ツールバーはセパレーター(<a class="ref" href="Menu-Separators.html">メニューセパレーター</a>を参照)を表示できます。ツールバーのセパレーターは水平ラインではなく垂直ラインであり、1つのスタイルだけがサポートされます。これらはツールバーキーマップ内では<code class="code">(menu-item
&quot;--&quot;)</code>エントリーで表されます。ツールバーのセパレーターでは、<code class="code">:visible</code>のようなプロパティはサポートされません。GTK+とNextstepのツールバーでは、セパレーターはネイティブに描画されます。それ以外ではセパレーターは垂直ラインイメージを使用して描画されます。
</p>
<p>デフォルトツールバーはコマンドシンボルの<code class="code">mode-class</code>プロパティに<code class="code">special</code>をもつメジャーモードにたいしては、編集に特化したアイテムは表示しないよう定義されています(<a class="ref" href="Major-Mode-Conventions.html">メジャーモードの慣習</a>を参照)。メジャーモードは、ローカルマップ内でバインディング<code class="code">[tool-bar
<var class="var">foo</var>]</code>によって、グローバルバーにアイテムを追加するかもしれません。デフォルトツールバーの多くを適宜流用するのができないかもしれないので、デフォルトツールバーを完全に置き換えることは、いくつかのメジャーモードにとっては有意義です。デフォルトバインディングで<code class="code">tool-bar-map</code>を通じてインダイレクトすることにより、これを簡単に行うことができます。
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dmap"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-map</strong><a class="copiable-link" href="#index-tool_002dbar_002dmap"> &para;</a></span></dt>
<dd><p>デフォルトではグローバルマップは<code class="code">[tool-bar]</code>を以下のようにバインドする:
</p>
<div class="example">
<pre class="example-preformatted">(keymap-global-set &quot;&lt;tool-bar&gt;&quot;
                   `(menu-item ,(purecopy &quot;tool bar&quot;) ignore
                               :filter tool-bar-make-keymap))
</pre></div>

<p>関数<code class="code">tool-bar-make-keymap</code>は、変数<code class="code">tool-bar-map</code>の値より順番に実際のツールバーマップをダイナミックに継承する。したがって通常はそのマップを変更することにより、デフォルト(グローバル)ツールバーを調整すること。Infoモードのようないくつかのメジャーモードは、<code class="code">tool-bar-map</code>をバッファーローカルにして、それに異なるキーマップをセットすることによりグローバルツールバーを完全に置き換える。
</p></dd></dl>

<p>以下のようなツールバーアイテムを定義するのに便利な関数があります。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-tool_002dbar_002dadd_002ditem"><span class="category-def">Function: </span><span><strong class="def-name">tool-bar-add-item</strong> <var class="def-var-arguments">icon def key &amp;rest props</var><a class="copiable-link" href="#index-tool_002dbar_002dadd_002ditem"> &para;</a></span></dt>
<dd><p>この関数は<code class="code">tool-bar-map</code>を変更することにより、ツールバーにアイテムを追加する。使用するイメージは<var class="var">icon</var>により定義され、これは<code class="code">find-image</code>に配置されたXPM、XBM、PBMのイメージファイルの拡張子を除いたファイル名(basename)である。たとえばカラーディスプレイ上では、値に&lsquo;<samp class="samp">&quot;exit&quot;</samp>&rsquo;を与えると<samp class="file">exit.xpm</samp>、<samp class="file">exit.pbm</samp>、<samp class="file">exit.xbm</samp>の順に検索されるだろう。モノクロディスプレイでは検索は&lsquo;<samp class="samp">.pbm</samp>&rsquo;、&lsquo;<samp class="samp">.xbm</samp>&rsquo;、&lsquo;<samp class="samp">.xpm</samp>&rsquo;の順になる。使用するバインディングはコマンド<var class="var">def</var>で、<var class="var">key</var>はプレフィクスキーマップ内の偽ファンクションキーである。残りの引数<var class="var">props</var>はメニューアイテム仕様に追加する追加のプロパティリスト要素である。
</p>
<p>あるローカルマップ内にアイテムを定義するためには、この関数呼び出しの周囲の<code class="code">let</code>で<code class="code">tool-bar-map</code>をバインドする:
</p><div class="example">
<pre class="example-preformatted">(defvar foo-tool-bar-map
  (let ((tool-bar-map (make-sparse-keymap)))
    (tool-bar-add-item ...)
    ...
    tool-bar-map))
</pre></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-tool_002dbar_002dadd_002ditem_002dfrom_002dmenu"><span class="category-def">Function: </span><span><strong class="def-name">tool-bar-add-item-from-menu</strong> <var class="def-var-arguments">command icon &amp;optional map &amp;rest props</var><a class="copiable-link" href="#index-tool_002dbar_002dadd_002ditem_002dfrom_002dmenu"> &para;</a></span></dt>
<dd><p>この関数は既存のメニューバインディングと矛盾しないツールバーアイテムの定義に有用。<var class="var">command</var>のバインディングは<var class="var">map</var>(デフォルトは<code class="code">global-map</code>)内よりルックアップ(lookup:
照合)され、<var class="var">icon</var>にたいするイメージ仕様は<code class="code">tool-bar-add-item</code>と同じ方法で見つけ出される。結果のバインディングは<code class="code">tool-bar-map</code>に配置されるので、この関数の使用はグローバルツールバーアイテムに限定される。
</p>
<p><var class="var">map</var>には<code class="code">[menu-bar]</code>にバインドされた適切なキーマップが含まれていなければならない。残りの引数<var class="var">props</var>はメニューアイテム仕様に追加する追加のプロパティリスト要素。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-tool_002dbar_002dlocal_002ditem_002dfrom_002dmenu"><span class="category-def">Function: </span><span><strong class="def-name">tool-bar-local-item-from-menu</strong> <var class="def-var-arguments">command icon in-map &amp;optional from-map &amp;rest props</var><a class="copiable-link" href="#index-tool_002dbar_002dlocal_002ditem_002dfrom_002dmenu"> &para;</a></span></dt>
<dd><p>この関数は非グローバルツールバーアイテムの作成に使用される。<var class="var">in-map</var>に定義を作成するローカルマップを指定する以外は<code class="code">tool-bar-add-item-from-menu</code>と同じように使用する。引数<var class="var">from-map</var>は<code class="code">tool-bar-add-item-from-menu</code>の<var class="var">map</var>と同様。
</p></dd></dl>

<a class="index-entry-id" id="index-secondary_002dtool_002dbar_002dmap"></a>
<p><code class="code">tool-bar-map</code>で定義されたツールバーアイテムに加えて、Emacsは追加の行へのキーマップ<code class="code">secondary-tool-bar-map</code>で指定された&ldquo;セカンダリー(secondaryl:
第2の)&rdquo;ツールバーのアイテムの表示もサポートしています。これらのアイテムは通常だとフレームの最上部にツールバーが配置されていれば<code class="code">tool-bar-map</code>で定義されたツールバーの下に表示されますが、ツールバーが最下部(<a class="ref" href="Layout-Parameters.html">レイアウトのパラメーター</a>を参照)に配置されているとその上に表示されます。ツールバーがフレームの左側や右側に配置されている場合には表示されません。
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-auto_002dresize_002dtool_002dbars"><span class="category-def">Variable: </span><span><strong class="def-name">auto-resize-tool-bars</strong><a class="copiable-link" href="#index-auto_002dresize_002dtool_002dbars"> &para;</a></span></dt>
<dd><p>この変数が非<code class="code">nil</code>なら定義されたすべてのツールバーアイテムを表示するためにツールバーは自動的にリサイズされるが、そのフレーム高さの1/4を超えてリサイズされることはない。
</p>
<p>値が<code class="code">grow-only</code>ならツールバーは自動的に拡張されるが縮小はされない。ツールバーを縮小するためにユーザーは<kbd class="kbd">C-l</kbd>をエンターしてフレームを再描画する必要がある。
</p>
<p>GTK+やNextstepとともにEmacsがビルドされた場合には、ツールバーが表示できるのは1行だけであり、この変数は効果がない。
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-auto_002draise_002dtool_002dbar_002dbuttons"><span class="category-def">Variable: </span><span><strong class="def-name">auto-raise-tool-bar-buttons</strong><a class="copiable-link" href="#index-auto_002draise_002dtool_002dbar_002dbuttons"> &para;</a></span></dt>
<dd><p>この変数が非<code class="code">nil</code>ならツールバーアイテム上をマウスが通過したとき、浮き上がった形式(raised form)で表示される。
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dbutton_002dmargin"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-button-margin</strong><a class="copiable-link" href="#index-tool_002dbar_002dbutton_002dmargin"> &para;</a></span></dt>
<dd><p>この変数はツールバーアイテムの周囲に追加する余白(extra margin)を指定する。値はピクセル数を整数で指定する。デフォルトは4。
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dbutton_002drelief"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-button-relief</strong><a class="copiable-link" href="#index-tool_002dbar_002dbutton_002drelief"> &para;</a></span></dt>
<dd><p>この変数はツールバーアイテムの影(shadow)を指定する。値はピクセル数を整数で指定する。デフォルトは1。
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dborder"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-border</strong><a class="copiable-link" href="#index-tool_002dbar_002dborder"> &para;</a></span></dt>
<dd><p>この変数はツールバーエリアの下に描画するボーダー高さを指定する。値が整数なら高さのピクセル数。値が<code class="code">internal-border-width</code>(デフォルト)か<code class="code">border-width</code>のいずれかなら、ツールバーのボーダー高さはそのフレームの対応するパラメーターとなる。
</p></dd></dl>

<p>シフトやメタ等の修飾キーを押下した状態でのツールバーアイテムのクリックに特別な意味を付与できます。偽りのファンクションキーを通じて元のアイテムに関連する追加アイテムをセットアップすることによって、これを行うことができます。より具体的には追加アイテムは、元のアイテムの命名に使用されたのと同じ偽ファンクションキーの修飾されたバージョンを使用するべきです。
</p>
<p>つまり元のアイテムが以下のように定義されていれば、
</p>
<div class="example">
<pre class="example-preformatted">(define-key global-map [tool-bar shell]
  '(menu-item &quot;Shell&quot; shell
              :image (image :type xpm :file &quot;shell.xpm&quot;)))
</pre></div>

<p>シフト修飾とともに同じツールバーイメージをクリックしたときを以下のような方法で定義することができます:
</p>
<div class="example">
<pre class="example-preformatted">(define-key global-map [tool-bar S-shell] 'some-command)
</pre></div>

<p>ファンクションキーに修飾を追加する方法についての詳細な情報は、<a class="ref" href="Function-Keys.html">ファンクションキー</a>を参照してください。
</p>
<p>ツールバーアイテムを有効または無効に変更する関数があるとしても、その状態を必ずしも視覚的に即座に更新される訳ではありません。ツールバーの再計算を強制するには<code class="code">force-mode-line-update</code>を呼び出してください(<a class="ref" href="Mode-Line-Format.html">モードラインのフォーマット</a>を参照)。
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Modifying-Menus.html">メニューの変更</a>, Previous: <a href="Menu-Bar.html">メニューバー</a>, Up: <a href="Menu-Keymaps.html">メニューキーアップ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-30_69b16e5c63840479270d32f58daea923fe725b90, commit:8c196e027afcda4529432b01ae733033b6ca1270 to check Japanese translation.
</body>
</html>
