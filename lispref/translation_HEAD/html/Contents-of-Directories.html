<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.91.

Copyright © 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Contents of Directories (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Contents of Directories (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Contents of Directories (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="December 23, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Create_002fDelete-Dirs.html" rel="next" title="Create/Delete Dirs">
<link href="File-Names.html" rel="prev" title="File Names">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Contents-of-Directories">
<div class="nav-panel">
<p>
Next: <a href="Create_002fDelete-Dirs.html" accesskey="n" rel="next">ディレクトリーの作成・コピー・削除</a>, Previous: <a href="File-Names.html" accesskey="p" rel="prev">ファイルの名前</a>, Up: <a href="Files.html" accesskey="u" rel="up">ファイル</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="deirekutorinokontentu"><span>26.10 ディレクトリーのコンテンツ<a class="copiable-link" href="#deirekutorinokontentu"> &para;</a></span></h3>
<a class="index-entry-id" id="index-directory_002doriented-functions"></a>
<a class="index-entry-id" id="index-file-names-in-directory"></a>

<p>ディレクトリーとはファイルの一種であり、さまざまな名前のファイルを含んでいます。ディレクトリーはファイルシステムの機能です。
</p>
<p>Emacsはディレクトリー内のファイル名をLispのリストとして一覧したり、シェルコマンド<code class="code">ls</code>を使用してバッファー内にファイル名を表示することができます。後者の場合には、Emacsはオプションで各ファイルに関する情報も表示でき、それは<code class="code">ls</code>コマンドに渡すオプションに依存します。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dfiles"><span class="category-def">Function: </span><span><strong class="def-name">directory-files</strong> <var class="def-var-arguments">directory &amp;optional full-name match-regexp nosort count</var><a class="copiable-link" href="#index-directory_002dfiles"> &para;</a></span></dt>
<dd><p>この関数はディレクトリー<var class="var">directory</var>内のファイルの名前のリストをリターンする。デフォルトではリストはアルファベット順。
</p>
<p>この関数は<var class="var">full-name</var>が非<code class="code">nil</code>ならファイルの絶対ファイル名、それ以外なら指定されたディレクトリーにたいする相対ファイル名をリターンする。
</p>
<p><var class="var">match-regexp</var>が非<code class="code">nil</code>なら、この関数は非ディレクトリー部分に正規表現へのマッチを含むファイル名だけをリターンして、それ以外のファイル名はリストから除外される。case(大文字小文字)を区別するファイルシステムでは、caseを区別する正規表現マッチングが行われる。
</p>
<p><var class="var">nosort</var>が非<code class="code">nil</code>なら<code class="code">directory-files</code>はリストをソートしないので、取得するファイル名に特定の順序はない。最大限の可能なスピードを得る必要がありファイル処理順を気にしなければこれを使用する。ユーザーから処理順が可視なら、名前をソートすれば多分ユーザーはより幸せになるだろう。
</p>
<p><var class="var">count</var>が非<code class="code">nil</code>なら最初の<var class="var">count</var>個のファイル名、またはすべてのファイル名のいずれか早いほうをリターンする。<var class="var">count</var>は0より大な整数であること。
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(directory-files &quot;~lewis&quot;)
     &rArr; (&quot;#foo#&quot; &quot;#foo.el#&quot; &quot;.&quot; &quot;..&quot;
         &quot;dired-mods.el&quot; &quot;files-ja.texi&quot;
         &quot;files-ja.texi.~1~&quot;)
</pre></div></div>

<p><var class="var">directory</var>が読み取り可能なディレクトリー名でなければエラーがシグナルされる。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dempty_002dp"><span class="category-def">Function: </span><span><strong class="def-name">directory-empty-p</strong> <var class="def-var-arguments">directory</var><a class="copiable-link" href="#index-directory_002dempty_002dp"> &para;</a></span></dt>
<dd><p>このユーティリティー関数は与えられた<var class="var">directory</var>がアクセス可能なディレクトリーかつ何のファイルも含まない(空ディレクトリー)場合には<code class="code">t</code>をリターンする。ディレクトリー内のファイルとして&lsquo;<samp class="samp">.</samp>&rsquo;や&lsquo;<samp class="samp">..</samp>&rsquo;をリターンするシステムでは、それらは無視される。
</p>
<p>ディレクトリーへのシンボリックリンクはディレクトリーとみなされる。シンボリックリンクと区別する方法については<var class="var">file-symlink-p</var>を参照のこと。
</p></dd></dl>

<a class="index-entry-id" id="index-recursive-traverse-of-directory-tree"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dfiles_002drecursively"><span class="category-def">Function: </span><span><strong class="def-name">directory-files-recursively</strong> <var class="def-var-arguments">directory regexp &amp;optional include-directories predicate follow-symlinks</var><a class="copiable-link" href="#index-directory_002dfiles_002drecursively"> &para;</a></span></dt>
<dd><p><var class="var">regexp</var>にマッチする名前をもつ<var class="var">directory</var>配下のすべてのファイルをリターンする。この関数はベースネーム(basename:
先行するディレクトリー部分を除外したファイル名)が<var class="var">regexp</var>にマッチするファイルを、<var class="var">directory</var>とそのサブディレクトリーを再帰的に検索して、マッチしたファイルの絶対ファイル名(<a class="ref" href="Relative-File-Names.html">absolute file
names</a>を参照)のリストをリターンする。ファイル名は深さ優先順でリターンされ、それは親ディレクトリーの前に任意のサブディレクトリー内のファイルが配置されることを意味する。加えて各ディレクトリー内で見つかったファイルはベースネームにもとづいてソートされる。デフォルトでは<var class="var">regexp</var>にマッチする名前のディレクトリーはリストから省略されるが、オプション引数<var class="var">include-directories</var>が非<code class="code">nil</code>ならそれらも含まれる。
</p>
<p>デフォルトではすべてのサブディレクトリーが含まれる。<var class="var">predicate</var>が<code class="code">t</code>ならサブディレクトリーを含める際のエラー(たとえばそのユーザーでは読み取り不可の場合)は無視される。<code class="code">nil</code>や<code class="code">t</code>以外なら、1つのパラメーター(サブディレクトリー名)を受け取り、そのディレクトリーを含める場合には非<code class="code">nil</code>をリターンする関数であること。
</p>
<p>デフォルトではサブディレクトリーへのシンボリックリンクはフォローしないが、<var class="var">follow-symlinks</var>が非<code class="code">nil</code>ならフォローする。
</p></dd></dl>


<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-locate_002ddominating_002dfile"><span class="category-def">Function: </span><span><strong class="def-name">locate-dominating-file</strong> <var class="def-var-arguments">file name</var><a class="copiable-link" href="#index-locate_002ddominating_002dfile"> &para;</a></span></dt>
<dd><p><var class="var">file</var>から開始してディレクトリーツリー階層を上方に<var class="var">name</var>
(文字列)というディレクトリーを検索して、最初に見つけたディレクトリーをリターンする。<var class="var">file</var>がファイルならファイルのディレクトリーが検索の開始位置、それ以外なら<var class="var">file</var>は検索を開始するディレクトリーであること。この関数は開始ディレクトリーを調べて、それからその親ディレクトリー、更にその親ディレクトリー、...のように<var class="var">name</var>というディレクトリーを見つけるか、あるいは<var class="var">name</var>が見つけることなくファイルシステムのロートディレクトリーに到達するまで検索を行う。後者の場合には<code class="code">nil</code>をリターンする。
</p>
<p>引数<code class="code">name</code>は述語関数でもよい。この述語は関数により検査される、<var class="var">file</var>
(<var class="var">file</var>がディレクトリーでない場合でも)から開始されるすべてのディレクトリーにたいして呼び出される。この述語は1つの引数(ファイルかディレクトリー)で呼び出されて、それが検索しているディレクトリーなら非<code class="code">nil</code>をリターンすること。
</p></dd></dl>

<a class="index-entry-id" id="index-parent-directory-of-file"></a>
<a class="index-entry-id" id="index-ancestor-directory-of-file"></a>
<a class="index-entry-id" id="index-file_002c-ancestor-directory-of"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-file_002din_002ddirectory_002dp"><span class="category-def">Function: </span><span><strong class="def-name">file-in-directory-p</strong> <var class="def-var-arguments">file dir</var><a class="copiable-link" href="#index-file_002din_002ddirectory_002dp"> &para;</a></span></dt>
<dd><p>この関数は、<var class="var">file</var>がディレクトリー<var class="var">dir</var>内のファイルかサブディレクトリーなら<code class="code">t</code>をリターンする。また<var class="var">file</var>と<var class="var">dir</var>が同じディレクトリーの場合も<code class="code">t</code>をリターンする。この関数は2つのディレクトリーの実名を比較する。<var class="var">dir</var>が既存のディレクトリーの名前でなければリターン値は<code class="code">nil</code>。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dfiles_002dand_002dattributes"><span class="category-def">Function: </span><span><strong class="def-name">directory-files-and-attributes</strong> <var class="def-var-arguments">directory &amp;optional full-name match-regexp nosort id-format count</var><a class="copiable-link" href="#index-directory_002dfiles_002dand_002dattributes"> &para;</a></span></dt>
<dd><p>これはどのファイルを報告するか、およびファイル名を報告する方法において<code class="code">directory-files</code>と似ている。しかしこの関数はファイル名のリストをリターンするかわりに、各ファイルごとにリスト<code class="code">(<var class="var">filename</var>
.
<var class="var">attributes</var>)</code>をリターンする。ここで<var class="var">attributes</var>は、そのファイルにたいして<code class="code">file-attributes</code>がリターンする値。オプション引数<var class="var">id-format</var>は、<code class="code">file-attributes</code>の対応する引数と同じ意味をもつ(<a class="ref" href="File-Attributes.html#Definition-of-file_002dattributes">Definition of file-attributes</a>を参照)。
</p></dd></dl>

<dl class="first-defvr">
<dt class="defvr" id="index-directory_002dfiles_002dno_002ddot_002dfiles_002dregexp"><span class="category-def">Constant: </span><span><strong class="def-name">directory-files-no-dot-files-regexp</strong><a class="copiable-link" href="#index-directory_002dfiles_002dno_002ddot_002dfiles_002dregexp"> &para;</a></span></dt>
<dd><p>この正規表現は&lsquo;<samp class="samp">.</samp>&rsquo;と&lsquo;<samp class="samp">..</samp>&rsquo;を除いたすべてのファイル名にマッチする。より正確にはこれら2つを除いたすべての空文字列以外の部分にマッチする。これは<code class="code">directory-files</code>および<code class="code">directory-files-and-attributes</code>の<var class="var">match-regexp</var>引数として有用。
</p>
<div class="example">
<pre class="example-preformatted">(directory-files &quot;/foo&quot; nil directory-files-no-dot-files-regexp)
</pre></div>

<p>ディレクトリー&lsquo;<samp class="samp">/foo</samp>&rsquo;が空なら<code class="code">nil</code>をリターンする。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-file_002dexpand_002dwildcards"><span class="category-def">Function: </span><span><strong class="def-name">file-expand-wildcards</strong> <var class="def-var-arguments">pattern &amp;optional full regexp</var><a class="copiable-link" href="#index-file_002dexpand_002dwildcards"> &para;</a></span></dt>
<dd><p>この関数はワイルドカードパターン<var class="var">pattern</var>を展開して、それにマッチするファイル名のリストをリターンする。
</p>
<p><var class="var">pattern</var>はデフォルトでは&lsquo;<samp class="samp">&quot;/tmp/*.png&quot;</samp>&rsquo;や&lsquo;<samp class="samp">&quot;/*/*/foo.png&quot;</samp>&rsquo;のような&ldquo;glob&rdquo;あるいはワイルドカード文字列だが、オプションの<var class="var">regexp</var>パラメーターが非<code class="code">nil</code>なら正規表現でもよい。いずれの場合でもマッチが親ディレクトリーとサブディレクトリーにまたがらないように、サブディレクトリーごとに適用される。
</p>
<p>絶対ファイル名として<var class="var">pattern</var>が記述されると値も絶対ファイル名になる。
</p>
<p><var class="var">pattern</var>が相対ファイル名で記述されていれば、それはカレントデフォルトディレクトリーにたいして相対的に解釈される。通常はリターンされるファイル名もカレントデフォルトディレクトリーにたいする相対ファイル名になる。しかし<var class="var">full</var>が非<code class="code">nil</code>なら絶対ファイル名がリターンされる。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-insert_002ddirectory"><span class="category-def">Function: </span><span><strong class="def-name">insert-directory</strong> <var class="def-var-arguments">file switches &amp;optional wildcard full-directory-p</var><a class="copiable-link" href="#index-insert_002ddirectory"> &para;</a></span></dt>
<dd><p>この関数は<code class="code">ls</code>の<var class="var">switches</var>に対応するフォーマットで、(カレントバッファー内に)ディレクトリー<var class="var">file</var>のディレクトリーリストを挿入する。これは挿入したテキストの後にポイントを残す。<var class="var">switches</var>にはオプション文字列、または個別のオプションを表す文字列リストを指定できる。
</p>
<p>引数<var class="var">file</var>にはディレクトリー、またはワイルドカード文字を含むファイル名を指定できる。<var class="var">wildcard</var>が非<code class="code">nil</code>なら<var class="var">file</var>はワイルドカードを伴うファイル指定として扱われることを意味する。
</p>
<p><var class="var">full-directory-p</var>が非<code class="code">nil</code>なら、ディレクトリーリストにたいしてディレクトリーの完全なコンテンツ表示を要求することを意味する。<var class="var">file</var>がディレクトリーでスイッチに&lsquo;<samp class="samp">-d</samp>&rsquo;が含まれないときには、<code class="code">t</code>を指定すること(<code class="code">ls</code>へのオプション&lsquo;<samp class="samp">-d</samp>&rsquo;は、ディレクトリーのコンテンツではなくファイルとしてディレクトリーを表示するよう指定する)。
</p>
<p>ほとんどのシステムでは、この関数は変数<code class="code">insert-directory-program</code>の名前のディレクトリーリスト用プログラムを実行することにより機能する。<var class="var">wildcard</var>が非<code class="code">nil</code>なら、ワイルドカード展開するために<code class="code">shell-file-name</code>で指定されるシェルの実行も行う。
</p>
<p>MS-DOSとMS-Windowsシステムは標準的なUnixプログラム<code class="code">ls</code>を欠くので、この関数はLispコードで<code class="code">ls</code>をエミュレートする。
</p>
<p>技術的な詳細としては<var class="var">switches</var>にロングオプション&lsquo;<samp class="samp">--dired</samp>&rsquo;が含まれる際に、<code class="code">insert-directory</code>はdiredのためにこれを特別に扱う。しかし他のオプションと同様、通常は等価なショートオプション&lsquo;<samp class="samp">-D</samp>&rsquo;が単に<code class="code">insert-directory-program</code>に渡されるだけである。
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-insert_002ddirectory_002dprogram"><span class="category-def">Variable: </span><span><strong class="def-name">insert-directory-program</strong><a class="copiable-link" href="#index-insert_002ddirectory_002dprogram"> &para;</a></span></dt>
<dd><p>この変数の値は関数<code class="code">insert-directory</code>用にディレクトリーリストを生成するプログラムである。この値はLispコードでこのリストを生成するシステムでは無視される。
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Create_002fDelete-Dirs.html">ディレクトリーの作成・コピー・削除</a>, Previous: <a href="File-Names.html">ファイルの名前</a>, Up: <a href="Files.html">ファイル</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-30_69b16e5c63840479270d32f58daea923fe725b90, commit:cf99195563dea1cc2961cdd16b16ca0e27c2cb48 to check Japanese translation.
</body>
</html>
