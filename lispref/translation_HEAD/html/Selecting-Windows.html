<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.1.

Copyright (C) 1990-1996, 1998-2023 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Selecting Windows (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Selecting Windows (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Selecting Windows (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="August 2, 2023">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Window-Sizes.html" rel="next" title="Window Sizes">
<link href="Windows-and-Frames.html" rel="prev" title="Windows and Frames">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="section" id="Selecting-Windows">
<div class="header">
<p>
Next: <a href="Window-Sizes.html" accesskey="n" rel="next">ウィンドウのサイズ</a>, Previous: <a href="Windows-and-Frames.html" accesskey="p" rel="prev">ウィンドウとフレーム</a>, Up: <a href="Windows.html" accesskey="u" rel="up">ウィンドウ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="uindounoXuan-Ze-"></span><h3 class="section">29.3 ウィンドウの選択</h3>
<span id="index-selecting-a-window"></span>

<span id="index-selected-window"></span>
<span id="index-window-selected-within-a-frame"></span>
<p>それぞれのフレーム内において、常にただ1つのEmacsウィンドウが<em>そのフレームで選択されている(selected within the
frame)</em>として指定されます。選択されたフレームにたいしてそのウィンドウは<em>選択されたウィンドウ(selected
window)</em>と呼ばれます。選択されたウィンドウは編集のほとんどが行われるウィンドウであり、選択されたウィンドウに表示されるカーソルがあるウィンドウです(<a href="Cursor-Parameters.html">カーソルのパラメーター</a>を参照)。テキストの挿入や削除を行うキーボード入力もそのウィンドウにたいして行われます。選択されたウィンドウのバッファーは、通常は<code>set-buffer</code>が使用された場合を除いてカレントバッファーでもあります(<a href="Current-Buffer.html">カレントバッファー</a>を参照)。選択されていないフレームでは、そのフレームが選択されたときはフレームで選択されていたウィンドウが選択されたウィンドウになります。
</p>
<dl class="def">
<dt id="index-selected_002dwindow"><span class="category">Function: </span><span><strong>selected-window</strong><a href='#index-selected_002dwindow' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>この関数は選択されたウィンドウをリターンする(これは常に生きたウィンドウ)。
</p></dd></dl>

<p>以下の関数はウィンドウとそのフレームを明示的に選択します。
</p>
<dl class="def">
<dt id="index-select_002dwindow"><span class="category">Function: </span><span><strong>select-window</strong> <em>window &amp;optional norecord</em><a href='#index-select_002dwindow' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>この関数は<var>window</var>を選択されたウィンドウにすることによりそのフレーム内で選択されたウィンドウとして、そのフレームを選択する。また<var>window</var>のバッファー(<a href="Buffers-and-Windows.html">バッファーとウィンドウ</a>を参照)をカレントにして、そのバッファーの<code>point</code>の値(<a href="Window-Point.html">ウィンドウとポイント</a>を参照)を<var>window</var>の<code>window-point</code>の値にセットする。<var>window</var>は生きたウィンドウでなければならない。リターン値は<var>window</var>。
</p>
<p>デフォルトではこの関数は<var>window</var>のバッファーをバッファーリストの先頭(<a href="Buffer-List.html">バッファーリスト</a>を参照)に移動して、<var>window</var>をもっとも最近選択されたウィンドウにする。オプション引数<var>norecord</var>が非<code>nil</code>なら、これらの追加処理は省略される。
</p>
<p>加えてこの関数はデフォルトでは<var>window</var>のフレームの次回再表示の際に<var>window</var>を更新するようにディスプレイエンジンに指示する。<var>norecord</var>が非<code>nil</code>なら、そのような更新は通常は行わない。しかし<var>norecord</var>が特別なシンボル<code>mark-for-redisplay</code>と等しければ上述の追加アクションは省略されるが、それにも関わらず<var>window</var>の表示は更新される。
</p>
<p>ウィンドウを選択することではウィンドウの表示やそのフレームをディスプレイ上の最上フレームにすることを満足しない場合があることに注意。さらにそのフレームのレイズやフレームにフォーカスが当たることを確実にする必要もあるだろう。<a href="Input-Focus.html">入力のフォーカス</a>を参照のこと。
</p></dd></dl>

<span id="index-select-window-hooks"></span>
<span id="index-running-a-hook-when-a-window-gets-selected"></span>
<p>歴史的な理由によりウィンドウ選択時にEmacsが個別にフックを実行することはありません。アプリケーションや内部ルーチンがあるウィンドウ上でいくつかの処理を行うために一時的にウィンドウを選択することはよくあります。これらは<var>window</var>引数が何も指定されていなければデフォルトでは選択されたウィンドウを処理する関数が多数存在するのでコーディングを単純化するために、あるいは引数としてウィンドウを受け取らないために常に選択されたウィンドウを処理する関数がいくつか存在した(そして今も存在する)ためにこれを行います。あるウィンドウが短時間選択されたときと、以前に選択されていたウィンドウがリストアされるたびに毎回フックを実行するのは有用ではありません。
</p>
<p>しかし<var>norecord</var>引数が<code>nil</code>の際には<code>select-window</code>がバッファーリストを更新するので、間接的にノーマルフック<code>buffer-list-update-hook</code>が実行されます(<a href="Buffer-List.html">バッファーリスト</a>を参照)。結果としてこのフックは、あるウィンドウがより&ldquo;永続的&rdquo;に選択された際に関数を実行する1つの手段を提供します。
</p>
<p><code>buffer-list-update-hook</code>はウィンドウ管理とは無関係な関数によっても実行されるので、選択されたウィンドウの値を何かに保存しておいて、このフックの実行中に<code>selected-window</code>の値と比較することには意味があります。<code>buffer-list-update-hook</code>を使用する際の誤検出を防ぐためにも、一時的にのみウィンドウの選択を意図する<code>select-window</code>の呼び出しごとに<var>norecord</var>引数に非<code>nil</code>を渡すことはよい習慣です。そのような場合にはマクロ<code>with-selected-window</code>
(以下参照)を使用するべきです。
</p>
<p>最後の再表示以降に別ウィンドウが選択されたことを再表示ルーチンが検知した際には、常にEmacsはフック<code>window-selection-change-functions</code>も実行します。詳細な説明は<a href="Window-Hooks.html">ウィンドウのスクロールと変更のためのフック</a>を参照してください。(同じセクションに記載されている)
<code>window-state-change-functions</code>は別ウィンドウ選択後に実行される別のアブノーマルフックですが、これは他のウィンドウの変更時にも同様にトリガーされます。
</p>
<span id="index-most-recently-selected-windows"></span>
<p>引数<var>norecord</var>に非<code>nil</code>を指定した<code>select-window</code>の連続呼び出しは、ウィンドウの並び順を選択または使用時刻により決定します(以下参照)。関数<code>get-lru-window</code>はたとえば、もっとも昔に選択されたウィンドウ(<a href="Cyclic-Window-Ordering.html">ウィンドウのサイクル順</a>を参照)を取得するために使用できます。
</p>
<dl class="def">
<dt id="index-frame_002dselected_002dwindow"><span class="category">Function: </span><span><strong>frame-selected-window</strong> <em>&amp;optional frame</em><a href='#index-frame_002dselected_002dwindow' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>この関数はフレーム<var>frame</var>内で選択されているウィンドウをリターンする。<var>frame</var>は生きたフレームであること。省略または<code>nil</code>の場合のデフォルトは選択されたフレーム。
</p></dd></dl>

<dl class="def">
<dt id="index-set_002dframe_002dselected_002dwindow"><span class="category">Function: </span><span><strong>set-frame-selected-window</strong> <em>frame window &amp;optional norecord</em><a href='#index-set_002dframe_002dselected_002dwindow' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>This function makes <var>window</var> the window selected within the frame
<var>frame</var>.  <var>frame</var> should be a live frame; if <code>nil</code>, it defaults
to the selected frame.  <var>window</var> must denote a live window.
</p>
<p><var>frame</var>が選択されたフレームなら、<var>window</var>を選択されたウィンドウにする。
</p>
<p>オプション引数<var>norecord</var>が非<code>nil</code>なら、この関数はもっとも最近に選択されたウィンドウやバッファーリストのいずれの順序も変更はしない。
</p></dd></dl>

<p>以下のマクロはもっとも最近選択されたウィンドウやバッファーリストの順序に影響を与えずにウィンドウを一時的に選択するのに有用です。
</p>
<dl class="def">
<dt id="index-save_002dselected_002dwindow"><span class="category">Macro: </span><span><strong>save-selected-window</strong> <em>forms&hellip;</em><a href='#index-save_002dselected_002dwindow' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>このマクロは選択されたフレーム、同様に各フレームの選択されたウィンドウを記録して、<var>forms</var>を順に実行してから以前に選択されていたフレームとウィンドウをリストアする。これはカレントバッファーの保存とリストアも行う。リターン値は<var>forms</var>内の最後のフォームの値。
</p>
<p>このマクロはウィンドウのサイズ、コンテンツ、配置についての保存やリストアは何も行わない。したがって<var>forms</var>がそれらを変更すると、その変更は永続化される。あるフレームにおいて以前に選択されていたウィンドウが<var>forms</var>のexit時にすでに生きていなければ、そのフレームの選択されたウィンドウはそのまま放置される。以前に選択されていたウィンドウがすでに生きていなければ<var>forms</var>の最後に選択されていたウィンドウが何であれ、それが選択されたままになる。カレントバッファー<var>forms</var>のexit時にそれが生きている場合のみリストアされる。
</p>
<p>このマクロは、もっとも最近に選択されたウィンドウとバッファーリストの順番をいずれも変更しない。
</p></dd></dl>

<dl class="def">
<dt id="index-with_002dselected_002dwindow"><span class="category">Macro: </span><span><strong>with-selected-window</strong> <em>window forms&hellip;</em><a href='#index-with_002dselected_002dwindow' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>このマクロは<var>window</var>を選択して<var>forms</var>を順に実行してから、以前に選択されていたウィンドウとカレントバッファーをリストアする。たとえば引数<var>norecord</var>を<code>nil</code>で<code>select-window</code>を呼び出す等、<var>forms</var>内で故意に変更しない限り、もっとも最近に選択されたウィンドウとバッファーリストの順番は変更されない。したがってこのマクロは不要な<code>buffer-list-update-hook</code>の実行なしに、<var>window</var>を選択されたウィンドウとして一時的に作業するために好ましい手段である。
</p>
<p>Note that this macro temporarily puts the window management code in an
unstable state.  In particular, the most recently used window (see below)
will not necessarily match the selected one.  Hence, functions like
<code>get-lru-window</code> and <code>get-mru-window</code> may return unexpected
results when called from the body of this macro.
</p></dd></dl>

<dl class="def">
<dt id="index-with_002dselected_002dframe"><span class="category">Macro: </span><span><strong>with-selected-frame</strong> <em>frame forms&hellip;</em><a href='#index-with_002dselected_002dframe' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>このマクロは<var>frame</var>を選択したフレームとして<var>forms</var>を実行する。リターン値は<var>forms</var>の最後のフォームの値。このマクロは選択されたフレームの保存とリストアを行い、もっとも最近に選択されたフレーム、およびバッファーリスト内のバッファーのどちらの順序も変更しない。
</p></dd></dl>

<span id="index-window-use-time"></span>
<span id="index-use-time-of-window"></span>
<span id="index-window-order-by-time-of-last-use"></span>
<dl class="def">
<dt id="index-window_002duse_002dtime"><span class="category">Function: </span><span><strong>window-use-time</strong> <em>&amp;optional window</em><a href='#index-window_002duse_002dtime' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>この関数はウィンドウ<var>window</var>の使用回数をリターンする。<var>window</var>は生きたウィンドウでなければならずデフォルトは選択されたウィンドウ。
</p>
<p>The <em>use time</em> of a window is not really a time value, but an integer
that does increase monotonically with each call of <code>select-window</code> with
a <code>nil</code> <var>norecord</var> argument.  The window with the lowest use time
is usually called the least recently used window.  The window with the
highest use time is called the most recently used one (see <a href="Cyclic-Window-Ordering.html">ウィンドウのサイクル順</a>) and is usually the selected window unless
<code>with-selected-window</code> has been used.
</p></dd></dl>

<dl class="def">
<dt id="index-window_002dbump_002duse_002dtime"><span class="category">Function: </span><span><strong>window-bump-use-time</strong> <em>&amp;optional window</em><a href='#index-window_002dbump_002duse_002dtime' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>This function marks <var>window</var> as being the second most recently used one
(after the selected window).  It does nothing if <var>window</var> is the
selected window or the selected window does not have the highest use time
among all windows which may happen within the scope of
<code>with-selected-window</code>.
</p></dd></dl>

<span id="Window-Group"></span><p>たとえばFollowモード(<a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Follow-Mode.html#Follow-Mode">(emacs)Follow Mode</a>を参照)の管理下では、あるウィンドウが単独で表示可能な部分より大きい部分をそのウィンドウにまとめて表示するように、複数のウィンドウが集合かつ協調してバッファーを表示することがあります。そのような<em>ウィンドウグループ(window
group)</em>を1つのエンティティーとしてとらえると便利なことがよくあります。<code>window-group-start</code>
(<a href="Window-Start-and-End.html">ウィンドウの開始位置と終了位置</a>を参照)のようないくつかの関数では、グループ全体の代表としてウィンドウの1つを引数に与えることにより、これを行うことができます。
</p>
<dl class="def">
<dt id="index-selected_002dwindow_002dgroup"><span class="category">Function: </span><span><strong>selected-window-group</strong><a href='#index-selected_002dwindow_002dgroup' class='copiable-anchor'> &para;</a></span></dt>
<dd><span id="index-selected_002dwindow_002dgroup_002dfunction"></span>
<p>選択されたウィンドウがウィンドウグループのメンバーなら、この関数はそのバッファーの最前箇所を表示するウィンドウが先頭になる順序で、グループ内のウィンドウのリストをリターンする。それ以外なら、この関数は選択されたウィンドウだけを含むリストをリターンする。
</p>
<p>バッファーローカル変数<code>selected-window-group-function</code>が関数にセットされているときは、選択されたウィンドウはグループの一部とみなされる。この場合には、<code>selected-window-group</code>はその関数を引数なしで呼び出し、その結果をリターンする(これはそのグループ内のウィンドウのリストであること)。
</p></dd></dl>


</div>
<hr>
<div class="header">
<p>
Next: <a href="Window-Sizes.html">ウィンドウのサイズ</a>, Previous: <a href="Windows-and-Frames.html">ウィンドウとフレーム</a>, Up: <a href="Windows.html">ウィンドウ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-29_c2d95dd00e6cb0abaf4e7550f38c8c2c9ca22f2d, commit:8154382786bf2b0a317f67e75294f635eea4c1a7 to check Japanese translation.
</body>
</html>
