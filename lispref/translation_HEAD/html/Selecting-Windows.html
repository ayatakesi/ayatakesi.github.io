<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.91.

Copyright © 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Selecting Windows (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Selecting Windows (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Selecting Windows (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="December 26, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Window-Sizes.html" rel="next" title="Window Sizes">
<link href="Windows-and-Frames.html" rel="prev" title="Windows and Frames">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Selecting-Windows">
<div class="nav-panel">
<p>
Next: <a href="Window-Sizes.html" accesskey="n" rel="next">ウィンドウのサイズ</a>, Previous: <a href="Windows-and-Frames.html" accesskey="p" rel="prev">ウィンドウとフレーム</a>, Up: <a href="Windows.html" accesskey="u" rel="up">ウィンドウ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="uindounoXuan-Ze-"><span>29.3 ウィンドウの選択<a class="copiable-link" href="#uindounoXuan-Ze-"> &para;</a></span></h3>
<a class="index-entry-id" id="index-selecting-a-window"></a>

<a class="index-entry-id" id="index-selected-window"></a>
<a class="index-entry-id" id="index-window-selected-within-a-frame"></a>
<p>それぞれのフレーム内において、常にただ1つのEmacsウィンドウが<em class="dfn">そのフレームで選択されている(selected within the
frame)</em>として指定されます。選択されたフレームにたいしてそのウィンドウは<em class="dfn">選択されたウィンドウ(selected
window)</em>と呼ばれます。選択されたウィンドウは編集のほとんどが行われるウィンドウであり、選択されたウィンドウに表示されるカーソルがあるウィンドウです(<a class="ref" href="Cursor-Parameters.html">カーソルのパラメーター</a>を参照)。テキストの挿入や削除を行うキーボード入力もそのウィンドウにたいして行われます。選択されたウィンドウのバッファーは、通常は<code class="code">set-buffer</code>が使用された場合を除いてカレントバッファーでもあります(<a class="ref" href="Current-Buffer.html">カレントバッファー</a>を参照)。選択されていないフレームでは、そのフレームが選択されたときはフレームで選択されていたウィンドウが選択されたウィンドウになります。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-selected_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">selected-window</strong><a class="copiable-link" href="#index-selected_002dwindow"> &para;</a></span></dt>
<dd><p>この関数は選択されたウィンドウをリターンする(これは常に生きたウィンドウ)。
</p></dd></dl>

<p>以下の関数はウィンドウとそのフレームを明示的に選択します。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-select_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">select-window</strong> <var class="def-var-arguments">window &amp;optional norecord</var><a class="copiable-link" href="#index-select_002dwindow"> &para;</a></span></dt>
<dd><p>この関数は<var class="var">window</var>を選択されたウィンドウにすることによりそのフレーム内で選択されたウィンドウとして、そのフレームを選択する。また<var class="var">window</var>のバッファー(<a class="ref" href="Buffers-and-Windows.html">バッファーとウィンドウ</a>を参照)をカレントにして、そのバッファーの<code class="code">point</code>の値(<a class="ref" href="Window-Point.html">ウィンドウとポイント</a>を参照)を<var class="var">window</var>の<code class="code">window-point</code>の値にセットする。<var class="var">window</var>は生きたウィンドウでなければならない。リターン値は<var class="var">window</var>。
</p>
<p>デフォルトではこの関数は<var class="var">window</var>のバッファーをバッファーリストの先頭(<a class="ref" href="Buffer-List.html">バッファーリスト</a>を参照)に移動して、<var class="var">window</var>をもっとも最近選択されたウィンドウにする。オプション引数<var class="var">norecord</var>が非<code class="code">nil</code>なら、これらの追加処理は省略される。
</p>
<p>加えてこの関数はデフォルトでは<var class="var">window</var>のフレームの次回再表示の際に<var class="var">window</var>を更新するようにディスプレイエンジンに指示する。<var class="var">norecord</var>が非<code class="code">nil</code>なら、そのような更新は通常は行わない。しかし<var class="var">norecord</var>が特別なシンボル<code class="code">mark-for-redisplay</code>と等しければ上述の追加アクションは省略されるが、それにも関わらず<var class="var">window</var>の表示は更新される。
</p>
<p>ウィンドウを選択することではウィンドウの表示やそのフレームをディスプレイ上の最上フレームにすることを満足しない場合があることに注意。さらにそのフレームのレイズやフレームにフォーカスが当たることを確実にする必要もあるだろう。<a class="ref" href="Input-Focus.html">入力のフォーカス</a>を参照のこと。
</p></dd></dl>

<a class="index-entry-id" id="index-select-window-hooks"></a>
<a class="index-entry-id" id="index-running-a-hook-when-a-window-gets-selected"></a>
<p>歴史的な理由によりウィンドウ選択時にEmacsが個別にフックを実行することはありません。アプリケーションや内部ルーチンがあるウィンドウ上でいくつかの処理を行うために一時的にウィンドウを選択することはよくあります。これらは<var class="var">window</var>引数が何も指定されていなければデフォルトでは選択されたウィンドウを処理する関数が多数存在するのでコーディングを単純化するために、あるいは引数としてウィンドウを受け取らないために常に選択されたウィンドウを処理する関数がいくつか存在した(そして今も存在する)ためにこれを行います。あるウィンドウが短時間選択されたときと、以前に選択されていたウィンドウがリストアされるたびに毎回フックを実行するのは有用ではありません。
</p>
<p>しかし<var class="var">norecord</var>引数が<code class="code">nil</code>の際には<code class="code">select-window</code>がバッファーリストを更新するので、間接的にノーマルフック<code class="code">buffer-list-update-hook</code>が実行されます(<a class="ref" href="Buffer-List.html">バッファーリスト</a>を参照)。結果としてこのフックは、あるウィンドウがより&ldquo;永続的&rdquo;に選択された際に関数を実行する1つの手段を提供します。
</p>
<p><code class="code">buffer-list-update-hook</code>はウィンドウ管理とは無関係な関数によっても実行されるので、選択されたウィンドウの値を何かに保存しておいて、このフックの実行中に<code class="code">selected-window</code>の値と比較することには意味があります。<code class="code">buffer-list-update-hook</code>を使用する際の誤検出を防ぐためにも、一時的にのみウィンドウの選択を意図する<code class="code">select-window</code>の呼び出しごとに<var class="var">norecord</var>引数に非<code class="code">nil</code>を渡すことはよい習慣です。そのような場合にはマクロ<code class="code">with-selected-window</code>
(以下参照)を使用するべきです。
</p>
<p>最後の再表示以降に別ウィンドウが選択されたことを再表示ルーチンが検知した際には、常にEmacsはフック<code class="code">window-selection-change-functions</code>も実行します。詳細な説明は<a class="ref" href="Window-Hooks.html">ウィンドウのスクロールと変更のためのフック</a>を参照してください。(同じセクションに記載されている)
<code class="code">window-state-change-functions</code>は別ウィンドウ選択後に実行される別のアブノーマルフックですが、これは他のウィンドウの変更時にも同様にトリガーされます。
</p>
<a class="index-entry-id" id="index-most-recently-selected-windows"></a>
<p>引数<var class="var">norecord</var>に非<code class="code">nil</code>を指定した<code class="code">select-window</code>の連続呼び出しは、ウィンドウの並び順を選択または使用時刻により決定します(以下参照)。関数<code class="code">get-lru-window</code>はたとえば、もっとも昔に選択されたウィンドウ(<a class="ref" href="Cyclic-Window-Ordering.html">ウィンドウのサイクル順</a>を参照)を取得するために使用できます。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-frame_002dselected_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">frame-selected-window</strong> <var class="def-var-arguments">&amp;optional frame</var><a class="copiable-link" href="#index-frame_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>この関数はフレーム<var class="var">frame</var>内で選択されているウィンドウをリターンする。<var class="var">frame</var>は生きたフレームであること。省略または<code class="code">nil</code>の場合のデフォルトは選択されたフレーム。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-set_002dframe_002dselected_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">set-frame-selected-window</strong> <var class="def-var-arguments">frame window &amp;optional norecord</var><a class="copiable-link" href="#index-set_002dframe_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>この関数は<var class="var">window</var>をフレーム<var class="var">frame</var>内で選択されたウィンドウにする。<var class="var">frame</var>は生きたフレームであること。省略または<code class="code">nil</code>の場合のデフォルトは選択されたフレーム。<var class="var">window</var>は生きたウィンドウでなければならない
</p>
<p><var class="var">frame</var>が選択されたフレームなら、<var class="var">window</var>を選択されたウィンドウにする。
</p>
<p>オプション引数<var class="var">norecord</var>が非<code class="code">nil</code>なら、この関数はもっとも最近に選択されたウィンドウやバッファーリストのいずれの順序も変更はしない。
</p></dd></dl>

<p>以下のマクロはもっとも最近選択されたウィンドウやバッファーリストの順序に影響を与えずにウィンドウを一時的に選択するのに有用です。
</p>
<dl class="first-deffn first-defmac-alias-first-deffn">
<dt class="deffn defmac-alias-deffn" id="index-save_002dselected_002dwindow"><span class="category-def">Macro: </span><span><strong class="def-name">save-selected-window</strong> <var class="def-var-arguments">forms&hellip;</var><a class="copiable-link" href="#index-save_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>このマクロは選択されたフレーム、同様に各フレームの選択されたウィンドウを記録して、<var class="var">forms</var>を順に実行してから以前に選択されていたフレームとウィンドウをリストアする。これはカレントバッファーの保存とリストアも行う。リターン値は<var class="var">forms</var>内の最後のフォームの値。
</p>
<p>このマクロはウィンドウのサイズ、コンテンツ、配置についての保存やリストアは何も行わない。したがって<var class="var">forms</var>がそれらを変更すると、その変更は永続化される。あるフレームにおいて以前に選択されていたウィンドウが<var class="var">forms</var>のexit時にすでに生きていなければ、そのフレームの選択されたウィンドウはそのまま放置される。以前に選択されていたウィンドウがすでに生きていなければ<var class="var">forms</var>の最後に選択されていたウィンドウが何であれ、それが選択されたままになる。カレントバッファー<var class="var">forms</var>のexit時にそれが生きている場合のみリストアされる。
</p>
<p>このマクロは、もっとも最近に選択されたウィンドウとバッファーリストの順番をいずれも変更しない。
</p></dd></dl>

<dl class="first-deffn first-defmac-alias-first-deffn">
<dt class="deffn defmac-alias-deffn" id="index-with_002dselected_002dwindow"><span class="category-def">Macro: </span><span><strong class="def-name">with-selected-window</strong> <var class="def-var-arguments">window forms&hellip;</var><a class="copiable-link" href="#index-with_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>このマクロは<var class="var">window</var>を選択して<var class="var">forms</var>を順に実行してから、以前に選択されていたウィンドウとカレントバッファーをリストアする。たとえば引数<var class="var">norecord</var>を<code class="code">nil</code>で<code class="code">select-window</code>を呼び出す等、<var class="var">forms</var>内で故意に変更しない限り、もっとも最近に選択されたウィンドウとバッファーリストの順番は変更されない。したがってこのマクロは不要な<code class="code">buffer-list-update-hook</code>の実行なしに、<var class="var">window</var>を選択されたウィンドウとして一時的に作業するために好ましい手段である。
</p>
<p>このマクロはウィンドウ管理コードを一時的に不安定な状態に置くことに注意。特にもっとも最近使用されたウィンドウ(下記参照)が、選択されたウィンドウと一致する必要はなくなる。したがってこのマクロのbodyで<code class="code">get-lru-window</code>や<code class="code">get-mru-window</code>のような関数を呼び出すと、予期せぬ結果を得ることになるかもしれない。
</p></dd></dl>

<dl class="first-deffn first-defmac-alias-first-deffn">
<dt class="deffn defmac-alias-deffn" id="index-with_002dselected_002dframe"><span class="category-def">Macro: </span><span><strong class="def-name">with-selected-frame</strong> <var class="def-var-arguments">frame forms&hellip;</var><a class="copiable-link" href="#index-with_002dselected_002dframe"> &para;</a></span></dt>
<dd><p>このマクロは<var class="var">frame</var>を選択したフレームとして<var class="var">forms</var>を実行する。リターン値は<var class="var">forms</var>の最後のフォームの値。このマクロは選択されたフレームの保存とリストアを行い、もっとも最近に選択されたフレーム、およびバッファーリスト内のバッファーのどちらの順序も変更しない。
</p></dd></dl>

<a class="index-entry-id" id="index-window-use-time"></a>
<a class="index-entry-id" id="index-use-time-of-window"></a>
<a class="index-entry-id" id="index-window-order-by-time-of-last-use"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002duse_002dtime"><span class="category-def">Function: </span><span><strong class="def-name">window-use-time</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002duse_002dtime"> &para;</a></span></dt>
<dd><p>この関数はウィンドウ<var class="var">window</var>の使用回数をリターンする。<var class="var">window</var>は生きたウィンドウでなければならずデフォルトは選択されたウィンドウ。
</p>
<p>ウィンドウの<em class="dfn">使用回数(use
time)</em>は実際にはtime値ではなく、<code class="code">nil</code>の<var class="var">norecord</var>引数による<code class="code">select-window</code>の呼び出しごとに毎回単調に増加する整数。通常は最小の使用回数をもつウィンドウは、もっとも最近使用されていないウィンドウ(the
least recently used window)と呼ばれる。最大の使用回数をもつウィンドウはもっとも最近使用されたウィンドウ(the most
recently used window)と呼ばれる(<a class="ref" href="Cyclic-Window-Ordering.html">ウィンドウのサイクル順</a>を参照)。これは<code class="code">with-selected-window</code>を使用していなければ、通常は選択されたウィンドウである。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dbump_002duse_002dtime"><span class="category-def">Function: </span><span><strong class="def-name">window-bump-use-time</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dbump_002duse_002dtime"> &para;</a></span></dt>
<dd><p>この関数は<var class="var">window</var>を2番目に最近使われたウィンドウ(選択されたウィンドウの次)としてマークする。<var class="var">window</var>が選択されたウィンドウ、あるいは選択されたウィンドウの使用時間がすべてのウィンドウの中で最長ではない場合(<code class="code">with-selected-window</code>のスコープ内で発生し得る)には何もしない。
</p></dd></dl>

<a class="anchor" id="Window-Group"></a><p>たとえばFollowモード(<a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Follow-Mode.html#Follow-Mode">(emacs)Follow Mode</a>を参照)の管理下では、あるウィンドウが単独で表示可能な部分より大きい部分をそのウィンドウにまとめて表示するように、複数のウィンドウが集合かつ協調してバッファーを表示することがあります。そのような<em class="dfn">ウィンドウグループ(window
group)</em>を1つのエンティティーとしてとらえると便利なことがよくあります。<code class="code">window-group-start</code>
(<a class="ref" href="Window-Start-and-End.html">ウィンドウの開始位置と終了位置</a>を参照)のようないくつかの関数では、グループ全体の代表としてウィンドウの1つを引数に与えることにより、これを行うことができます。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-selected_002dwindow_002dgroup"><span class="category-def">Function: </span><span><strong class="def-name">selected-window-group</strong><a class="copiable-link" href="#index-selected_002dwindow_002dgroup"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-selected_002dwindow_002dgroup_002dfunction"></a>
<p>選択されたウィンドウがウィンドウグループのメンバーなら、この関数はそのバッファーの最前箇所を表示するウィンドウが先頭になる順序で、グループ内のウィンドウのリストをリターンする。それ以外なら、この関数は選択されたウィンドウだけを含むリストをリターンする。
</p>
<p>バッファーローカル変数<code class="code">selected-window-group-function</code>が関数にセットされているときは、選択されたウィンドウはグループの一部とみなされる。この場合には、<code class="code">selected-window-group</code>はその関数を引数なしで呼び出し、その結果をリターンする(これはそのグループ内のウィンドウのリストであること)。
</p></dd></dl>


</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Window-Sizes.html">ウィンドウのサイズ</a>, Previous: <a href="Windows-and-Frames.html">ウィンドウとフレーム</a>, Up: <a href="Windows.html">ウィンドウ</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-30_69b16e5c63840479270d32f58daea923fe725b90, commit:252b1bb281a198bedfcc8e2862fd5b69ad2f2696 to check Japanese translation.
</body>
</html>
