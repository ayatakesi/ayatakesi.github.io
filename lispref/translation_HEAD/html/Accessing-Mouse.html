<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.91.

Copyright © 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Accessing Mouse (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Accessing Mouse (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Accessing Mouse (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 7, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Input-Events.html" rel="up" title="Input Events">
<link href="Accessing-Scroll.html" rel="next" title="Accessing Scroll">
<link href="Classifying-Events.html" rel="prev" title="Classifying Events">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Accessing-Mouse">
<div class="nav-panel">
<p>
Next: <a href="Accessing-Scroll.html" accesskey="n" rel="next">スクロールバーイベントへのアクセス</a>, Previous: <a href="Classifying-Events.html" accesskey="p" rel="prev">イベントの分類</a>, Up: <a href="Input-Events.html" accesskey="u" rel="up">入力イベント</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="mausuibentohenoakusesu"><span>22.7.15 マウスイベントへのアクセス<a class="copiable-link" href="#mausuibentohenoakusesu"> &para;</a></span></h4>
<a class="index-entry-id" id="index-mouse-events_002c-data-in"></a>
<a class="index-entry-id" id="index-keyboard-events_002c-data-in"></a>

<p>このセクションではマウスボタンやモーションイベント内のデータアクセスに役立つ関数を説明します。同じ関数を使用してキーボードイベントデータにもアクセスできますが、キーボードイベントに不適切なデータ要素は0か<code class="code">nil</code>になります。
</p>
<p>以下の2つの関数は、マウスイベントの位置を指定するマウス位置リスト(<a class="ref" href="Click-Events.html">クリックイベント</a>を参照)をリターンします。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-event_002dstart"><span class="category-def">Function: </span><span><strong class="def-name">event-start</strong> <var class="def-var-arguments">event</var><a class="copiable-link" href="#index-event_002dstart"> &para;</a></span></dt>
<dd><p>これは<var class="var">event</var>の開始位置をリターンする。
</p>
<p><var class="var">event</var>がクリックイベントかボタンダウンイベントなら、この関数はそのイベントの位置をリターンする。<var class="var">event</var>がドラッグイベントなら、そのドラッグの開始位置をリターンする。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-event_002dend"><span class="category-def">Function: </span><span><strong class="def-name">event-end</strong> <var class="def-var-arguments">event</var><a class="copiable-link" href="#index-event_002dend"> &para;</a></span></dt>
<dd><p>これは<var class="var">event</var>の終了位置をリターンする。
</p>
<p><var class="var">event</var>がドラッグイベントなら、この関数はユーザーがマウスボタンをリリースした位置をリターンする。<var class="var">event</var>がクリックイベントかボタンダウンイベントなら、値はそのイベント固有の開始位置となる。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posnp"><span class="category-def">Function: </span><span><strong class="def-name">posnp</strong> <var class="def-var-arguments">object</var><a class="copiable-link" href="#index-posnp"> &para;</a></span></dt>
<dd><p>この関数は<var class="var">object</var>が(<a class="ref" href="Click-Events.html">クリックイベント</a>に記述されたフォーマットの)マウス位置リストなら非<code class="code">nil</code>、それ以外では<code class="code">nil</code>をリターンする。
</p></dd></dl>

<a class="index-entry-id" id="index-mouse-position-list_002c-accessing"></a>
<p>以下の関数は引数にマウス位置リストを受け取り、そのリストのさまざまな部分をリターンします:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">posn-window</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dwindow"> &para;</a></span></dt>
<dd><p><var class="var">position</var>があったウィンドウをリターンする。<var class="var">position</var>が最初にイベントがあったフレームの外部の位置を表す場合には、かわりにそのフレームをリターンする。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002darea"><span class="category-def">Function: </span><span><strong class="def-name">posn-area</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002darea"> &para;</a></span></dt>
<dd><p><var class="var">position</var>内に記録されたウィンドウエリアをリターンする。そのウィンドウのテキストエリアでイベントが発生したときは<code class="code">nil</code>、それ以外ではイベントがどこで発生したかを識別するシンボルをリターンする。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dpoint"><span class="category-def">Function: </span><span><strong class="def-name">posn-point</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dpoint"> &para;</a></span></dt>
<dd><p><var class="var">position</var>内のバッファー位置をリターンする。ウィンドウのテキストエリア、マージンエリア、フリンジでイベントが発生したときはバッファー位置を識別する整数値、それ以外では値は未定義。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dx_002dy"><span class="category-def">Function: </span><span><strong class="def-name">posn-x-y</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dx_002dy"> &para;</a></span></dt>
<dd><p><var class="var">position</var>内のピクセル単位のxy座標を、コンスセル<code class="code">(<var class="var">x</var>&nbsp;.&nbsp;<var class="var">y</var>)</code><!-- /@w -->でリターンする。これらは<code class="code">posn-window</code>により与えられるウィンドウにたいする相対座標である。
</p>
<p>以下はあるウィンドウのテキストエリア内のウィンドウ相対座標をフレーム相対座標に変換する方法を示す例:
</p>
<div class="example">
<pre class="example-preformatted">(defun frame-relative-coordinates (position)
  &quot;POSITIONのフレーム相対座標をリターンする。
POSITIONはウィンドウのテキストエリアにあるものとする。&quot;
  (let* ((x-y (posn-x-y position))
         (window (posn-window position))
         (edges (window-inside-pixel-edges window)))
    (cons (+ (car x-y) (car edges))
          (+ (cdr x-y) (cadr edges)))))
</pre></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dcol_002drow"><span class="category-def">Function: </span><span><strong class="def-name">posn-col-row</strong> <var class="def-var-arguments">position &amp;optional use-window</var><a class="copiable-link" href="#index-posn_002dcol_002drow"> &para;</a></span></dt>
<dd><p>この関数は<var class="var">position</var>で記述されるのバッファー位置で推定される列と行を含むコンスセル<code class="code">(<var class="var">col</var>&nbsp;.&nbsp;<var class="var">row</var>)</code><!-- /@w -->をリターンする。リターン値は<var class="var">position</var>にたいする<var class="var">x</var>と<var class="var">y</var>の値より計算され、そのフレームのデフォルト文字幅とデフォルト行高(行間スペースを含む)の単位で与えられる(そのため実際の文字サイズが非デフォルト値の場合には、実際の行と列は計算された値とは異なるかもしれない)オプションの。<var class="var">window</var>引数が非<code class="code">nil</code>の場合には、フレームではなく<var class="var">position</var>で示されるウィンドウのデフォルト文字幅を使用する(これはたとえば非デフォルトのズームレベルでバッファーを表示しているウィンドウで違いが生じる)。
</p>
<p><var class="var">row</var>はそのテキストエリアの上端から数えられることに注意。<var class="var">position</var>により与えられるウィンドウがヘッダーライン(<a class="ref" href="Header-Lines.html">ウィンドウのヘッダーライン</a>を参照)やタブラインをもつなら、それらは<var class="var">row</var>の数に<em class="emph">含まれない</em>。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dactual_002dcol_002drow"><span class="category-def">Function: </span><span><strong class="def-name">posn-actual-col-row</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dactual_002dcol_002drow"> &para;</a></span></dt>
<dd><p><var class="var">position</var>内の実際の行と列をコンスセル<code class="code">(<var class="var">col</var>&nbsp;.&nbsp;<var class="var">row</var>)</code><!-- /@w -->でリターンする。値は<var class="var">position</var>与えられるウィンドウの実際の行と列。<a class="ref" href="Click-Events.html">クリックイベント</a>を参照のこと。<var class="var">position</var>が実際のポジション値を含まなければ、この関数は<code class="code">nil</code>をリターンする。この場合にはおおよその値を取得するために<code class="code">posn-col-row</code>を使用できる。
</p>
<p>この関数はタブ文字やイメージによるビジュアル列数のように、ディスプレイ上の文字のビジュアル幅を意味しない。標準的な文字単位の座標が必要なら、かわりに<code class="code">posn-col-row</code>を使用すること。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dstring"><span class="category-def">Function: </span><span><strong class="def-name">posn-string</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dstring"> &para;</a></span></dt>
<dd><p><var class="var">position</var>に記述された文字列オブジェクトをリターンする。<code class="code">nil</code>
(<var class="var">position</var>がバッファーテキストを記述することを意味する)、またはコンスセル<code class="code">(<var class="var">string</var>&nbsp;.&nbsp;<var class="var">string-pos</var>)</code><!-- /@w -->のいずれか。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dimage"><span class="category-def">Function: </span><span><strong class="def-name">posn-image</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dimage"> &para;</a></span></dt>
<dd><p><var class="var">position</var>にあるイメージオブジェクトをリターンする。<code class="code">nil</code>
(<var class="var">position</var>にイメージがない)、またはイメージspec <code class="code">(image&nbsp;&hellip;)</code><!-- /@w -->のいずれか。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dobject"><span class="category-def">Function: </span><span><strong class="def-name">posn-object</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dobject"> &para;</a></span></dt>
<dd><p><var class="var">position</var>により記述されるイメージオブジェクトか文字列オブジェクトをリターンする。<code class="code">nil</code>
(<var class="var">position</var>がバッファーテキストを記述することを意味する)、イメージ<code class="code">(image&nbsp;&hellip;)</code><!-- /@w -->、またはコンスセル<code class="code">(<var class="var">string</var>&nbsp;.&nbsp;<var class="var">string-pos</var>)</code><!-- /@w -->のいずれか。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dobject_002dx_002dy"><span class="category-def">Function: </span><span><strong class="def-name">posn-object-x-y</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dobject_002dx_002dy"> &para;</a></span></dt>
<dd><p><var class="var">position</var>で記述されるオブジェクトの左上隅からのピクセル単位のxy座標を、コンスセル<code class="code">(<var class="var">dx</var>&nbsp;.&nbsp;<var class="var">dy</var>)</code><!-- /@w -->でリターンする。<var class="var">position</var>がバッファーテキストを記述する場合には、その位置にもっとも近いバッファーテキストの相対位置をリターンする。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dobject_002dwidth_002dheight"><span class="category-def">Function: </span><span><strong class="def-name">posn-object-width-height</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dobject_002dwidth_002dheight"> &para;</a></span></dt>
<dd><p><var class="var">position</var>で記述されるオブジェクトのピクセル幅とピクセル高さを、コンスセル<code class="code">(<var class="var">width</var>
. <var class="var">height</var>)</code>でリターンする。<var class="var">position</var>がバッファー位置を記述する場合には、その位置の文字のサイズをリターンする。
</p></dd></dl>

<a class="index-entry-id" id="index-timestamp-of-a-mouse-event"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dtimestamp"><span class="category-def">Function: </span><span><strong class="def-name">posn-timestamp</strong> <var class="def-var-arguments">position</var><a class="copiable-link" href="#index-posn_002dtimestamp"> &para;</a></span></dt>
<dd><p><var class="var">position</var>のタイムスタンプをリターンする。これはミリ秒で表したイベント発生時刻である。このようなタイムスタンプは使用しているウィンドウシステムに応じてさまざまに異なる任意の開始時刻からの相対時刻として報告される。たとえばXウィンドウシステムでは、そのXサーバー開始から経過したミリ秒数となる。
</p></dd></dl>

<p>以下の関数は与えられた特定のバッファー、またはスクリーン位置によって位置リストを計算します。上述の関数でこの位置リスト内のデータにアクセスできます。
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dat_002dpoint"><span class="category-def">Function: </span><span><strong class="def-name">posn-at-point</strong> <var class="def-var-arguments">&amp;optional pos window</var><a class="copiable-link" href="#index-posn_002dat_002dpoint"> &para;</a></span></dt>
<dd><p>この関数は<var class="var">window</var>内の位置<var class="var">pos</var>にたいする位置リストをリターンする。<var class="var">pos</var>のデフォルトは<var class="var">window</var>内のポイント、<var class="var">window</var>のデフォルトは選択されたウィンドウ。
</p>
<p><var class="var">window</var>内で<var class="var">pos</var>が不可視なら、<code class="code">posn-at-point</code>は<code class="code">nil</code>をリターンする。
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-posn_002dat_002dx_002dy"><span class="category-def">Function: </span><span><strong class="def-name">posn-at-x-y</strong> <var class="def-var-arguments">x y &amp;optional frame-or-window whole</var><a class="copiable-link" href="#index-posn_002dat_002dx_002dy"> &para;</a></span></dt>
<dd><p>この関数は指定されたフレームかウィンドウ<var class="var">frame-or-window</var>(デフォルトは選択されたウィンドウ)内のピクセル座標<var class="var">x</var>と<var class="var">y</var>に対応する位置情報をリターンする。<var class="var">x</var>と<var class="var">y</var>は、選択されたウィンドウのテキストエリアにたいする相対座標である。<var class="var">whole</var>が非<code class="code">nil</code>なら、<var class="var">x</var>座標はスクロールバー、マージン、フリンジを含むウィンドウエリア全体にたいする相対座標。
</p></dd></dl>

<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-mouse_002dprefer_002dclosest_002dglyph"><span class="category-def">User Option: </span><span><strong class="def-name">mouse-prefer-closest-glyph</strong><a class="copiable-link" href="#index-mouse_002dprefer_002dclosest_002dglyph"> &para;</a></span></dt>
<dd><p>この変数が非<code class="code">nil</code>なら、マウス位置リストの<code class="code">posn-point</code>は、マウスポイント自体の下にあるグリフ位置とは対照的に、マウスクリックにもっとも近いようなグリフの最左エッジの位置にセットされる。たとえば<var class="var">x</var>に<code class="code">9</code>
(列0にある幅10の文字を含む)をセットして<code class="code">posn-at-x-y</code>を呼び出すと、マウス位置リストに保存されるのはその文字の<em class="emph">前</em>ではなく<em class="emph">後</em>になる。
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Accessing-Scroll.html">スクロールバーイベントへのアクセス</a>, Previous: <a href="Classifying-Events.html">イベントの分類</a>, Up: <a href="Input-Events.html">入力イベント</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-30_11e7ae3964e192b0e4bcc437a04278ee727e720b, commit:e76221f9aa8b902fb3ba17443cfa18335166dd07 to check Japanese translation.
</body>
</html>
