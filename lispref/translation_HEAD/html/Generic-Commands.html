<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.1.

Copyright (C) 1990-1996, 1998-2023 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Generic Commands (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Generic Commands (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Generic Commands (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 26, 2023">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Defining-Commands.html" rel="up" title="Defining Commands">
<link href="Command-Modes.html" rel="prev" title="Command Modes">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="subsection" id="Generic-Commands">
<div class="header">
<p>
Previous: <a href="Command-Modes.html" accesskey="p" rel="prev">コマンドにたいするモード指定</a>, Up: <a href="Defining-Commands.html" accesskey="u" rel="up">コマンドの定義</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="komandoHou-Bu-karanoXuan-Ze-"></span><h4 class="subsection">22.2.5 コマンド候補からの選択</h4>
<span id="index-generic-commands"></span>
<span id="index-alternative-commands_002c-defining"></span>

<p>Sometimes it is useful to define a command that serves as a &ldquo;generic
dispatcher&rdquo; capable of invoking one of a set of commands according to the
user&rsquo;s needs.  For example, imagine that you want to define a command named
&lsquo;<samp>open</samp>&rsquo; that can &ldquo;open&rdquo; and display several different types of
objects.  Or you could have a command named &lsquo;<samp>mua</samp>&rsquo; (which stands for
Mail User Agent) that can read and send email using one of several email
backends, such as Rmail, Gnus, or MH-E.  The macro
<code>define-alternatives</code> can be used to define such <em>generic
commands</em>.  A generic command is an interactive function whose
implementation can be selected from several alternatives, as a matter of
user preference.
</p>
<dl class="def">
<dt id="index-define_002dalternatives"><span class="category">Macro: </span><span><strong>define-alternatives</strong> <em>command &amp;rest customizations</em><a href='#index-define_002dalternatives' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>This macro defines the new generic <var>command</var>, which can have several
alternative implementations.  The argument <var>command</var> should be an
unquoted symbol.
</p>
<p>When invoked, the macro creates an interactive Lisp closure
(see <a href="Closures.html">クロージャ</a>).  When the user runs <kbd><span class="nolinebreak">M-x</span>&nbsp;<var>command</var>&nbsp;<span class="key">RET</span></kbd><!-- /@w --> for the first time, Emacs asks to select one of the alternative
implementations of <var>command</var>, offering completion for the names of these
alternatives.  These names come from the user option whose name is
<code><var>command</var>-alternatives</code>, which the macro creates (if it didn&rsquo;t
exist before).  To be useful, this variable&rsquo;s value should be an alist whose
elements have the form <code>(<var><span class="nolinebreak">alt-name</span></var>&nbsp;.&nbsp;<var><span class="nolinebreak">alt-func</span></var>)</code><!-- /@w -->, where
<var>alt-name</var> is the name of the alternative and <var>alt-func</var> is the
interactive function to be called if this alternative is selected.  When the
user selects an alternative, Emacs remembers the selection, and will
thereafter automatically call that selected alternative without prompting
when the user invokes <kbd>M-x <var>command</var></kbd> again.  To choose a different
alternative, type <kbd><span class="nolinebreak">C-u</span>&nbsp;<span class="nolinebreak">M-x</span>&nbsp;<var>command</var>&nbsp;<span class="key">RET</span></kbd><!-- /@w -->&ndash;then Emacs will
again prompt for one of the alternatives, and the selection will override
the previous one.
</p>
<p>The variable <code><var>command</var>-alternatives</code> can be created before calling
<code>define-alternatives</code>, with the appropriate values; otherwise the macro
creates the variable with a <code>nil</code> value, and it should then be
populated with the associations describing the alternatives.  Packages that
wish to provide their own implementation of an existing generic command can
use <code>autoload</code> cookies (see <a href="Autoload.html">autoload</a>) to add to the alist, for
example:
</p>
<div class="example lisp">
<pre class="lisp">;;;###autoload (push '(&quot;My name&quot; . my-foo-symbol) foo-alternatives
</pre></div>

<p>If the optional argument <var>customizations</var> is non-<code>nil</code>, it should
consist of alternating <code>defcustom</code> keywords (typically <code>:group</code>
and <code>:version</code>) and values to add to the definition of the
<code>defcustom</code> <code><var>command</var>-alternatives</code>.
</p>
<p>Here is an example of a simple generic dispatcher command named <code>open</code>
with 3 alternative implementations:
</p>
<div class="example">
<pre class="example">(define-alternatives open
  :group 'files
  :version &quot;42.1&quot;)
</pre><pre class="example">(setq open-alternatives
      '((&quot;file&quot; . find-file)
	(&quot;directory&quot; . dired)
	(&quot;hexl&quot; . hexl-find-file)))
</pre></div>

</dd></dl>

</div>
<hr>
<div class="header">
<p>
Previous: <a href="Command-Modes.html">コマンドにたいするモード指定</a>, Up: <a href="Defining-Commands.html">コマンドの定義</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-29_62920dcb0de440aac8e7d69ee33f27d5400d405e, commit:f62d4385344a54f700ff95ed0a1855cb7abcd4d6 to check Japanese translation.
</body>
</html>
