<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.91.

Copyright © 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Documentation Tips (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Documentation Tips (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Documentation Tips (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 6, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Tips.html" rel="up" title="Tips">
<link href="Comment-Tips.html" rel="next" title="Comment Tips">
<link href="Warning-Tips.html" rel="prev" title="Warning Tips">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Documentation-Tips">
<div class="nav-panel">
<p>
Next: <a href="Comment-Tips.html" accesskey="n" rel="next">コメント記述のヒント</a>, Previous: <a href="Warning-Tips.html" accesskey="p" rel="prev">コンパイラー警告を回避するためのヒント</a>, Up: <a href="Tips.html" accesskey="u" rel="up">ヒントと規約</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="dokiyumentoWenZi-Lie-nohinto"><span>D.6 ドキュメント文字列のヒント<a class="copiable-link" href="#dokiyumentoWenZi-Lie-nohinto"> &para;</a></span></h3>
<a class="index-entry-id" id="index-documentation-strings_002c-conventions-and-tips"></a>
<a class="index-entry-id" id="index-tips-for-documentation-strings"></a>
<a class="index-entry-id" id="index-conventions-for-documentation-strings"></a>

<a class="index-entry-id" id="index-checkdoc_002dminor_002dmode"></a>
<p>以下はドキュメント文字列記述に関するいくつかのヒントと慣習です。コマンド<kbd class="kbd">M-x
checkdoc-minor-mode</kbd>を実行すれば慣習の多くをチェックできます。
</p>
<ul class="itemize mark-bullet">
<li>ユーザーが理解することを意図したすべての関数、コマン、変数はドキュント文字列をもつこと。

</li><li>Lispプログラムの内部的な変数とサブルーチンは同様にドキュメント文字列をもつことができる。ドキュメント文字列は実行中のEmacs内で非常に僅かなスペースしか占めない。

</li><li>Format the documentation string so that it fits in an Emacs window on an
80-column screen.  It is a good idea for most lines to be no wider than 60
characters.  The first line should not be wider than 74 characters, or it
will look bad in the output of <code class="code">apropos</code>.

<a class="index-entry-id" id="index-emacs_002dlisp_002ddocstring_002dfill_002dcolumn"></a>
<p>見栄えがよくなるならそのテキストをフィルできる。Emacs
Lispモードは<code class="code">emacs-lisp-docstring-fill-column</code>で指定された幅にドキュメント文字列をフィルする。しかしドキュメント文字列の行ブレークを注意深く調整すればドキュメント文字列の可読性をより向上できることがある。ドキュメント文字列が長い場合にはセクション間に空行を使用すること。
</p>
</li><li>ドキュンメント文字列の最初の行は、それ自身が要約となるような1つか2つの完全なセンテンスから成り立つこと。<kbd class="kbd">M-x
apropos</kbd>は最初の行だけを表示するので、その行のコンテンツ単独で完結していなければ結果の見栄えは悪くなる。特に最初の行は大文字で始めてピリオドで終わること。

<p>関数では&ldquo;これは何を行う関数か?&rdquo;、変数では&ldquo;これは何を意味する変数か?&rdquo;という問いにたいして1行目で簡潔に答える必要がある。これらの問いにたいしてその関数や変数のユーザーや呼び出し元が理解できる方法で答えるのが望ましい。特に関数のコードの動作を列挙して何を行なうかを示す<em class="emph">のではなく</em>、それらの動作の役割りと関数の責任について説明すること。
</p>
<p>ドキュメント文字列を1行に制限しないこと。その関数や変数の使用法の詳細を説明する必要に応じてその分の行数を使用すること。テキストの残りの部分にたいしても完全なセンテンスを使用してほしい。
</p>
</li><li>ユーザーが無効化されたコマンドの使用を試みる際には、Emacsはそれのドキュメント文字列の最初のパラグラフ(最初の空行までのすべて)だけを表示する。もし望むなら、その表示をより有用になるように最初の空行の前に何の情報を含めるか選択できる。

</li><li>最初の行ではその関数のすべての重要な引数(特に必須な引数)と、関数呼び出しで記述される順にそれらに言及すること。その関数が多くの引数をもつなら最初の行でそれらすべてに言及するのは不可能である。この場合にはもっとも重要な引数を含む最初の引数数個について最初の行で言及すること。

</li><li>ある関数のドキュメント文字列がその関数の引数の値に言及する際には、引数を大文字にした名前が引数の値であるかのように使用すること。つまり関数<code class="code">eval</code>のドキュメント文字列では最初の引数の名前が<code class="code">form</code>なので&lsquo;<samp class="samp">FORM</samp>&rsquo;で参照する:

<div class="example">
<pre class="example-preformatted">Evaluate FORM and return its value.
</pre></div>

<p>同様にリストやベクターのサブユニットへの分解で、それらのいくつかを異なるように示すような際にはメタ構文変数(metasyntactic
variables)を大文字で記述すること。以下の例の&lsquo;<samp class="samp">KEY</samp>&rsquo;と&lsquo;<samp class="samp">VALUE</samp>&rsquo;はこれの実践例:
</p>
<div class="example">
<pre class="example-preformatted">The argument TABLE should be an alist whose elements
have the form (KEY . VALUE).  Here, KEY is ...
</pre></div>

</li><li>ドキュメント文字列内でLispシンボルに言及する際にはcase(大文字小文字)を絶対に変更しないこと。そのシンボルの名前が<code class="code">foo</code>なら&ldquo;Foo&rdquo;ではなく&ldquo;foo&rdquo;(&ldquo;Foo&rdquo;は違うシンボル)。

<p>これは関数の引数の値の記述ポリシーと反するように見えるかもしれないが矛盾は実際には存在しない。引数の<em class="emph">value</em>はその関数が値の保持に使用する<em class="emph">symbol</em>と同じではない。
</p>
<p>これによりセンテンス先頭に小文字を置くことになり、それが煩しいならセンテンス開始がシンボルにならないようにセンテンスを書き換えること。
</p>
</li><li>ドキュメント文字列の開始と終了に空白文字を使用しないこと。

</li><li>ソースコード内の後続行のテキスト、最初の行と揃うようにドキュメント文字列の後続行を<strong class="strong">インデントしてはならない</strong>。これはソースコードでは見栄えがよいがユーザーがドキュメトを閲覧する際は奇妙な見栄えになる。開始のダブルクォーテーションの前のインデントは文字列の一部には含まれないことを忘れないこと!

</li><li><a class="index-entry-id" id="index-lispref_002ftext_002dja_002etexi_002epo"></a>
<a class="index-entry-id" id="index-apostrophe_002c-quoting-in-documentation-strings"></a>
<a class="index-entry-id" id="index-grave-accent_002c-quoting-in-documentation-strings"></a>
<a class="index-entry-id" id="index-lispref_002ftext_002dja_002etexi_002epo-1"></a>
ドキュメントにおいてASCIIのアポストロフィやグレイブアクセントを表示する必要がある際には、ドキュメントの文字列リテラルに&lsquo;<samp class="samp">\\='</samp>&rsquo;や&lsquo;<samp class="samp">\\=`</samp>&rsquo;を使えば文字はそのまま表示される。

</li><li>ドキュメント文字列ではLispシンボルではないような式はそれら自身を表しているかもしれないのでクォートしてはならない。たとえば&lsquo;<samp class="samp">Return
the list `(NAME TYPE RANGE)' ...</samp>&rsquo;や&lsquo;<samp class="samp">Return the list \\='(NAME TYPE
RANGE) ...</samp>&rsquo;ではなく&lsquo;<samp class="samp">Return the list (NAME TYPE RANGE) ...</samp>&rsquo;と記述すること。

<a class="anchor" id="Docstring-hyperlinks"></a></li><li><a class="index-entry-id" id="index-curly-quotes-1"></a>
<a class="index-entry-id" id="index-curved-quotes-1"></a>
ドキュメント文字列がLispシンボルを参照する際には、それがプリントされるとき(通常は小文字を意味する)のように前にグレイブアクセント&lsquo;<samp class="samp">`</samp>&rsquo;、後にアポストロフィー&lsquo;<samp class="samp">'</samp>&rsquo;を記述すること。例外が2つある。<code class="code">t</code>と<code class="code">nil</code>は前後の区切り記号を記述しない。たとえば:

<div class="example">
<pre class="example-preformatted">CODE can be `lambda', nil, or t.
</pre></div>

<p>これらのドキュメント文字列をEmacsが表示する際には、文字の表示がサポートされていれば通常は&lsquo;<samp class="samp">`</samp>&rsquo; (グレイブアクセント)に&lsquo;<samp class="samp">‘</samp>&rsquo;
(左シングルクォーテーションマーク)、&lsquo;<samp class="samp">'</samp>&rsquo; (アポストロフィー)に&lsquo;<samp class="samp">’</samp>&rsquo;
(右シングルクォーテーションマーク)を表示することに注意。<a class="ref" href="Keys-in-Documentation.html">ドキュメント内でのキーバインディングの置き換え</a>を参照のこと。
(このセクションの以前のバージョンでは、doc文字列で非<abbr class="acronym">ASCII</abbr>のシングルクォーテーションマークを推奨するバージョンがありましたが、このような文字をサポートしない端末におけるヘルプ文字列の表示が破壊されるので現在は推奨されていません。)
</p>
<a class="index-entry-id" id="index-hyperlinks-in-documentation-strings"></a>
<p>Helpモードはシングルクォートされたシンボル名がドキュメント文字列で使用されている際には、それが関数と変数のいずれかの定義をもっていれば自動的にハイパーリンクを作成する。これらの機能を使用するために何か特別なことを行う必要はない。しかしあるシンボルが関数と変数の両方の定義をもち一方だけを参照したい場合には、そのシンボル名の直前に&lsquo;<samp class="samp">variable</samp>&rsquo;、&lsquo;<samp class="samp">option</samp>&rsquo;、&lsquo;<samp class="samp">function</samp>&rsquo;、&lsquo;<samp class="samp">command</samp>&rsquo;の単語のいずれかを記述してそれを指定できる(これらの指示語の識別では大文字小文字に差はない)。たとえば以下を記述すると
</p>
<div class="example">
<pre class="example-preformatted">This function sets the variable `buffer-file-name'.
</pre></div>

<p>これのハイパーリンクは<code class="code">buffer-file-name</code>の変数のドキュメントだけを参照して関数のドキュメントは参照しない。
</p>
<p>あるシンボルが関数および/または変数の定義をもつがドキュメントしているシンボルの使用とそれらが無関係なら、すべてのハイパーリンク作成を防ぐためにシンボル名の前に単語&lsquo;<samp class="samp">symbol</samp>&rsquo;か&lsquo;<samp class="samp">program</samp>&rsquo;を記述できる。たとえば、
</p>
<div class="example">
<pre class="example-preformatted">If the argument KIND-OF-RESULT is the symbol `list',
this function returns a list of all the objects
that satisfy the criterion.
</pre></div>

<p>これは無関係な関数<code class="code">list</code>のドキュメントにハイパーリンクを作成しない。
</p>
<p>変数ドキュメントがない変数には、通常はハイパーリンクは作成されない。そのような変数の前に単語&lsquo;<samp class="samp">variable</samp>&rsquo;と&lsquo;<samp class="samp">option</samp>&rsquo;のいずれかを記述すればハイパーリンクの作成を強制できる。
</p>
<p>フェイスにたいするハイパーリンクはフェイスの前か後に単語&lsquo;<samp class="samp">face</samp>&rsquo;があれば作成される。この場合にはたとえそのシンボルが変数や関数として定義されていてもフェイスのドキュメントだけが表示される。
</p>
<p>Infoドキュメントにハイパーリンクを作成するには、&lsquo;<samp class="samp">info node</samp>&rsquo;、&lsquo;<samp class="samp">Info node</samp>&rsquo;、&lsquo;<samp class="samp">info
anchor</samp>&rsquo;、&lsquo;<samp class="samp">Info
anchor</samp>&rsquo;のいずれかの後Infoのノード(かアンカー)をシングルクォートして記述する。Infoファイル名のデフォルトは&lsquo;<samp class="samp">emacs</samp>&rsquo;。たとえば、
</p>
<div class="example smallexample">
<pre class="example-preformatted">See Info node `Font Lock' and Info node `(elisp)Font Lock Basics'.
</pre></div>

<p>manページにハイパーリンクを作成するには&lsquo;<samp class="samp">Man page</samp>&rsquo;,&lsquo;<samp class="samp">man page</samp>&rsquo;、&lsquo;<samp class="samp">man page
for</samp>&rsquo;のいずれかの後にシングルクォートされた名前記述する。たとえば、
</p>
<div class="example smallexample">
<pre class="example-preformatted">See the man page `chmod(1)' for details.
</pre></div>

<p>manページInfoドキュメントのほうが常に好ましいので、リンク可能なInfoマニュアルがあるならリンクすること。たとえば<code class="command">chmod</code>はGNU
Coreutilsマニュアルにドキュメントされているので、manページよりそれにリンクするほうがよい。
</p>
<p>カスタマイゼーショングループをリンクするには、&lsquo;<samp class="samp">customization
group</samp>&rsquo;を前置してシングルクォートしたグループ名を記述する(各単語の先頭文字のcaseは区別しない)。たとえば、
</p>
<div class="example smallexample">
<pre class="example-preformatted">See the customization group `whitespace' for details.
</pre></div>

<p>最後にURLのハイパーリンクを作成するには&lsquo;<samp class="samp">URL</samp>&rsquo;の後にURLをシングルクォートして記述する。たとえば、
</p>
<div class="example smallexample">
<pre class="example-preformatted">The GNU project website has more information (see URL
`https://www.gnu.org/').
</pre></div>

</li><li>ドキュメント文字列内に直接キーシーケンスを記述しないこと。かわりに、それらを表すために&lsquo;<samp class="samp">\\[&hellip;]</samp>&rsquo;構文を使用すること。たとえば&lsquo;<samp class="samp">C-f</samp>&rsquo;と記述するかわりに&lsquo;<samp class="samp">\\[forward-char]</samp>&rsquo;と記述する。Emacsがドキュメント文字列を表示する際には何であれカレントで<code class="code">forward-char</code>にバインドされたキーに置き換える(これは通常は&lsquo;<samp class="samp">C-f</samp>&rsquo;だがユーザーがキーバインディングを変更していれば何か他の文字かもしれない)。<a class="ref" href="Keys-in-Documentation.html">ドキュメント内でのキーバインディングの置き換え</a>を参照のこと。

</li><li>メジャーモードのドキュメント文字列ではグローバルマップではなく、そのモードのローカルマップを参照したいだろう。したがってどのキーマップを使用するか指定するために、ドキュメント文字列内で一度&lsquo;<samp class="samp">\\&lt;&hellip;&gt;</samp>&rsquo;構文を使用する。最初に&lsquo;<samp class="samp">\\[&hellip;]</samp>&rsquo;を使用する前、センテンスの途中以外でこれを行うこと(マップがロードされていないと、マップへの参照はまだマップが定義されていないことを示すセンテンスに置き換えられるだろう)。&lsquo;<samp class="samp">\\&lt;&hellip;&gt;</samp>&rsquo;の内部のテキストはメジャーモードにたいするローカルキーマップを含む変数名であること。

<p>&lsquo;<samp class="samp">\\[&hellip;]</samp>&rsquo;を使用するたびに、僅かだがドキュメント文字列の表示が低速になる。これらを大量に使用すると僅かな低速化が積み重なり、特に低速なシステムでは有意なものとなるかもしれない。したがってこれらの過度な使用は推奨しない(同一ドキュメント内で同じコマンドへの複数参照の使用を避けるよう試みる等)。
</p>
</li><li>一貫性を保つために関数のドキュメント文字列の最初のセンテンス内の動詞は、命令形で表すこと。たとえば&ldquo;Return the cons of A and
B.&rdquo;、好みによっては&ldquo;Returns the cons of A and
B.&rdquo;を使用する。通常は最初のパラグラフの残りの部分にたいして同様に行っても見栄えがよい。各センテンスが叙実的で適切な主題をもつなら後続のパラグラフの見栄えはよくなる。

</li><li>yes-or-no述語であるような関数のドキュメント文字列は、何が真を構成するか明示的に示すために、&ldquo;Return t
if&rdquo;のような単語で始まること。単語&ldquo;return&rdquo;は小文字の&ldquo;t&rdquo;で開始される幾分紛らわしい可能性のあるセンテンスを避ける。

</li><li>ドキュメント文字列は受動態ではなく能動態、未来形ではなく現在形で記述すること。たとえば&ldquo;A list containing A and B will
be returned.&rdquo;ではなく、&ldquo;Return a list containing A and B.&rdquo;と記述すること。

</li><li>不必要な&ldquo;cause&rdquo;(や同等の単語)の使用を避けること。&ldquo;Cause Emacs to display text in
boldface&rdquo;ではなく、単に&ldquo;Display text in boldface&rdquo;と記述すること。

</li><li>多くの人にとってなじみがなくtypoと間違えるであろうから、&ldquo;iff&rdquo;(&ldquo;if and only
if&rdquo;を意味する数学用語)の使用を避けること。ほとんどの場合には、その意味は単なる&ldquo;if&rdquo;で明快である。それ以外ではその意味を伝える代替えフレーズを探すよう試みること。

</li><li>&ldquo;for example(たとえば)&rdquo;に&ldquo;e.g.&rdquo;、&ldquo;that
is(つまり)&rdquo;に&ldquo;i.e.&rdquo;、&ldquo;number(数値)&rdquo;に&ldquo;no.&rdquo;、&ldquo;compare(比較)&rdquo;/&ldquo;see
also(参照)&rdquo;に&ldquo;cf.&rdquo;、&ldquo;with respect
to(に関しては)&rdquo;にたいする&ldquo;w.r.t.&rdquo;のような略語の使用は可能なかぎり避けるよう努力すること。ほとんど常に展開されたバージョンのほうが読み易い<a class="footnote" id="DOCF36" href="#FOOT36"><sup>36</sup></a>。

</li><li>特定のモードや状況でのみコマンドに意味がある際にはドキュメント文字列内でそれに言及すること。たとえば<code class="code">dired-find-file</code>のドキュメントは:

<div class="example">
<pre class="example-preformatted">In Dired, visit the file or directory named on this line.
</pre></div>

</li><li>ユーザーがセットしたいと望むかもしれないオプションを表す変数を定義する際には<code class="code">defcustom</code>を使用すること。<a class="ref" href="Defining-Variables.html">グローバル変数の定義</a>を参照のこと。

</li><li>yes-or-noフラグであるような変数のドキュメント文字列は、すべての非<code class="code">nil</code>値が等価であることを明確にして、<code class="code">nil</code>と非<code class="code">nil</code>が何を意味するかを明示的に示すために&ldquo;Non-nil
means&rdquo;のような単語で始めること。

</li><li>ドキュメント文字列内の開カッコで始まる行は、以下のように開カッコの前へのバックスラッシュの記述を考慮すること:

<div class="example">
<pre class="example-preformatted">The argument FOO can be either a number
\(a buffer position) or a string (a file name).
</pre></div>

<p>これは&lsquo;<samp class="samp">(</samp>&rsquo;をdefunの開始として扱う27.1より古いバージョンのEmacsでのバグを回避する(<a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Defuns.html#Defuns">Defuns</a> in <cite class="cite">The GNU Emacs
Manual</cite>を参照)。コードを古いバージョンのEmacsで編集する誰かをあなたが予期せぬのなら、この回避策は必要ない。
</p></li></ul>

</div>
<div class="footnotes-segment">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5 class="footnote-body-heading"><a id="FOOT36" href="#DOCF36">(36)</a></h5>
<p>わたしたちは時折これを使用しますが、やりすぎないでください。</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Comment-Tips.html">コメント記述のヒント</a>, Previous: <a href="Warning-Tips.html">コンパイラー警告を回避するためのヒント</a>, Up: <a href="Tips.html">ヒントと規約</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/emacs-30_11e7ae3964e192b0e4bcc437a04278ee727e720b, commit:8ccfc363d196d14e91ef7a20a1243e9f3c36585b to check Japanese translation.
</body>
</html>
