<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.50.

Copyright (C) 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Other Selections (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Other Selections (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Other Selections (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="May 3, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Accessing-Selections.html" rel="up" title="Accessing Selections">
<link href="X-Selections.html" rel="prev" title="X Selections">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="subsection" id="Other-Selections">
<div class="header">
<p>
Previous: <a href="X-Selections.html" accesskey="p" rel="prev">X Selections</a>, Up: <a href="Accessing-Selections.html" accesskey="u" rel="up">Accessing Selections</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Other-Selections-1"></span><h4 class="subsection">30.22.2 Other Selections</h4>

<p>Selections under such window systems as MS-Windows, Nextstep, Haiku and
Android are not aligned with those under X.  Each of these window system
improvises its own selection mechanism without employing the &ldquo;selection
converter&rdquo; mechanism illustrated in the preceding node.  Only the
<code>PRIMARY</code>, <code>CLIPBOARD</code>, and <code>SECONDARY</code> selections are
generally supported, with the <code>XdndSelection</code> selection that records
drag-and-drop data also available under Nextstep and Haiku.
</p>
<span id="index-PGTK-selections"></span>
<p>GTK seeks to emulate the X selection system, but its emulations are not
altogether dependable, with the overall quality of each subject to the GDK
backend being used.  Therefore, Emacs built with PGTK will supply the same
selection interface as Emacs built with X, but many selection targets will
not be useful.
</p>
<span id="index-MS_002dWindows-selection-emulation"></span>
<span id="index-MS_002dWindows-primary-and-secondary-selection"></span>
<p>Although a clipboard exists, there is no concept of primary or secondary
selections within the MS-Windows operating system.  On this system, Emacs
simulates the presence of a primary and secondary selection, while saving to
and retrieving from the clipboard when so requested.
</p>
<p>The simulation of the primary and secondary selections is conducted by
saving values supplied to <code>gui-set-selection</code> within the
<code>x-selections</code> property of the symbol designating the pertinent
selection, namely the <var>type</var> argument to <code>gui-get-selection</code>.  Each
subsequent call to <code>gui-get-selection</code> in turn returns its value, which
is not subject to further examination (such as type checks and the like).
Under such circumstances, <var>data-type</var> argument is generally
disregarded.  (But see below for the qualification regarding
<code>TARGETS</code>.)
</p>
<span id="index-MS_002dWindows-clipboard"></span>
<p>Where the clipboard selection is concerned (whenever <var>type</var> is
<code>CLIPBOARD</code>), <code>gui-set-selection</code> verifies that the value provided
is a string and saves it within the system clipboard once it is encoded by
the coding system configured in <code>selection-coding-system</code>.  Callers of
<code>gui-get-selection</code> are required to set <var>data-type</var> to either
<code>STRING</code> or <code>TARGETS</code>.
</p>
<p>When <var>data-type</var> is set to <code>TARGETS</code> in a call to
<code>gui-get-selection</code>, a vector of symbols is returned when selection
data exists, much as it is under X.  It is impossible to request clipboard
data in any format besides <code>STRING</code>, for the prerequisite data
conversion routines are absent.  Just as strings saved into the clipboard
are encoded by the <code>selection-coding-system</code>, so those read from the
clipboard are decoded by that same coding system; this variable and its
cousin <code>next-selection-coding-system</code> merit particular scrutiny when
difficulties are encountered with saving selection text into the clipboard.
</p>
<span id="index-Nextstep-selections"></span>
<p>All three selections standard in X exist in Nextstep as well, but Emacs is
only capable of saving strings to such selections.  Restrictions imposed
upon calls to <code>gui-set-selection</code> there are much the same as those on
MS-Windows, though text is uniformly encoded as <code>utf-8-unix</code> without
regard to the value of <code>selection-coding-system</code>.
<code>gui-get-selection</code> is more charitable, and accepts requests for the
following selection targets:
</p>
<ul>
<li> text/plain
</li><li> image/png
</li><li> text/html
</li><li> application/pdf
</li><li> application/rtf
</li><li> application/rtfd
</li><li> STRING
</li><li> text/plain
</li><li> image/tiff
</li></ul>

<p>The <code>XdndSelection</code> selection is also present under Nextstep, in the
form of a repository that records values supplied to
<code>gui-set-selection</code>.  Its sole purpose is to save such values for the
fundamental drag-and-drop function <code>x-begin-drag</code> (see <a href="Drag-and-Drop.html">ドラッグアンドドロップ</a>); no guarantees exist concerning its value when read by anything else.
</p>
<span id="index-Haiku-selections"></span>
<p>Selections on Haiku systems comprise all three selections customary under X
and the <code>XdndSelection</code> that records drag-and-drop data.
</p>
<p>When <code>gui-set-selection</code> is called for the former three selections, the
data supplied is converted into a window server &ldquo;message&rdquo; by a list of
<em>selection encoder</em> functions, which is sent to the window server.
</p>
<dl class="def">
<dt id="index-haiku_002dnormal_002dselection_002dencoders"><span class="category">Variable: </span><span><strong>haiku-normal-selection-encoders</strong><a href='#index-haiku_002dnormal_002dselection_002dencoders' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>List of selection encoder functions.  When <code>gui-set-selection</code> is
called, each function in this list is successively called with its
<var>selection</var> and <var>value</var> arguments.  If such a function returns
non-<code>nil</code>, its return value must be a list of the form
<code>(<var>key</var>&nbsp;<var>type</var>&nbsp;<var>value</var>)</code><!-- /@w -->.  In this list, <var>key</var> must
be the name of the data being transferred, generally that of a MIME type,
for example &lsquo;<samp>&quot;text/plain&quot;</samp>&rsquo;, and <var>type</var> is a symbol or a number
designating the type of the data; thus also governing the interpretation of
<var>value</var>; following is a list of valid data types and how each of them
will cause <var>value</var> to be interpreted.
</p>
<dl compact="compact">
<dt><span><code>string</code></span></dt>
<dd><p>A unibyte string.  The string is NULL-terminated after being placed in the
message.
</p>
</dd>
<dt><span><code>ref</code></span></dt>
<dd><p>A file name.  The file is located and the inode identifying the file is
placed in the message.
</p>
</dd>
<dt><span><code>short</code></span></dt>
<dd><p>A 16-bit integer value.
</p>
</dd>
<dt><span><code>long</code></span></dt>
<dd><p>A 32-bit integer value.
</p>
</dd>
<dt><span><code>llong</code></span></dt>
<dd><p>A 64-bit integer value.
</p>
</dd>
<dt><span><code>byte</code></span></dt>
<dt><span><code>char</code></span></dt>
<dd><p>An unsigned byte between 0 and 255.
</p>
</dd>
<dt><span><code>size_t</code></span></dt>
<dd><p>A number between 0 and 1 minus two to the power of the word size of the
computer Emacs is running on.
</p>
</dd>
<dt><span><code>ssize_t</code></span></dt>
<dd><p>A number which fits in the C type <code>ssize_t</code>.
</p>
</dd>
<dt><span><code>point</code></span></dt>
<dd><p>A cons of two floats, specifying a coordinate on-screen.
</p>
</dd>
<dt><span><code>float</code></span></dt>
<dt><span><code>double</code></span></dt>
<dd><p>A single or double-precision floating point number in an unspecified format.
</p>
</dd>
<dt><span><code>(haiku-numeric-enum MIME)</code></span></dt>
<dd><p>A unibyte string containing data in a certain MIME type.
</p></dd>
</dl>
</dd></dl>

<p>A call to <code>gui-get-selection</code> generally returns the the data named
<var>data-type</var> within the selection message, albeit with <var>data-type</var>
replaced by an alternative name should it be one of the following X
selection targets:
</p>
<dl compact="compact">
<dt><span><code>STRING</code></span></dt>
<dd><p>This represents Latin-1 text under X: &ldquo;text/plain;charset=iso-8859-1&rdquo;
</p>
</dd>
<dt><span><code>UTF8_STRING</code></span></dt>
<dd><p>This represents UTF-8 text: &ldquo;text/plain&rdquo;
</p></dd>
</dl>

<p>If <var>data-type</var> is a text type such as <code>STRING</code> or a MIME type
matching the pattern &lsquo;<samp>`text/*</samp>&rsquo;, the string data is decoded with the
coding system apposite for it before being returned.
</p>
<p>Furthermore, the two data types <var>TIMESTAMP</var> and <code>TARGETS</code> are
afforded special treatment; the value returned for the first is the number
of times the selection has been modified since system startup (<em>not</em> a
timestamp), and that for the other is a vector of available selection data
types, as elsewhere.
</p>
<span id="index-Android-selections"></span>
<p>Much like MS-Windows, Android provides a clipboard but no primary or
secondary selection; <code>gui-set-selection</code> simulates the primary and
secondary selections by saving the value supplied into a variable subsequent
calls to <code>gui-get-selection</code> return.
</p>
<p>From the clipboard, <code>gui-get-selection</code> is capable of returning UTF-8
string data of the type <code>STRING</code>, the <code>TAREGTS</code> data type, or
image and application data of any MIME type.  <code>gui-set-selection</code> sets
only string data, much as under MS-Windows, although this data is not
affected by the value of <code>selection-coding-system</code>.  By contrast, only
string data can be saved to and from the primary and secondary selections;
but since this data is not communicated to programs besides Emacs, it is not
subject to encoding or decoding by any coding system.
</p>
</div>
<hr>
<div class="header">
<p>
Previous: <a href="X-Selections.html">X Selections</a>, Up: <a href="Accessing-Selections.html">Accessing Selections</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>


This page has generated for branch:work/master_4078d0fd3ee9e55c3da219aa6e7788ac6130697b, commit:41fd44de4d01dd8453ddd8b54ee45e92fe68609b to check Japanese translation.
</body>
</html>
