<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.91.

Copyright (C) 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Other Selections (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Other Selections (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Other Selections (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 27, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Accessing-Selections.html" rel="up" title="Accessing Selections">
<link href="X-Selections.html" rel="prev" title="X Selections">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<div class="subsection" id="Other-Selections">
<div class="header">
<p>
Previous: <a href="X-Selections.html" accesskey="p" rel="prev">X選択</a>, Up: <a href="Accessing-Selections.html" accesskey="u" rel="up">選択へのアクセス</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="sonoTa-noXuan-Ze-"></span><h4 class="subsection">30.22.2 その他の選択</h4>

<p>MS-Windows、Nextstep、Haiku、Androidのようなウィンドウシステムの選択はXの選択とは異なります。これらのウィンドウシステムは前ノードで説明した&ldquo;選択コンバーター&rdquo;メカニズムを採用せずに、それぞれが独自の選択メカニズムを場当たり的な使用しています。一般的にサポートされている選択は<code>PRIMARY</code>、<code>CLIPBOARD</code>、<code>SECONDARY</code>ですがドラッグアンドドロップのデータを記録する<code>XdndSelection</code>選択はNextstepとHaikuでも利用できます。
</p>
<span id="index-PGTK-selections"></span>
<p>GTKはxの選択システムをエミュレートする道わ模索していますがそのエミュレーションは完全に信頼の置けるものではなく、GDKバックエンドが使用される問題それぞれの全体的な品質に依存します。したがってPGTKとともにビルドしたEmacsでは、XとともにビルドしたEmacsと同じインターフェイスが提供されますが、選択ターゲットの多くは役に立たないでしょう。
</p>
<span id="index-MS_002dWindows-selection-emulation"></span>
<span id="index-MS_002dWindows-primary-and-secondary-selection"></span>
<p>たとえクリップボードはあっても、MS-Windowsというオペレーティングシステムにはプライマリーやセカンダリーという選択の概念がありません。このシステムでは要求に応じてクリップボードへの保存や取得を行う際に、Emacsがプライマリー選択とセカンダリー選択の存在をシミュレートしています。
</p>
<p>プライマリー選択とセカンダリー選択のシミュレーションは、<code>gui-set-selection</code>に与えられた選択との関連を指定するシンボルの<code>x-selections</code>プロパティ(すなわち<code>gui-get-selection</code>の<var>type</var>引数)の値を保存するすることによって行われます。その後の<code>gui-get-selection</code>呼び出しごとにその値がリターンされますが、その値はさらなる検査(型チェックなど)の対象ではありません。このような状況下では、<var>data-type</var>引数は通常は無視されます(ただし<code>TARGETS</code>に関する条件については以下参照)。
</p>
<span id="index-MS_002dWindows-clipboard"></span>
<p>クリップボード選択を考慮しなければならない場合(<var>type</var>が<code>CLIPBOARD</code>なら常時)には、<code>gui-set-selection</code>は提供された値が文字列であることを検証して、<code>selection-coding-system</code>で構成されたコーディングシステムでエンコードした後にシステムのクリップボードに保存します。<code>gui-get-selection</code>の呼び出し側は<var>data-type</var>を<code>STRING</code>か<code>TARGETS</code>のいずれかにセットすることを要求されます。
</p>
<p><code>gui-get-selection</code>の呼び出しにおいて<var>data-type</var>に<code>TARGETS</code>がセットされている場合には、選択データが存在すればXでの場合と同じようにシンボルのベクターがリターンされます。前提条件となるデータ変換ルーチンが存在しないので、<code>STRING</code>以外のフォーマットでクリップボードのデータを要求することは不可能です。<code>selection-coding-system</code>によってエンコードしてクリップボードに文字列を保存する場合と同じように、同じコーディングシステムによりデコードされた文字列が読み取られます選択データを保存する際に問題が生じた場合には、この変数、および同類の<code>next-selection-coding-system</code>は特に吟味する価値があるでしょう。
</p>
<span id="index-Nextstep-selections"></span>
<p>Xにおける標準であるこれら3つの選択はNextstepにも存在しますが、Emacsに唯一可能なのはこれらの選択への文字列の保存だけです。<code>selection-coding-system</code>の値に関わらずテキストは<code>utf-8-unix</code>として一律にエンコードされるとはいえ、<code>gui-set-selection</code>の呼び出しにはMS-Windowsの場合と同様の制限が課せられます。<code>gui-get-selection</code>はより寛大なので、以下の選択ターゲットにたいしてリクエストを受け付けます:
</p>
<ul>
<li> text/plain
</li><li> image/png
</li><li> text/html
</li><li> application/pdf
</li><li> application/rtf
</li><li> application/rtfd
</li><li> STRING
</li><li> text/plain
</li><li> image/tiff
</li></ul>

<p>Nextstepでは<code>XdndSelection</code>選択も、<code>gui-set-selection</code>に提供された値を記録するレポジトリという形式で存在します。これの唯一の目的は、基本的なドラッグアンドドロップ関数である<code>x-begin-drag</code>にたいする値を保存することにあります(<a href="Drag-and-Drop.html">ドラッグアンドドロップ</a>を参照)。他の何らかのによって読み取った値については何の保証もありません。
</p>
<span id="index-Haiku-selections"></span>
<p>Haikuシステムにおける選択はXにおいて慣例的な3つの選択すべて、およびドラッグアンドドロップデータを記録する<code>XdndSelection</code>から構成されています。
</p>
<p>前者の3つの選択にたいして<code>gui-set-selection</code>が呼び出されると、提供されたデータは<em>選択エンコーダー(selection
encoder)</em>という関数のリストによりウィンドウサーバーの&ldquo;メッセージ&rdquo;へと変換されて、ウィンドウサーバーに送信されます。
</p>
<dl class="def">
<dt id="index-haiku_002dnormal_002dselection_002dencoders"><span class="category">Variable: </span><span><strong>haiku-normal-selection-encoders</strong><a href='#index-haiku_002dnormal_002dselection_002dencoders' class='copiable-anchor'> &para;</a></span></dt>
<dd><p>選択エンコーダー関数のリスト。<code>gui-set-selection</code>が呼び出されると、その<var>selection</var>と<var>value</var>の引数により、このリスト内の関数がそれぞれ順に呼び出される。これらの関数が非<code>nil</code>をリターンする場合には、リターン値は<code>(<var>key</var>&nbsp;<var>type</var>&nbsp;<var>value</var>)</code><!-- /@w -->という形式のリストでなければならない。このリストにおいて<var>key</var>は転送されるデータの名前(一般的にはたとえば&lsquo;<samp>&quot;text/plain&quot;</samp>&rsquo;のようにそのデータのMIMEタイプ)、<var>type</var>はデータのタイプを指定するシンボルか数値(これらにより<var>value</var>の解釈も管理される)。以下のリストに有効なデータタイプ、およびそれらによって<var>value</var>がどのように解釈されることになるかを示す。
</p>
<dl compact="compact">
<dt><span><code>string</code></span></dt>
<dd><p>ユニバイト文字列。この文字列はメッセージ内に配置された後にNULL終端される。
</p>
</dd>
<dt><span><code>ref</code></span></dt>
<dd><p>ファイル名。ファイルを特定してそのファイルを識別するinodeをメッセージ内に配置する。
</p>
</dd>
<dt><span><code>short</code></span></dt>
<dd><p>16ビット整数値。
</p>
</dd>
<dt><span><code>long</code></span></dt>
<dd><p>32ビット整数値。
</p>
</dd>
<dt><span><code>llong</code></span></dt>
<dd><p>64ビット整数値。
</p>
</dd>
<dt><span><code>byte</code></span></dt>
<dt><span><code>char</code></span></dt>
<dd><p>0から255の符号なしバイト。
</p>
</dd>
<dt><span><code>size_t</code></span></dt>
<dd><p>0から1までの数値から、Emacs実行中のコンピューターのワードサイズの2乗を減じた値。
</p>
</dd>
<dt><span><code>ssize_t</code></span></dt>
<dd><p>Cの<code>ssize_t</code>型に適合する数値。
</p>
</dd>
<dt><span><code>point</code></span></dt>
<dd><p>スクリーン上の座標を指定する2つの浮動小数点数のコンス。
</p>
</dd>
<dt><span><code>float</code></span></dt>
<dt><span><code>double</code></span></dt>
<dd><p>フォーマット未指定の単精度または倍精度の浮動小数点数。
</p>
</dd>
<dt><span><code>(haiku-numeric-enum MIME)</code></span></dt>
<dd><p>特定のMIMEタイプのデータを含んだユニバイト文字列。
</p></dd>
</dl>
</dd></dl>

<p><code>gui-get-selection</code>の呼び出しにより通常だと選択メッセージ内に<var>data-type</var>という名前のデータがリターンされますが、代替えの名前によって<var>data-type</var>を置き換える場合には、以下のX選択ターゲットのいずれかが用いられます:
</p>
<dl compact="compact">
<dt><span><code>STRING</code></span></dt>
<dd><p>これはXにおいてLatin-1テキストを表す: &ldquo;text/plain;charset=iso-8859-1&rdquo;
</p>
</dd>
<dt><span><code>UTF8_STRING</code></span></dt>
<dd><p>UTF-8テキストを表す: &ldquo;text/plain&rdquo;
</p></dd>
</dl>

<p><var>data-type</var>が<code>STRING</code>のようなテキストタイプ、あるいはパターン&lsquo;<samp>`text/*</samp>&rsquo;にマッチするMIMEタイプの場合には、文字列データはリターンされる前に適切なコーディングシステムによってデコードされます。
</p>
<p>さらに<var>TIMESTAMP</var>と<code>TARGETS</code>の2つのデータタイプは特別に取り扱われます。前者にたいしてリターンされる値はシステムの起動以降に選択が変更された回数(タイムスタンプでは<em>ない</em>)、後者については他の場合と同じように任意の選択データタイプのベクターです。
</p>
<span id="index-Android-selections"></span>
<p>MS-Windowsと同じようにAndroidはクリップボードを提供しますがプライマリー選択とセカンダリー選択はありません。<code>gui-set-selection</code>は<code>gui-get-selection</code>呼び出し後にリターンされる値を変数に保存することでプライマリー選択とセカンダリー選択をシミュレートします。
</p>
<p><code>gui-get-selection</code>にはクリップボードからタイプ<code>STRING</code>のUTF-8文字列データ、<code>TAREGTS</code>データタイプ、イメージデータや任意のMIMEタイプのアプリケーションデータをリターンする能力があります。<code>gui-set-selection</code>はたとえデータが<code>selection-coding-system</code>の値に影響を受けなくても、MS-Windowsの場合と同じように文字列データだけをセットできます。これとは対照的にプライマリー選択およびセカンダリー選択との間で保存と読み取りができるのは文字列データだけです。ただしこのデータがEmacs以外のプログラムとやり取りされることはないので、何らかのコーディングシステムによるエンコーディングやデコーディングの対象ではありません。
</p>
</div>


This page has generated for branch:work/emacs-30_11e7ae3964e192b0e4bcc437a04278ee727e720b, commit:a51afcbc532f1180f01868d10a6f3ad99fcd30a9 to check Japanese translation.
</body>
</html>
