<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 27.1.

Copyright (C) 1990-1996, 1998-2021 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 5.2, http://www.gnu.org/software/texinfo/ -->
<head>
<title>GNU Emacs Lisp Reference Manual: Command Modes</title>

<meta name="description" content="GNU Emacs Lisp Reference Manual: Command Modes">
<meta name="keywords" content="GNU Emacs Lisp Reference Manual: Command Modes">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="December 30, 2021">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Defining-Commands.html#Defining-Commands" rel="up" title="Defining Commands">
<link href="Generic-Commands.html#Generic-Commands" rel="next" title="Generic Commands">
<link href="Interactive-Examples.html#Interactive-Examples" rel="prev" title="Interactive Examples">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.indentedblock {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smallindentedblock {margin-left: 3.2em; font-size: smaller}
div.smalllisp {margin-left: 3.2em}
kbd {font-style:oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:nowrap}
span.nolinebreak {white-space:nowrap}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="ja_JP" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">
<a name="Command-Modes"></a>
<div class="header">
<p>
Next: <a href="Generic-Commands.html#Generic-Commands" accesskey="n" rel="next">Generic Commands</a>, Previous: <a href="Interactive-Examples.html#Interactive-Examples" accesskey="p" rel="prev">Interactive Examples</a>, Up: <a href="Defining-Commands.html#Defining-Commands" accesskey="u" rel="up">Defining Commands</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="komandonitaisurumodoZhi-Ding-"></a>
<h4 class="subsection">22.2.4 コマンドにたいするモード指定</h4>
<a name="index-commands_002c-mode_002dspecific"></a>
<a name="index-commands_002c-specify-as-mode_002dspecific"></a>
<a name="index-mode_002dspecific-commands"></a>

<p>Emacsのコマンドの多くは汎用であり、特定のモードに関連付けられていません。たとえば<kbd>M-x
kill-region</kbd>は編集可能テキストをもつほとんどのモード、(<kbd>M-x
list-buffers</kbd>のような)情報表示コマンドはほとんどのコンテキストで使用できます。
</p>
<p>しかしそれ以外の多くのコマンドはモードに具体的に関連付けられており、そのコンテキスト外部では意味をなしません。たとえばDiredバッファーの外部で<code>M-x
dired-diff</code>を使用すると、単にエラーをシグナルするでしょう。
</p>
<p>したがってEmacsにはコマンドが&ldquo;所属する&rdquo;モードが何かを指定するためのメカニズムがあります:
</p>
<div class="lisp">
<pre class="lisp">(defun dired-diff (...)
  ...
  (interactive &quot;p&quot; dired-mode)
  ...)
</pre></div>

<p>これはそのコマンドを<code>dired-mode</code>
(や<code>dired-mode</code>から派生したモード)だけに適用されるようにマークします。<code>interactive</code>フォームには任意個数のモードを追加できます。
</p>
<a name="index-read_002dextended_002dcommand_002dpredicate"></a>
<p>Specifying modes affects command completion in <kbd>M-S-x</kbd>
(<code>execute-extended-command-for-buffer</code>, see <a href="Interactive-Call.html#Interactive-Call">Interactive Call</a>).  It
may also affect completion in <kbd>M-x</kbd>, depending on the value of
<code>read-extended-command-predicate</code>.
</p>
<p>For instance, when using the <code>command-completion-default-include-p</code>
predicate as the value of <code>read-extended-command-predicate</code>, <kbd>M-x</kbd>
won&rsquo;t list commands that have been marked as being applicable to a specific
mode (unless you are in a buffer that uses that mode, of course).  This goes
for both major and minor modes.  (By contrast, <kbd>M-S-x</kbd> always omits
inapplicable commands from the completion candidates.)
</p>
<p>By default, <code>read-extended-command-predicate</code> is <code>nil</code>, and
completion in <kbd>M-x</kbd> lists all the commands that match what the user has
typed, whether those commands are or aren&rsquo;t marked as applicable to the
current buffer&rsquo;s mode.
</p>
<p>Marking commands to be applicable to a mode will also make <kbd>C-h m</kbd> list
these commands (if they aren&rsquo;t bound to any keys).
</p>
<p>(拡張<code>interactive</code>フォームをサポートしない古いバージョンのEmacsでは動作すると思われるコードがある等で)この拡張<code>interactive</code>フォームの使用が不便なら、かわりに等価な以下の宣言(<a href="Declare-Form.html#Declare-Form">Declare Form</a>を参照)を使用できます:
</p>
<div class="lisp">
<pre class="lisp">(declare (modes dired-mode))
</pre></div>

<p>コマンドのモードへのタグ付けはある意味好みの問題ですが、そのモードの外部では動作しないことが明確なコマンドはタグ付けするべきです。これにはどこか別の場所で呼び出すとエラーをシグナルするだけではなく、期待しないモードからの呼び出しが破壊的なコマンドも含まれます(これは通常はスペシャルモード、すなわち編集不可なモード用に記述されたコマンドのほとんどが含まれる)。
</p>
<p>別モードから呼び出した際にも害がなく、&ldquo;機能する&rdquo;コマンドもありますが、それでも別の場所使用することが実際に無意味なコマンドには、依然としてタグ付けする必要があります。たとえば多くのスペシャルモードはバッファーのexitコマンドに<kbd>q</kbd>をバインドしており、これは&quot;Goodbye
from this
mode&quot;のようなメッセージを発行して<code>kill-buffer</code>を呼び出す以外は何も行わないかもしれません。このコマンドは別のモードでも&ldquo;機能する&rdquo;でしょうが、そのスペシャルモードのコンテキスト外部でこのコマンドを実際に使いたいと思う人が居るようには思えません。
</p>
<p>多くのモードには、そのモードを異なる方法で開始するために、一連の異なるコマンドがあります (例:
<code>eww-open-in-new-buffer</code>と<code>eww-open-file</code>)。このようなコマンドはユーザーがさまざまなコンテキストから発行し得るので、モード固有とタグ付けするべきでは決してありません。
</p>


This page has generated for branch:work/translate_emacs-28_06545bc0cc533b1abd831dd521df5f3369675d61, commit:0c0f61c887ee5078ca429bba770b5c5c22a78da6 to check Japanese translation.
</body>
</html>
