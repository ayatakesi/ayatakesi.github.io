<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 28.1.

Copyright (C) 1990-1996, 1998-2022 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Shorthands (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Shorthands (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Shorthands (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="November 5, 2022">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Symbols.html" rel="up" title="Symbols">
<link href="Evaluation.html" rel="next" title="Evaluation">
<link href="Standard-Properties.html" rel="prev" title="Standard Properties">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en_US">
<span id="Shorthands"></span><div class="header">
<p>
Previous: <a href="Symbol-Properties.html" accesskey="p" rel="prev">Symbol Properties</a>, Up: <a href="Symbols.html" accesskey="u" rel="up">Symbols</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="siyotohando"></span><h3 class="section">9.5 ショートハンド</h3>
<span id="index-shorthands"></span>
<span id="index-symbolic-shorthands"></span>
<span id="index-namespacing"></span>
<span id="index-namespaces"></span>

<p>&ldquo;名前変更シンボル(renamed symbols)&rdquo;と呼ばれることもあるシンボルの<em>ショートハンド(shorthands:
速記、簡略表記)</em>とは、Lispソースで目にする抽象形式です。これらは正規の抽象形式と類似していますが、Lispリーダーがそれらに遭遇した際に別の通常はもっと長い<em>プリント名(print
name)</em>を生成する点が異なリます(<a href="Symbol-Components.html">Symbol Components</a>を参照)。
</p>
<p>ショートハンドを意図するシンボルの完全名にたいする<em>略語(abbreviating)</em>と考えることは有益です。その点を除けばAbbrevシステム(<a href="Abbrevs.html">Abbrevs</a>を参照)とショートハンドをコンドミニアムしないでください。
</p>
<span id="index-namespace-etiquette"></span>
<p>ショートハンドによりEmacs Lispの<em>ネームスペース作法(namespacing
etiquette)</em>にしたがうことが容易になります。すべてのシンボルは単一のobarray (<a href="Creating-Symbols.html">Creating Symbols</a>を参照)に格納されるので、一般的にプログラマーはシンボル名それぞれにたいして出自ライブラリー名をプレフィクスとして付加します。たとえば関数<code>text-property-search-forward</code>と<code>text-property-search-backward</code>はどちらも<samp>text-property-search.el</samp>ライブラリーに属しています(<a href="Loading.html">Loading</a>を参照)。シンボル名に正しくプレフィクスを付加することによって、異なるライブラリーに属する別のことを行う同一名シンボル間でのクラッシュを効果的に回避できます。しかしこれを実践してしばらくすると、一般的にはタイプしにくく読み難い、非常に長いシンボル名となります。これらの問題をショートハンドは明快な方法により解決します。
</p>
<dl>
<dt id="index-read_002dsymbol_002dshorthands">Variable: <strong>read-symbol-shorthands</strong></dt>
<dd><p>この変数の値は要素が<code>(<var>shorthand-prefix</var>
.
<var>longhand-prefix</var>)</code>という形式であるようなalist。それぞれの要素はLispリーダーにたいして、<var>shorthand-prefix</var>で始まるすべてのシンボルを、<var>longhand-prefix</var>で始まるシンボルとして読み取るよう指示する。
</p>
<p>この変数はファイルローカル変数としてのみセットできる(<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/File-Variables.html#File-Variables">Local Variables in Files</a> in <cite>The GNU Emacs Manual</cite>を参照)。
</p></dd></dl>

<p>以下は架空の文字列操作ライブラリー<samp>some-nice-string-utils.el</samp>でショートハンドを使用する例です。
</p>
<div class="lisp">
<pre class="lisp">(defun some-nice-string-utils-split (separator s &amp;optional omit-nulls)
  &quot;match-dataを保存する`split-string'の変種&quot;
  (save-match-data (split-string s separator omit-nulls)))

(defun some-nice-string-utils-lines (s)
  &quot;文字列Sを改行文字で分割して文字列リストにする&quot;
  (some-nice-string-utils-split &quot;\\(\r\n\\|[\n\r]\\)&quot; s))
</pre></div>

<p>見ての通りタイプするシンボル名が非常に長いので、このコードを読んだり開発するのはとても退屈です。これの緩和にショートハンドが使用できます。
</p>
<div class="lisp">
<pre class="lisp">(defun snu-split (separator s &amp;optional omit-nulls)
  &quot;match-dataを保存する`split-string'の変種&quot;
  (save-match-data (split-string s separator omit-nulls)))

(defun snu-lines (s)
  &quot;文字列Sを改行文字で分割して文字列リストにする&quot;
  (snu-split &quot;\\(\r\n\\|[\n\r]\\)&quot; s))

;; Local Variables:
;; read-symbol-shorthands: ((&quot;snu-&quot; . &quot;some-nice-string-utils-&quot;))
;; End:
</pre></div>

<p>この2つの例が異なるように見えても、これらをLispリーダーが処理した後はまったく同じです。どちらもインターン(<a href="Creating-Symbols.html">Creating Symbols</a>を参照)される同一のシンボルへと導かれます。したがって2つのファイルのどちらをバイトコンパイルしても、同じ結果が得られます。2つ目のバージョンのショートハンド<code>snu-split</code>と<code>snu-lines</code>はobarrayに<em>インターンされません</em>。これはショートハンド使用箇所にポイントを移動して、ポイント位置のシンボルの真のシンボル名のヒントをElDoc
(<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Lisp-Doc.html#Lisp-Doc">Local Variables in Files</a> in <cite>The GNU Emacs
Manual</cite>を参照)がエコーエリアに表示するのを待つことで容易に確認できます。
</p>
<p><code>read-symbol-shorthands</code>はファイルローカル変数なので、<samp>some-nice-string-utils-lines.el</samp>に依存する複数のライブラリーが同一のシンボルを<em>異なる</em>ショートハンドで参照したり、あるいはショートハンドをまったく使用せずに参照することが可能になります。次の例では<samp>my-tricks.el</samp>ライブラリーが<code>snu-</code>ではなく、<code>sns-</code>というプレフィクスを使用してシンボル<code>some-nice-string-utils-lines</code>を参照しています。
</p>
<div class="example">
<pre class="example">(defun t-reverse-lines (s) (string-join (reverse (sns-lines s)) &quot;\n&quot;)

;; Local Variables:
;; read-symbol-shorthands: ((&quot;t-&quot; . &quot;my-tricks-&quot;)
;;                          (&quot;sns-&quot; . &quot;some-nice-string-utils-&quot;))
;; End:
</pre></div>

<span id="LiWai-"></span><h4 class="subsection">9.5.1 例外</h4>

<p>ショートハンド変換適用を管理するにあたって2つの例外があります:
</p>
<ul>
<li> Emacs Lispシンボル構成クラス(<a href="Syntax-Class-Table.html">Syntax Class Table</a>を参照)の文字だけでシンボルフォーム全体が形成される場合には変換されない。たとえば<code>-</code>や<code>/=</code>をショートハンドプレフィクスとして使用するのは可能だが、それらの名前は算術の<em>関数</em>をシャドーしない。

</li><li> 名前が&lsquo;<samp>#_</samp>&rsquo;で始まるシンボルフォームは変換されない。
</li></ul>


This page has generated for branch:work/add_lispintr, commit:5ccaf00b1338aa9a5ff44d1f9008b39a9d714784 to check Japanese translation.
</body>
</html>
