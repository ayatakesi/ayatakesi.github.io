<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.0.91.

Copyright © 1990-1996, 1998-2024 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<title>Shorthands (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Shorthands (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Shorthands (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<meta name="date" content="October 6, 2024">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Symbols.html" rel="up" title="Symbols">
<link href="Symbols-with-Position.html" rel="next" title="Symbols with Position">
<link href="Symbol-Properties.html" rel="prev" title="Symbol Properties">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Shorthands">
<div class="nav-panel">
<p>
Next: <a href="Symbols-with-Position.html" accesskey="n" rel="next">位置つきシンボル</a>, Previous: <a href="Symbol-Properties.html" accesskey="p" rel="prev">シンボルのプロパティ</a>, Up: <a href="Symbols.html" accesskey="u" rel="up">シンボル</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="siyotohando"><span>9.5 ショートハンド<a class="copiable-link" href="#siyotohando"> &para;</a></span></h3>
<a class="index-entry-id" id="index-shorthands"></a>
<a class="index-entry-id" id="index-symbolic-shorthands"></a>
<a class="index-entry-id" id="index-namespacing"></a>
<a class="index-entry-id" id="index-namespaces"></a>

<p>&ldquo;名前変更シンボル(renamed symbols)&rdquo;と呼ばれることもあるシンボルの<em class="dfn">ショートハンド(shorthands:
速記、簡略表記)</em>とは、Lispソースで目にする抽象形式です。これらは正規の抽象形式と類似していますが、Lispリーダーがそれらに遭遇した際に別の通常はもっと長い<em class="dfn">プリント名(print
name)</em>を生成する点が異なリます(<a class="ref" href="Symbol-Components.html">シンボルの構成要素</a>を参照)。
</p>
<p>ショートハンドを意図するシンボルの完全名にたいする<em class="emph">略語(abbreviating)</em>と考えることは有益です。その点を除けばAbbrevシステム(<a class="ref" href="Abbrevs.html">abbrevとabbrev展開</a>を参照)とショートハンドを混同しないでください。
</p>
<a class="index-entry-id" id="index-namespace-etiquette"></a>
<p>ショートハンドによりEmacs Lispの<em class="dfn">ネームスペース作法(namespacing
etiquette)</em>にしたがうことが容易になります。すべてのシンボルは単一のobarray (<a class="ref" href="Creating-Symbols.html">シンボルの作成とintern</a>を参照)に格納されるので、一般的にプログラマーはシンボル名それぞれにたいして出自ライブラリー名をプレフィクスとして付加します。たとえば関数<code class="code">text-property-search-forward</code>と<code class="code">text-property-search-backward</code>はどちらも<samp class="file">text-property-search.el</samp>ライブラリーに属しています(<a class="ref" href="Loading.html">ロード</a>を参照)。シンボル名に正しくプレフィクスを付加することによって、異なるライブラリーに属する別のことを行う同一名シンボル間でのクラッシュを効果的に回避できます。しかしこれを実践してしばらくすると、一般的にはタイプしにくく読み難い、非常に長いシンボル名となります。これらの問題をショートハンドは明快な方法により解決します。
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-read_002dsymbol_002dshorthands"><span class="category-def">Variable: </span><span><strong class="def-name">read-symbol-shorthands</strong><a class="copiable-link" href="#index-read_002dsymbol_002dshorthands"> &para;</a></span></dt>
<dd><p>この変数の値は要素が<code class="code">(<var class="var">shorthand-prefix</var>
.
<var class="var">longhand-prefix</var>)</code>という形式であるようなalist。それぞれの要素はLispリーダーにたいして、<var class="var">shorthand-prefix</var>で始まるすべてのシンボルを、<var class="var">longhand-prefix</var>で始まるシンボルとして読み取るよう指示する。
</p>
<p>この変数はファイルローカル変数としてのみセットできる(<a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/File-Variables.html#File-Variables">Local Variables in Files</a> in <cite class="cite">The GNU Emacs Manual</cite>を参照)。
</p></dd></dl>

<p>以下は架空の文字列操作ライブラリー<samp class="file">some-nice-string-utils.el</samp>でショートハンドを使用する例です。
</p>
<div class="example smalllisp lisp">
<pre class="lisp-preformatted">(defun some-nice-string-utils-split (separator s &amp;optional omit-nulls)
  &quot;match-dataを保存する`split-string'の変種&quot;
  (save-match-data (split-string s separator omit-nulls)))

(defun some-nice-string-utils-lines (s)
  &quot;文字列Sを改行文字で分割して文字列リストにする&quot;
  (some-nice-string-utils-split &quot;\\(\r\n\\|[\n\r]\\)&quot; s))
</pre></div>

<p>見ての通りタイプするシンボル名が非常に長いので、このコードを読んだり開発するのはとても退屈です。これの緩和にショートハンドが使用できます。
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(defun snu-split (separator s &amp;optional omit-nulls)
  &quot;match-dataを保存する`split-string'の変種&quot;
  (save-match-data (split-string s separator omit-nulls)))

(defun snu-lines (s)
  &quot;文字列Sを改行文字で分割して文字列リストにする&quot;
  (snu-split &quot;\\(\r\n\\|[\n\r]\\)&quot; s))

;; Local Variables:
;; read-symbol-shorthands: ((&quot;snu-&quot; . &quot;some-nice-string-utils-&quot;))
;; End:
</pre></div>

<p>この2つの例が異なるように見えても、これらをLispリーダーが処理した後はまったく同じです。どちらもインターン(<a class="ref" href="Creating-Symbols.html">シンボルの作成とintern</a>を参照)される同一のシンボルへと導かれます。したがって2つのファイルのどちらをバイトコンパイルしても、同じ結果が得られます。2つ目のバージョンのショートハンド<code class="code">snu-split</code>と<code class="code">snu-lines</code>はobarrayに<em class="emph">インターンされません</em>。これはショートハンド使用箇所にポイントを移動して、ポイント位置のシンボルの真のシンボル名のヒントをElDoc
(<a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Programming-Language-Doc.html#Programming-Language-Doc">Local Variables in Files</a> in <cite class="cite">The GNU
Emacs Manual</cite>を参照)がエコーエリアに表示するのを待つことで容易に確認できます。
</p>
<p><code class="code">read-symbol-shorthands</code>はファイルローカル変数なので、<samp class="file">some-nice-string-utils-lines.el</samp>に依存する複数のライブラリーが同一のシンボルを<em class="emph">異なる</em>ショートハンドで参照したり、あるいはショートハンドをまったく使用せずに参照することが可能になります。次の例では<samp class="file">my-tricks.el</samp>ライブラリーが<code class="code">snu-</code>ではなく、<code class="code">sns-</code>というプレフィクスを使用してシンボル<code class="code">some-nice-string-utils-lines</code>を参照しています。
</p>
<div class="example">
<pre class="example-preformatted">(defun t-reverse-lines (s) (string-join (reverse (sns-lines s)) &quot;\n&quot;)

;; Local Variables:
;; read-symbol-shorthands: ((&quot;t-&quot; . &quot;my-tricks-&quot;)
;;                          (&quot;sns-&quot; . &quot;some-nice-string-utils-&quot;))
;; End:
</pre></div>

<p>同じファイル内で一方がもう一方のプレフィクスであるようなショートハンドが2つある場合には、最初に長いほうのショートハンドが試されることに注意してください。これはファイルのローカル変数セクションにおけるショートハンドの指定順序とは無関係に行われます。
</p>
<div class="example">
<pre class="example-preformatted">'(
  t//foo ; reads to 'my-tricks--foo', not 'my-tricks-/foo'
  t/foo  ; reads to 'my-tricks-foo'
  )

;; Local Variables:
;; read-symbol-shorthands: ((&quot;t/&quot; . &quot;my-tricks-&quot;)
;;                          (&quot;t//&quot; . &quot;my-tricks--&quot;)
;; End:
</pre></div>

<ul class="mini-toc">
<li><a href="#LiWai-" accesskey="1">例外</a></li>
</ul>
<div class="subsection-level-extent" id="LiWai-">
<h4 class="subsection"><span>9.5.1 例外<a class="copiable-link" href="#LiWai-"> &para;</a></span></h4>

<p>ショートハンド変換適用を管理するにあたって2つの例外があります:
</p>
<ul class="itemize mark-bullet">
<li>Emacs Lispシンボル構成クラス(<a class="ref" href="Syntax-Class-Table.html">構文クラスのテーブル</a>を参照)の文字だけでシンボルフォーム全体が形成される場合には変換されない。たとえば<code class="code">-</code>や<code class="code">/=</code>をショートハンドプレフィクスとして使用するのは可能だが、それらの名前は算術の<em class="emph">関数</em>をシャドーしない。

</li><li>名前が&lsquo;<samp class="samp">#_</samp>&rsquo;で始まるシンボルフォームは変換されない。
</li></ul>

</div>
</div>


This page has generated for branch:work/emacs-30_11e7ae3964e192b0e4bcc437a04278ee727e720b, commit:b6f951d6fb0f136d2d8b6df083c55e42dc2b8dc5 to check Japanese translation.
</body>
</html>
