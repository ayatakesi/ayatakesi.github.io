<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.5.

Copyright (C) 1990-1996, 1998-2015 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.6, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Documentation Tips (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Documentation Tips (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Documentation Tips (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2any">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Tips.html#Tips" rel="up" title="Tips">
<link href="Comment-Tips.html#Comment-Tips" rel="next" title="Comment Tips">
<link href="Warning-Tips.html#Warning-Tips" rel="prev" title="Warning Tips">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>

<link rel="stylesheet" type="text/css" href="info.css"/>
<script src="modernizr.js" type="text/javascript"></script>
<script src="info.js" type="text/javascript"></script>

</head>

<body lang="en">
<span id="Documentation-Tips"></span><div class="header">
<p>
Next: <a href="Comment-Tips.html#Comment-Tips" accesskey="n" rel="next">Comment Tips</a>, Previous: <a href="Warning-Tips.html#Warning-Tips" accesskey="p" rel="prev">Warning Tips</a>, Up: <a href="Tips.html#Tips" accesskey="u" rel="up">Tips</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Tips-for-Documentation-Strings"></span><h3 class="section">D.6 Tips for Documentation Strings</h3>
<span id="index-documentation-strings_002c-conventions-and-tips"></span>

<span id="index-checkdoc_002dminor_002dmode"></span>
<p>以下は、ドキュメント文字列記述に関するいくつかのヒントと慣習です。コマンド<kbd>M-x
checkdoc-minor-mode</kbd>を実行すれば、これらの慣習の多くをチェックできます。
</p>
<ul>
<li> ユーザーが理解することを意図したすべての関数、コマン、変数はドキュント文字列をもつこと。

</li><li> Lispプログラムの内部的な変数とサブルーチンは、同様にドキュメント文字列をもつことができる。ドキュメント文字列は、実行中のEmacs内で非常に僅かなスペースしか占めない。

</li><li> 80列スクリーンのEmacsウィンドウに適合するように、ドキュメント文字列をフォーマットすること。ほとんどの行を60文字以下に短くするのは、良いアイデアである。最初の行は67文字以下にすること。さもないと<code>apropos</code>の出力で見栄えが悪くなる。

<span id="index-emacs_002dlisp_002ddocstring_002dfill_002dcolumn"></span>
<p>見栄えがよくなるなら、そのテキストをフィルできる。Emacs
Lispモードは、<code>emacs-lisp-docstring-fill-column</code>で指定された幅に、ドキュメント文字列をフィルする。しかし、ドキュメント文字列の行ブレークを注意深く調整すれば、ドキュメント文字列の可読性をより向上できることがある。ドキュメント文字列が長い場合には、セクション間に空行を使用すること。
</p>
</li><li> ドキュンメント文字列の最初の行は、それ自身が要約となるような、1つか2つの完全なセンテンスから成り立つこと。<kbd>M-x
apropos</kbd>は最初の行だけを表示するので、その行のコンテンツが自身で完結していなければ、結果の見栄えは悪くなる。特に、最初の行は大文字で始めて、ピリオで終わること。

<p>関数では最初の行は&ldquo;その関数は何を行うのか?&rdquo;、変数にたいしては最初の行は&ldquo;その値は何を意味するのか?&rdquo;という問いに簡略に答えること。
</p>
<p>ドキュメント文字列を1行に制限しないこと。その関数や変数の使用法の詳細を説明する必要に応じて、その分の行数を使用すること。テキストの残りの部分にたいしても、完全なセンテンスを使用してほしい。
</p>
</li><li> ユーザーが無効化されたコマンドの使用を試みる際、Emacsはそれのドキュメント文字列の最初のパラグラフ(最初の空行までのすべて)だけを表示する。もし望むならえ、その表示をより有用になるよう、最初の空行の前に何の情報を含めるか選択できる。

</li><li> 最初の行では、その関数のすべての重要な引数と、関数呼び出しで記述される順に、それらに言及すること。その関数が多くの引数をもつなら、最初の行でそれらすべてに言及するのは不可能である。この場合、もっとも重要な引数を含む、最初の引数数個について最初の行で言及すること。

</li><li> ある関数のドキュメント文字列がその関数の引数の値に言及する際には、引数を大文字にした名前が引数の値であるかのように使用すること。つまり関数<code>eval</code>のドキュメント文字列では、最初の引数の名前が<code>form</code>なので、&lsquo;<samp>FORM</samp>&rsquo;で参照する:

<div class="example">
<pre class="example">Evaluate FORM and return its value.
</pre></div>

<p>同様に、リストやベクターをサブユニットへの分解で、それらのいくつかを異なるように示すような際には、メタ構文変数(metasyntactic
variables)を大文字で記述すること。以下の例の&lsquo;<samp>KEY</samp>&rsquo;と&lsquo;<samp>VALUE</samp>&rsquo;は、これの実践例である:
</p>
<div class="example">
<pre class="example">The argument TABLE should be an alist whose elements
have the form (KEY . VALUE).  Here, KEY is ...
</pre></div>

</li><li> ドキュメント文字列内でLispシンボルに言及する際は、大文字小文字を絶対に変更しないこと。そのシンボルの名前が<code>foo</code>なら、&ldquo;Foo&rdquo;ではなく&ldquo;foo&rdquo;である(&ldquo;Foo&rdquo;は違うシンボルだ)。

<p>これは、関数の引数の値の記述ポリシーと反するように見えるかもしれないが、矛盾は実際には存在しない。引数の<em>value</em>は、その関数が値の保持に使用する<em>symbol</em>と同じではない。
</p>
<p>これによりセンテンス先頭に小文字を置くことになり、それが煩しいなら、センテンス開始がシンボルにならないようそのセンテンスを書き換えること。
</p>
</li><li> ドキュメント文字列の開始と終了は空白文字を使用しないこと。

</li><li> ソースコード内の後続行のテキストが、最初の行と揃うとうに、ドキュメント文字列の後続行を<strong>インデントしてはならない</strong>。これはソースコードでは見栄えがよいが、ユーザーがドキュメトを閲覧する際は奇妙な見栄えになる。開始のダブルクォーテーションの前のインデントは、その文字列の一部には含まれないことを忘れないこと!

<span id="Docstring-hyperlinks"></span></li><li> ドキュメント文字列がLispシンボルを参照する際には、たとえば&lsquo;<samp>lambda</samp>&rsquo;のように、それがプリントされるとき(通常は小文字を意味する)のように、前後をシングルクォーテーションで括るとともに、記述すること。2つ例外はある。<code>t</code>と<code>nil</code>はシングルクォーテーションを記述しない(このマニュアルでは、すべてのシンボルをシングルクォーテーションで括り、異なる慣習を使用している)。

<span id="index-hyperlinks-in-documentation-strings"></span>
<p>Helpモードは、シングルクォーテーションの内部のシンボル名がドキュメント文字列で使用されている際、それが関数と変数のいずれかの定義をもつ婆には、自動的にハイパーリンクを作成する。これらの機能を使用するのに、何か特別なことを行う必要はない。しかしあるシンボルが関数と変数の両方の定義をもち、れらの一方だけを参照したい場合にには、そのシンボル名の直前に&lsquo;<samp>variable</samp>&rsquo;、&lsquo;<samp>option</samp>&rsquo;、&lsquo;<samp>function</samp>&rsquo;、&lsquo;<samp>command</samp>&rsquo;の単語のいずれかを記述して、それを指定できる(これらの指示語の識別では大文字小文字に差はない)。たとえば以下を記述すると
</p>
<div class="example">
<pre class="example">This function sets the variable `buffer-file-name'.
</pre></div>

<p>これのハイパーリンクは<code>buffer-file-name</code>の変数のドキュメントだけを参照し、関数のドキュメントは参照しない。
</p>
<p>あるシンボルが関数、および/または変数の定義をもつが、ドキュメントしているシンボルの使用とそれらが無関係なら、すべてのハイパーリンク作成を防ぐために、そのシンボル名の前に単語&lsquo;<samp>symbol</samp>&rsquo;か&lsquo;<samp>program</samp>&rsquo;を記述できる。たとえば、
</p>
<div class="example">
<pre class="example">If the argument KIND-OF-RESULT is the symbol `list',
this function returns a list of all the objects
that satisfy the criterion.
</pre></div>

<p>これは、ここでは無関係な関数<code>list</code>のドキュメントに、ハイパーリンクを作成しない。
</p>
<p>通常、変数ドキュメントがない変数には、ハイパーリンクは作成されない。そのような変数の前に単語&lsquo;<samp>variable</samp>&rsquo;と&lsquo;<samp>option</samp>&rsquo;のいずれかを記述すれば、ハイパーリンクの作成を強制できる。
</p>
<p>フェイスにたいするハイパーリンクは、そのフェイスの前か後に単語&lsquo;<samp>face</samp>&rsquo;があれば作成される。この場合には、たとえそのシンボルが変数や関数として定義されていても、フェイスのドキュメントだけが表示される。
</p>
<p>Infoドキュメントにハイパーリンクを作成するには、&lsquo;<samp>info node</samp>&rsquo;、&lsquo;<samp>Info node</samp>&rsquo;、&lsquo;<samp>info
anchor</samp>&rsquo;、&lsquo;<samp>Info
anchor</samp>&rsquo;のいずれかの後に、シングルクォーテーション内にInfoのノード(かアンカー)を記述する。このInfoファイル名のデフォルトは&lsquo;<samp>emacs</samp>&rsquo;である。たとえば、
</p>
<div class="example">
<pre class="example">See Info node `Font Lock' and Info node `(elisp)Font Lock Basics'.
</pre></div>

<p>最後にURLのハイパーリンクを作成するには、&lsquo;<samp>URL</samp>&rsquo;の後にシングルクォーテーションで括ったURLを記述する。たとえば、
</p>
<div class="example">
<pre class="example">The home page for the GNU project has more information (see URL
`http://www.gnu.org/').
</pre></div>

</li><li> ドキュメント文字列内に直接キーシーケンスを記述しないこと。かわりに、それらを表すために&lsquo;<samp>\\[&hellip;]</samp>&rsquo;構造を使用すること。たとえば&lsquo;<samp>C-f</samp>&rsquo;と記述するかわりに、&lsquo;<samp>\\[forward-char]</samp>&rsquo;と記述する。Emacsがドキュメント文字列を表示する際には、何であれカレントで<code>forward-char</code>にバインドされたキーに置き換える(これは通常は&lsquo;<samp>C-f</samp>&rsquo;だが、そのユーザーがキーバインディングを移動していれば、何か他の文字かもしれない)。<a href="Keys-in-Documentation.html#Keys-in-Documentation">Keys in Documentation</a>を参照のこと。

</li><li> メジャーモードのドキュメント文字列では、グローバルマップではなく、そのモードのローカルマップを参照したいだろう。したがって、どのキーマップを使用するか指定するために、ドキュメント文字列内で一度&lsquo;<samp>\\&lt;&hellip;&gt;</samp>&rsquo;構造を使用する。最初に&lsquo;<samp>\\[&hellip;]</samp>&rsquo;を使用する前にこれを行うこと。&lsquo;<samp>\\&lt;&hellip;&gt;</samp>&rsquo;の内部のテキストは、そのメジャーモードにたいするローカルキーマップを含む変数名であること。

<p>ドキュメント文字列の表示が低速になるので、非常に多数回の&lsquo;<samp>\\[&hellip;]</samp>&rsquo;の使用は実用的ではない。メジャーモードのもっとも重要なコマンドの記述にこれを使用し、そのモードの残りのキーマップの表示には&lsquo;<samp>\\{&hellip;}</samp>&rsquo;を使用する。
</p>
</li><li> 一貫性を保つために,関数のドキュメント文字列の最初のセンテンス内の動詞は、命令形で表すこと。たとえば&ldquo;Return the cons of A and
B.&rdquo;か、好みによっては&ldquo;Returns the cons of A and
B.&rdquo;を使用する。通常は、最初のパラグラフの残りの部分にたいして、同様に行っても見栄えがよい。各センテンスが叙実的で適切な主題をもつなら、後続のパラグラフの見栄えはよくなる。

</li><li> yes-or-no述語であるような関数のドキュメント文字列は、何が&ldquo;真&rdquo;を構成するか明示的に示すために、&ldquo;Return t
if&rdquo;のような単語で始まるべきである。単語&ldquo;return&rdquo;は、小文字の&ldquo;t&rdquo;で開始される、幾分紛らわしい可能性のあるセンテンスを避ける。

</li><li> ドキュメント文字列内の開カッコで始まる行は、以下のように開カッコの前にバックスラッシュを記述する:

<div class="example">
<pre class="example">The argument FOO can be either a number
\(a buffer position) or a string (a file name).
</pre></div>

<p>これはその開カッコがdefunの開始として扱われることを防ぐ(<a href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Defuns.html#Defuns">Defuns</a> in <cite>The GNU Emacs
Manual</cite>を参照)。
</p>
</li><li> ドキュメント文字列は受動態ではなく能動態、未来形ではなく現在形で記述すること。たとえば、&ldquo;A list containing A and B will
be returned.&rdquo;ではなく、&ldquo;Return a list containing A and B.&rdquo;と記述すること。

</li><li> 不必要な&ldquo;cause&rdquo;(および同等の単語)の使用を避けること。&ldquo;Cause Emacs to display text in
boldface&rdquo;ではなく、単に&ldquo;Display text in boldface&rdquo;と記述すること。

</li><li> 多くの人にとってなじみがなく、それをtypoと間違えるであろうから、&ldquo;iff&rdquo;(&ldquo;if and only
if&rdquo;を意味する数学用語)の使用を避けること。ほとんどの場合、その意味は単なる&ldquo;if&rdquo;で明快である。それ以外では、その意味を伝える代替えフレーズを探すよう試みること。

</li><li> 特定のモードや状況でのみコマンドに意味がある際には、ドキュメント文字列内でそれに言及すること。たとえば<code>dired-find-file</code>のドキュメントは:

<div class="example">
<pre class="example">In Dired, visit the file or directory named on this line.
</pre></div>

</li><li> ユーザーがセットしたいと望むかもしれないオプションを表す変数を定義する際には、<code>defcustom</code>を使用すること。<a href="Defining-Variables.html#Defining-Variables">Defining Variables</a>を参照されたい。

</li><li> yes-or-noフレアグであるような変数のドキュメント文字列は、すべての非<code>nil</code>値が等価であることを明確にし、<code>nil</code>と非<code>nil</code>が何を意味するかを明示的に示すために、&ldquo;Non-nil
means&rdquo;のような単語で始めること。
</li></ul>

<hr>
<div class="header">
<p>
Next: <a href="Comment-Tips.html#Comment-Tips" accesskey="n" rel="next">Comment Tips</a>, Previous: <a href="Warning-Tips.html#Warning-Tips" accesskey="p" rel="prev">Warning Tips</a>, Up: <a href="Tips.html#Tips" accesskey="u" rel="up">Tips</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
