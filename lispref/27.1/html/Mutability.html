<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 27.1.

Copyright (C) 1990-1996, 1998-2020 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Mutability (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Mutability (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Mutability (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Lisp-Data-Types.html" rel="up" title="Lisp Data Types">
<link href="Numbers.html" rel="next" title="Numbers">
<link href="Equality-Predicates.html" rel="prev" title="Equality Predicates">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="Mutability"></span><div class="header">
<p>
Previous: <a href="Equality-Predicates.html" accesskey="p" rel="prev">Equality Predicates</a>, Up: <a href="Lisp-Data-Types.html" accesskey="u" rel="up">Lisp Data Types</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Mutability-1"></span><h3 class="section">2.9 Mutability</h3>
<span id="index-mutable-objects"></span>

<p>Some Lisp objects should never change.  For example, the Lisp expression
<code>&quot;aaa&quot;</code> yields a string, but you should not change its contents.  And
some objects cannot be changed; for example, although you can create a new
number by calculating one, Lisp provides no operation to change the value of
an existing number.
</p>
<p>Other Lisp objects are <em>mutable</em>: it is safe to change their values via
destructive operations involving side effects.  For example, an existing
marker can be changed by moving the marker to point to somewhere else.
</p>
<p>Although numbers never change and all markers are mutable, some types have
members some of which are mutable and others not.  These types include
conses, vectors, and strings.  For example, although <code>&quot;cons&quot;</code> and
<code>(symbol-name 'cons)</code> both yield strings that should not be changed,
<code>(copy-sequence &quot;cons&quot;)</code> and <code>(make-string 3 ?a)</code> both yield
mutable strings that can be changed via later calls to <code>aset</code>.
</p>
<p>A mutable object stops being mutable if it is part of an expression that is
evaluated.  For example:
</p>
<div class="example">
<pre class="example">(let* ((x (list 0.5))
       (y (eval (list 'quote x))))
  (setcar x 1.5) ;; The program should not do this.
  y)
</pre></div>

<p>Although the list <code>(0.5)</code> was mutable when it was created, it should
not have been changed via <code>setcar</code> because it given to <code>eval</code>.
The reverse does not occur: an object that should not be changed never
becomes mutable afterwards.
</p>
<p>If a program attempts to change objects that should not be changed, the
resulting behavior is undefined: the Lisp interpreter might signal an error,
or it might crash or behave unpredictably in other ways.<a id="DOCF2" href="#FOOT2"><sup>2</sup></a>
</p>
<p>When similar constants occur as parts of a program, the Lisp interpreter
might save time or space by reusing existing constants or their components.
For example, <code>(eq &quot;abc&quot; &quot;abc&quot;)</code> returns <code>t</code> if the interpreter
creates only one instance of the string literal <code>&quot;abc&quot;</code>, and returns
<code>nil</code> if it creates two instances.  Lisp programs should be written so
that they work regardless of whether this optimization is in use.
</p><div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h5><a id="FOOT2" href="#DOCF2">(2)</a></h3>
<p>This is
the behavior specified for languages like Common Lisp and C for constants,
and this differs from languages like JavaScript and Python where an
interpreter is required to signal an error if a program attempts to change
an immutable object.  Ideally the Emacs Lisp interpreter will evolve in
latter direction.</p>
</div>
<hr>
<div class="header">
<p>
Previous: <a href="Equality-Predicates.html" accesskey="p" rel="prev">Equality Predicates</a>, Up: <a href="Lisp-Data-Types.html" accesskey="u" rel="up">Lisp Data Types</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
