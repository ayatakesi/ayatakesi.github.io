<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 27.1.

Copyright (C) 1990-1996, 1998-2020 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document under
the terms of the GNU Free Documentation License, Version 1.3 or any later
version published by the Free Software Foundation; with the Invariant
Sections being "GNU General Public License," with the Front-Cover Texts
being "A GNU Manual," and with the Back-Cover Texts as in (a) below.  A
copy of the license is included in the section entitled "GNU Free
Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and modify
this GNU manual.  Buying copies from the FSF supports it in developing GNU
and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>SVG Images (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="SVG Images (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="SVG Images (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Images.html" rel="up" title="Images">
<link href="Other-Image-Types.html" rel="next" title="Other Image Types">
<link href="ImageMagick-Images.html" rel="prev" title="ImageMagick Images">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<span id="SVG-Images"></span><div class="header">
<p>
Next: <a href="Other-Image-Types.html" accesskey="n" rel="next">Other Image Types</a>, Previous: <a href="ImageMagick-Images.html" accesskey="p" rel="prev">ImageMagick Images</a>, Up: <a href="Images.html" accesskey="u" rel="up">Images</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="SVGimezi"></span><h4 class="subsection">39.17.6 SVGイメージ</h4>
<span id="index-SVG-images"></span>

<p>SVG(Scalable Vector
Graphics)はイメージを指定するXMLフォーマットです。SVGサポートつきでEmacsがビルドされていれば、以下の<samp>svg.el</samp>ライブラリー由来の関数でこれらのイメージの作成や操作ができます。
</p>
<dl>
<dt id="index-svg_002dcreate">Function: <strong>svg-create</strong> <em>width height &amp;rest args</em></dt>
<dd><p>指定したサイズで新たにSVGイメージを作成する。<var>args</var>はplist引数であり、以下を指定できる:
</p>
<dl compact="compact">
<dt><code>:stroke-width</code></dt>
<dd><p>作成するすべてのラインのデフォルト幅(ピクセル単位)。
</p>
</dd>
<dt><code>:stroke</code></dt>
<dd><p>作成するすべてのラインのデフォルトのストロークカラー。
</p></dd>
</dl>

<span id="index-SVG-object"></span>
<p>この関数は<em>SVGオブジェクト</em>
(SVGイメージを指定するLispデータ構造)をリターンする。以下の関数はすべてこのブジェクトにたいして機能する。以下の関数の引数<var>svg</var>はこのようなSVGオブジェクトを指定する。
</p></dd></dl>

<dl>
<dt id="index-svg_002dgradient">Function: <strong>svg-gradient</strong> <em>svg id type stops</em></dt>
<dd><p><var>svg</var>に識別子<var>id</var>でグラデーションを作成する。<var>type</var>はグラデーションタイプで<code>linear</code>か<code>radial</code>のいずれかを指定する。<var>stops</var>はパーセント割合/カラーのペアからなるリスト。
</p>
<p>以下は最初の赤から25%の緑、最後は青に至る線形グラデーションを作成する:
</p>
<div class="lisp">
<pre class="lisp">(svg-gradient svg &quot;gradient1&quot; 'linear
              '((0 . &quot;red&quot;) (25 . &quot;green&quot;) (100 . &quot;blue&quot;)))
</pre></div>

<p>作成(およびSVGオブジェクトに挿入)されたグラデーションは、後でシェイプを作成するすべての関数で使用できる。
</p></dd></dl>

<p>以下の関数はすべてさまざまな属性のデフォルト値を変更するオプションのキーワードパラメーターを受け取ります。有効な属性には以下が含まれます:
</p>
<dl compact="compact">
<dt><code>:stroke-width</code></dt>
<dd><p>ラインとソリッドシェイプ枠線の描画幅(ピクセル単位)。
</p>
</dd>
<dt><code>:stroke-color</code></dt>
<dd><p>ラインとソリッドシェイプ枠線の描画カラー。
</p>
</dd>
<dt><code>:fill-color</code></dt>
<dd><p>ラインとソリッドシェイプに使用するカラー。
</p>
</dd>
<dt><code>:id</code></dt>
<dd><p>シェイプの識別子。
</p>
</dd>
<dt><code>:gradient</code></dt>
<dd><p>与えられた場合には以前に定義されたグラデーションオブジェクトの識別子であること。
</p>
</dd>
<dt><code>:clip-path</code></dt>
<dd><p>Identifier of a clip path.
</p></dd>
</dl>

<dl>
<dt id="index-svg_002drectangle">Function: <strong>svg-rectangle</strong> <em>svg x y width height &amp;rest args</em></dt>
<dd><p>左上隅が位置<var>x</var>/<var>y</var>、サイズが<var>width</var>/<var>height</var>の矩形を<var>svg</var>に追加する。
</p>
<div class="lisp">
<pre class="lisp">(svg-rectangle svg 100 100 500 500 :gradient &quot;gradient1&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dcircle">Function: <strong>svg-circle</strong> <em>svg x y radius &amp;rest args</em></dt>
<dd><p>中央が位置<var>x</var>/<var>y</var>、半径が<var>radius</var>の円を<var>svg</var>に追加する。
</p></dd></dl>

<dl>
<dt id="index-svg_002dellipse">Function: <strong>svg-ellipse</strong> <em>svg x y x-radius y-radius &amp;rest args</em></dt>
<dd><p>中央が位置<var>x</var>/<var>y</var>、水平半径が<var>x-radius</var>、垂直半径が<var>y-radius</var>の楕円を<var>svg</var>に追加する。
</p></dd></dl>

<dl>
<dt id="index-svg_002dline">Function: <strong>svg-line</strong> <em>svg x1 y1 x2 y2 &amp;rest args</em></dt>
<dd><p>始点が<var>x1</var>/<var>y1</var>、終点が<var>x2</var>/<var>y2</var>の線を<var>svg</var>に追加する。
</p></dd></dl>

<dl>
<dt id="index-svg_002dpolyline">Function: <strong>svg-polyline</strong> <em>svg points &amp;rest args</em></dt>
<dd><p><var>points</var>
(XとYの位置ペアのリスト)を通過する複数セグメントラライン、いわゆる&ldquo;ポリゴン(polyline)&rdquo;を<var>svg</var>に追加する。
</p>
<div class="lisp">
<pre class="lisp">(svg-polyline svg '((200 . 100) (500 . 450) (80 . 100))
              :stroke-color &quot;green&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dpolygon">Function: <strong>svg-polygon</strong> <em>svg points &amp;rest args</em></dt>
<dd><p>ポリゴン外周の位置XとYのペアからなるリストであるような<var>points</var>により記述されるポリゴンを<var>svg</var>に追加する。
</p>
<div class="lisp">
<pre class="lisp">(svg-polygon svg '((100 . 100) (200 . 150) (150 . 90))
             :stroke-color &quot;blue&quot; :fill-color &quot;red&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dpath">Function: <strong>svg-path</strong> <em>svg commands &amp;rest args</em></dt>
<dd><p>Add the outline of a shape to <var>svg</var> according to <var>commands</var>, see
<a href="#SVG-Path-Commands">SVG Path Commands</a>.
</p>
<p>Coordinates by default are absolute.  To use coordinates relative to the
last position, or &ndash; initially &ndash; to the origin, set the attribute
<var>:relative</var> to <code>t</code>.  This attribute can be specified for the
function or for individual commands.  If specified for the function, then
all commands use relative coordinates by default.  To make an individual
command use absolute coordinates, set <var>:relative</var> to <code>nil</code>.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg
	  '((moveto ((100 . 100)))
	    (lineto ((200 . 0) (0 . 200) (-200 . 0)))
	    (lineto ((100 . 100)) :relative nil))
	  :stroke-color &quot;blue&quot;
	  :fill-color &quot;lightblue&quot;
	  :relative t)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dtext">Function: <strong>svg-text</strong> <em>svg text &amp;rest args</em></dt>
<dd><p>指定した<var>text</var>を<var>svg</var>に追加する。
</p>
<div class="lisp">
<pre class="lisp">(svg-text
 svg &quot;This is a text&quot;
 :font-size &quot;40&quot;
 :font-weight &quot;bold&quot;
 :stroke &quot;black&quot;
 :fill &quot;white&quot;
 :font-family &quot;impact&quot;
 :letter-spacing &quot;4pt&quot;
 :x 300
 :y 400
 :stroke-width 1)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dembed">Function: <strong>svg-embed</strong> <em>svg image image-type datap &amp;rest args</em></dt>
<dd><p>埋め込みの(ラスター)イメージを<var>svg</var>に追加する。<var>datap</var>が<code>nil</code>なら<var>image</var>はファイル名、それ以外なら<var>image</var>はイメージデータをrawバイトとして含む文字列であること。<var>image-type</var>は<code>&quot;image/jpeg&quot;</code>のような<acronym>MIME</acronym>イメージタイプであること。
</p>
<div class="lisp">
<pre class="lisp">(svg-embed svg &quot;~/rms.jpg&quot; &quot;image/jpeg&quot; nil
           :width &quot;100px&quot; :height &quot;100px&quot;
           :x &quot;50px&quot; :y &quot;75px&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dclip_002dpath">Function: <strong>svg-clip-path</strong> <em>svg &amp;rest args</em></dt>
<dd><p>Add a clipping path to <var>svg</var>.  If applied to a shape via the
<var>:clip-path</var> property, parts of that shape which lie outside of the
clipping path are not drawn.
</p>
<div class="lisp">
<pre class="lisp">(let ((clip-path (svg-clip-path svg :id &quot;foo&quot;)))
  (svg-circle clip-path 200 200 175))
(svg-rectangle svg 50 50 300 300
               :fill-color &quot;red&quot;
               :clip-path &quot;url(#foo)&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dnode">Function: <strong>svg-node</strong> <em>svg tag &amp;rest args</em></dt>
<dd><p>Add the custom node <var>tag</var> to <var>svg</var>.
</p>
<div class="lisp">
<pre class="lisp">(svg-node svg
          'rect
          :width 300 :height 200 :x 50 :y 100 :fill-color &quot;green&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-svg_002dremove">Function: <strong>svg-remove</strong> <em>svg id</em></dt>
<dd><p><code>svg</code>から識別子<code>id</code>の要素を取り除く。
</p></dd></dl>

<dl>
<dt id="index-svg_002dimage">Function: <strong>svg-image</strong> <em>svg</em></dt>
<dd><p>最後に<code>svg-image</code>は引数としてSVGを受け取り、<code>insert-image</code>のような関数での使用に適したイメージオブジェクトをリターンする。
</p></dd></dl>

<p>以下は円のイメージを作成して挿入する完全な例です:
</p>
<div class="lisp">
<pre class="lisp">(let ((svg (svg-create 400 400 :stroke-width 10)))
  (svg-gradient svg &quot;gradient1&quot; 'linear '((0 . &quot;red&quot;) (100 . &quot;blue&quot;)))
  (svg-circle svg 200 200 100 :gradient &quot;gradient1&quot;
                  :stroke-color &quot;green&quot;)
  (insert-image (svg-image svg)))
</pre></div>


<span id="SVG-Path-Commands-1"></span><h4 class="subsubheading">SVG Path Commands</h4>

<span id="index-svg-path-commands"></span>
<span id="SVG-Path-Commands"></span><p><em>SVG paths</em> allow creation of complex images by combining lines, curves,
arcs, and other basic shapes.  The functions described below allow invoking
SVG path commands from a Lisp program.
</p>
<dl>
<dt id="index-moveto">Command: <strong>moveto</strong> <em>points</em></dt>
<dd><p>Move the pen to the first point in <var>points</var>.  Additional points are
connected with lines.  <var>points</var> is a list of X/Y coordinate pairs.
Subsequent <code>moveto</code> commands represent the start of a new
<em>subpath</em>.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((200 . 100) (100 . 200) (0 . 100))))
          :fill &quot;white&quot; :stroke &quot;black&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-closepath">Command: <strong>closepath</strong></dt>
<dd><p>End the current subpath by connecting it back to its initial point.  A line
is drawn along the connection.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((200 . 100) (100 . 200) (0 . 100)))
                (closepath)
                (moveto ((75 . 125) (100 . 150) (125 . 125)))
                (closepath))
          :fill &quot;red&quot; :stroke &quot;black&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-lineto">Command: <strong>lineto</strong> <em>points</em></dt>
<dd><p>Draw a line from the current point to the first element in <var>points</var>, a
list of X/Y position pairs.  If more than one point is specified, draw a
polyline.
</p><div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((200 . 100)))
                (lineto ((100 . 200) (0 . 100))))
          :fill &quot;yellow&quot; :stroke &quot;red&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-horizontal_002dlineto">Command: <strong>horizontal-lineto</strong> <em>x-coordinates</em></dt>
<dd><p>Draw a horizontal line from the current point to the first element in
<var>x-coordinates</var>.  Specifying multiple coordinates is possible, although
usually this doesn’t make sense.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((100 . 200)))
                (horizontal-lineto (300)))
          :stroke &quot;green&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-vertical_002dlineto">Command: <strong>vertical-lineto</strong> <em>y-coordinates</em></dt>
<dd><p>Draw vertical lines.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((200 . 100)))
                (vertical-lineto (300)))
          :stroke &quot;green&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-curveto">Command: <strong>curveto</strong> <em>coordinate-sets</em></dt>
<dd><p>Using the first element in <var>coordinate-sets</var>, draw a cubic Bézier curve
from the current point.  If there are multiple coordinate sets, draw a
polybezier.  Each coordinate set is a list of the form <code>(<var>x1</var>
<var>y1</var> <var>x2</var> <var>y2</var> <var>x</var> <var>y</var>)</code>, where (<var>x</var>,&nbsp;<var>y</var>)<!-- /@w -->
is the curve’s end point.  (<var>x1</var>,&nbsp;<var>y1</var>)<!-- /@w --> and (<var>x2</var>,&nbsp;<var>y2</var>)<!-- /@w --> are control points at the beginning and at the end, respectively.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((100 . 100)))
                (curveto ((200 100 100 200 200 200)
                          (300 200 0 100 100 100))))
          :fill &quot;transparent&quot; :stroke &quot;red&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-smooth_002dcurveto">Command: <strong>smooth-curveto</strong> <em>coordinate-sets</em></dt>
<dd><p>Using the first element in <var>coordinate-sets</var>, draw a cubic Bézier curve
from the current point.  If there are multiple coordinate sets, draw a
polybezier.  Each coordinate set is a list of the form <code>(<var>x2</var>
<var>y2</var> <var>x</var> <var>y</var>)</code>, where (<var>x</var>,&nbsp;<var>y</var>)<!-- /@w --> is the curve’s end
point and (<var>x2</var>,&nbsp;<var>y2</var>)<!-- /@w --> is the corresponding control point.  The
first control point is the reflection of the second control point of the
previous command relative to the current point, if that command was
<code>curveto</code> or <code>smooth-curveto</code>.  Otherwise the first control
point coincides with the current point.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((100 . 100)))
                (curveto ((200 100 100 200 200 200)))
                (smooth-curveto ((0 100 100 100))))
          :fill &quot;transparent&quot; :stroke &quot;blue&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-quadratic_002dbezier_002dcurveto">Command: <strong>quadratic-bezier-curveto</strong> <em>coordinate-sets</em></dt>
<dd><p>Using the first element in <var>coordinate-sets</var>, draw a quadratic Bézier
curve from the current point.  If there are multiple coordinate sets, draw a
polybezier.  Each coordinate set is a list of the form <code>(<var>x1</var>
<var>y1</var> <var>x</var> <var>y</var>)</code>, where (<var>x</var>,&nbsp;<var>y</var>)<!-- /@w --> is the curve’s end
point and (<var>x1</var>,&nbsp;<var>y1</var>)<!-- /@w --> is the control point.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((200 . 100)))
                (quadratic-bezier-curveto ((300 100 300 200)))
                (quadratic-bezier-curveto ((300 300 200 300)))
                (quadratic-bezier-curveto ((100 300 100 200)))
                (quadratic-bezier-curveto ((100 100 200 100))))
          :fill &quot;transparent&quot; :stroke &quot;pink&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-smooth_002dquadratic_002dbezier_002dcurveto">Command: <strong>smooth-quadratic-bezier-curveto</strong> <em>coordinate-sets</em></dt>
<dd><p>Using the first element in <var>coordinate-sets</var>, draw a quadratic Bézier
curve from the current point.  If there are multiple coordinate sets, draw a
polybezier.  Each coordinate set is a list of the form <code>(<var>x</var>
<var>y</var>)</code>, where (<var>x</var>,&nbsp;<var>y</var>)<!-- /@w --> is the curve’s end point.  The
control point is the reflection of the control point of the previous command
relative to the current point, if that command was
<code>quadratic-bezier-curveto</code> or
<code>smooth-quadratic-bezier-curveto</code>.  Otherwise the control point
coincides with the current point.
</p>
<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((200 . 100)))
                (quadratic-bezier-curveto ((300 100 300 200)))
                (smooth-quadratic-bezier-curveto ((200 300)))
                (smooth-quadratic-bezier-curveto ((100 200)))
                (smooth-quadratic-bezier-curveto ((200 100))))
          :fill &quot;transparent&quot; :stroke &quot;lightblue&quot;)
</pre></div>
</dd></dl>

<dl>
<dt id="index-elliptical_002darc">Command: <strong>elliptical-arc</strong> <em>coordinate-sets</em></dt>
<dd><p>Using the first element in <var>coordinate-sets</var>, draw an elliptical arc
from the current point.  If there are multiple coordinate sets, draw a
sequence of elliptical arcs.  Each coordinate set is a list of the form
<code>(<var>rx</var> <var>ry</var> <var>x</var> <var>y</var>)</code>, where (<var>x</var>,&nbsp;<var>y</var>)<!-- /@w --> is
the end point of the ellipse, and (<var>rx</var>,&nbsp;<var>ry</var>)<!-- /@w --> are its radii.
Attributes may be appended to the list:
</p>
<dl compact="compact">
<dt><code>:x-axis-rotation</code></dt>
<dd><p>The angle in degrees by which the x-axis of the ellipse is rotated relative
to the x-axis of the current coordinate system.
</p>
</dd>
<dt><code>:large-arc</code></dt>
<dd><p>If set to <code>t</code>, draw an arc sweep greater than or equal to 180 degrees.
Otherwise, draw an arc sweep smaller than or equal to 180 degrees.
</p>
</dd>
<dt><code>:sweep</code></dt>
<dd><p>If set to <code>t</code>, draw an arc in <em>positive angle direction</em>.
Otherwise, draw it in <em>negative angle direction</em>.
</p></dd>
</dl>

<div class="lisp">
<pre class="lisp">(svg-path svg '((moveto ((200 . 250)))
                (elliptical-arc ((75 75 200 350))))
          :fill &quot;transparent&quot; :stroke &quot;red&quot;)
(svg-path svg '((moveto ((200 . 250)))
                (elliptical-arc ((75 75 200 350 :large-arc t))))
          :fill &quot;transparent&quot; :stroke &quot;green&quot;)
(svg-path svg '((moveto ((200 . 250)))
                (elliptical-arc ((75 75 200 350 :sweep t))))
          :fill &quot;transparent&quot; :stroke &quot;blue&quot;)
(svg-path svg '((moveto ((200 . 250)))
                (elliptical-arc ((75 75 200 350 :large-arc t
                                     :sweep t))))
          :fill &quot;transparent&quot; :stroke &quot;gray&quot;)
(svg-path svg '((moveto ((160 . 100)))
                (elliptical-arc ((40 100 80 0)))
                (elliptical-arc ((40 100 -40 -70
                                     :x-axis-rotation -120)))
                (elliptical-arc ((40 100 -40 70
                                     :x-axis-rotation -240))))
          :stroke &quot;pink&quot; :fill &quot;lightblue&quot;
          :relative t)
</pre></div>
</dd></dl>


<hr>
<div class="header">
<p>
Next: <a href="Other-Image-Types.html" accesskey="n" rel="next">Other Image Types</a>, Previous: <a href="ImageMagick-Images.html" accesskey="p" rel="prev">ImageMagick Images</a>, Up: <a href="Images.html" accesskey="u" rel="up">Images</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
